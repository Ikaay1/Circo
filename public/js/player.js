/* eslint-disable react/display-name */
/* eslint-disable no-undef */
/**
 * @license
 * Video.js 7.18.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define(t)
    : ((e = "undefined" != typeof globalThis ? globalThis : e || self).videojs =
        t());
})(this, function () {
  "use strict";
  for (
    var e,
      u = "7.18.1",
      i = {},
      a = function (e, t) {
        return (i[e] = i[e] || []), t && (i[e] = i[e].concat(t)), i[e];
      },
      n = function (e, t) {
        t = a(e).indexOf(t);
        return !(t <= -1) && ((i[e] = i[e].slice()), i[e].splice(t, 1), !0);
      },
      l = { prefixed: !0 },
      t = [
        [
          "requestFullscreen",
          "exitFullscreen",
          "fullscreenElement",
          "fullscreenEnabled",
          "fullscreenchange",
          "fullscreenerror",
          "fullscreen",
        ],
        [
          "webkitRequestFullscreen",
          "webkitExitFullscreen",
          "webkitFullscreenElement",
          "webkitFullscreenEnabled",
          "webkitfullscreenchange",
          "webkitfullscreenerror",
          "-webkit-full-screen",
        ],
        [
          "mozRequestFullScreen",
          "mozCancelFullScreen",
          "mozFullScreenElement",
          "mozFullScreenEnabled",
          "mozfullscreenchange",
          "mozfullscreenerror",
          "-moz-full-screen",
        ],
        [
          "msRequestFullscreen",
          "msExitFullscreen",
          "msFullscreenElement",
          "msFullscreenEnabled",
          "MSFullscreenChange",
          "MSFullscreenError",
          "-ms-fullscreen",
        ],
      ],
      r = t[0],
      s = 0;
    s < t.length;
    s++
  )
    if (t[s][1] in document) {
      e = t[s];
      break;
    }
  if (e) {
    for (var o = 0; o < e.length; o++) l[r[o]] = e[o];
    l.prefixed = e[0] !== r[0];
  }
  var c = [],
    d = function (a, s) {
      return function (e, t, i) {
        var n,
          r = s.levels[t],
          t = new RegExp("^(" + r + ")$");
        "log" !== e && i.unshift(e.toUpperCase() + ":"),
          i.unshift(a + ":"),
          c &&
            (c.push([].concat(i)),
            (n = c.length - 1e3),
            c.splice(0, 0 < n ? n : 0)),
          !window.console ||
            ((n =
              !(n = window.console[e]) && "debug" === e
                ? window.console.info || window.console.log
                : n) &&
              r &&
              t.test(e) &&
              n[Array.isArray(i) ? "apply" : "call"](window.console, i));
      };
    };
  var h = (function t(i) {
      function n() {
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        a("log", r, t);
      }
      var r = "info",
        a = d(i, n);
      return (
        (n.createLogger = function (e) {
          return t(i + ": " + e);
        }),
        (n.levels = {
          all: "debug|log|warn|error",
          off: "",
          debug: "debug|log|warn|error",
          info: "log|warn|error",
          warn: "warn|error",
          error: "error",
          DEFAULT: r,
        }),
        (n.level = function (e) {
          if ("string" == typeof e) {
            if (!n.levels.hasOwnProperty(e))
              throw new Error('"' + e + '" in not a valid log level');
            r = e;
          }
          return r;
        }),
        ((n.history = function () {
          return c ? [].concat(c) : [];
        }).filter = function (t) {
          return (c || []).filter(function (e) {
            return new RegExp(".*" + t + ".*").test(e[0]);
          });
        }),
        (n.history.clear = function () {
          c && (c.length = 0);
        }),
        (n.history.disable = function () {
          null !== c && ((c.length = 0), (c = null));
        }),
        (n.history.enable = function () {
          null === c && (c = []);
        }),
        (n.error = function () {
          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
            t[i] = arguments[i];
          return a("error", r, t);
        }),
        (n.warn = function () {
          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
            t[i] = arguments[i];
          return a("warn", r, t);
        }),
        (n.debug = function () {
          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
            t[i] = arguments[i];
          return a("debug", r, t);
        }),
        n
      );
    })("VIDEOJS"),
    p = h.createLogger,
    f =
      "undefined" != typeof globalThis
        ? globalThis
        : "undefined" != typeof window
        ? window
        : "undefined" != typeof global
        ? global
        : "undefined" != typeof self
        ? self
        : {};
  function m(e, t) {
    return e((t = { exports: {} }), t.exports), t.exports;
  }
  var g = m(function (e) {
      function t() {
        return (
          (e.exports = t =
            Object.assign ||
            function (e) {
              for (var t = 1; t < arguments.length; t++) {
                var i,
                  n = arguments[t];
                for (i in n)
                  Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);
              }
              return e;
            }),
          t.apply(this, arguments)
        );
      }
      e.exports = t;
    }),
    y = Object.prototype.toString,
    v = function (e) {
      return T(e) ? Object.keys(e) : [];
    };
  function _(t, i) {
    v(t).forEach(function (e) {
      return i(t[e], e);
    });
  }
  function b(i) {
    for (
      var e = arguments.length, t = new Array(1 < e ? e - 1 : 0), n = 1;
      n < e;
      n++
    )
      t[n - 1] = arguments[n];
    return Object.assign
      ? g.apply(void 0, [i].concat(t))
      : (t.forEach(function (e) {
          e &&
            _(e, function (e, t) {
              i[t] = e;
            });
        }),
        i);
  }
  function T(e) {
    return !!e && "object" == typeof e;
  }
  function S(e) {
    return T(e) && "[object Object]" === y.call(e) && e.constructor === Object;
  }
  function w(e, t) {
    if (!e || !t) return "";
    if ("function" != typeof window.getComputedStyle) return "";
    var i;
    try {
      i = window.getComputedStyle(e);
    } catch (e) {
      return "";
    }
    return i ? i.getPropertyValue(t) || i[t] : "";
  }
  var E = (window.navigator && window.navigator.userAgent) || "",
    k = /AppleWebKit\/([\d.]+)/i.exec(E),
    C = k ? parseFloat(k.pop()) : null,
    I = /iPod/i.test(E),
    x = (jt = E.match(/OS (\d+)_/i)) && jt[1] ? jt[1] : null,
    A = /Android/i.test(E),
    P = (function () {
      var e = E.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
      if (!e) return null;
      var t = e[1] && parseFloat(e[1]),
        i = e[2] && parseFloat(e[2]);
      return t && i ? parseFloat(e[1] + "." + e[2]) : t || null;
    })(),
    L = A && P < 5 && C < 537,
    D = /Firefox/i.test(E),
    O = /Edg/i.test(E),
    R = !O && (/Chrome/i.test(E) || /CriOS/i.test(E)),
    M =
      (zt = E.match(/(Chrome|CriOS)\/(\d+)/)) && zt[2]
        ? parseFloat(zt[2])
        : null,
    N = (Xt =
      !(Xt = (Xt = /MSIE\s(\d+)\.\d/.exec(E)) && parseFloat(Xt[1])) &&
      /Trident\/7.0/i.test(E) &&
      /rv:11.0/.test(E)
        ? 11
        : Xt),
    U = /Safari/i.test(E) && !R && !A && !O,
    B = /Windows/i.test(E),
    F = Boolean(
      X() &&
        ("ontouchstart" in window ||
          window.navigator.maxTouchPoints ||
          (window.DocumentTouch &&
            window.document instanceof window.DocumentTouch))
    ),
    j = /iPad/i.test(E) || (U && F && !/iPhone/i.test(E)),
    H = /iPhone/i.test(E) && !j,
    q = H || j || I,
    V = (U || q) && !R,
    W = Object.freeze({
      __proto__: null,
      IS_IPOD: I,
      IOS_VERSION: x,
      IS_ANDROID: A,
      ANDROID_VERSION: P,
      IS_NATIVE_ANDROID: L,
      IS_FIREFOX: D,
      IS_EDGE: O,
      IS_CHROME: R,
      CHROME_VERSION: M,
      IE_VERSION: N,
      IS_SAFARI: U,
      IS_WINDOWS: B,
      TOUCH_ENABLED: F,
      IS_IPAD: j,
      IS_IPHONE: H,
      IS_IOS: q,
      IS_ANY_SAFARI: V,
    });
  function G(e) {
    return "string" == typeof e && Boolean(e.trim());
  }
  function z(e) {
    if (0 <= e.indexOf(" "))
      throw new Error("class has illegal whitespace characters");
  }
  function X() {
    return document === window.document;
  }
  function K(e) {
    return T(e) && 1 === e.nodeType;
  }
  function Y() {
    try {
      return window.parent !== window.self;
    } catch (e) {
      return !0;
    }
  }
  function Q(i) {
    return function (e, t) {
      if (!G(e)) return document[i](null);
      t = K((t = G(t) ? document.querySelector(t) : t)) ? t : document;
      return t[i] && t[i](e);
    };
  }
  function $(e, i, t, n) {
    void 0 === e && (e = "div"),
      void 0 === i && (i = {}),
      void 0 === t && (t = {});
    var r = document.createElement(e);
    return (
      Object.getOwnPropertyNames(i).forEach(function (e) {
        var t = i[e];
        -1 !== e.indexOf("aria-") || "role" === e || "type" === e
          ? (h.warn(
              "Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set " +
                e +
                " to " +
                t +
                "."
            ),
            r.setAttribute(e, t))
          : "textContent" === e
          ? J(r, t)
          : (r[e] === t && "tabIndex" !== e) || (r[e] = t);
      }),
      Object.getOwnPropertyNames(t).forEach(function (e) {
        r.setAttribute(e, t[e]);
      }),
      n && ye(r, n),
      r
    );
  }
  function J(e, t) {
    return (
      "undefined" == typeof e.textContent
        ? (e.innerText = t)
        : (e.textContent = t),
      e
    );
  }
  function Z(e, t) {
    t.firstChild ? t.insertBefore(e, t.firstChild) : t.appendChild(e);
  }
  function ee(e, t) {
    return (
      z(t),
      e.classList
        ? e.classList.contains(t)
        : new RegExp("(^|\\s)" + t + "($|\\s)").test(e.className)
    );
  }
  function te(e, t) {
    return (
      e.classList
        ? e.classList.add(t)
        : ee(e, t) || (e.className = (e.className + " " + t).trim()),
      e
    );
  }
  function ie(e, t) {
    return e
      ? (e.classList
          ? e.classList.remove(t)
          : (z(t),
            (e.className = e.className
              .split(/\s+/)
              .filter(function (e) {
                return e !== t;
              })
              .join(" "))),
        e)
      : (h.warn("removeClass was called with an element that doesn't exist"),
        null);
  }
  function ne(e, t, i) {
    var n = ee(e, t);
    if (
      (i =
        "boolean" != typeof (i = "function" == typeof i ? i(e, t) : i)
          ? !n
          : i) !== n
    )
      return (i ? te : ie)(e, t), e;
  }
  function re(i, n) {
    Object.getOwnPropertyNames(n).forEach(function (e) {
      var t = n[e];
      null === t || "undefined" == typeof t || !1 === t
        ? i.removeAttribute(e)
        : i.setAttribute(e, !0 === t ? "" : t);
    });
  }
  function ae(e) {
    var t = {},
      i = ",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";
    if (e && e.attributes && 0 < e.attributes.length)
      for (var n = e.attributes, r = n.length - 1; 0 <= r; r--) {
        var a = n[r].name,
          s = n[r].value;
        ("boolean" != typeof e[a] && -1 === i.indexOf("," + a + ",")) ||
          (s = null !== s),
          (t[a] = s);
      }
    return t;
  }
  function se(e, t) {
    return e.getAttribute(t);
  }
  function oe(e, t, i) {
    e.setAttribute(t, i);
  }
  function ue(e, t) {
    e.removeAttribute(t);
  }
  function le() {
    document.body.focus(),
      (document.onselectstart = function () {
        return !1;
      });
  }
  function ce() {
    document.onselectstart = function () {
      return !0;
    };
  }
  function de(e) {
    if (e && e.getBoundingClientRect && e.parentNode) {
      var t = e.getBoundingClientRect(),
        i = {};
      return (
        ["bottom", "height", "left", "right", "top", "width"].forEach(function (
          e
        ) {
          void 0 !== t[e] && (i[e] = t[e]);
        }),
        i.height || (i.height = parseFloat(w(e, "height"))),
        i.width || (i.width = parseFloat(w(e, "width"))),
        i
      );
    }
  }
  function he(e) {
    if (!e || (e && !e.offsetParent))
      return { left: 0, top: 0, width: 0, height: 0 };
    for (
      var t = e.offsetWidth, i = e.offsetHeight, n = 0, r = 0;
      e.offsetParent && e !== document[l.fullscreenElement];

    )
      (n += e.offsetLeft), (r += e.offsetTop), (e = e.offsetParent);
    return { left: n, top: r, width: t, height: i };
  }
  function pe(e, t) {
    var i = { x: 0, y: 0 };
    if (q)
      for (var n = e; n && "html" !== n.nodeName.toLowerCase(); ) {
        var r,
          a = w(n, "transform");
        /^matrix/.test(a)
          ? ((r = a.slice(7, -1).split(/,\s/).map(Number)),
            (i.x += r[4]),
            (i.y += r[5]))
          : /^matrix3d/.test(a) &&
            ((a = a.slice(9, -1).split(/,\s/).map(Number)),
            (i.x += a[12]),
            (i.y += a[13])),
          (n = n.parentNode);
      }
    var s = {},
      o = he(t.target),
      u = he(e),
      l = u.width,
      c = u.height,
      e = t.offsetY - (u.top - o.top),
      o = t.offsetX - (u.left - o.left);
    return (
      t.changedTouches &&
        ((o = t.changedTouches[0].pageX - u.left),
        (e = t.changedTouches[0].pageY + u.top),
        q && ((o -= i.x), (e -= i.y))),
      (s.y = 1 - Math.max(0, Math.min(1, e / c))),
      (s.x = Math.max(0, Math.min(1, o / l))),
      s
    );
  }
  function fe(e) {
    return T(e) && 3 === e.nodeType;
  }
  function me(e) {
    for (; e.firstChild; ) e.removeChild(e.firstChild);
    return e;
  }
  function ge(e) {
    return (
      "function" == typeof e && (e = e()),
      (Array.isArray(e) ? e : [e])
        .map(function (e) {
          return K((e = "function" == typeof e ? e() : e)) || fe(e)
            ? e
            : "string" == typeof e && /\S/.test(e)
            ? document.createTextNode(e)
            : void 0;
        })
        .filter(function (e) {
          return e;
        })
    );
  }
  function ye(t, e) {
    return (
      ge(e).forEach(function (e) {
        return t.appendChild(e);
      }),
      t
    );
  }
  function ve(e, t) {
    return ye(me(e), t);
  }
  function _e(e) {
    return (
      (void 0 === e.button && void 0 === e.buttons) ||
      (0 === e.button && void 0 === e.buttons) ||
      ("mouseup" === e.type && 0 === e.button && 0 === e.buttons) ||
      (0 === e.button && 1 === e.buttons)
    );
  }
  var be,
    Te = Q("querySelector"),
    Se = Q("querySelectorAll"),
    we = Object.freeze({
      __proto__: null,
      isReal: X,
      isEl: K,
      isInFrame: Y,
      createEl: $,
      textContent: J,
      prependTo: Z,
      hasClass: ee,
      addClass: te,
      removeClass: ie,
      toggleClass: ne,
      setAttributes: re,
      getAttributes: ae,
      getAttribute: se,
      setAttribute: oe,
      removeAttribute: ue,
      blockTextSelection: le,
      unblockTextSelection: ce,
      getBoundingClientRect: de,
      findPosition: he,
      getPointerPosition: pe,
      isTextNode: fe,
      emptyEl: me,
      normalizeContent: ge,
      appendContent: ye,
      insertContent: ve,
      isSingleLeftClick: _e,
      $: Te,
      $$: Se,
    }),
    Ee = !1,
    ke = function () {
      if (!1 !== be.options.autoSetup) {
        var e = Array.prototype.slice.call(
            document.getElementsByTagName("video")
          ),
          t = Array.prototype.slice.call(
            document.getElementsByTagName("audio")
          ),
          i = Array.prototype.slice.call(
            document.getElementsByTagName("video-js")
          ),
          n = e.concat(t, i);
        if (n && 0 < n.length)
          for (var r = 0, a = n.length; r < a; r++) {
            var s = n[r];
            if (!s || !s.getAttribute) {
              Ce(1);
              break;
            }
            void 0 === s.player &&
              null !== s.getAttribute("data-setup") &&
              be(s);
          }
        else Ee || Ce(1);
      }
    };
  function Ce(e, t) {
    X() && (t && (be = t), window.setTimeout(ke, e));
  }
  function Ie() {
    (Ee = !0), window.removeEventListener("load", Ie);
  }
  X() &&
    ("complete" === document.readyState
      ? Ie()
      : window.addEventListener("load", Ie));
  function xe(e) {
    var t = document.createElement("style");
    return (t.className = e), t;
  }
  function Ae(e, t) {
    e.styleSheet ? (e.styleSheet.cssText = t) : (e.textContent = t);
  }
  var Pe = 3;
  window.WeakMap ||
    (ui = (function () {
      function e() {
        (this.vdata =
          "vdata" +
          Math.floor(
            (window.performance && window.performance.now()) || Date.now()
          )),
          (this.data = {});
      }
      var t = e.prototype;
      return (
        (t.set = function (e, t) {
          var i = e[this.vdata] || Pe++;
          return e[this.vdata] || (e[this.vdata] = i), (this.data[i] = t), this;
        }),
        (t.get = function (e) {
          var t = e[this.vdata];
          if (t) return this.data[t];
          h("We have no data for this element", e);
        }),
        (t.has = function (e) {
          return e[this.vdata] in this.data;
        }),
        (t.delete = function (e) {
          var t = e[this.vdata];
          t && (delete this.data[t], delete e[this.vdata]);
        }),
        e
      );
    })());
  var Le,
    De = new (window.WeakMap ? WeakMap : ui)();
  function Oe(e, t) {
    var i;
    De.has(e) &&
      (0 === (i = De.get(e)).handlers[t].length &&
        (delete i.handlers[t],
        e.removeEventListener
          ? e.removeEventListener(t, i.dispatcher, !1)
          : e.detachEvent && e.detachEvent("on" + t, i.dispatcher)),
      Object.getOwnPropertyNames(i.handlers).length <= 0 &&
        (delete i.handlers, delete i.dispatcher, delete i.disabled),
      0 === Object.getOwnPropertyNames(i).length && De.delete(e));
  }
  function Re(t, i, e, n) {
    e.forEach(function (e) {
      t(i, e, n);
    });
  }
  function Me(e) {
    if (e.fixed_) return e;
    function t() {
      return !0;
    }
    function i() {
      return !1;
    }
    if (!e || !e.isPropagationStopped || !e.isImmediatePropagationStopped) {
      var n,
        r,
        a,
        s = e || window.event;
      for (n in ((e = {}), s))
        "layerX" !== n &&
          "layerY" !== n &&
          "keyLocation" !== n &&
          "webkitMovementX" !== n &&
          "webkitMovementY" !== n &&
          (("returnValue" === n && s.preventDefault) || (e[n] = s[n]));
      e.target || (e.target = e.srcElement || document),
        e.relatedTarget ||
          (e.relatedTarget =
            e.fromElement === e.target ? e.toElement : e.fromElement),
        (e.preventDefault = function () {
          s.preventDefault && s.preventDefault(),
            (e.returnValue = !1),
            (s.returnValue = !1),
            (e.defaultPrevented = !0);
        }),
        (e.defaultPrevented = !1),
        (e.stopPropagation = function () {
          s.stopPropagation && s.stopPropagation(),
            (e.cancelBubble = !0),
            (s.cancelBubble = !0),
            (e.isPropagationStopped = t);
        }),
        (e.isPropagationStopped = i),
        (e.stopImmediatePropagation = function () {
          s.stopImmediatePropagation && s.stopImmediatePropagation(),
            (e.isImmediatePropagationStopped = t),
            e.stopPropagation();
        }),
        (e.isImmediatePropagationStopped = i),
        null !== e.clientX &&
          void 0 !== e.clientX &&
          ((r = document.documentElement),
          (a = document.body),
          (e.pageX =
            e.clientX +
            ((r && r.scrollLeft) || (a && a.scrollLeft) || 0) -
            ((r && r.clientLeft) || (a && a.clientLeft) || 0)),
          (e.pageY =
            e.clientY +
            ((r && r.scrollTop) || (a && a.scrollTop) || 0) -
            ((r && r.clientTop) || (a && a.clientTop) || 0))),
        (e.which = e.charCode || e.keyCode),
        null !== e.button &&
          void 0 !== e.button &&
          (e.button =
            1 & e.button ? 0 : 4 & e.button ? 1 : 2 & e.button ? 2 : 0);
    }
    return (e.fixed_ = !0), e;
  }
  var Ne = function () {
      if ("boolean" != typeof Le) {
        Le = !1;
        try {
          var e = Object.defineProperty({}, "passive", {
            get: function () {
              Le = !0;
            },
          });
          window.addEventListener("test", null, e),
            window.removeEventListener("test", null, e);
        } catch (e) {}
      }
      return Le;
    },
    Ue = ["touchstart", "touchmove"];
  function Be(s, e, t) {
    if (Array.isArray(e)) return Re(Be, s, e, t);
    De.has(s) || De.set(s, {});
    var o = De.get(s);
    o.handlers || (o.handlers = {}),
      o.handlers[e] || (o.handlers[e] = []),
      t.guid || (t.guid = Pe++),
      o.handlers[e].push(t),
      o.dispatcher ||
        ((o.disabled = !1),
        (o.dispatcher = function (e, t) {
          if (!o.disabled) {
            e = Me(e);
            var i = o.handlers[e.type];
            if (i)
              for (
                var n = i.slice(0), r = 0, a = n.length;
                r < a && !e.isImmediatePropagationStopped();
                r++
              )
                try {
                  n[r].call(s, e, t);
                } catch (e) {
                  h.error(e);
                }
          }
        })),
      1 === o.handlers[e].length &&
        (s.addEventListener
          ? ((t = !1),
            Ne() && -1 < Ue.indexOf(e) && (t = { passive: !0 }),
            s.addEventListener(e, o.dispatcher, t))
          : s.attachEvent && s.attachEvent("on" + e, o.dispatcher));
  }
  function Fe(e, t, i) {
    if (De.has(e)) {
      var n = De.get(e);
      if (n.handlers) {
        if (Array.isArray(t)) return Re(Fe, e, t, i);
        var r = function (e, t) {
          (n.handlers[t] = []), Oe(e, t);
        };
        if (void 0 !== t) {
          var a = n.handlers[t];
          if (a)
            if (i) {
              if (i.guid)
                for (var s = 0; s < a.length; s++)
                  a[s].guid === i.guid && a.splice(s--, 1);
              Oe(e, t);
            } else r(e, t);
        } else
          for (var o in n.handlers)
            Object.prototype.hasOwnProperty.call(n.handlers || {}, o) &&
              r(e, o);
      }
    }
  }
  function je(e, t, i) {
    var n = De.has(e) ? De.get(e) : {},
      r = e.parentNode || e.ownerDocument;
    return (
      "string" == typeof t
        ? (t = { type: t, target: e })
        : t.target || (t.target = e),
      (t = Me(t)),
      n.dispatcher && n.dispatcher.call(e, t, i),
      r && !t.isPropagationStopped() && !0 === t.bubbles
        ? je.call(null, r, t, i)
        : !r &&
          !t.defaultPrevented &&
          t.target &&
          t.target[t.type] &&
          (De.has(t.target) || De.set(t.target, {}),
          (r = De.get(t.target)),
          t.target[t.type] &&
            ((r.disabled = !0),
            "function" == typeof t.target[t.type] && t.target[t.type](),
            (r.disabled = !1))),
      !t.defaultPrevented
    );
  }
  function He(e, t, i) {
    if (Array.isArray(t)) return Re(He, e, t, i);
    function n() {
      Fe(e, t, n), i.apply(this, arguments);
    }
    (n.guid = i.guid = i.guid || Pe++), Be(e, t, n);
  }
  function qe(e, t, i) {
    function n() {
      Fe(e, t, n), i.apply(this, arguments);
    }
    (n.guid = i.guid = i.guid || Pe++), Be(e, t, n);
  }
  function Ve(e, t, i) {
    return (
      t.guid || (t.guid = Pe++),
      ((e = t.bind(e)).guid = i ? i + "_" + t.guid : t.guid),
      e
    );
  }
  function We(t, i) {
    var n = window.performance.now();
    return function () {
      var e = window.performance.now();
      i <= e - n && (t.apply(void 0, arguments), (n = e));
    };
  }
  function Ge(n, r, a, s) {
    var o;
    function e() {
      var e = this,
        t = arguments,
        i = function () {
          (i = o = null), a || n.apply(e, t);
        };
      !o && a && n.apply(e, t), s.clearTimeout(o), (o = s.setTimeout(i, r));
    }
    return (
      void 0 === s && (s = window),
      (e.cancel = function () {
        s.clearTimeout(o), (o = null);
      }),
      e
    );
  }
  function ze() {}
  var Xe,
    Ke = Object.freeze({
      __proto__: null,
      fixEvent: Me,
      on: Be,
      off: Fe,
      trigger: je,
      one: He,
      any: qe,
    });
  (ze.prototype.allowedEvents_ = {}),
    (ze.prototype.addEventListener = ze.prototype.on =
      function (e, t) {
        var i = this.addEventListener;
        (this.addEventListener = function () {}),
          Be(this, e, t),
          (this.addEventListener = i);
      }),
    (ze.prototype.removeEventListener = ze.prototype.off =
      function (e, t) {
        Fe(this, e, t);
      }),
    (ze.prototype.one = function (e, t) {
      var i = this.addEventListener;
      (this.addEventListener = function () {}),
        He(this, e, t),
        (this.addEventListener = i);
    }),
    (ze.prototype.any = function (e, t) {
      var i = this.addEventListener;
      (this.addEventListener = function () {}),
        qe(this, e, t),
        (this.addEventListener = i);
    }),
    (ze.prototype.dispatchEvent = ze.prototype.trigger =
      function (e) {
        var t = e.type || e;
        (e = Me((e = "string" == typeof e ? { type: t } : e))),
          this.allowedEvents_[t] && this["on" + t] && this["on" + t](e),
          je(this, e);
      }),
    (ze.prototype.queueTrigger = function (e) {
      var t = this;
      Xe = Xe || new Map();
      var i = e.type || e,
        n = Xe.get(this);
      n || ((n = new Map()), Xe.set(this, n));
      var r = n.get(i);
      n.delete(i), window.clearTimeout(r);
      r = window.setTimeout(function () {
        0 === n.size && ((n = null), Xe.delete(t)), t.trigger(e);
      }, 0);
      n.set(i, r);
    });
  function Ye(e) {
    return "function" == typeof e.name
      ? e.name()
      : "string" == typeof e.name
      ? e.name
      : e.name_ ||
        (e.constructor && e.constructor.name ? e.constructor.name : typeof e);
  }
  function Qe(e) {
    return (
      ("string" == typeof e && /\S/.test(e)) || (Array.isArray(e) && !!e.length)
    );
  }
  function $e(e, t, i) {
    if (!e || (!e.nodeName && !it(e)))
      throw new Error(
        "Invalid target for " +
          Ye(t) +
          "#" +
          i +
          "; must be a DOM node or evented object."
      );
  }
  function Je(e, t, i) {
    if (!Qe(e))
      throw new Error(
        "Invalid event type for " +
          Ye(t) +
          "#" +
          i +
          "; must be a non-empty string or array."
      );
  }
  function Ze(e, t, i) {
    if ("function" != typeof e)
      throw new Error(
        "Invalid listener for " + Ye(t) + "#" + i + "; must be a function."
      );
  }
  function et(e, t, i) {
    var n,
      r,
      a = t.length < 3 || t[0] === e || t[0] === e.eventBusEl_,
      t = a
        ? ((n = e.eventBusEl_), 3 <= t.length && t.shift(), (r = t[0]), t[1])
        : ((n = t[0]), (r = t[1]), t[2]);
    return (
      $e(n, e, i),
      Je(r, e, i),
      Ze(t, e, i),
      { isTargetingSelf: a, target: n, type: r, listener: (t = Ve(e, t)) }
    );
  }
  function tt(e, t, i, n) {
    $e(e, e, t), e.nodeName ? Ke[t](e, i, n) : e[t](i, n);
  }
  var it = function (t) {
      return (
        t instanceof ze ||
        (!!t.eventBusEl_ &&
          ["on", "one", "off", "trigger"].every(function (e) {
            return "function" == typeof t[e];
          }))
      );
    },
    nt = {
      on: function () {
        for (
          var e = this, t = arguments.length, i = new Array(t), n = 0;
          n < t;
          n++
        )
          i[n] = arguments[n];
        var r,
          a = et(this, i, "on"),
          s = a.isTargetingSelf,
          o = a.target,
          u = a.type,
          l = a.listener;
        tt(o, "on", u, l),
          s ||
            (((r = function () {
              return e.off(o, u, l);
            }).guid = l.guid),
            ((s = function () {
              return e.off("dispose", r);
            }).guid = l.guid),
            tt(this, "on", "dispose", r),
            tt(o, "on", "dispose", s));
      },
      one: function () {
        for (
          var r = this, e = arguments.length, t = new Array(e), i = 0;
          i < e;
          i++
        )
          t[i] = arguments[i];
        var n = et(this, t, "one"),
          a = n.isTargetingSelf,
          s = n.target,
          o = n.type,
          u = n.listener;
        a
          ? tt(s, "one", o, u)
          : (((a = function e() {
              r.off(s, o, e);
              for (
                var t = arguments.length, i = new Array(t), n = 0;
                n < t;
                n++
              )
                i[n] = arguments[n];
              u.apply(null, i);
            }).guid = u.guid),
            tt(s, "one", o, a));
      },
      any: function () {
        for (
          var r = this, e = arguments.length, t = new Array(e), i = 0;
          i < e;
          i++
        )
          t[i] = arguments[i];
        var n = et(this, t, "any"),
          a = n.isTargetingSelf,
          s = n.target,
          o = n.type,
          u = n.listener;
        a
          ? tt(s, "any", o, u)
          : (((a = function e() {
              r.off(s, o, e);
              for (
                var t = arguments.length, i = new Array(t), n = 0;
                n < t;
                n++
              )
                i[n] = arguments[n];
              u.apply(null, i);
            }).guid = u.guid),
            tt(s, "any", o, a));
      },
      off: function (e, t, i) {
        !e || Qe(e)
          ? Fe(this.eventBusEl_, e, t)
          : ((t = t),
            $e((e = e), this, "off"),
            Je(t, this, "off"),
            Ze(i, this, "off"),
            (i = Ve(this, i)),
            this.off("dispose", i),
            e.nodeName
              ? (Fe(e, t, i), Fe(e, "dispose", i))
              : it(e) && (e.off(t, i), e.off("dispose", i)));
      },
      trigger: function (e, t) {
        $e(this.eventBusEl_, this, "trigger");
        var i = e && "string" != typeof e ? e.type : e;
        if (!Qe(i)) {
          i =
            "Invalid event type for " +
            Ye(this) +
            "#trigger; must be a non-empty string or object with a type key that has a non-empty value.";
          if (!e) throw new Error(i);
          (this.log || h).error(i);
        }
        return je(this.eventBusEl_, e, t);
      },
    };
  function rt(e, t) {
    t = (t = void 0 === t ? {} : t).eventBusKey;
    if (t) {
      if (!e[t].nodeName)
        throw new Error(
          'The eventBusKey "' + t + '" does not refer to an element.'
        );
      e.eventBusEl_ = e[t];
    } else e.eventBusEl_ = $("span", { className: "vjs-event-bus" });
    return (
      b(e, nt),
      e.eventedCallbacks &&
        e.eventedCallbacks.forEach(function (e) {
          e();
        }),
      e.on("dispose", function () {
        e.off(),
          [e, e.el_, e.eventBusEl_].forEach(function (e) {
            e && De.has(e) && De.delete(e);
          }),
          window.setTimeout(function () {
            e.eventBusEl_ = null;
          }, 0);
      }),
      e
    );
  }
  var at = {
    state: {},
    setState: function (e) {
      var i,
        n = this;
      return (
        _((e = "function" == typeof e ? e() : e), function (e, t) {
          n.state[t] !== e && ((i = i || {})[t] = { from: n.state[t], to: e }),
            (n.state[t] = e);
        }),
        i && it(this) && this.trigger({ changes: i, type: "statechanged" }),
        i
      );
    },
  };
  function st(e, t) {
    return (
      b(e, at),
      (e.state = b({}, e.state, t)),
      "function" == typeof e.handleStateChanged &&
        it(e) &&
        e.on("statechanged", e.handleStateChanged),
      e
    );
  }
  function ot(e) {
    return "string" != typeof e
      ? e
      : e.replace(/./, function (e) {
          return e.toLowerCase();
        });
  }
  function ut(e) {
    return "string" != typeof e
      ? e
      : e.replace(/./, function (e) {
          return e.toUpperCase();
        });
  }
  function lt() {
    for (var i = {}, e = arguments.length, t = new Array(e), n = 0; n < e; n++)
      t[n] = arguments[n];
    return (
      t.forEach(function (e) {
        e &&
          _(e, function (e, t) {
            S(e) ? (S(i[t]) || (i[t] = {}), (i[t] = lt(i[t], e))) : (i[t] = e);
          });
      }),
      i
    );
  }
  var ct =
      window.Map ||
      (function () {
        function e() {
          this.map_ = {};
        }
        var t = e.prototype;
        return (
          (t.has = function (e) {
            return e in this.map_;
          }),
          (t.delete = function (e) {
            var t = this.has(e);
            return delete this.map_[e], t;
          }),
          (t.set = function (e, t) {
            return (this.map_[e] = t), this;
          }),
          (t.forEach = function (e, t) {
            for (var i in this.map_) e.call(t, this.map_[i], i, this);
          }),
          e
        );
      })(),
    dt =
      window.Set ||
      (function () {
        function e() {
          this.set_ = {};
        }
        var t = e.prototype;
        return (
          (t.has = function (e) {
            return e in this.set_;
          }),
          (t.delete = function (e) {
            var t = this.has(e);
            return delete this.set_[e], t;
          }),
          (t.add = function (e) {
            return (this.set_[e] = 1), this;
          }),
          (t.forEach = function (e, t) {
            for (var i in this.set_) e.call(t, i, i, this);
          }),
          e
        );
      })(),
    ht = m(function (e, t) {
      function i(e) {
        if (
          (!e ||
            "object" != typeof e ||
            ((t = e.which || e.keyCode || e.charCode) && (e = t)),
          "number" == typeof e)
        )
          return o[e];
        var t = String(e),
          e = n[t.toLowerCase()];
        return (
          e ||
          ((e = r[t.toLowerCase()])
            ? e
            : 1 === t.length
            ? t.charCodeAt(0)
            : void 0)
        );
      }
      i.isEventKey = function (e, t) {
        if (e && "object" == typeof e) {
          var i = e.which || e.keyCode || e.charCode;
          if (null == i) return !1;
          if ("string" == typeof t) {
            e = n[t.toLowerCase()];
            if (e) return e === i;
            if ((e = r[t.toLowerCase()])) return e === i;
          } else if ("number" == typeof t) return t === i;
          return !1;
        }
      };
      for (
        var n =
            ((t = e.exports = i).code =
            t.codes =
              {
                backspace: 8,
                tab: 9,
                enter: 13,
                shift: 16,
                ctrl: 17,
                alt: 18,
                "pause/break": 19,
                "caps lock": 20,
                esc: 27,
                space: 32,
                "page up": 33,
                "page down": 34,
                end: 35,
                home: 36,
                left: 37,
                up: 38,
                right: 39,
                down: 40,
                insert: 45,
                delete: 46,
                command: 91,
                "left command": 91,
                "right command": 93,
                "numpad *": 106,
                "numpad +": 107,
                "numpad -": 109,
                "numpad .": 110,
                "numpad /": 111,
                "num lock": 144,
                "scroll lock": 145,
                "my computer": 182,
                "my calculator": 183,
                ";": 186,
                "=": 187,
                ",": 188,
                "-": 189,
                ".": 190,
                "/": 191,
                "`": 192,
                "[": 219,
                "\\": 220,
                "]": 221,
                "'": 222,
              }),
          r = (t.aliases = {
            windows: 91,
            "⇧": 16,
            "⌥": 18,
            "⌃": 17,
            "⌘": 91,
            ctl: 17,
            control: 17,
            option: 18,
            pause: 19,
            break: 19,
            caps: 20,
            return: 13,
            escape: 27,
            spc: 32,
            spacebar: 32,
            pgup: 33,
            pgdn: 34,
            ins: 45,
            del: 46,
            cmd: 91,
          }),
          a = 97;
        a < 123;
        a++
      )
        n[String.fromCharCode(a)] = a - 32;
      for (var a = 48; a < 58; a++) n[a - 48] = a;
      for (a = 1; a < 13; a++) n["f" + a] = a + 111;
      for (a = 0; a < 10; a++) n["numpad " + a] = a + 96;
      var s,
        o = (t.names = t.title = {});
      for (a in n) o[n[a]] = a;
      for (s in r) n[s] = r[s];
    });
  ht.code, ht.codes, ht.aliases, ht.names, ht.title;
  var pt = (function () {
    function s(e, t, i) {
      !e && this.play ? (this.player_ = e = this) : (this.player_ = e),
        (this.isDisposed_ = !1),
        (this.parentComponent_ = null),
        (this.options_ = lt({}, this.options_)),
        (t = this.options_ = lt(this.options_, t)),
        (this.id_ = t.id || (t.el && t.el.id)),
        this.id_ ||
          ((e = (e && e.id && e.id()) || "no_player"),
          (this.id_ = e + "_component_" + Pe++)),
        (this.name_ = t.name || null),
        t.el
          ? (this.el_ = t.el)
          : !1 !== t.createEl && (this.el_ = this.createEl()),
        !1 !== t.evented &&
          (rt(this, { eventBusKey: this.el_ ? "el_" : null }),
          (this.handleLanguagechange = this.handleLanguagechange.bind(this)),
          this.on(this.player_, "languagechange", this.handleLanguagechange)),
        st(this, this.constructor.defaultState),
        (this.children_ = []),
        (this.childIndex_ = {}),
        (this.childNameIndex_ = {}),
        (this.setTimeoutIds_ = new dt()),
        (this.setIntervalIds_ = new dt()),
        (this.rafIds_ = new dt()),
        (this.namedRafs_ = new ct()),
        (this.clearingTimersOnDispose_ = !1) !== t.initChildren &&
          this.initChildren(),
        this.ready(i),
        !1 !== t.reportTouchActivity && this.enableTouchActivity();
    }
    var e = s.prototype;
    return (
      (e.dispose = function () {
        if (!this.isDisposed_) {
          if (
            (this.readyQueue_ && (this.readyQueue_.length = 0),
            this.trigger({ type: "dispose", bubbles: !1 }),
            (this.isDisposed_ = !0),
            this.children_)
          )
            for (var e = this.children_.length - 1; 0 <= e; e--)
              this.children_[e].dispose && this.children_[e].dispose();
          (this.children_ = null),
            (this.childIndex_ = null),
            (this.childNameIndex_ = null),
            (this.parentComponent_ = null),
            this.el_ &&
              (this.el_.parentNode && this.el_.parentNode.removeChild(this.el_),
              (this.el_ = null)),
            (this.player_ = null);
        }
      }),
      (e.isDisposed = function () {
        return Boolean(this.isDisposed_);
      }),
      (e.player = function () {
        return this.player_;
      }),
      (e.options = function (e) {
        return e && (this.options_ = lt(this.options_, e)), this.options_;
      }),
      (e.el = function () {
        return this.el_;
      }),
      (e.createEl = function (e, t, i) {
        return $(e, t, i);
      }),
      (e.localize = function (e, i, t) {
        void 0 === t && (t = e);
        var n = this.player_.language && this.player_.language(),
          r = this.player_.languages && this.player_.languages(),
          a = r && r[n],
          n = n && n.split("-")[0],
          n = r && r[n],
          t = t;
        return (
          a && a[e] ? (t = a[e]) : n && n[e] && (t = n[e]),
          (t = i
            ? t.replace(/\{(\d+)\}/g, function (e, t) {
                t = i[t - 1];
                return "undefined" == typeof t ? e : t;
              })
            : t)
        );
      }),
      (e.handleLanguagechange = function () {}),
      (e.contentEl = function () {
        return this.contentEl_ || this.el_;
      }),
      (e.id = function () {
        return this.id_;
      }),
      (e.name = function () {
        return this.name_;
      }),
      (e.children = function () {
        return this.children_;
      }),
      (e.getChildById = function (e) {
        return this.childIndex_[e];
      }),
      (e.getChild = function (e) {
        if (e) return this.childNameIndex_[e];
      }),
      (e.getDescendant = function () {
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        for (
          var t = t.reduce(function (e, t) {
              return e.concat(t);
            }, []),
            n = this,
            r = 0;
          r < t.length;
          r++
        )
          if (!(n = n.getChild(t[r])) || !n.getChild) return;
        return n;
      }),
      (e.addChild = function (e, t, i) {
        if (
          (void 0 === t && (t = {}),
          void 0 === i && (i = this.children_.length),
          "string" == typeof e)
        ) {
          var n = ut(e),
            r = t.componentClass || n;
          t.name = n;
          var a = s.getComponent(r);
          if (!a) throw new Error("Component " + r + " does not exist");
          if ("function" != typeof a) return null;
          a = new a(this.player_ || this, t);
        } else a = e;
        return (
          a.parentComponent_ && a.parentComponent_.removeChild(a),
          this.children_.splice(i, 0, a),
          (a.parentComponent_ = this),
          "function" == typeof a.id && (this.childIndex_[a.id()] = a),
          (n = n || (a.name && ut(a.name()))) &&
            ((this.childNameIndex_[n] = a), (this.childNameIndex_[ot(n)] = a)),
          "function" == typeof a.el &&
            a.el() &&
            ((n = null),
            this.children_[i + 1] &&
              (this.children_[i + 1].el_
                ? (n = this.children_[i + 1].el_)
                : K(this.children_[i + 1]) && (n = this.children_[i + 1])),
            this.contentEl().insertBefore(a.el(), n)),
          a
        );
      }),
      (e.removeChild = function (e) {
        if (
          (e = "string" == typeof e ? this.getChild(e) : e) &&
          this.children_
        ) {
          for (var t, i = !1, n = this.children_.length - 1; 0 <= n; n--)
            if (this.children_[n] === e) {
              (i = !0), this.children_.splice(n, 1);
              break;
            }
          i &&
            ((e.parentComponent_ = null),
            (this.childIndex_[e.id()] = null),
            (this.childNameIndex_[ut(e.name())] = null),
            (this.childNameIndex_[ot(e.name())] = null),
            (t = e.el()) &&
              t.parentNode === this.contentEl() &&
              this.contentEl().removeChild(e.el()));
        }
      }),
      (e.initChildren = function () {
        var i,
          t,
          e,
          n = this,
          r = this.options_.children;
        r &&
          ((i = this.options_),
          (t = s.getComponent("Tech")),
          (e = Array.isArray(r) ? r : Object.keys(r))
            .concat(
              Object.keys(this.options_).filter(function (t) {
                return !e.some(function (e) {
                  return "string" == typeof e ? t === e : t === e.name;
                });
              })
            )
            .map(function (e) {
              var t,
                e =
                  "string" == typeof e
                    ? r[(t = e)] || n.options_[t] || {}
                    : ((t = e.name), e);
              return { name: t, opts: e };
            })
            .filter(function (e) {
              e = s.getComponent(e.opts.componentClass || ut(e.name));
              return e && !t.isTech(e);
            })
            .forEach(function (e) {
              var t = e.name,
                e = e.opts;
              !1 !== (e = void 0 !== i[t] ? i[t] : e) &&
                (((e = !0 === e ? {} : e).playerOptions =
                  n.options_.playerOptions),
                (e = n.addChild(t, e)) && (n[t] = e));
            }));
      }),
      (e.buildCSSClass = function () {
        return "";
      }),
      (e.ready = function (e, t) {
        if ((void 0 === t && (t = !1), e))
          return this.isReady_
            ? void (t ? e.call(this) : this.setTimeout(e, 1))
            : ((this.readyQueue_ = this.readyQueue_ || []),
              void this.readyQueue_.push(e));
      }),
      (e.triggerReady = function () {
        (this.isReady_ = !0),
          this.setTimeout(function () {
            var e = this.readyQueue_;
            (this.readyQueue_ = []),
              e &&
                0 < e.length &&
                e.forEach(function (e) {
                  e.call(this);
                }, this),
              this.trigger("ready");
          }, 1);
      }),
      (e.$ = function (e, t) {
        return Te(e, t || this.contentEl());
      }),
      (e.$$ = function (e, t) {
        return Se(e, t || this.contentEl());
      }),
      (e.hasClass = function (e) {
        return ee(this.el_, e);
      }),
      (e.addClass = function (e) {
        te(this.el_, e);
      }),
      (e.removeClass = function (e) {
        ie(this.el_, e);
      }),
      (e.toggleClass = function (e, t) {
        ne(this.el_, e, t);
      }),
      (e.show = function () {
        this.removeClass("vjs-hidden");
      }),
      (e.hide = function () {
        this.addClass("vjs-hidden");
      }),
      (e.lockShowing = function () {
        this.addClass("vjs-lock-showing");
      }),
      (e.unlockShowing = function () {
        this.removeClass("vjs-lock-showing");
      }),
      (e.getAttribute = function (e) {
        return se(this.el_, e);
      }),
      (e.setAttribute = function (e, t) {
        oe(this.el_, e, t);
      }),
      (e.removeAttribute = function (e) {
        ue(this.el_, e);
      }),
      (e.width = function (e, t) {
        return this.dimension("width", e, t);
      }),
      (e.height = function (e, t) {
        return this.dimension("height", e, t);
      }),
      (e.dimensions = function (e, t) {
        this.width(e, !0), this.height(t);
      }),
      (e.dimension = function (e, t, i) {
        if (void 0 !== t)
          return (
            -1 !== ("" + (t = null === t || t != t ? 0 : t)).indexOf("%") ||
            -1 !== ("" + t).indexOf("px")
              ? (this.el_.style[e] = t)
              : (this.el_.style[e] = "auto" === t ? "" : t + "px"),
            void (i || this.trigger("componentresize"))
          );
        if (!this.el_) return 0;
        (t = this.el_.style[e]), (i = t.indexOf("px"));
        return -1 !== i
          ? parseInt(t.slice(0, i), 10)
          : parseInt(this.el_["offset" + ut(e)], 10);
      }),
      (e.currentDimension = function (e) {
        var t = 0;
        if ("width" !== e && "height" !== e)
          throw new Error(
            "currentDimension only accepts width or height value"
          );
        return (
          (t = w(this.el_, e)),
          (0 !== (t = parseFloat(t)) && !isNaN(t)) ||
            ((e = "offset" + ut(e)), (t = this.el_[e])),
          t
        );
      }),
      (e.currentDimensions = function () {
        return {
          width: this.currentDimension("width"),
          height: this.currentDimension("height"),
        };
      }),
      (e.currentWidth = function () {
        return this.currentDimension("width");
      }),
      (e.currentHeight = function () {
        return this.currentDimension("height");
      }),
      (e.focus = function () {
        this.el_.focus();
      }),
      (e.blur = function () {
        this.el_.blur();
      }),
      (e.handleKeyDown = function (e) {
        this.player_ &&
          (ht.isEventKey(e, "Tab") || e.stopPropagation(),
          this.player_.handleKeyDown(e));
      }),
      (e.handleKeyPress = function (e) {
        this.handleKeyDown(e);
      }),
      (e.emitTapEvents = function () {
        var i,
          t = 0,
          n = null;
        this.on("touchstart", function (e) {
          1 === e.touches.length &&
            ((n = { pageX: e.touches[0].pageX, pageY: e.touches[0].pageY }),
            (t = window.performance.now()),
            (i = !0));
        }),
          this.on("touchmove", function (e) {
            var t;
            1 < e.touches.length
              ? (i = !1)
              : n &&
                ((t = e.touches[0].pageX - n.pageX),
                (e = e.touches[0].pageY - n.pageY),
                10 < Math.sqrt(t * t + e * e) && (i = !1));
          });
        function e() {
          i = !1;
        }
        this.on("touchleave", e),
          this.on("touchcancel", e),
          this.on("touchend", function (e) {
            !(n = null) === i &&
              window.performance.now() - t < 200 &&
              (e.preventDefault(), this.trigger("tap"));
          });
      }),
      (e.enableTouchActivity = function () {
        var t, i, e;
        this.player() &&
          this.player().reportUserActivity &&
          ((t = Ve(this.player(), this.player().reportUserActivity)),
          this.on("touchstart", function () {
            t(), this.clearInterval(i), (i = this.setInterval(t, 250));
          }),
          (e = function (e) {
            t(), this.clearInterval(i);
          }),
          this.on("touchmove", t),
          this.on("touchend", e),
          this.on("touchcancel", e));
      }),
      (e.setTimeout = function (e, t) {
        var i,
          n = this;
        return (
          (e = Ve(this, e)),
          this.clearTimersOnDispose_(),
          (i = window.setTimeout(function () {
            n.setTimeoutIds_.has(i) && n.setTimeoutIds_.delete(i), e();
          }, t)),
          this.setTimeoutIds_.add(i),
          i
        );
      }),
      (e.clearTimeout = function (e) {
        return (
          this.setTimeoutIds_.has(e) &&
            (this.setTimeoutIds_.delete(e), window.clearTimeout(e)),
          e
        );
      }),
      (e.setInterval = function (e, t) {
        (e = Ve(this, e)), this.clearTimersOnDispose_();
        t = window.setInterval(e, t);
        return this.setIntervalIds_.add(t), t;
      }),
      (e.clearInterval = function (e) {
        return (
          this.setIntervalIds_.has(e) &&
            (this.setIntervalIds_.delete(e), window.clearInterval(e)),
          e
        );
      }),
      (e.requestAnimationFrame = function (e) {
        var t,
          i = this;
        return this.supportsRaf_
          ? (this.clearTimersOnDispose_(),
            (e = Ve(this, e)),
            (t = window.requestAnimationFrame(function () {
              i.rafIds_.has(t) && i.rafIds_.delete(t), e();
            })),
            this.rafIds_.add(t),
            t)
          : this.setTimeout(e, 1e3 / 60);
      }),
      (e.requestNamedAnimationFrame = function (e, t) {
        var i = this;
        if (!this.namedRafs_.has(e)) {
          this.clearTimersOnDispose_(), (t = Ve(this, t));
          var n = this.requestAnimationFrame(function () {
            t(), i.namedRafs_.has(e) && i.namedRafs_.delete(e);
          });
          return this.namedRafs_.set(e, n), e;
        }
      }),
      (e.cancelNamedAnimationFrame = function (e) {
        this.namedRafs_.has(e) &&
          (this.cancelAnimationFrame(this.namedRafs_.get(e)),
          this.namedRafs_.delete(e));
      }),
      (e.cancelAnimationFrame = function (e) {
        return this.supportsRaf_
          ? (this.rafIds_.has(e) &&
              (this.rafIds_.delete(e), window.cancelAnimationFrame(e)),
            e)
          : this.clearTimeout(e);
      }),
      (e.clearTimersOnDispose_ = function () {
        var n = this;
        this.clearingTimersOnDispose_ ||
          ((this.clearingTimersOnDispose_ = !0),
          this.one("dispose", function () {
            [
              ["namedRafs_", "cancelNamedAnimationFrame"],
              ["rafIds_", "cancelAnimationFrame"],
              ["setTimeoutIds_", "clearTimeout"],
              ["setIntervalIds_", "clearInterval"],
            ].forEach(function (e) {
              var t = e[0],
                i = e[1];
              n[t].forEach(function (e, t) {
                return n[i](t);
              });
            }),
              (n.clearingTimersOnDispose_ = !1);
          }));
      }),
      (s.registerComponent = function (e, t) {
        if ("string" != typeof e || !e)
          throw new Error(
            'Illegal component name, "' + e + '"; must be a non-empty string.'
          );
        var i = s.getComponent("Tech"),
          n = i && i.isTech(t),
          i = s === t || s.prototype.isPrototypeOf(t.prototype);
        if (n || !i) {
          var r = n
            ? "techs must be registered using Tech.registerTech()"
            : "must be a Component subclass";
          throw new Error('Illegal component, "' + e + '"; ' + r + ".");
        }
        (e = ut(e)), s.components_ || (s.components_ = {});
        r = s.getComponent("Player");
        if ("Player" === e && r && r.players) {
          var a = r.players,
            r = Object.keys(a);
          if (
            a &&
            0 < r.length &&
            r
              .map(function (e) {
                return a[e];
              })
              .every(Boolean)
          )
            throw new Error(
              "Can not register Player component after player has been created."
            );
        }
        return (s.components_[e] = t), (s.components_[ot(e)] = t);
      }),
      (s.getComponent = function (e) {
        if (e && s.components_) return s.components_[e];
      }),
      s
    );
  })();
  (pt.prototype.supportsRaf_ =
    "function" == typeof window.requestAnimationFrame &&
    "function" == typeof window.cancelAnimationFrame),
    pt.registerComponent("Component", pt);
  var ft = function (e) {
    if (void 0 === e)
      throw new ReferenceError(
        "this hasn't been initialised - super() hasn't been called"
      );
    return e;
  };
  var mt = function (e, t) {
    (e.prototype = Object.create(t.prototype)),
      ((e.prototype.constructor = e).__proto__ = t);
  };
  function gt(e, t, i, n) {
    return (
      (function (e, t, i) {
        if ("number" != typeof t || t < 0 || i < t)
          throw new Error(
            "Failed to execute '" +
              e +
              "' on 'TimeRanges': The index provided (" +
              t +
              ") is non-numeric or out of bounds (0-" +
              i +
              ")."
          );
      })(e, n, i.length - 1),
      i[n][t]
    );
  }
  function yt(e) {
    var t =
      void 0 === e || 0 === e.length
        ? {
            length: 0,
            start: function () {
              throw new Error("This TimeRanges object is empty");
            },
            end: function () {
              throw new Error("This TimeRanges object is empty");
            },
          }
        : {
            length: e.length,
            start: gt.bind(null, "start", 0, e),
            end: gt.bind(null, "end", 1, e),
          };
    return (
      window.Symbol &&
        window.Symbol.iterator &&
        (t[window.Symbol.iterator] = function () {
          return (e || []).values();
        }),
      t
    );
  }
  function vt(e, t) {
    return Array.isArray(e)
      ? yt(e)
      : void 0 === e || void 0 === t
      ? yt()
      : yt([[e, t]]);
  }
  function _t(e, t) {
    var i,
      n,
      r = 0;
    if (!t) return 0;
    (e && e.length) || (e = vt(0, 0));
    for (var a = 0; a < e.length; a++)
      (i = e.start(a)), (r += (n = t < (n = e.end(a)) ? t : n) - i);
    return r / t;
  }
  function bt(e) {
    if (e instanceof bt) return e;
    "number" == typeof e
      ? (this.code = e)
      : "string" == typeof e
      ? (this.message = e)
      : T(e) && ("number" == typeof e.code && (this.code = e.code), b(this, e)),
      this.message || (this.message = bt.defaultMessages[this.code] || "");
  }
  (bt.prototype.code = 0),
    (bt.prototype.message = ""),
    (bt.prototype.status = null),
    (bt.errorTypes = [
      "MEDIA_ERR_CUSTOM",
      "MEDIA_ERR_ABORTED",
      "MEDIA_ERR_NETWORK",
      "MEDIA_ERR_DECODE",
      "MEDIA_ERR_SRC_NOT_SUPPORTED",
      "MEDIA_ERR_ENCRYPTED",
    ]),
    (bt.defaultMessages = {
      1: "You aborted the media playback",
      2: "A network error caused the media download to fail part-way.",
      3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
      4: "The media could not be loaded, either because the server or network failed or because the format is not supported.",
      5: "The media is encrypted and we do not have the keys to decrypt it.",
    });
  for (var Tt = 0; Tt < bt.errorTypes.length; Tt++)
    (bt[bt.errorTypes[Tt]] = Tt), (bt.prototype[bt.errorTypes[Tt]] = Tt);
  var St = function (e, t) {
    var i,
      n = null;
    try {
      i = JSON.parse(e, t);
    } catch (e) {
      n = e;
    }
    return [n, i];
  };
  function wt(e) {
    return null != e && "function" == typeof e.then;
  }
  function Et(e) {
    wt(e) && e.then(null, function (e) {});
  }
  function kt(n) {
    return [
      "kind",
      "label",
      "language",
      "id",
      "inBandMetadataTrackDispatchType",
      "mode",
      "src",
    ].reduce(
      function (e, t, i) {
        return n[t] && (e[t] = n[t]), e;
      },
      {
        cues:
          n.cues &&
          Array.prototype.map.call(n.cues, function (e) {
            return {
              startTime: e.startTime,
              endTime: e.endTime,
              text: e.text,
              id: e.id,
            };
          }),
      }
    );
  }
  var Ct = function (e) {
      var t = e.$$("track"),
        i = Array.prototype.map.call(t, function (e) {
          return e.track;
        });
      return Array.prototype.map
        .call(t, function (e) {
          var t = kt(e.track);
          return e.src && (t.src = e.src), t;
        })
        .concat(
          Array.prototype.filter
            .call(e.textTracks(), function (e) {
              return -1 === i.indexOf(e);
            })
            .map(kt)
        );
    },
    It = function (e, i) {
      return (
        e.forEach(function (e) {
          var t = i.addRemoteTextTrack(e).track;
          !e.src &&
            e.cues &&
            e.cues.forEach(function (e) {
              return t.addCue(e);
            });
        }),
        i.textTracks()
      );
    },
    xt = "vjs-modal-dialog",
    At = (function (n) {
      function e(e, t) {
        var i = n.call(this, e, t) || this;
        return (
          (i.handleKeyDown_ = function (e) {
            return i.handleKeyDown(e);
          }),
          (i.close_ = function (e) {
            return i.close(e);
          }),
          (i.opened_ = i.hasBeenOpened_ = i.hasBeenFilled_ = !1),
          i.closeable(!i.options_.uncloseable),
          i.content(i.options_.content),
          (i.contentEl_ = $(
            "div",
            { className: xt + "-content" },
            { role: "document" }
          )),
          (i.descEl_ = $("p", {
            className: xt + "-description vjs-control-text",
            id: i.el().getAttribute("aria-describedby"),
          })),
          J(i.descEl_, i.description()),
          i.el_.appendChild(i.descEl_),
          i.el_.appendChild(i.contentEl_),
          i
        );
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.createEl = function () {
          return n.prototype.createEl.call(
            this,
            "div",
            { className: this.buildCSSClass(), tabIndex: -1 },
            {
              "aria-describedby": this.id() + "_description",
              "aria-hidden": "true",
              "aria-label": this.label(),
              role: "dialog",
            }
          );
        }),
        (t.dispose = function () {
          (this.contentEl_ = null),
            (this.descEl_ = null),
            (this.previouslyActiveEl_ = null),
            n.prototype.dispose.call(this);
        }),
        (t.buildCSSClass = function () {
          return xt + " vjs-hidden " + n.prototype.buildCSSClass.call(this);
        }),
        (t.label = function () {
          return this.localize(this.options_.label || "Modal Window");
        }),
        (t.description = function () {
          var e =
            this.options_.description ||
            this.localize("This is a modal window.");
          return (
            this.closeable() &&
              (e +=
                " " +
                this.localize(
                  "This modal can be closed by pressing the Escape key or activating the close button."
                )),
            e
          );
        }),
        (t.open = function () {
          var e;
          this.opened_ ||
            ((e = this.player()),
            this.trigger("beforemodalopen"),
            (this.opened_ = !0),
            (!this.options_.fillAlways &&
              (this.hasBeenOpened_ || this.hasBeenFilled_)) ||
              this.fill(),
            (this.wasPlaying_ = !e.paused()),
            this.options_.pauseOnOpen && this.wasPlaying_ && e.pause(),
            this.on("keydown", this.handleKeyDown_),
            (this.hadControls_ = e.controls()),
            e.controls(!1),
            this.show(),
            this.conditionalFocus_(),
            this.el().setAttribute("aria-hidden", "false"),
            this.trigger("modalopen"),
            (this.hasBeenOpened_ = !0));
        }),
        (t.opened = function (e) {
          return (
            "boolean" == typeof e && this[e ? "open" : "close"](), this.opened_
          );
        }),
        (t.close = function () {
          var e;
          this.opened_ &&
            ((e = this.player()),
            this.trigger("beforemodalclose"),
            (this.opened_ = !1),
            this.wasPlaying_ && this.options_.pauseOnOpen && e.play(),
            this.off("keydown", this.handleKeyDown_),
            this.hadControls_ && e.controls(!0),
            this.hide(),
            this.el().setAttribute("aria-hidden", "true"),
            this.trigger("modalclose"),
            this.conditionalBlur_(),
            this.options_.temporary && this.dispose());
        }),
        (t.closeable = function (e) {
          var t, i;
          return (
            "boolean" == typeof e &&
              ((t = this.closeable_ = !!e),
              (i = this.getChild("closeButton")),
              t &&
                !i &&
                ((e = this.contentEl_),
                (this.contentEl_ = this.el_),
                (i = this.addChild("closeButton", {
                  controlText: "Close Modal Dialog",
                })),
                (this.contentEl_ = e),
                this.on(i, "close", this.close_)),
              !t &&
                i &&
                (this.off(i, "close", this.close_),
                this.removeChild(i),
                i.dispose())),
            this.closeable_
          );
        }),
        (t.fill = function () {
          this.fillWith(this.content());
        }),
        (t.fillWith = function (e) {
          var t = this.contentEl(),
            i = t.parentNode,
            n = t.nextSibling;
          this.trigger("beforemodalfill"),
            (this.hasBeenFilled_ = !0),
            i.removeChild(t),
            this.empty(),
            ve(t, e),
            this.trigger("modalfill"),
            n ? i.insertBefore(t, n) : i.appendChild(t);
          t = this.getChild("closeButton");
          t && i.appendChild(t.el_);
        }),
        (t.empty = function () {
          this.trigger("beforemodalempty"),
            me(this.contentEl()),
            this.trigger("modalempty");
        }),
        (t.content = function (e) {
          return "undefined" != typeof e && (this.content_ = e), this.content_;
        }),
        (t.conditionalFocus_ = function () {
          var e = document.activeElement,
            t = this.player_.el_;
          (this.previouslyActiveEl_ = null),
            (!t.contains(e) && t !== e) ||
              ((this.previouslyActiveEl_ = e), this.focus());
        }),
        (t.conditionalBlur_ = function () {
          this.previouslyActiveEl_ &&
            (this.previouslyActiveEl_.focus(),
            (this.previouslyActiveEl_ = null));
        }),
        (t.handleKeyDown = function (e) {
          if (
            (e.stopPropagation(),
            ht.isEventKey(e, "Escape") && this.closeable())
          )
            return e.preventDefault(), void this.close();
          if (ht.isEventKey(e, "Tab")) {
            for (
              var t,
                i = this.focusableEls_(),
                n = this.el_.querySelector(":focus"),
                r = 0;
              r < i.length;
              r++
            )
              if (n === i[r]) {
                t = r;
                break;
              }
            document.activeElement === this.el_ && (t = 0),
              e.shiftKey && 0 === t
                ? (i[i.length - 1].focus(), e.preventDefault())
                : e.shiftKey ||
                  t !== i.length - 1 ||
                  (i[0].focus(), e.preventDefault());
          }
        }),
        (t.focusableEls_ = function () {
          var e = this.el_.querySelectorAll("*");
          return Array.prototype.filter.call(e, function (e) {
            return (
              ((e instanceof window.HTMLAnchorElement ||
                e instanceof window.HTMLAreaElement) &&
                e.hasAttribute("href")) ||
              ((e instanceof window.HTMLInputElement ||
                e instanceof window.HTMLSelectElement ||
                e instanceof window.HTMLTextAreaElement ||
                e instanceof window.HTMLButtonElement) &&
                !e.hasAttribute("disabled")) ||
              e instanceof window.HTMLIFrameElement ||
              e instanceof window.HTMLObjectElement ||
              e instanceof window.HTMLEmbedElement ||
              (e.hasAttribute("tabindex") &&
                -1 !== e.getAttribute("tabindex")) ||
              e.hasAttribute("contenteditable")
            );
          });
        }),
        e
      );
    })(pt);
  (At.prototype.options_ = { pauseOnOpen: !0, temporary: !0 }),
    pt.registerComponent("ModalDialog", At);
  var Pt,
    Lt = (function (n) {
      function e(e) {
        var t;
        void 0 === e && (e = []),
          ((t = n.call(this) || this).tracks_ = []),
          Object.defineProperty(ft(t), "length", {
            get: function () {
              return this.tracks_.length;
            },
          });
        for (var i = 0; i < e.length; i++) t.addTrack(e[i]);
        return t;
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.addTrack = function (e) {
          var t = this,
            i = this.tracks_.length;
          "" + i in this ||
            Object.defineProperty(this, i, {
              get: function () {
                return this.tracks_[i];
              },
            }),
            -1 === this.tracks_.indexOf(e) &&
              (this.tracks_.push(e),
              this.trigger({ track: e, type: "addtrack", target: this })),
            (e.labelchange_ = function () {
              t.trigger({ track: e, type: "labelchange", target: t });
            }),
            it(e) && e.addEventListener("labelchange", e.labelchange_);
        }),
        (t.removeTrack = function (e) {
          for (var t, i = 0, n = this.length; i < n; i++)
            if (this[i] === e) {
              (t = this[i]).off && t.off(), this.tracks_.splice(i, 1);
              break;
            }
          t && this.trigger({ track: t, type: "removetrack", target: this });
        }),
        (t.getTrackById = function (e) {
          for (var t = null, i = 0, n = this.length; i < n; i++) {
            var r = this[i];
            if (r.id === e) {
              t = r;
              break;
            }
          }
          return t;
        }),
        e
      );
    })(ze);
  for (Pt in ((Lt.prototype.allowedEvents_ = {
    change: "change",
    addtrack: "addtrack",
    removetrack: "removetrack",
    labelchange: "labelchange",
  }),
  Lt.prototype.allowedEvents_))
    Lt.prototype["on" + Pt] = null;
  function Dt(e, t) {
    for (var i = 0; i < e.length; i++)
      Object.keys(e[i]).length && t.id !== e[i].id && (e[i].enabled = !1);
  }
  function Ot(e, t) {
    for (var i = 0; i < e.length; i++)
      Object.keys(e[i]).length && t.id !== e[i].id && (e[i].selected = !1);
  }
  function Rt(e) {
    var t = [
        "protocol",
        "hostname",
        "port",
        "pathname",
        "search",
        "hash",
        "host",
      ],
      i = document.createElement("a");
    i.href = e;
    for (var n = {}, r = 0; r < t.length; r++) n[t[r]] = i[t[r]];
    return (
      "http:" === n.protocol && (n.host = n.host.replace(/:80$/, "")),
      "https:" === n.protocol && (n.host = n.host.replace(/:443$/, "")),
      n.protocol || (n.protocol = window.location.protocol),
      n.host || (n.host = window.location.host),
      n
    );
  }
  function Mt(e) {
    var t;
    return (
      e.match(/^https?:\/\//) ||
        (((t = document.createElement("a")).href = e), (e = t.href)),
      e
    );
  }
  function Nt(e) {
    if ("string" == typeof e) {
      e =
        /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(
          e
        );
      if (e) return e.pop().toLowerCase();
    }
    return "";
  }
  function Ut(e, t) {
    return (
      void 0 === t && (t = window.location),
      (":" === (e = Rt(e)).protocol ? t : e).protocol + e.host !==
        t.protocol + t.host
    );
  }
  var Bt = (function (n) {
      function e(e) {
        for (var t, i = (e = void 0 === e ? [] : e).length - 1; 0 <= i; i--)
          if (e[i].enabled) {
            Dt(e, e[i]);
            break;
          }
        return ((t = n.call(this, e) || this).changing_ = !1), t;
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.addTrack = function (e) {
          var t = this;
          e.enabled && Dt(this, e),
            n.prototype.addTrack.call(this, e),
            e.addEventListener &&
              ((e.enabledChange_ = function () {
                t.changing_ ||
                  ((t.changing_ = !0),
                  Dt(t, e),
                  (t.changing_ = !1),
                  t.trigger("change"));
              }),
              e.addEventListener("enabledchange", e.enabledChange_));
        }),
        (t.removeTrack = function (e) {
          n.prototype.removeTrack.call(this, e),
            e.removeEventListener &&
              e.enabledChange_ &&
              (e.removeEventListener("enabledchange", e.enabledChange_),
              (e.enabledChange_ = null));
        }),
        e
      );
    })(Lt),
    Ft = (function (n) {
      function e(e) {
        for (var t, i = (e = void 0 === e ? [] : e).length - 1; 0 <= i; i--)
          if (e[i].selected) {
            Ot(e, e[i]);
            break;
          }
        return (
          ((t = n.call(this, e) || this).changing_ = !1),
          Object.defineProperty(ft(t), "selectedIndex", {
            get: function () {
              for (var e = 0; e < this.length; e++)
                if (this[e].selected) return e;
              return -1;
            },
            set: function () {},
          }),
          t
        );
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.addTrack = function (e) {
          var t = this;
          e.selected && Ot(this, e),
            n.prototype.addTrack.call(this, e),
            e.addEventListener &&
              ((e.selectedChange_ = function () {
                t.changing_ ||
                  ((t.changing_ = !0),
                  Ot(t, e),
                  (t.changing_ = !1),
                  t.trigger("change"));
              }),
              e.addEventListener("selectedchange", e.selectedChange_));
        }),
        (t.removeTrack = function (e) {
          n.prototype.removeTrack.call(this, e),
            e.removeEventListener &&
              e.selectedChange_ &&
              (e.removeEventListener("selectedchange", e.selectedChange_),
              (e.selectedChange_ = null));
        }),
        e
      );
    })(Lt),
    k = (function (i) {
      function e() {
        return i.apply(this, arguments) || this;
      }
      mt(e, i);
      var t = e.prototype;
      return (
        (t.addTrack = function (e) {
          var t = this;
          i.prototype.addTrack.call(this, e),
            this.queueChange_ ||
              (this.queueChange_ = function () {
                return t.queueTrigger("change");
              }),
            this.triggerSelectedlanguagechange ||
              (this.triggerSelectedlanguagechange_ = function () {
                return t.trigger("selectedlanguagechange");
              }),
            e.addEventListener("modechange", this.queueChange_);
          -1 === ["metadata", "chapters"].indexOf(e.kind) &&
            e.addEventListener(
              "modechange",
              this.triggerSelectedlanguagechange_
            );
        }),
        (t.removeTrack = function (e) {
          i.prototype.removeTrack.call(this, e),
            e.removeEventListener &&
              (this.queueChange_ &&
                e.removeEventListener("modechange", this.queueChange_),
              this.selectedlanguagechange_ &&
                e.removeEventListener(
                  "modechange",
                  this.triggerSelectedlanguagechange_
                ));
        }),
        e
      );
    })(Lt),
    jt = (function () {
      function e(e) {
        void 0 === e && (e = []),
          (this.trackElements_ = []),
          Object.defineProperty(this, "length", {
            get: function () {
              return this.trackElements_.length;
            },
          });
        for (var t = 0, i = e.length; t < i; t++) this.addTrackElement_(e[t]);
      }
      var t = e.prototype;
      return (
        (t.addTrackElement_ = function (e) {
          var t = this.trackElements_.length;
          "" + t in this ||
            Object.defineProperty(this, t, {
              get: function () {
                return this.trackElements_[t];
              },
            }),
            -1 === this.trackElements_.indexOf(e) &&
              this.trackElements_.push(e);
        }),
        (t.getTrackElementByTrack_ = function (e) {
          for (var t, i = 0, n = this.trackElements_.length; i < n; i++)
            if (e === this.trackElements_[i].track) {
              t = this.trackElements_[i];
              break;
            }
          return t;
        }),
        (t.removeTrackElement_ = function (e) {
          for (var t = 0, i = this.trackElements_.length; t < i; t++)
            if (e === this.trackElements_[t]) {
              this.trackElements_[t].track &&
                "function" == typeof this.trackElements_[t].track.off &&
                this.trackElements_[t].track.off(),
                "function" == typeof this.trackElements_[t].off &&
                  this.trackElements_[t].off(),
                this.trackElements_.splice(t, 1);
              break;
            }
        }),
        e
      );
    })(),
    Ht = (function () {
      function t(e) {
        t.prototype.setCues_.call(this, e),
          Object.defineProperty(this, "length", {
            get: function () {
              return this.length_;
            },
          });
      }
      var e = t.prototype;
      return (
        (e.setCues_ = function (e) {
          var t = this.length || 0,
            i = 0,
            n = e.length;
          (this.cues_ = e), (this.length_ = e.length);
          function r(e) {
            "" + e in this ||
              Object.defineProperty(this, "" + e, {
                get: function () {
                  return this.cues_[e];
                },
              });
          }
          if (t < n) for (i = t; i < n; i++) r.call(this, i);
        }),
        (e.getCueById = function (e) {
          for (var t = null, i = 0, n = this.length; i < n; i++) {
            var r = this[i];
            if (r.id === e) {
              t = r;
              break;
            }
          }
          return t;
        }),
        t
      );
    })(),
    qt = {
      alternative: "alternative",
      captions: "captions",
      main: "main",
      sign: "sign",
      subtitles: "subtitles",
      commentary: "commentary",
    },
    Vt = {
      alternative: "alternative",
      descriptions: "descriptions",
      main: "main",
      "main-desc": "main-desc",
      translation: "translation",
      commentary: "commentary",
    },
    Wt = {
      subtitles: "subtitles",
      captions: "captions",
      descriptions: "descriptions",
      chapters: "chapters",
      metadata: "metadata",
    },
    Gt = { disabled: "disabled", hidden: "hidden", showing: "showing" },
    C = (function (a) {
      function e(e) {
        void 0 === e && (e = {});
        var t,
          i = a.call(this) || this,
          n = {
            id: e.id || "vjs_track_" + Pe++,
            kind: e.kind || "",
            language: e.language || "",
          },
          r = e.label || "";
        for (t in n)
          !(function (e) {
            Object.defineProperty(ft(i), e, {
              get: function () {
                return n[e];
              },
              set: function () {},
            });
          })(t);
        return (
          Object.defineProperty(ft(i), "label", {
            get: function () {
              return r;
            },
            set: function (e) {
              e !== r && ((r = e), this.trigger("labelchange"));
            },
          }),
          i
        );
      }
      return mt(e, a), e;
    })(ze),
    zt = Object.freeze({
      __proto__: null,
      parseUrl: Rt,
      getAbsoluteURL: Mt,
      getFileExtension: Nt,
      isCrossOrigin: Ut,
    }),
    Xt =
      "undefined" != typeof window
        ? window
        : "undefined" != typeof f
        ? f
        : "undefined" != typeof self
        ? self
        : {},
    Kt = Xt,
    Yt = function (e) {
      if (!e) return !1;
      var t = Qt.call(e);
      return (
        "[object Function]" === t ||
        ("function" == typeof e && "[object RegExp]" !== t) ||
        ("undefined" != typeof window &&
          (e === window.setTimeout ||
            e === window.alert ||
            e === window.confirm ||
            e === window.prompt))
      );
    },
    Qt = Object.prototype.toString;
  ei.httpHandler = function (n, r) {
    return (
      void 0 === r && (r = !1),
      function (e, t, i) {
        if (e) n(e);
        else if (400 <= t.statusCode && t.statusCode <= 599) {
          e = i;
          if (r)
            if (Kt.TextDecoder) {
              t = (function (e) {
                void 0 === e && (e = "");
                return e
                  .toLowerCase()
                  .split(";")
                  .reduce(function (e, t) {
                    var i = t.split("="),
                      t = i[0],
                      i = i[1];
                    return "charset" === t.trim() ? i.trim() : e;
                  }, "utf-8");
              })(t.headers && t.headers["content-type"]);
              try {
                e = new TextDecoder(t).decode(i);
              } catch (e) {}
            } else e = String.fromCharCode.apply(null, new Uint8Array(i));
          n({ cause: e });
        } else n(null, i);
      }
    );
  };
  /**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Björklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   */
  var $t = function (e) {
      var n = {};
      return (
        e &&
          e
            .trim()
            .split("\n")
            .forEach(function (e) {
              var t = e.indexOf(":"),
                i = e.slice(0, t).trim().toLowerCase(),
                t = e.slice(t + 1).trim();
              "undefined" == typeof n[i]
                ? (n[i] = t)
                : Array.isArray(n[i])
                ? n[i].push(t)
                : (n[i] = [n[i], t]);
            }),
        n
      );
    },
    Jt = ei,
    I = ei;
  function Zt(e, t, i) {
    var n = e;
    return (
      Yt(t)
        ? ((i = t), "string" == typeof e && (n = { uri: e }))
        : (n = g({}, t, { uri: e })),
      (n.callback = i),
      n
    );
  }
  function ei(e, t, i) {
    return ti((t = Zt(e, t, i)));
  }
  function ti(n) {
    if ("undefined" == typeof n.callback)
      throw new Error("callback argument missing");
    var r = !1,
      a = function (e, t, i) {
        r || ((r = !0), n.callback(e, t, i));
      };
    function s() {
      var e = void 0,
        e =
          l.response ||
          l.responseText ||
          (function (e) {
            try {
              if ("document" === e.responseType) return e.responseXML;
              var t =
                e.responseXML &&
                "parsererror" === e.responseXML.documentElement.nodeName;
              if ("" === e.responseType && !t) return e.responseXML;
            } catch (e) {}
            return null;
          })(l);
      if (m)
        try {
          e = JSON.parse(e);
        } catch (e) {}
      return e;
    }
    function t(e) {
      return (
        clearTimeout(u),
        ((e = !(e instanceof Error)
          ? new Error("" + (e || "Unknown XMLHttpRequest Error"))
          : e).statusCode = 0),
        a(e, g)
      );
    }
    function e() {
      if (!o) {
        clearTimeout(u);
        var e =
            n.useXDR && void 0 === l.status
              ? 200
              : 1223 === l.status
              ? 204
              : l.status,
          t = g,
          i = null;
        return (
          0 !== e
            ? ((t = {
                body: s(),
                statusCode: e,
                method: d,
                headers: {},
                url: c,
                rawRequest: l,
              }),
              l.getAllResponseHeaders &&
                (t.headers = $t(l.getAllResponseHeaders())))
            : (i = new Error("Internal XMLHttpRequest Error")),
          a(i, t, t.body)
        );
      }
    }
    var i,
      o,
      u,
      l = n.xhr || null,
      c = ((l =
        l ||
        new (n.cors || n.useXDR
          ? ei.XDomainRequest
          : ei.XMLHttpRequest)()).url = n.uri || n.url),
      d = (l.method = n.method || "GET"),
      h = n.body || n.data,
      p = (l.headers = n.headers || {}),
      f = !!n.sync,
      m = !1,
      g = {
        body: void 0,
        headers: {},
        statusCode: 0,
        method: d,
        url: c,
        rawRequest: l,
      };
    if (
      ("json" in n &&
        !1 !== n.json &&
        ((m = !0),
        p.accept || p.Accept || (p.Accept = "application/json"),
        "GET" !== d &&
          "HEAD" !== d &&
          (p["content-type"] ||
            p["Content-Type"] ||
            (p["Content-Type"] = "application/json"),
          (h = JSON.stringify(!0 === n.json ? h : n.json)))),
      (l.onreadystatechange = function () {
        4 === l.readyState && setTimeout(e, 0);
      }),
      (l.onload = e),
      (l.onerror = t),
      (l.onprogress = function () {}),
      (l.onabort = function () {
        o = !0;
      }),
      (l.ontimeout = t),
      l.open(d, c, !f, n.username, n.password),
      f || (l.withCredentials = !!n.withCredentials),
      !f &&
        0 < n.timeout &&
        (u = setTimeout(function () {
          var e;
          o ||
            ((o = !0),
            l.abort("timeout"),
            ((e = new Error("XMLHttpRequest timeout")).code = "ETIMEDOUT"),
            t(e));
        }, n.timeout)),
      l.setRequestHeader)
    )
      for (i in p) p.hasOwnProperty(i) && l.setRequestHeader(i, p[i]);
    else if (
      n.headers &&
      !(function (e) {
        for (var t in e) if (e.hasOwnProperty(t)) return;
        return 1;
      })(n.headers)
    )
      throw new Error("Headers cannot be set on an XDomainRequest object");
    return (
      "responseType" in n && (l.responseType = n.responseType),
      "beforeSend" in n && "function" == typeof n.beforeSend && n.beforeSend(l),
      l.send(h || null),
      l
    );
  }
  (ei.XMLHttpRequest = Kt.XMLHttpRequest || function () {}),
    (ei.XDomainRequest =
      "withCredentials" in new ei.XMLHttpRequest()
        ? ei.XMLHttpRequest
        : Kt.XDomainRequest),
    (function (e, t) {
      for (var i = 0; i < e.length; i++) t(e[i]);
    })(["get", "put", "post", "patch", "head", "delete"], function (n) {
      ei["delete" === n ? "del" : n] = function (e, t, i) {
        return ((t = Zt(e, t, i)).method = n.toUpperCase()), ti(t);
      };
    }),
    (Jt.default = I);
  function ii(e, t) {
    var i = new window.WebVTT.Parser(
        window,
        window.vttjs,
        window.WebVTT.StringDecoder()
      ),
      n = [];
    (i.oncue = function (e) {
      t.addCue(e);
    }),
      (i.onparsingerror = function (e) {
        n.push(e);
      }),
      (i.onflush = function () {
        t.trigger({ type: "loadeddata", target: t });
      }),
      i.parse(e),
      0 < n.length &&
        (window.console &&
          window.console.groupCollapsed &&
          window.console.groupCollapsed(
            "Text Track parsing errors for " + t.src
          ),
        n.forEach(function (e) {
          return h.error(e);
        }),
        window.console && window.console.groupEnd && window.console.groupEnd()),
      i.flush();
  }
  function ni(e, n) {
    var t = { uri: e };
    (e = Ut(e)) && (t.cors = e),
      (e = "use-credentials" === n.tech_.crossOrigin()) &&
        (t.withCredentials = e),
      Jt(
        t,
        Ve(this, function (e, t, i) {
          return e
            ? h.error(e, t)
            : ((n.loaded_ = !0),
              void ("function" != typeof window.WebVTT
                ? n.tech_ &&
                  n.tech_.any(["vttjsloaded", "vttjserror"], function (e) {
                    return "vttjserror" !== e.type
                      ? ii(i, n)
                      : void h.error(
                          "vttjs failed to load, stopping trying to process " +
                            n.src
                        );
                  })
                : ii(i, n)));
        })
      );
  }
  var ri = (function (u) {
    function e(e) {
      var t;
      if (!(e = void 0 === e ? {} : e).tech)
        throw new Error("A tech was not provided.");
      var e = lt(e, {
          kind: Wt[e.kind] || "subtitles",
          language: e.language || e.srclang || "",
        }),
        i = Gt[e.mode] || "disabled",
        n = e.default;
      ("metadata" !== e.kind && "chapters" !== e.kind) || (i = "hidden"),
        ((t = u.call(this, e) || this).tech_ = e.tech),
        (t.cues_ = []),
        (t.activeCues_ = []),
        (t.preload_ = !1 !== t.tech_.preloadTextTracks);
      var r = new Ht(t.cues_),
        s = new Ht(t.activeCues_),
        o = !1,
        a = Ve(ft(t), function () {
          this.tech_.isReady_ &&
            !this.tech_.isDisposed() &&
            ((this.activeCues = this.activeCues),
            o && (this.trigger("cuechange"), (o = !1)));
        });
      return (
        t.tech_.one("dispose", function () {
          t.tech_.off("timeupdate", a);
        }),
        "disabled" !== i && t.tech_.on("timeupdate", a),
        Object.defineProperties(ft(t), {
          default: {
            get: function () {
              return n;
            },
            set: function () {},
          },
          mode: {
            get: function () {
              return i;
            },
            set: function (e) {
              Gt[e] &&
                i !== e &&
                ((i = e),
                this.preload_ ||
                  "disabled" === i ||
                  0 !== this.cues.length ||
                  ni(this.src, this),
                this.tech_.off("timeupdate", a),
                "disabled" !== i && this.tech_.on("timeupdate", a),
                this.trigger("modechange"));
            },
          },
          cues: {
            get: function () {
              return this.loaded_ ? r : null;
            },
            set: function () {},
          },
          activeCues: {
            get: function () {
              if (!this.loaded_) return null;
              if (0 === this.cues.length) return s;
              for (
                var e = this.tech_.currentTime(),
                  t = [],
                  i = 0,
                  n = this.cues.length;
                i < n;
                i++
              ) {
                var r = this.cues[i];
                ((r.startTime <= e && r.endTime >= e) ||
                  (r.startTime === r.endTime &&
                    r.startTime <= e &&
                    r.startTime + 0.5 >= e)) &&
                  t.push(r);
              }
              if (((o = !1), t.length !== this.activeCues_.length)) o = !0;
              else
                for (var a = 0; a < t.length; a++)
                  -1 === this.activeCues_.indexOf(t[a]) && (o = !0);
              return (this.activeCues_ = t), s.setCues_(this.activeCues_), s;
            },
            set: function () {},
          },
        }),
        e.src
          ? ((t.src = e.src),
            t.preload_ || (t.loaded_ = !0),
            (t.preload_ || ("subtitles" !== e.kind && "captions" !== e.kind)) &&
              ni(t.src, ft(t)))
          : (t.loaded_ = !0),
        t
      );
    }
    mt(e, u);
    var t = e.prototype;
    return (
      (t.addCue = function (e) {
        var t = e;
        if (window.vttjs && !(e instanceof window.vttjs.VTTCue)) {
          for (var i in ((t = new window.vttjs.VTTCue(
            e.startTime,
            e.endTime,
            e.text
          )),
          e))
            i in t || (t[i] = e[i]);
          (t.id = e.id), (t.originalCue_ = e);
        }
        for (var n = this.tech_.textTracks(), r = 0; r < n.length; r++)
          n[r] !== this && n[r].removeCue(t);
        this.cues_.push(t), this.cues.setCues_(this.cues_);
      }),
      (t.removeCue = function (e) {
        for (var t = this.cues_.length; t--; ) {
          var i = this.cues_[t];
          if (i === e || (i.originalCue_ && i.originalCue_ === e)) {
            this.cues_.splice(t, 1), this.cues.setCues_(this.cues_);
            break;
          }
        }
      }),
      e
    );
  })(C);
  ri.prototype.allowedEvents_ = { cuechange: "cuechange" };
  (x = (function (n) {
    function e(e) {
      var t = lt((e = void 0 === e ? {} : e), { kind: Vt[e.kind] || "" }),
        e = n.call(this, t) || this,
        i = !1;
      return (
        Object.defineProperty(ft(e), "enabled", {
          get: function () {
            return i;
          },
          set: function (e) {
            "boolean" == typeof e &&
              e !== i &&
              ((i = e), this.trigger("enabledchange"));
          },
        }),
        t.enabled && (e.enabled = t.enabled),
        (e.loaded_ = !0),
        e
      );
    }
    return mt(e, n), e;
  })(C)),
    (U = (function (n) {
      function e(e) {
        var t = lt((e = void 0 === e ? {} : e), { kind: qt[e.kind] || "" }),
          e = n.call(this, t) || this,
          i = !1;
        return (
          Object.defineProperty(ft(e), "selected", {
            get: function () {
              return i;
            },
            set: function (e) {
              "boolean" == typeof e &&
                e !== i &&
                ((i = e), this.trigger("selectedchange"));
            },
          }),
          t.selected && (e.selected = t.selected),
          e
        );
      }
      return mt(e, n), e;
    })(C)),
    (j = (function (r) {
      function e(e) {
        var t;
        void 0 === e && (e = {});
        var i = r.call(this) || this,
          n = new ri(e);
        return (
          (i.kind = n.kind),
          (i.src = n.src),
          (i.srclang = n.language),
          (i.label = n.label),
          (i.default = n.default),
          Object.defineProperties(ft(i), {
            readyState: {
              get: function () {
                return t;
              },
            },
            track: {
              get: function () {
                return n;
              },
            },
          }),
          (t = 0),
          n.addEventListener("loadeddata", function () {
            (t = 2), i.trigger({ type: "load", target: ft(i) });
          }),
          i
        );
      }
      return mt(e, r), e;
    })(ze));
  (j.prototype.allowedEvents_ = { load: "load" }),
    (j.NONE = 0),
    (j.LOADING = 1),
    (j.LOADED = 2),
    (j.ERROR = 3);
  var ai = {
    audio: { ListClass: Bt, TrackClass: x, capitalName: "Audio" },
    video: { ListClass: Ft, TrackClass: U, capitalName: "Video" },
    text: { ListClass: k, TrackClass: ri, capitalName: "Text" },
  };
  Object.keys(ai).forEach(function (e) {
    (ai[e].getterName = e + "Tracks"), (ai[e].privateName = e + "Tracks_");
  });
  var si = {
      remoteText: {
        ListClass: k,
        TrackClass: ri,
        capitalName: "RemoteText",
        getterName: "remoteTextTracks",
        privateName: "remoteTextTracks_",
      },
      remoteTextEl: {
        ListClass: jt,
        TrackClass: j,
        capitalName: "RemoteTextTrackEls",
        getterName: "remoteTextTrackEls",
        privateName: "remoteTextTrackEls_",
      },
    },
    oi = g({}, ai, si);
  (si.names = Object.keys(si)),
    (ai.names = Object.keys(ai)),
    (oi.names = [].concat(si.names).concat(ai.names));
  var ui =
      "undefined" != typeof f ? f : "undefined" != typeof window ? window : {},
    li =
      "undefined" != typeof document
        ? document
        : (li = ui["__GLOBAL_DOCUMENT_CACHE@4"]) ||
          (ui["__GLOBAL_DOCUMENT_CACHE@4"] = {}),
    Xt = li,
    ci =
      Object.create ||
      function (e) {
        if (1 !== arguments.length)
          throw new Error("Object.create shim only accepts one parameter.");
        return (di.prototype = e), new di();
      };
  function di() {}
  function hi(e, t) {
    (this.name = "ParsingError"),
      (this.code = e.code),
      (this.message = t || e.message);
  }
  function pi(e) {
    function t(e, t, i, n) {
      return 3600 * (0 | e) + 60 * (0 | t) + (0 | i) + (0 | n) / 1e3;
    }
    e = e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);
    return e
      ? e[3]
        ? t(e[1], e[2], e[3].replace(":", ""), e[4])
        : 59 < e[1]
        ? t(e[1], e[2], 0, e[4])
        : t(0, e[1], e[2], e[4])
      : null;
  }
  function fi() {
    this.values = ci(null);
  }
  function mi(e, t, i, n) {
    var r,
      a,
      s = n ? e.split(n) : [e];
    for (r in s)
      "string" == typeof s[r] &&
        2 === (a = s[r].split(i)).length &&
        t(a[0], a[1]);
  }
  function gi(t, e, s) {
    var i = t;
    function n() {
      var e = pi(t);
      if (null === e)
        throw new hi(hi.Errors.BadTimeStamp, "Malformed timestamp: " + i);
      return (t = t.replace(/^[^\sa-zA-Z-]+/, "")), e;
    }
    function r() {
      t = t.replace(/^\s+/, "");
    }
    if ((r(), (e.startTime = n()), r(), "--\x3e" !== t.substr(0, 3)))
      throw new hi(
        hi.Errors.BadTimeStamp,
        "Malformed time stamp (time stamps must be separated by '--\x3e'): " + i
      );
    (t = t.substr(3)),
      r(),
      (e.endTime = n()),
      r(),
      (function (e, t) {
        var a = new fi();
        mi(
          e,
          function (e, t) {
            switch (e) {
              case "region":
                for (var i = s.length - 1; 0 <= i; i--)
                  if (s[i].id === t) {
                    a.set(e, s[i].region);
                    break;
                  }
                break;
              case "vertical":
                a.alt(e, t, ["rl", "lr"]);
                break;
              case "line":
                var n = t.split(","),
                  r = n[0];
                a.integer(e, r),
                  a.percent(e, r) && a.set("snapToLines", !1),
                  a.alt(e, r, ["auto"]),
                  2 === n.length &&
                    a.alt("lineAlign", n[1], ["start", "center", "end"]);
                break;
              case "position":
                (n = t.split(",")),
                  a.percent(e, n[0]),
                  2 === n.length &&
                    a.alt("positionAlign", n[1], ["start", "center", "end"]);
                break;
              case "size":
                a.percent(e, t);
                break;
              case "align":
                a.alt(e, t, ["start", "center", "end", "left", "right"]);
            }
          },
          /:/,
          /\s/
        ),
          (t.region = a.get("region", null)),
          (t.vertical = a.get("vertical", ""));
        try {
          t.line = a.get("line", "auto");
        } catch (e) {}
        (t.lineAlign = a.get("lineAlign", "start")),
          (t.snapToLines = a.get("snapToLines", !0)),
          (t.size = a.get("size", 100));
        try {
          t.align = a.get("align", "center");
        } catch (e) {
          t.align = a.get("align", "middle");
        }
        try {
          t.position = a.get("position", "auto");
        } catch (e) {
          t.position = a.get(
            "position",
            { start: 0, left: 0, center: 50, middle: 50, end: 100, right: 100 },
            t.align
          );
        }
        t.positionAlign = a.get(
          "positionAlign",
          {
            start: "start",
            left: "start",
            center: "center",
            middle: "center",
            end: "end",
            right: "end",
          },
          t.align
        );
      })(t, e);
  }
  (((hi.prototype = ci(Error.prototype)).constructor = hi).Errors = {
    BadSignature: { code: 0, message: "Malformed WebVTT signature." },
    BadTimeStamp: { code: 1, message: "Malformed time stamp." },
  }),
    (fi.prototype = {
      set: function (e, t) {
        this.get(e) || "" === t || (this.values[e] = t);
      },
      get: function (e, t, i) {
        return i
          ? this.has(e)
            ? this.values[e]
            : t[i]
          : this.has(e)
          ? this.values[e]
          : t;
      },
      has: function (e) {
        return e in this.values;
      },
      alt: function (e, t, i) {
        for (var n = 0; n < i.length; ++n)
          if (t === i[n]) {
            this.set(e, t);
            break;
          }
      },
      integer: function (e, t) {
        /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10));
      },
      percent: function (e, t) {
        return (
          !!(
            t.match(/^([\d]{1,3})(\.[\d]*)?%$/) &&
            0 <= (t = parseFloat(t)) &&
            t <= 100
          ) && (this.set(e, t), !0)
        );
      },
    });
  var yi = Xt.createElement && Xt.createElement("textarea"),
    vi = {
      c: "span",
      i: "i",
      b: "b",
      u: "u",
      ruby: "ruby",
      rt: "rt",
      v: "span",
      lang: "span",
    },
    _i = {
      white: "rgba(255,255,255,1)",
      lime: "rgba(0,255,0,1)",
      cyan: "rgba(0,255,255,1)",
      red: "rgba(255,0,0,1)",
      yellow: "rgba(255,255,0,1)",
      magenta: "rgba(255,0,255,1)",
      blue: "rgba(0,0,255,1)",
      black: "rgba(0,0,0,1)",
    },
    bi = { v: "title", lang: "lang" },
    Ti = { rt: "ruby" };
  function Si(e, t) {
    for (
      var i,
        n,
        r,
        a,
        s,
        o,
        u,
        l,
        c,
        d,
        h = e.document.createElement("div"),
        p = h,
        f = [];
      null !==
      (i = (function () {
        if (!t) return null;
        var e = t.match(/^([^<]*)(<[^>]*>?)?/);
        return (e = e[1] || e[2]), (t = t.substr(e.length)), e;
      })());

    )
      "<" !== i[0]
        ? p.appendChild(
            e.document.createTextNode(
              ((s = i),
              (yi.innerHTML = s),
              (s = yi.textContent),
              (yi.textContent = ""),
              s)
            )
          )
        : "/" !== i[1]
        ? (a = pi(i.substr(1, i.length - 2)))
          ? ((n = e.document.createProcessingInstruction("timestamp", a)),
            p.appendChild(n))
          : (r = i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/)) &&
            ((l = r[1]),
            (c = r[3]),
            (d = void 0),
            (d = vi[l]),
            (n = d
              ? ((d = e.document.createElement(d)),
                (l = bi[l]) && c && (d[l] = c.trim()),
                d)
              : null) &&
              ((o = p),
              (Ti[(u = n).localName] && Ti[u.localName] !== o.localName) ||
                (r[2] &&
                  ((a = r[2].split(".")).forEach(function (e) {
                    var t = /^bg_/.test(e),
                      e = t ? e.slice(3) : e;
                    _i.hasOwnProperty(e) &&
                      ((e = _i[e]),
                      (n.style[t ? "background-color" : "color"] = e));
                  }),
                  (n.className = a.join(" "))),
                f.push(r[1]),
                p.appendChild(n),
                (p = n))))
        : f.length &&
          f[f.length - 1] === i.substr(2).replace(">", "") &&
          (f.pop(), (p = p.parentNode));
    return h;
  }
  var wi = [
    [1470, 1470],
    [1472, 1472],
    [1475, 1475],
    [1478, 1478],
    [1488, 1514],
    [1520, 1524],
    [1544, 1544],
    [1547, 1547],
    [1549, 1549],
    [1563, 1563],
    [1566, 1610],
    [1645, 1647],
    [1649, 1749],
    [1765, 1766],
    [1774, 1775],
    [1786, 1805],
    [1807, 1808],
    [1810, 1839],
    [1869, 1957],
    [1969, 1969],
    [1984, 2026],
    [2036, 2037],
    [2042, 2042],
    [2048, 2069],
    [2074, 2074],
    [2084, 2084],
    [2088, 2088],
    [2096, 2110],
    [2112, 2136],
    [2142, 2142],
    [2208, 2208],
    [2210, 2220],
    [8207, 8207],
    [64285, 64285],
    [64287, 64296],
    [64298, 64310],
    [64312, 64316],
    [64318, 64318],
    [64320, 64321],
    [64323, 64324],
    [64326, 64449],
    [64467, 64829],
    [64848, 64911],
    [64914, 64967],
    [65008, 65020],
    [65136, 65140],
    [65142, 65276],
    [67584, 67589],
    [67592, 67592],
    [67594, 67637],
    [67639, 67640],
    [67644, 67644],
    [67647, 67669],
    [67671, 67679],
    [67840, 67867],
    [67872, 67897],
    [67903, 67903],
    [67968, 68023],
    [68030, 68031],
    [68096, 68096],
    [68112, 68115],
    [68117, 68119],
    [68121, 68147],
    [68160, 68167],
    [68176, 68184],
    [68192, 68223],
    [68352, 68405],
    [68416, 68437],
    [68440, 68466],
    [68472, 68479],
    [68608, 68680],
    [126464, 126467],
    [126469, 126495],
    [126497, 126498],
    [126500, 126500],
    [126503, 126503],
    [126505, 126514],
    [126516, 126519],
    [126521, 126521],
    [126523, 126523],
    [126530, 126530],
    [126535, 126535],
    [126537, 126537],
    [126539, 126539],
    [126541, 126543],
    [126545, 126546],
    [126548, 126548],
    [126551, 126551],
    [126553, 126553],
    [126555, 126555],
    [126557, 126557],
    [126559, 126559],
    [126561, 126562],
    [126564, 126564],
    [126567, 126570],
    [126572, 126578],
    [126580, 126583],
    [126585, 126588],
    [126590, 126590],
    [126592, 126601],
    [126603, 126619],
    [126625, 126627],
    [126629, 126633],
    [126635, 126651],
    [1114109, 1114109],
  ];
  function Ei(e) {
    var t = [],
      i = "";
    if (!e || !e.childNodes) return "ltr";
    function a(e, t) {
      for (var i = t.childNodes.length - 1; 0 <= i; i--)
        e.push(t.childNodes[i]);
    }
    for (
      a(t, e);
      (i = (function e(t) {
        if (!t || !t.length) return null;
        var i = t.pop(),
          n = i.textContent || i.innerText;
        if (n) {
          var r = n.match(/^.*(\n|\r)/);
          return r ? r[(t.length = 0)] : n;
        }
        return "ruby" === i.tagName
          ? e(t)
          : i.childNodes
          ? (a(t, i), e(t))
          : void 0;
      })(t));

    )
      for (var n = 0; n < i.length; n++)
        if (
          (function (e) {
            for (var t = 0; t < wi.length; t++) {
              var i = wi[t];
              if (e >= i[0] && e <= i[1]) return 1;
            }
          })(i.charCodeAt(n))
        )
          return "rtl";
    return "ltr";
  }
  function ki() {}
  function Ci(e, t, i) {
    ki.call(this), (this.cue = t), (this.cueDiv = Si(e, t.text));
    var n = {
      color: "rgba(255, 255, 255, 1)",
      backgroundColor: "rgba(0, 0, 0, 0.8)",
      position: "relative",
      left: 0,
      right: 0,
      top: 0,
      bottom: 0,
      display: "inline",
      writingMode:
        "" === t.vertical
          ? "horizontal-tb"
          : "lr" === t.vertical
          ? "vertical-lr"
          : "vertical-rl",
      unicodeBidi: "plaintext",
    };
    this.applyStyles(n, this.cueDiv),
      (this.div = e.document.createElement("div")),
      (n = {
        direction: Ei(this.cueDiv),
        writingMode:
          "" === t.vertical
            ? "horizontal-tb"
            : "lr" === t.vertical
            ? "vertical-lr"
            : "vertical-rl",
        unicodeBidi: "plaintext",
        textAlign: "middle" === t.align ? "center" : t.align,
        font: i.font,
        whiteSpace: "pre-line",
        position: "absolute",
      }),
      this.applyStyles(n),
      this.div.appendChild(this.cueDiv);
    var r = 0;
    switch (t.positionAlign) {
      case "start":
        r = t.position;
        break;
      case "center":
        r = t.position - t.size / 2;
        break;
      case "end":
        r = t.position - t.size;
    }
    "" === t.vertical
      ? this.applyStyles({
          left: this.formatStyle(r, "%"),
          width: this.formatStyle(t.size, "%"),
        })
      : this.applyStyles({
          top: this.formatStyle(r, "%"),
          height: this.formatStyle(t.size, "%"),
        }),
      (this.move = function (e) {
        this.applyStyles({
          top: this.formatStyle(e.top, "px"),
          bottom: this.formatStyle(e.bottom, "px"),
          left: this.formatStyle(e.left, "px"),
          right: this.formatStyle(e.right, "px"),
          height: this.formatStyle(e.height, "px"),
          width: this.formatStyle(e.width, "px"),
        });
      });
  }
  function Ii(e) {
    var t, i, n, r;
    e.div &&
      ((t = e.div.offsetHeight),
      (i = e.div.offsetWidth),
      (n = e.div.offsetTop),
      (r =
        (r = e.div.childNodes) &&
        (r = r[0]) &&
        r.getClientRects &&
        r.getClientRects()),
      (e = e.div.getBoundingClientRect()),
      (r = r ? Math.max((r[0] && r[0].height) || 0, e.height / r.length) : 0)),
      (this.left = e.left),
      (this.right = e.right),
      (this.top = e.top || n),
      (this.height = e.height || t),
      (this.bottom = e.bottom || n + (e.height || t)),
      (this.width = e.width || i),
      (this.lineHeight = void 0 !== r ? r : e.lineHeight);
  }
  function xi(e, t, o, u) {
    var i,
      n = new Ii(t),
      r = t.cue,
      a = (function (e) {
        if (
          "number" == typeof e.line &&
          (e.snapToLines || (0 <= e.line && e.line <= 100))
        )
          return e.line;
        if (
          !e.track ||
          !e.track.textTrackList ||
          !e.track.textTrackList.mediaElement
        )
          return -1;
        for (
          var t = e.track, i = t.textTrackList, n = 0, r = 0;
          r < i.length && i[r] !== t;
          r++
        )
          "showing" === i[r].mode && n++;
        return -1 * ++n;
      })(r),
      s = [];
    if (r.snapToLines) {
      switch (r.vertical) {
        case "":
          (s = ["+y", "-y"]), (i = "height");
          break;
        case "rl":
          (s = ["+x", "-x"]), (i = "width");
          break;
        case "lr":
          (s = ["-x", "+x"]), (i = "width");
      }
      var l = n.lineHeight,
        c = l * Math.round(a),
        d = o[i] + l,
        h = s[0];
      Math.abs(c) > d && ((c = c < 0 ? -1 : 1), (c *= Math.ceil(d / l) * l)),
        a < 0 &&
          ((c += "" === r.vertical ? o.height : o.width), (s = s.reverse())),
        n.move(h, c);
    } else {
      var p = (n.lineHeight / o.height) * 100;
      switch (r.lineAlign) {
        case "center":
          a -= p / 2;
          break;
        case "end":
          a -= p;
      }
      switch (r.vertical) {
        case "":
          t.applyStyles({ top: t.formatStyle(a, "%") });
          break;
        case "rl":
          t.applyStyles({ left: t.formatStyle(a, "%") });
          break;
        case "lr":
          t.applyStyles({ right: t.formatStyle(a, "%") });
      }
      (s = ["+y", "-x", "+x", "-y"]), (n = new Ii(t));
    }
    n = (function (e, t) {
      for (var i, n = new Ii(e), r = 1, a = 0; a < t.length; a++) {
        for (
          ;
          e.overlapsOppositeAxis(o, t[a]) || (e.within(o) && e.overlapsAny(u));

        )
          e.move(t[a]);
        if (e.within(o)) return e;
        var s = e.intersectPercentage(o);
        s < r && ((i = new Ii(e)), (r = s)), (e = new Ii(n));
      }
      return i || n;
    })(n, s);
    t.move(n.toCSSCompatValues(o));
  }
  function Ai() {}
  (ki.prototype.applyStyles = function (e, t) {
    for (var i in ((t = t || this.div), e))
      e.hasOwnProperty(i) && (t.style[i] = e[i]);
  }),
    (ki.prototype.formatStyle = function (e, t) {
      return 0 === e ? 0 : e + t;
    }),
    ((Ci.prototype = ci(ki.prototype)).constructor = Ci),
    (Ii.prototype.move = function (e, t) {
      switch (((t = void 0 !== t ? t : this.lineHeight), e)) {
        case "+x":
          (this.left += t), (this.right += t);
          break;
        case "-x":
          (this.left -= t), (this.right -= t);
          break;
        case "+y":
          (this.top += t), (this.bottom += t);
          break;
        case "-y":
          (this.top -= t), (this.bottom -= t);
      }
    }),
    (Ii.prototype.overlaps = function (e) {
      return (
        this.left < e.right &&
        this.right > e.left &&
        this.top < e.bottom &&
        this.bottom > e.top
      );
    }),
    (Ii.prototype.overlapsAny = function (e) {
      for (var t = 0; t < e.length; t++) if (this.overlaps(e[t])) return !0;
      return !1;
    }),
    (Ii.prototype.within = function (e) {
      return (
        this.top >= e.top &&
        this.bottom <= e.bottom &&
        this.left >= e.left &&
        this.right <= e.right
      );
    }),
    (Ii.prototype.overlapsOppositeAxis = function (e, t) {
      switch (t) {
        case "+x":
          return this.left < e.left;
        case "-x":
          return this.right > e.right;
        case "+y":
          return this.top < e.top;
        case "-y":
          return this.bottom > e.bottom;
      }
    }),
    (Ii.prototype.intersectPercentage = function (e) {
      return (
        (Math.max(
          0,
          Math.min(this.right, e.right) - Math.max(this.left, e.left)
        ) *
          Math.max(
            0,
            Math.min(this.bottom, e.bottom) - Math.max(this.top, e.top)
          )) /
        (this.height * this.width)
      );
    }),
    (Ii.prototype.toCSSCompatValues = function (e) {
      return {
        top: this.top - e.top,
        bottom: e.bottom - this.bottom,
        left: this.left - e.left,
        right: e.right - this.right,
        height: this.height,
        width: this.width,
      };
    }),
    (Ii.getSimpleBoxPosition = function (e) {
      var t = e.div ? e.div.offsetHeight : e.tagName ? e.offsetHeight : 0,
        i = e.div ? e.div.offsetWidth : e.tagName ? e.offsetWidth : 0,
        n = e.div ? e.div.offsetTop : e.tagName ? e.offsetTop : 0;
      return {
        left: (e = e.div
          ? e.div.getBoundingClientRect()
          : e.tagName
          ? e.getBoundingClientRect()
          : e).left,
        right: e.right,
        top: e.top || n,
        height: e.height || t,
        bottom: e.bottom || n + (e.height || t),
        width: e.width || i,
      };
    }),
    (Ai.StringDecoder = function () {
      return {
        decode: function (e) {
          if (!e) return "";
          if ("string" != typeof e)
            throw new Error("Error - expected string data.");
          return decodeURIComponent(encodeURIComponent(e));
        },
      };
    }),
    (Ai.convertCueToDOMTree = function (e, t) {
      return e && t ? Si(e, t) : null;
    });
  (Ai.processCues = function (n, r, e) {
    if (!n || !r || !e) return null;
    for (; e.firstChild; ) e.removeChild(e.firstChild);
    var a = n.document.createElement("div");
    if (
      ((a.style.position = "absolute"),
      (a.style.left = "0"),
      (a.style.right = "0"),
      (a.style.top = "0"),
      (a.style.bottom = "0"),
      (a.style.margin = "1.5%"),
      e.appendChild(a),
      (function (e) {
        for (var t = 0; t < e.length; t++)
          if (e[t].hasBeenReset || !e[t].displayState) return 1;
      })(r))
    ) {
      var s = [],
        o = Ii.getSimpleBoxPosition(a),
        u = { font: Math.round(0.05 * o.height * 100) / 100 + "px sans-serif" };
      !(function () {
        for (var e, t, i = 0; i < r.length; i++)
          (t = r[i]),
            (e = new Ci(n, t, u)),
            a.appendChild(e.div),
            xi(0, e, o, s),
            (t.displayState = e.div),
            s.push(Ii.getSimpleBoxPosition(e));
      })();
    } else for (var t = 0; t < r.length; t++) a.appendChild(r[t].displayState);
  }),
    ((Ai.Parser = function (e, t, i) {
      i || ((i = t), (t = {})),
        (t = t || {}),
        (this.window = e),
        (this.vttjs = t),
        (this.state = "INITIAL"),
        (this.buffer = ""),
        (this.decoder = i || new TextDecoder("utf8")),
        (this.regionList = []);
    }).prototype = {
      reportOrThrowError: function (e) {
        if (!(e instanceof hi)) throw e;
        this.onparsingerror && this.onparsingerror(e);
      },
      parse: function (e) {
        var n = this;
        function t() {
          for (
            var e = n.buffer, t = 0;
            t < e.length && "\r" !== e[t] && "\n" !== e[t];

          )
            ++t;
          var i = e.substr(0, t);
          return (
            "\r" === e[t] && ++t,
            "\n" === e[t] && ++t,
            (n.buffer = e.substr(t)),
            i
          );
        }
        function i(e) {
          e.match(/X-TIMESTAMP-MAP/)
            ? mi(
                e,
                function (e, t) {
                  var i;
                  "X-TIMESTAMP-MAP" === e &&
                    ((t = t),
                    (i = new fi()),
                    mi(
                      t,
                      function (e, t) {
                        switch (e) {
                          case "MPEGT":
                            i.integer(e + "S", t);
                            break;
                          case "LOCA":
                            i.set(e + "L", pi(t));
                        }
                      },
                      /[^\d]:/,
                      /,/
                    ),
                    n.ontimestampmap &&
                      n.ontimestampmap({
                        MPEGTS: i.get("MPEGTS"),
                        LOCAL: i.get("LOCAL"),
                      }));
                },
                /=/
              )
            : mi(
                e,
                function (e, t) {
                  var r;
                  "Region" === e &&
                    ((t = t),
                    (r = new fi()),
                    mi(
                      t,
                      function (e, t) {
                        switch (e) {
                          case "id":
                            r.set(e, t);
                            break;
                          case "width":
                            r.percent(e, t);
                            break;
                          case "lines":
                            r.integer(e, t);
                            break;
                          case "regionanchor":
                          case "viewportanchor":
                            var i = t.split(",");
                            if (2 !== i.length) break;
                            var n = new fi();
                            if (
                              (n.percent("x", i[0]),
                              n.percent("y", i[1]),
                              !n.has("x") || !n.has("y"))
                            )
                              break;
                            r.set(e + "X", n.get("x")),
                              r.set(e + "Y", n.get("y"));
                            break;
                          case "scroll":
                            r.alt(e, t, ["up"]);
                        }
                      },
                      /=/,
                      /\s/
                    ),
                    r.has("id") &&
                      (((t = new (n.vttjs.VTTRegion ||
                        n.window.VTTRegion)()).width = r.get("width", 100)),
                      (t.lines = r.get("lines", 3)),
                      (t.regionAnchorX = r.get("regionanchorX", 0)),
                      (t.regionAnchorY = r.get("regionanchorY", 100)),
                      (t.viewportAnchorX = r.get("viewportanchorX", 0)),
                      (t.viewportAnchorY = r.get("viewportanchorY", 100)),
                      (t.scroll = r.get("scroll", "")),
                      n.onregion && n.onregion(t),
                      n.regionList.push({ id: r.get("id"), region: t })));
                },
                /:/
              );
        }
        e && (n.buffer += n.decoder.decode(e, { stream: !0 }));
        try {
          if ("INITIAL" === n.state) {
            if (!/\r\n|\n/.test(n.buffer)) return this;
            var r,
              a = (r = t()).match(/^WEBVTT([ \t].*)?$/);
            if (!a || !a[0]) throw new hi(hi.Errors.BadSignature);
            n.state = "HEADER";
          }
          for (var s = !1; n.buffer; ) {
            if (!/\r\n|\n/.test(n.buffer)) return this;
            switch ((s ? (s = !1) : (r = t()), n.state)) {
              case "HEADER":
                /:/.test(r) ? i(r) : r || (n.state = "ID");
                continue;
              case "NOTE":
                r || (n.state = "ID");
                continue;
              case "ID":
                if (/^NOTE($|[ \t])/.test(r)) {
                  n.state = "NOTE";
                  break;
                }
                if (!r) continue;
                n.cue = new (n.vttjs.VTTCue || n.window.VTTCue)(0, 0, "");
                try {
                  n.cue.align = "center";
                } catch (e) {
                  n.cue.align = "middle";
                }
                if (((n.state = "CUE"), -1 === r.indexOf("--\x3e"))) {
                  n.cue.id = r;
                  continue;
                }
              case "CUE":
                try {
                  gi(r, n.cue, n.regionList);
                } catch (e) {
                  n.reportOrThrowError(e), (n.cue = null), (n.state = "BADCUE");
                  continue;
                }
                n.state = "CUETEXT";
                continue;
              case "CUETEXT":
                var o = -1 !== r.indexOf("--\x3e");
                if (!r || (o && (s = !0))) {
                  n.oncue && n.oncue(n.cue), (n.cue = null), (n.state = "ID");
                  continue;
                }
                n.cue.text && (n.cue.text += "\n"),
                  (n.cue.text += r
                    .replace(/\u2028/g, "\n")
                    .replace(/u2029/g, "\n"));
                continue;
              case "BADCUE":
                r || (n.state = "ID");
                continue;
            }
          }
        } catch (e) {
          n.reportOrThrowError(e),
            "CUETEXT" === n.state && n.cue && n.oncue && n.oncue(n.cue),
            (n.cue = null),
            (n.state = "INITIAL" === n.state ? "BADWEBVTT" : "BADCUE");
        }
        return this;
      },
      flush: function () {
        var t = this;
        try {
          if (
            ((t.buffer += t.decoder.decode()),
            (!t.cue && "HEADER" !== t.state) ||
              ((t.buffer += "\n\n"), t.parse()),
            "INITIAL" === t.state)
          )
            throw new hi(hi.Errors.BadSignature);
        } catch (e) {
          t.reportOrThrowError(e);
        }
        return t.onflush && t.onflush(), this;
      },
    });
  var Pi = Ai,
    Li = { "": 1, lr: 1, rl: 1 },
    Di = {
      start: 1,
      center: 1,
      end: 1,
      left: 1,
      right: 1,
      auto: 1,
      "line-left": 1,
      "line-right": 1,
    };
  function Oi(e) {
    return "string" == typeof e && !!Di[e.toLowerCase()] && e.toLowerCase();
  }
  function Ri(e, t, i) {
    this.hasBeenReset = !1;
    var n = "",
      r = !1,
      a = e,
      s = t,
      o = i,
      u = null,
      l = "",
      c = !0,
      d = "auto",
      h = "start",
      p = "auto",
      f = "auto",
      m = 100,
      g = "center";
    Object.defineProperties(this, {
      id: {
        enumerable: !0,
        get: function () {
          return n;
        },
        set: function (e) {
          n = "" + e;
        },
      },
      pauseOnExit: {
        enumerable: !0,
        get: function () {
          return r;
        },
        set: function (e) {
          r = !!e;
        },
      },
      startTime: {
        enumerable: !0,
        get: function () {
          return a;
        },
        set: function (e) {
          if ("number" != typeof e)
            throw new TypeError("Start time must be set to a number.");
          (a = e), (this.hasBeenReset = !0);
        },
      },
      endTime: {
        enumerable: !0,
        get: function () {
          return s;
        },
        set: function (e) {
          if ("number" != typeof e)
            throw new TypeError("End time must be set to a number.");
          (s = e), (this.hasBeenReset = !0);
        },
      },
      text: {
        enumerable: !0,
        get: function () {
          return o;
        },
        set: function (e) {
          (o = "" + e), (this.hasBeenReset = !0);
        },
      },
      region: {
        enumerable: !0,
        get: function () {
          return u;
        },
        set: function (e) {
          (u = e), (this.hasBeenReset = !0);
        },
      },
      vertical: {
        enumerable: !0,
        get: function () {
          return l;
        },
        set: function (e) {
          e =
            "string" == typeof (e = e) &&
            !!Li[e.toLowerCase()] &&
            e.toLowerCase();
          if (!1 === e)
            throw new SyntaxError(
              "Vertical: an invalid or illegal direction string was specified."
            );
          (l = e), (this.hasBeenReset = !0);
        },
      },
      snapToLines: {
        enumerable: !0,
        get: function () {
          return c;
        },
        set: function (e) {
          (c = !!e), (this.hasBeenReset = !0);
        },
      },
      line: {
        enumerable: !0,
        get: function () {
          return d;
        },
        set: function (e) {
          if ("number" != typeof e && "auto" !== e)
            throw new SyntaxError(
              "Line: an invalid number or illegal string was specified."
            );
          (d = e), (this.hasBeenReset = !0);
        },
      },
      lineAlign: {
        enumerable: !0,
        get: function () {
          return h;
        },
        set: function (e) {
          e = Oi(e);
          e && ((h = e), (this.hasBeenReset = !0));
        },
      },
      position: {
        enumerable: !0,
        get: function () {
          return p;
        },
        set: function (e) {
          if (e < 0 || 100 < e)
            throw new Error("Position must be between 0 and 100.");
          (p = e), (this.hasBeenReset = !0);
        },
      },
      positionAlign: {
        enumerable: !0,
        get: function () {
          return f;
        },
        set: function (e) {
          e = Oi(e);
          e && ((f = e), (this.hasBeenReset = !0));
        },
      },
      size: {
        enumerable: !0,
        get: function () {
          return m;
        },
        set: function (e) {
          if (e < 0 || 100 < e)
            throw new Error("Size must be between 0 and 100.");
          (m = e), (this.hasBeenReset = !0);
        },
      },
      align: {
        enumerable: !0,
        get: function () {
          return g;
        },
        set: function (e) {
          e = Oi(e);
          if (!e)
            throw new SyntaxError(
              "align: an invalid or illegal alignment string was specified."
            );
          (g = e), (this.hasBeenReset = !0);
        },
      },
    }),
      (this.displayState = void 0);
  }
  Ri.prototype.getCueAsHTML = function () {
    return WebVTT.convertCueToDOMTree(window, this.text);
  };
  var Mi = Ri,
    Ni = { "": !0, up: !0 };
  function Ui(e) {
    return "number" == typeof e && 0 <= e && e <= 100;
  }
  function Bi() {
    var t = 100,
      i = 3,
      n = 0,
      r = 100,
      a = 0,
      s = 100,
      o = "";
    Object.defineProperties(this, {
      width: {
        enumerable: !0,
        get: function () {
          return t;
        },
        set: function (e) {
          if (!Ui(e)) throw new Error("Width must be between 0 and 100.");
          t = e;
        },
      },
      lines: {
        enumerable: !0,
        get: function () {
          return i;
        },
        set: function (e) {
          if ("number" != typeof e)
            throw new TypeError("Lines must be set to a number.");
          i = e;
        },
      },
      regionAnchorY: {
        enumerable: !0,
        get: function () {
          return r;
        },
        set: function (e) {
          if (!Ui(e))
            throw new Error("RegionAnchorX must be between 0 and 100.");
          r = e;
        },
      },
      regionAnchorX: {
        enumerable: !0,
        get: function () {
          return n;
        },
        set: function (e) {
          if (!Ui(e))
            throw new Error("RegionAnchorY must be between 0 and 100.");
          n = e;
        },
      },
      viewportAnchorY: {
        enumerable: !0,
        get: function () {
          return s;
        },
        set: function (e) {
          if (!Ui(e))
            throw new Error("ViewportAnchorY must be between 0 and 100.");
          s = e;
        },
      },
      viewportAnchorX: {
        enumerable: !0,
        get: function () {
          return a;
        },
        set: function (e) {
          if (!Ui(e))
            throw new Error("ViewportAnchorX must be between 0 and 100.");
          a = e;
        },
      },
      scroll: {
        enumerable: !0,
        get: function () {
          return o;
        },
        set: function (e) {
          e =
            "string" == typeof (e = e) &&
            !!Ni[e.toLowerCase()] &&
            e.toLowerCase();
          !1 === e || (o = e);
        },
      },
    });
  }
  var Fi = m(function (e) {
    e = e.exports = { WebVTT: Pi, VTTCue: Mi, VTTRegion: Bi };
    (Kt.vttjs = e), (Kt.WebVTT = e.WebVTT);
    var t = e.VTTCue,
      i = e.VTTRegion,
      n = Kt.VTTCue,
      r = Kt.VTTRegion;
    (e.shim = function () {
      (Kt.VTTCue = t), (Kt.VTTRegion = i);
    }),
      (e.restore = function () {
        (Kt.VTTCue = n), (Kt.VTTRegion = r);
      }),
      Kt.VTTCue || e.shim();
  });
  Fi.WebVTT, Fi.VTTCue, Fi.VTTRegion;
  var ji = (function (n) {
    function i(t, e) {
      var i;
      return (
        void 0 === e && (e = function () {}),
        ((t = void 0 === t ? {} : t).reportTouchActivity = !1),
        ((i = n.call(this, null, t, e) || this).onDurationChange_ = function (
          e
        ) {
          return i.onDurationChange(e);
        }),
        (i.trackProgress_ = function (e) {
          return i.trackProgress(e);
        }),
        (i.trackCurrentTime_ = function (e) {
          return i.trackCurrentTime(e);
        }),
        (i.stopTrackingCurrentTime_ = function (e) {
          return i.stopTrackingCurrentTime(e);
        }),
        (i.disposeSourceHandler_ = function (e) {
          return i.disposeSourceHandler(e);
        }),
        (i.hasStarted_ = !1),
        i.on("playing", function () {
          this.hasStarted_ = !0;
        }),
        i.on("loadstart", function () {
          this.hasStarted_ = !1;
        }),
        oi.names.forEach(function (e) {
          e = oi[e];
          t && t[e.getterName] && (i[e.privateName] = t[e.getterName]);
        }),
        i.featuresProgressEvents || i.manualProgressOn(),
        i.featuresTimeupdateEvents || i.manualTimeUpdatesOn(),
        ["Text", "Audio", "Video"].forEach(function (e) {
          !1 === t["native" + e + "Tracks"] &&
            (i["featuresNative" + e + "Tracks"] = !1);
        }),
        !1 === t.nativeCaptions || !1 === t.nativeTextTracks
          ? (i.featuresNativeTextTracks = !1)
          : (!0 !== t.nativeCaptions && !0 !== t.nativeTextTracks) ||
            (i.featuresNativeTextTracks = !0),
        i.featuresNativeTextTracks || i.emulateTextTracks(),
        (i.preloadTextTracks = !1 !== t.preloadTextTracks),
        (i.autoRemoteTextTracks_ = new oi.text.ListClass()),
        i.initTrackListeners(),
        t.nativeControlsForTouch || i.emitTapEvents(),
        i.constructor && (i.name_ = i.constructor.name || "Unknown Tech"),
        i
      );
    }
    mt(i, n);
    var e = i.prototype;
    return (
      (e.triggerSourceset = function (e) {
        var t = this;
        this.isReady_ ||
          this.one("ready", function () {
            return t.setTimeout(function () {
              return t.triggerSourceset(e);
            }, 1);
          }),
          this.trigger({ src: e, type: "sourceset" });
      }),
      (e.manualProgressOn = function () {
        this.on("durationchange", this.onDurationChange_),
          (this.manualProgress = !0),
          this.one("ready", this.trackProgress_);
      }),
      (e.manualProgressOff = function () {
        (this.manualProgress = !1),
          this.stopTrackingProgress(),
          this.off("durationchange", this.onDurationChange_);
      }),
      (e.trackProgress = function (e) {
        this.stopTrackingProgress(),
          (this.progressInterval = this.setInterval(
            Ve(this, function () {
              var e = this.bufferedPercent();
              this.bufferedPercent_ !== e && this.trigger("progress"),
                1 === (this.bufferedPercent_ = e) &&
                  this.stopTrackingProgress();
            }),
            500
          ));
      }),
      (e.onDurationChange = function (e) {
        this.duration_ = this.duration();
      }),
      (e.buffered = function () {
        return vt(0, 0);
      }),
      (e.bufferedPercent = function () {
        return _t(this.buffered(), this.duration_);
      }),
      (e.stopTrackingProgress = function () {
        this.clearInterval(this.progressInterval);
      }),
      (e.manualTimeUpdatesOn = function () {
        (this.manualTimeUpdates = !0),
          this.on("play", this.trackCurrentTime_),
          this.on("pause", this.stopTrackingCurrentTime_);
      }),
      (e.manualTimeUpdatesOff = function () {
        (this.manualTimeUpdates = !1),
          this.stopTrackingCurrentTime(),
          this.off("play", this.trackCurrentTime_),
          this.off("pause", this.stopTrackingCurrentTime_);
      }),
      (e.trackCurrentTime = function () {
        this.currentTimeInterval && this.stopTrackingCurrentTime(),
          (this.currentTimeInterval = this.setInterval(function () {
            this.trigger({
              type: "timeupdate",
              target: this,
              manuallyTriggered: !0,
            });
          }, 250));
      }),
      (e.stopTrackingCurrentTime = function () {
        this.clearInterval(this.currentTimeInterval),
          this.trigger({
            type: "timeupdate",
            target: this,
            manuallyTriggered: !0,
          });
      }),
      (e.dispose = function () {
        this.clearTracks(ai.names),
          this.manualProgress && this.manualProgressOff(),
          this.manualTimeUpdates && this.manualTimeUpdatesOff(),
          n.prototype.dispose.call(this);
      }),
      (e.clearTracks = function (e) {
        var r = this;
        (e = [].concat(e)).forEach(function (e) {
          for (var t = r[e + "Tracks"]() || [], i = t.length; i--; ) {
            var n = t[i];
            "text" === e && r.removeRemoteTextTrack(n), t.removeTrack(n);
          }
        });
      }),
      (e.cleanupAutoTextTracks = function () {
        for (var e = this.autoRemoteTextTracks_ || [], t = e.length; t--; ) {
          var i = e[t];
          this.removeRemoteTextTrack(i);
        }
      }),
      (e.reset = function () {}),
      (e.crossOrigin = function () {}),
      (e.setCrossOrigin = function () {}),
      (e.error = function (e) {
        return (
          void 0 !== e && ((this.error_ = new bt(e)), this.trigger("error")),
          this.error_
        );
      }),
      (e.played = function () {
        return this.hasStarted_ ? vt(0, 0) : vt();
      }),
      (e.play = function () {}),
      (e.setScrubbing = function () {}),
      (e.scrubbing = function () {}),
      (e.setCurrentTime = function () {
        this.manualTimeUpdates &&
          this.trigger({
            type: "timeupdate",
            target: this,
            manuallyTriggered: !0,
          });
      }),
      (e.initTrackListeners = function () {
        var r = this;
        ai.names.forEach(function (e) {
          function t() {
            r.trigger(e + "trackchange");
          }
          var i = ai[e],
            n = r[i.getterName]();
          n.addEventListener("removetrack", t),
            n.addEventListener("addtrack", t),
            r.on("dispose", function () {
              n.removeEventListener("removetrack", t),
                n.removeEventListener("addtrack", t);
            });
        });
      }),
      (e.addWebVttScript_ = function () {
        var e,
          t = this;
        window.WebVTT ||
          (document.body.contains(this.el())
            ? !this.options_["vtt.js"] && S(Fi) && 0 < Object.keys(Fi).length
              ? this.trigger("vttjsloaded")
              : (((e = document.createElement("script")).src =
                  this.options_["vtt.js"] ||
                  "https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js"),
                (e.onload = function () {
                  t.trigger("vttjsloaded");
                }),
                (e.onerror = function () {
                  t.trigger("vttjserror");
                }),
                this.on("dispose", function () {
                  (e.onload = null), (e.onerror = null);
                }),
                (window.WebVTT = !0),
                this.el().parentNode.appendChild(e))
            : this.ready(this.addWebVttScript_));
      }),
      (e.emulateTextTracks = function () {
        function t(e) {
          return n.addTrack(e.track);
        }
        function i(e) {
          return n.removeTrack(e.track);
        }
        var e = this,
          n = this.textTracks(),
          r = this.remoteTextTracks();
        r.on("addtrack", t), r.on("removetrack", i), this.addWebVttScript_();
        function a() {
          return e.trigger("texttrackchange");
        }
        function s() {
          a();
          for (var e = 0; e < n.length; e++) {
            var t = n[e];
            t.removeEventListener("cuechange", a),
              "showing" === t.mode && t.addEventListener("cuechange", a);
          }
        }
        s(),
          n.addEventListener("change", s),
          n.addEventListener("addtrack", s),
          n.addEventListener("removetrack", s),
          this.on("dispose", function () {
            r.off("addtrack", t),
              r.off("removetrack", i),
              n.removeEventListener("change", s),
              n.removeEventListener("addtrack", s),
              n.removeEventListener("removetrack", s);
            for (var e = 0; e < n.length; e++)
              n[e].removeEventListener("cuechange", a);
          });
      }),
      (e.addTextTrack = function (e, t, i) {
        if (!e)
          throw new Error("TextTrack kind is required but was not provided");
        return (function (e, t, i, n, r) {
          void 0 === r && (r = {});
          var a = e.textTracks();
          return (
            (r.kind = t),
            i && (r.label = i),
            n && (r.language = n),
            (r.tech = e),
            (r = new oi.text.TrackClass(r)),
            a.addTrack(r),
            r
          );
        })(this, e, t, i);
      }),
      (e.createRemoteTextTrack = function (e) {
        e = lt(e, { tech: this });
        return new si.remoteTextEl.TrackClass(e);
      }),
      (e.addRemoteTextTrack = function (e, t) {
        var i = this,
          n = this.createRemoteTextTrack((e = void 0 === e ? {} : e));
        return (
          !0 !== t &&
            !1 !== t &&
            (h.warn(
              'Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'
            ),
            (t = !0)),
          this.remoteTextTrackEls().addTrackElement_(n),
          this.remoteTextTracks().addTrack(n.track),
          !0 !== t &&
            this.ready(function () {
              return i.autoRemoteTextTracks_.addTrack(n.track);
            }),
          n
        );
      }),
      (e.removeRemoteTextTrack = function (e) {
        var t = this.remoteTextTrackEls().getTrackElementByTrack_(e);
        this.remoteTextTrackEls().removeTrackElement_(t),
          this.remoteTextTracks().removeTrack(e),
          this.autoRemoteTextTracks_.removeTrack(e);
      }),
      (e.getVideoPlaybackQuality = function () {
        return {};
      }),
      (e.requestPictureInPicture = function () {
        var e = this.options_.Promise || window.Promise;
        if (e) return e.reject();
      }),
      (e.disablePictureInPicture = function () {
        return !0;
      }),
      (e.setDisablePictureInPicture = function () {}),
      (e.setPoster = function () {}),
      (e.playsinline = function () {}),
      (e.setPlaysinline = function () {}),
      (e.overrideNativeAudioTracks = function () {}),
      (e.overrideNativeVideoTracks = function () {}),
      (e.canPlayType = function () {
        return "";
      }),
      (i.canPlayType = function () {
        return "";
      }),
      (i.canPlaySource = function (e, t) {
        return i.canPlayType(e.type);
      }),
      (i.isTech = function (e) {
        return e.prototype instanceof i || e instanceof i || e === i;
      }),
      (i.registerTech = function (e, t) {
        if ((i.techs_ || (i.techs_ = {}), !i.isTech(t)))
          throw new Error("Tech " + e + " must be a Tech");
        if (!i.canPlayType)
          throw new Error(
            "Techs must have a static canPlayType method on them"
          );
        if (!i.canPlaySource)
          throw new Error(
            "Techs must have a static canPlaySource method on them"
          );
        return (
          (e = ut(e)),
          (i.techs_[e] = t),
          (i.techs_[ot(e)] = t),
          "Tech" !== e && i.defaultTechOrder_.push(e),
          t
        );
      }),
      (i.getTech = function (e) {
        if (e)
          return i.techs_ && i.techs_[e]
            ? i.techs_[e]
            : ((e = ut(e)),
              window && window.videojs && window.videojs[e]
                ? (h.warn(
                    "The " +
                      e +
                      " tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"
                  ),
                  window.videojs[e])
                : void 0);
      }),
      i
    );
  })(pt);
  oi.names.forEach(function (e) {
    var t = oi[e];
    ji.prototype[t.getterName] = function () {
      return (
        (this[t.privateName] = this[t.privateName] || new t.ListClass()),
        this[t.privateName]
      );
    };
  }),
    (ji.prototype.featuresVolumeControl = !0),
    (ji.prototype.featuresMuteControl = !0),
    (ji.prototype.featuresFullscreenResize = !1),
    (ji.prototype.featuresPlaybackRate = !1),
    (ji.prototype.featuresProgressEvents = !1),
    (ji.prototype.featuresSourceset = !1),
    (ji.prototype.featuresTimeupdateEvents = !1),
    (ji.prototype.featuresNativeTextTracks = !1),
    (ji.withSourceHandlers = function (r) {
      (r.registerSourceHandler = function (e, t) {
        var i = (i = r.sourceHandlers) || (r.sourceHandlers = []);
        void 0 === t && (t = i.length), i.splice(t, 0, e);
      }),
        (r.canPlayType = function (e) {
          for (var t, i = r.sourceHandlers || [], n = 0; n < i.length; n++)
            if ((t = i[n].canPlayType(e))) return t;
          return "";
        }),
        (r.selectSourceHandler = function (e, t) {
          for (var i = r.sourceHandlers || [], n = 0; n < i.length; n++)
            if (i[n].canHandleSource(e, t)) return i[n];
          return null;
        }),
        (r.canPlaySource = function (e, t) {
          var i = r.selectSourceHandler(e, t);
          return i ? i.canHandleSource(e, t) : "";
        });
      ["seekable", "seeking", "duration"].forEach(function (e) {
        var t = this[e];
        "function" == typeof t &&
          (this[e] = function () {
            return this.sourceHandler_ && this.sourceHandler_[e]
              ? this.sourceHandler_[e].apply(this.sourceHandler_, arguments)
              : t.apply(this, arguments);
          });
      }, r.prototype),
        (r.prototype.setSource = function (e) {
          var t = r.selectSourceHandler(e, this.options_);
          t ||
            (r.nativeSourceHandler
              ? (t = r.nativeSourceHandler)
              : h.error("No source handler found for the current source.")),
            this.disposeSourceHandler(),
            this.off("dispose", this.disposeSourceHandler_),
            t !== r.nativeSourceHandler && (this.currentSource_ = e),
            (this.sourceHandler_ = t.handleSource(e, this, this.options_)),
            this.one("dispose", this.disposeSourceHandler_);
        }),
        (r.prototype.disposeSourceHandler = function () {
          this.currentSource_ &&
            (this.clearTracks(["audio", "video"]),
            (this.currentSource_ = null)),
            this.cleanupAutoTextTracks(),
            this.sourceHandler_ &&
              (this.sourceHandler_.dispose && this.sourceHandler_.dispose(),
              (this.sourceHandler_ = null));
        });
    }),
    pt.registerComponent("Tech", ji),
    ji.registerTech("Tech", ji),
    (ji.defaultTechOrder_ = []);
  var Hi = {},
    qi = {},
    Vi = {};
  function Wi(e, t, i) {
    e.setTimeout(function () {
      return (function i(n, e, r, a, s, o) {
        void 0 === n && (n = {});
        void 0 === e && (e = []);
        void 0 === s && (s = []);
        void 0 === o && (o = !1);
        var t = e,
          e = t[0],
          u = t.slice(1);
        if ("string" == typeof e) i(n, Hi[e], r, a, s, o);
        else if (e) {
          var l = Qi(a, e);
          if (!l.setSource) return s.push(l), i(n, u, r, a, s, o);
          l.setSource(b({}, n), function (e, t) {
            return e
              ? i(n, u, r, a, s, o)
              : (s.push(l),
                void i(t, n.type === t.type ? u : Hi[t.type], r, a, s, o));
          });
        } else
          u.length
            ? i(n, u, r, a, s, o)
            : o
            ? r(n, s)
            : i(n, Hi["*"], r, a, s, !0);
      })(t, Hi[t.type], i, e);
    }, 1);
  }
  function Gi(e, t, i, n) {
    void 0 === n && (n = null);
    var r = "call" + ut(i),
      r = e.reduce(Yi(r), n),
      n = r === Vi,
      r = n ? null : t[i](r);
    return (
      (function (e, t, i, n) {
        for (var r = e.length - 1; 0 <= r; r--) {
          var a = e[r];
          a[t] && a[t](n, i);
        }
      })(e, i, r, n),
      r
    );
  }
  var zi = {
      buffered: 1,
      currentTime: 1,
      duration: 1,
      muted: 1,
      played: 1,
      paused: 1,
      seekable: 1,
      volume: 1,
      ended: 1,
    },
    Xi = { setCurrentTime: 1, setMuted: 1, setVolume: 1 },
    Ki = { play: 1, pause: 1 };
  function Yi(i) {
    return function (e, t) {
      return e === Vi ? Vi : t[i] ? t[i](e) : e;
    };
  }
  function Qi(e, t) {
    var i = qi[e.id()],
      n = null;
    if (null == i) return (n = t(e)), (qi[e.id()] = [[t, n]]), n;
    for (var r = 0; r < i.length; r++) {
      var a = i[r],
        s = a[0],
        a = a[1];
      s === t && (n = a);
    }
    return null === n && ((n = t(e)), i.push([t, n])), n;
  }
  function $i(e) {
    return (e = Nt((e = void 0 === e ? "" : e))), Zi[e.toLowerCase()] || "";
  }
  function Ji(e) {
    var t;
    return (e = Array.isArray(e)
      ? ((t = []),
        e.forEach(function (e) {
          (e = Ji(e)), Array.isArray(e) ? (t = t.concat(e)) : T(e) && t.push(e);
        }),
        t)
      : "string" == typeof e && e.trim()
      ? [en({ src: e })]
      : T(e) && "string" == typeof e.src && e.src && e.src.trim()
      ? [en(e)]
      : []);
  }
  var Zi = {
    opus: "video/ogg",
    ogv: "video/ogg",
    mp4: "video/mp4",
    mov: "video/mp4",
    m4v: "video/mp4",
    mkv: "video/x-matroska",
    m4a: "audio/mp4",
    mp3: "audio/mpeg",
    aac: "audio/aac",
    caf: "audio/x-caf",
    flac: "audio/flac",
    oga: "audio/ogg",
    wav: "audio/wav",
    m3u8: "application/x-mpegURL",
    jpg: "image/jpeg",
    jpeg: "image/jpeg",
    gif: "image/gif",
    png: "image/png",
    svg: "image/svg+xml",
    webp: "image/webp",
  };
  function en(e) {
    var t;
    return e.type || ((t = $i(e.src)) && (e.type = t)), e;
  }
  I = (function (u) {
    function e(e, t, i) {
      var n = lt({ createEl: !1 }, t),
        i = u.call(this, e, n, i) || this;
      if (t.playerOptions.sources && 0 !== t.playerOptions.sources.length)
        e.src(t.playerOptions.sources);
      else
        for (var r = 0, a = t.playerOptions.techOrder; r < a.length; r++) {
          var s = ut(a[r]),
            o = ji.getTech(s);
          if ((o = !s ? pt.getComponent(s) : o) && o.isSupported()) {
            e.loadTech_(s);
            break;
          }
        }
      return i;
    }
    return mt(e, u), e;
  })(pt);
  pt.registerComponent("MediaLoader", I);
  C = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        (i.handleMouseOver_ = function (e) {
          return i.handleMouseOver(e);
        }),
        (i.handleMouseOut_ = function (e) {
          return i.handleMouseOut(e);
        }),
        (i.handleClick_ = function (e) {
          return i.handleClick(e);
        }),
        (i.handleKeyDown_ = function (e) {
          return i.handleKeyDown(e);
        }),
        i.emitTapEvents(),
        i.enable(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function (e, t, i) {
        void 0 === e && (e = "div"),
          void 0 === t && (t = {}),
          void 0 === i && (i = {}),
          (t = b({ className: this.buildCSSClass(), tabIndex: 0 }, t)),
          "button" === e &&
            h.error(
              "Creating a ClickableComponent with an HTML element of " +
                e +
                " is not supported; use a Button instead."
            ),
          (i = b({ role: "button" }, i)),
          (this.tabIndex_ = t.tabIndex);
        i = $(e, t, i);
        return (
          i.appendChild(
            $(
              "span",
              { className: "vjs-icon-placeholder" },
              { "aria-hidden": !0 }
            )
          ),
          this.createControlTextEl(i),
          i
        );
      }),
      (t.dispose = function () {
        (this.controlTextEl_ = null), n.prototype.dispose.call(this);
      }),
      (t.createControlTextEl = function (e) {
        return (
          (this.controlTextEl_ = $(
            "span",
            { className: "vjs-control-text" },
            { "aria-live": "polite" }
          )),
          e && e.appendChild(this.controlTextEl_),
          this.controlText(this.controlText_, e),
          this.controlTextEl_
        );
      }),
      (t.controlText = function (e, t) {
        if ((void 0 === t && (t = this.el()), void 0 === e))
          return this.controlText_ || "Need Text";
        var i = this.localize(e);
        (this.controlText_ = e),
          J(this.controlTextEl_, i),
          this.nonIconControl ||
            this.player_.options_.noUITitleAttributes ||
            t.setAttribute("title", i);
      }),
      (t.buildCSSClass = function () {
        return "vjs-control vjs-button " + n.prototype.buildCSSClass.call(this);
      }),
      (t.enable = function () {
        this.enabled_ ||
          ((this.enabled_ = !0),
          this.removeClass("vjs-disabled"),
          this.el_.setAttribute("aria-disabled", "false"),
          "undefined" != typeof this.tabIndex_ &&
            this.el_.setAttribute("tabIndex", this.tabIndex_),
          this.on(["tap", "click"], this.handleClick_),
          this.on("keydown", this.handleKeyDown_));
      }),
      (t.disable = function () {
        (this.enabled_ = !1),
          this.addClass("vjs-disabled"),
          this.el_.setAttribute("aria-disabled", "true"),
          "undefined" != typeof this.tabIndex_ &&
            this.el_.removeAttribute("tabIndex"),
          this.off("mouseover", this.handleMouseOver_),
          this.off("mouseout", this.handleMouseOut_),
          this.off(["tap", "click"], this.handleClick_),
          this.off("keydown", this.handleKeyDown_);
      }),
      (t.handleLanguagechange = function () {
        this.controlText(this.controlText_);
      }),
      (t.handleClick = function (e) {
        this.options_.clickHandler &&
          this.options_.clickHandler.call(this, arguments);
      }),
      (t.handleKeyDown = function (e) {
        ht.isEventKey(e, "Space") || ht.isEventKey(e, "Enter")
          ? (e.preventDefault(), e.stopPropagation(), this.trigger("click"))
          : n.prototype.handleKeyDown.call(this, e);
      }),
      e
    );
  })(pt);
  pt.registerComponent("ClickableComponent", C),
    pt.registerComponent(
      "PosterImage",
      (function (n) {
        function e(e, t) {
          var i = n.call(this, e, t) || this;
          return (
            i.update(),
            (i.update_ = function (e) {
              return i.update(e);
            }),
            e.on("posterchange", i.update_),
            i
          );
        }
        mt(e, n);
        var t = e.prototype;
        return (
          (t.dispose = function () {
            this.player().off("posterchange", this.update_),
              n.prototype.dispose.call(this);
          }),
          (t.createEl = function () {
            return $("div", { className: "vjs-poster", tabIndex: -1 });
          }),
          (t.update = function (e) {
            var t = this.player().poster();
            this.setSrc(t), t ? this.show() : this.hide();
          }),
          (t.setSrc = function (e) {
            this.el_.style.backgroundImage = e ? 'url("' + e + '")' : "";
          }),
          (t.handleClick = function (e) {
            var t;
            this.player_.controls() &&
              ((t =
                this.player_.usingPlugin("eme") &&
                this.player_.eme.sessions &&
                0 < this.player_.eme.sessions.length),
              !this.player_.tech(!0) ||
                ((N || O) && t) ||
                this.player_.tech(!0).focus(),
              this.player_.paused()
                ? Et(this.player_.play())
                : this.player_.pause());
          }),
          e
        );
      })(C)
    );
  var tn = "#222",
    nn = {
      monospace: "monospace",
      sansSerif: "sans-serif",
      serif: "serif",
      monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace',
      monospaceSerif: '"Courier New", monospace',
      proportionalSansSerif: "sans-serif",
      proportionalSerif: "serif",
      casual: '"Comic Sans MS", Impact, fantasy',
      script: '"Monotype Corsiva", cursive',
      smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif',
    };
  function rn(e, t) {
    var i;
    if (4 === e.length) i = e[1] + e[1] + e[2] + e[2] + e[3] + e[3];
    else {
      if (7 !== e.length)
        throw new Error(
          "Invalid color code provided, " +
            e +
            "; must be formatted as e.g. #f0e or #f604e2."
        );
      i = e.slice(1);
    }
    return (
      "rgba(" +
      parseInt(i.slice(0, 2), 16) +
      "," +
      parseInt(i.slice(2, 4), 16) +
      "," +
      parseInt(i.slice(4, 6), 16) +
      "," +
      t +
      ")"
    );
  }
  function an(e, t, i) {
    try {
      e.style[t] = i;
    } catch (e) {
      return;
    }
  }
  pt.registerComponent(
    "TextTrackDisplay",
    (function (a) {
      function e(i, e, t) {
        function n(e) {
          return r.updateDisplay(e);
        }
        var r = a.call(this, i, e, t) || this;
        return (
          i.on("loadstart", function (e) {
            return r.toggleDisplay(e);
          }),
          i.on("texttrackchange", n),
          i.on("loadedmetadata", function (e) {
            return r.preselectTrack(e);
          }),
          i.ready(
            Ve(ft(r), function () {
              if (i.tech_ && i.tech_.featuresNativeTextTracks) this.hide();
              else {
                i.on("fullscreenchange", n),
                  i.on("playerresize", n),
                  window.addEventListener("orientationchange", n),
                  i.on("dispose", function () {
                    return window.removeEventListener("orientationchange", n);
                  });
                for (
                  var e = this.options_.playerOptions.tracks || [], t = 0;
                  t < e.length;
                  t++
                )
                  this.player_.addRemoteTextTrack(e[t], !0);
                this.preselectTrack();
              }
            })
          ),
          r
        );
      }
      mt(e, a);
      var t = e.prototype;
      return (
        (t.preselectTrack = function () {
          for (
            var e,
              t,
              i,
              n = { captions: 1, subtitles: 1 },
              r = this.player_.textTracks(),
              a = this.player_.cache_.selectedLanguage,
              s = 0;
            s < r.length;
            s++
          ) {
            var o = r[s];
            a &&
            a.enabled &&
            a.language &&
            a.language === o.language &&
            o.kind in n
              ? (i = (o.kind !== a.kind && i) || o)
              : a && !a.enabled
              ? (t = e = i = null)
              : o.default &&
                ("descriptions" !== o.kind || e
                  ? o.kind in n && !t && (t = o)
                  : (e = o));
          }
          i
            ? (i.mode = "showing")
            : t
            ? (t.mode = "showing")
            : e && (e.mode = "showing");
        }),
        (t.toggleDisplay = function () {
          this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks
            ? this.hide()
            : this.show();
        }),
        (t.createEl = function () {
          return a.prototype.createEl.call(
            this,
            "div",
            { className: "vjs-text-track-display" },
            { translate: "yes", "aria-live": "off", "aria-atomic": "true" }
          );
        }),
        (t.clearDisplay = function () {
          "function" == typeof window.WebVTT &&
            window.WebVTT.processCues(window, [], this.el_);
        }),
        (t.updateDisplay = function () {
          var e = this.player_.textTracks(),
            t = this.options_.allowMultipleShowingTracks;
          if ((this.clearDisplay(), t)) {
            for (var i = [], n = 0; n < e.length; ++n) {
              var r = e[n];
              "showing" === r.mode && i.push(r);
            }
            this.updateForTrack(i);
          } else {
            for (var a = null, s = null, o = e.length; o--; ) {
              var u = e[o];
              "showing" === u.mode &&
                ("descriptions" === u.kind ? (a = u) : (s = u));
            }
            s
              ? ("off" !== this.getAttribute("aria-live") &&
                  this.setAttribute("aria-live", "off"),
                this.updateForTrack(s))
              : a &&
                ("assertive" !== this.getAttribute("aria-live") &&
                  this.setAttribute("aria-live", "assertive"),
                this.updateForTrack(a));
          }
        }),
        (t.updateDisplayState = function (e) {
          for (
            var t = this.player_.textTrackSettings.getValues(),
              i = e.activeCues,
              n = i.length;
            n--;

          ) {
            var r,
              a = i[n];
            a &&
              ((r = a.displayState),
              t.color && (r.firstChild.style.color = t.color),
              t.textOpacity &&
                an(r.firstChild, "color", rn(t.color || "#fff", t.textOpacity)),
              t.backgroundColor &&
                (r.firstChild.style.backgroundColor = t.backgroundColor),
              t.backgroundOpacity &&
                an(
                  r.firstChild,
                  "backgroundColor",
                  rn(t.backgroundColor || "#000", t.backgroundOpacity)
                ),
              t.windowColor &&
                (t.windowOpacity
                  ? an(r, "backgroundColor", rn(t.windowColor, t.windowOpacity))
                  : (r.style.backgroundColor = t.windowColor)),
              t.edgeStyle &&
                ("dropshadow" === t.edgeStyle
                  ? (r.firstChild.style.textShadow =
                      "2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px " + tn)
                  : "raised" === t.edgeStyle
                  ? (r.firstChild.style.textShadow =
                      "1px 1px #222, 2px 2px #222, 3px 3px " + tn)
                  : "depressed" === t.edgeStyle
                  ? (r.firstChild.style.textShadow =
                      "1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px " + tn)
                  : "uniform" === t.edgeStyle &&
                    (r.firstChild.style.textShadow =
                      "0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px " +
                      tn)),
              t.fontPercent &&
                1 !== t.fontPercent &&
                ((a = window.parseFloat(r.style.fontSize)),
                (r.style.fontSize = a * t.fontPercent + "px"),
                (r.style.height = "auto"),
                (r.style.top = "auto")),
              t.fontFamily &&
                "default" !== t.fontFamily &&
                ("small-caps" === t.fontFamily
                  ? (r.firstChild.style.fontVariant = "small-caps")
                  : (r.firstChild.style.fontFamily = nn[t.fontFamily])));
          }
        }),
        (t.updateForTrack = function (e) {
          if (
            (Array.isArray(e) || (e = [e]),
            "function" == typeof window.WebVTT &&
              !e.every(function (e) {
                return !e.activeCues;
              }))
          ) {
            for (var t = [], i = 0; i < e.length; ++i)
              for (var n = e[i], r = 0; r < n.activeCues.length; ++r)
                t.push(n.activeCues[r]);
            window.WebVTT.processCues(window, t, this.el_);
            for (var a = 0; a < e.length; ++a) {
              for (var s = e[a], o = 0; o < s.activeCues.length; ++o) {
                var u = s.activeCues[o].displayState;
                te(u, "vjs-text-track-cue"),
                  te(u, "vjs-text-track-cue-" + (s.language || a)),
                  s.language && oe(u, "lang", s.language);
              }
              this.player_.textTrackSettings && this.updateDisplayState(s);
            }
          }
        }),
        e
      );
    })(pt)
  ),
    pt.registerComponent(
      "LoadingSpinner",
      (function (i) {
        function e() {
          return i.apply(this, arguments) || this;
        }
        return (
          mt(e, i),
          (e.prototype.createEl = function () {
            var e = this.player_.isAudio(),
              t = this.localize(e ? "Audio Player" : "Video Player"),
              e = $("span", {
                className: "vjs-control-text",
                textContent: this.localize("{1} is loading.", [t]),
              }),
              t = i.prototype.createEl.call(this, "div", {
                className: "vjs-loading-spinner",
                dir: "ltr",
              });
            return t.appendChild(e), t;
          }),
          e
        );
      })(pt)
    );
  var sn = (function (t) {
    function e() {
      return t.apply(this, arguments) || this;
    }
    mt(e, t);
    var i = e.prototype;
    return (
      (i.createEl = function (e, t, i) {
        void 0 === t && (t = {}), void 0 === i && (i = {});
        i = $(
          "button",
          (t = b({ className: this.buildCSSClass() }, t)),
          (i = b({ type: "button" }, i))
        );
        return (
          i.appendChild(
            $(
              "span",
              { className: "vjs-icon-placeholder" },
              { "aria-hidden": !0 }
            )
          ),
          this.createControlTextEl(i),
          i
        );
      }),
      (i.addChild = function (e, t) {
        void 0 === t && (t = {});
        var i = this.constructor.name;
        return (
          h.warn(
            "Adding an actionable (user controllable) child to a Button (" +
              i +
              ") is not supported; use a ClickableComponent instead."
          ),
          pt.prototype.addChild.call(this, e, t)
        );
      }),
      (i.enable = function () {
        t.prototype.enable.call(this), this.el_.removeAttribute("disabled");
      }),
      (i.disable = function () {
        t.prototype.disable.call(this),
          this.el_.setAttribute("disabled", "disabled");
      }),
      (i.handleKeyDown = function (e) {
        ht.isEventKey(e, "Space") || ht.isEventKey(e, "Enter")
          ? e.stopPropagation()
          : t.prototype.handleKeyDown.call(this, e);
      }),
      e
    );
  })(C);
  pt.registerComponent("Button", sn);
  Bt = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        (i.mouseused_ = !1),
        i.on("mousedown", function (e) {
          return i.handleMouseDown(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-big-play-button";
      }),
      (t.handleClick = function (e) {
        var t = this.player_.play();
        if (this.mouseused_ && e.clientX && e.clientY) {
          var i =
            this.player_.usingPlugin("eme") &&
            this.player_.eme.sessions &&
            0 < this.player_.eme.sessions.length;
          return (
            Et(t),
            void (
              !this.player_.tech(!0) ||
              ((N || O) && i) ||
              this.player_.tech(!0).focus()
            )
          );
        }
        var i = this.player_.getChild("controlBar"),
          n = i && i.getChild("playToggle");
        n
          ? ((i = function () {
              return n.focus();
            }),
            wt(t) ? t.then(i, function () {}) : this.setTimeout(i, 1))
          : this.player_.tech(!0).focus();
      }),
      (t.handleKeyDown = function (e) {
        (this.mouseused_ = !1), n.prototype.handleKeyDown.call(this, e);
      }),
      (t.handleMouseDown = function (e) {
        this.mouseused_ = !0;
      }),
      e
    );
  })(sn);
  (Bt.prototype.controlText_ = "Play Video"),
    pt.registerComponent("BigPlayButton", Bt),
    pt.registerComponent(
      "CloseButton",
      (function (i) {
        function e(e, t) {
          e = i.call(this, e, t) || this;
          return e.controlText((t && t.controlText) || e.localize("Close")), e;
        }
        mt(e, i);
        var t = e.prototype;
        return (
          (t.buildCSSClass = function () {
            return "vjs-close-button " + i.prototype.buildCSSClass.call(this);
          }),
          (t.handleClick = function (e) {
            this.trigger({ type: "close", bubbles: !1 });
          }),
          (t.handleKeyDown = function (e) {
            ht.isEventKey(e, "Esc")
              ? (e.preventDefault(), e.stopPropagation(), this.trigger("click"))
              : i.prototype.handleKeyDown.call(this, e);
          }),
          e
        );
      })(sn)
    );
  Ft = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, (t = void 0 === t ? {} : t)) || this;
      return (
        (t.replay = void 0 === t.replay || t.replay),
        i.on(e, "play", function (e) {
          return i.handlePlay(e);
        }),
        i.on(e, "pause", function (e) {
          return i.handlePause(e);
        }),
        t.replay &&
          i.on(e, "ended", function (e) {
            return i.handleEnded(e);
          }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-play-control " + n.prototype.buildCSSClass.call(this);
      }),
      (t.handleClick = function (e) {
        this.player_.paused() ? Et(this.player_.play()) : this.player_.pause();
      }),
      (t.handleSeeked = function (e) {
        this.removeClass("vjs-ended"),
          this.player_.paused() ? this.handlePause(e) : this.handlePlay(e);
      }),
      (t.handlePlay = function (e) {
        this.removeClass("vjs-ended"),
          this.removeClass("vjs-paused"),
          this.addClass("vjs-playing"),
          this.controlText("Pause");
      }),
      (t.handlePause = function (e) {
        this.removeClass("vjs-playing"),
          this.addClass("vjs-paused"),
          this.controlText("Play");
      }),
      (t.handleEnded = function (e) {
        var t = this;
        this.removeClass("vjs-playing"),
          this.addClass("vjs-ended"),
          this.controlText("Replay"),
          this.one(this.player_, "seeked", function (e) {
            return t.handleSeeked(e);
          });
      }),
      e
    );
  })(sn);
  (Ft.prototype.controlText_ = "Play"), pt.registerComponent("PlayToggle", Ft);
  function on(e, t) {
    e = e < 0 ? 0 : e;
    var i = Math.floor(e % 60),
      n = Math.floor((e / 60) % 60),
      r = Math.floor(e / 3600),
      a = Math.floor((t / 60) % 60),
      t = Math.floor(t / 3600);
    return (
      (r =
        0 < (r = isNaN(e) || e === 1 / 0 ? (n = i = "-") : r) || 0 < t
          ? r + ":"
          : "") +
      (n = ((r || 10 <= a) && n < 10 ? "0" + n : n) + ":") +
      (i = i < 10 ? "0" + i : i)
    );
  }
  var un = on;
  function ln(e, t) {
    return un(e, (t = void 0 === t ? e : t));
  }
  k = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on(e, ["timeupdate", "ended"], function (e) {
          return i.updateContent(e);
        }),
        i.updateTextNode_(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        var e = this.buildCSSClass(),
          t = n.prototype.createEl.call(this, "div", {
            className: e + " vjs-time-control vjs-control",
          }),
          i = $(
            "span",
            {
              className: "vjs-control-text",
              textContent: this.localize(this.labelText_) + " ",
            },
            { role: "presentation" }
          );
        return (
          t.appendChild(i),
          (this.contentEl_ = $(
            "span",
            { className: e + "-display" },
            { "aria-live": "off", role: "presentation" }
          )),
          t.appendChild(this.contentEl_),
          t
        );
      }),
      (t.dispose = function () {
        (this.contentEl_ = null),
          (this.textNode_ = null),
          n.prototype.dispose.call(this);
      }),
      (t.updateTextNode_ = function (e) {
        var t = this;
        (e = ln((e = void 0 === e ? 0 : e))),
          this.formattedTime_ !== e &&
            ((this.formattedTime_ = e),
            this.requestNamedAnimationFrame(
              "TimeDisplay#updateTextNode_",
              function () {
                var e;
                t.contentEl_ &&
                  ((e = t.textNode_) &&
                    t.contentEl_.firstChild !== e &&
                    ((e = null),
                    h.warn(
                      "TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."
                    )),
                  (t.textNode_ = document.createTextNode(t.formattedTime_)),
                  t.textNode_ &&
                    (e
                      ? t.contentEl_.replaceChild(t.textNode_, e)
                      : t.contentEl_.appendChild(t.textNode_)));
              }
            ));
      }),
      (t.updateContent = function (e) {}),
      e
    );
  })(pt);
  (k.prototype.labelText_ = "Time"),
    (k.prototype.controlText_ = "Time"),
    pt.registerComponent("TimeDisplay", k);
  jt = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    mt(t, e);
    var i = t.prototype;
    return (
      (i.buildCSSClass = function () {
        return "vjs-current-time";
      }),
      (i.updateContent = function (e) {
        var t = this.player_.ended()
          ? this.player_.duration()
          : this.player_.scrubbing()
          ? this.player_.getCache().currentTime
          : this.player_.currentTime();
        this.updateTextNode_(t);
      }),
      t
    );
  })(k);
  (jt.prototype.labelText_ = "Current Time"),
    (jt.prototype.controlText_ = "Current Time"),
    pt.registerComponent("CurrentTimeDisplay", jt);
  j = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this,
        t = function (e) {
          return i.updateContent(e);
        };
      return (
        i.on(e, "durationchange", t),
        i.on(e, "loadstart", t),
        i.on(e, "loadedmetadata", t),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-duration";
      }),
      (t.updateContent = function (e) {
        var t = this.player_.duration();
        this.updateTextNode_(t);
      }),
      e
    );
  })(k);
  (j.prototype.labelText_ = "Duration"),
    (j.prototype.controlText_ = "Duration"),
    pt.registerComponent("DurationDisplay", j),
    pt.registerComponent(
      "TimeDivider",
      (function (n) {
        function e() {
          return n.apply(this, arguments) || this;
        }
        return (
          mt(e, n),
          (e.prototype.createEl = function () {
            var e = n.prototype.createEl.call(
                this,
                "div",
                { className: "vjs-time-control vjs-time-divider" },
                { "aria-hidden": !0 }
              ),
              t = n.prototype.createEl.call(this, "div"),
              i = n.prototype.createEl.call(this, "span", { textContent: "/" });
            return t.appendChild(i), e.appendChild(t), e;
          }),
          e
        );
      })(pt)
    );
  f = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on(e, "durationchange", function (e) {
          return i.updateContent(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-remaining-time";
      }),
      (t.createEl = function () {
        var e = n.prototype.createEl.call(this);
        return (
          !1 !== this.options_.displayNegative &&
            e.insertBefore(
              $("span", {}, { "aria-hidden": !0 }, "-"),
              this.contentEl_
            ),
          e
        );
      }),
      (t.updateContent = function (e) {
        var t;
        "number" == typeof this.player_.duration() &&
          ((t = this.player_.ended()
            ? 0
            : this.player_.remainingTimeDisplay
            ? this.player_.remainingTimeDisplay()
            : this.player_.remainingTime()),
          this.updateTextNode_(t));
      }),
      e
    );
  })(k);
  (f.prototype.labelText_ = "Remaining Time"),
    (f.prototype.controlText_ = "Remaining Time"),
    pt.registerComponent("RemainingTimeDisplay", f),
    pt.registerComponent(
      "LiveDisplay",
      (function (n) {
        function e(e, t) {
          var i = n.call(this, e, t) || this;
          return (
            i.updateShowing(),
            i.on(i.player(), "durationchange", function (e) {
              return i.updateShowing(e);
            }),
            i
          );
        }
        mt(e, n);
        var t = e.prototype;
        return (
          (t.createEl = function () {
            var e = n.prototype.createEl.call(this, "div", {
              className: "vjs-live-control vjs-control",
            });
            return (
              (this.contentEl_ = $(
                "div",
                { className: "vjs-live-display" },
                { "aria-live": "off" }
              )),
              this.contentEl_.appendChild(
                $("span", {
                  className: "vjs-control-text",
                  textContent: this.localize("Stream Type") + " ",
                })
              ),
              this.contentEl_.appendChild(
                document.createTextNode(this.localize("LIVE"))
              ),
              e.appendChild(this.contentEl_),
              e
            );
          }),
          (t.dispose = function () {
            (this.contentEl_ = null), n.prototype.dispose.call(this);
          }),
          (t.updateShowing = function (e) {
            this.player().duration() === 1 / 0 ? this.show() : this.hide();
          }),
          e
        );
      })(pt)
    );
  ui = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.updateLiveEdgeStatus(),
        i.player_.liveTracker &&
          ((i.updateLiveEdgeStatusHandler_ = function (e) {
            return i.updateLiveEdgeStatus(e);
          }),
          i.on(
            i.player_.liveTracker,
            "liveedgechange",
            i.updateLiveEdgeStatusHandler_
          )),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        var e = n.prototype.createEl.call(this, "button", {
          className: "vjs-seek-to-live-control vjs-control",
        });
        return (
          (this.textEl_ = $(
            "span",
            {
              className: "vjs-seek-to-live-text",
              textContent: this.localize("LIVE"),
            },
            { "aria-hidden": "true" }
          )),
          e.appendChild(this.textEl_),
          e
        );
      }),
      (t.updateLiveEdgeStatus = function () {
        !this.player_.liveTracker || this.player_.liveTracker.atLiveEdge()
          ? (this.setAttribute("aria-disabled", !0),
            this.addClass("vjs-at-live-edge"),
            this.controlText("Seek to live, currently playing live"))
          : (this.setAttribute("aria-disabled", !1),
            this.removeClass("vjs-at-live-edge"),
            this.controlText("Seek to live, currently behind live"));
      }),
      (t.handleClick = function () {
        this.player_.liveTracker.seekToLiveEdge();
      }),
      (t.dispose = function () {
        this.player_.liveTracker &&
          this.off(
            this.player_.liveTracker,
            "liveedgechange",
            this.updateLiveEdgeStatusHandler_
          ),
          (this.textEl_ = null),
          n.prototype.dispose.call(this);
      }),
      e
    );
  })(sn);
  (ui.prototype.controlText_ = "Seek to live, currently playing live"),
    pt.registerComponent("SeekToLive", ui);
  function cn(e, t, i) {
    return (e = Number(e)), Math.min(i, Math.max(t, isNaN(e) ? t : e));
  }
  li = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        (i.handleMouseDown_ = function (e) {
          return i.handleMouseDown(e);
        }),
        (i.handleMouseUp_ = function (e) {
          return i.handleMouseUp(e);
        }),
        (i.handleKeyDown_ = function (e) {
          return i.handleKeyDown(e);
        }),
        (i.handleClick_ = function (e) {
          return i.handleClick(e);
        }),
        (i.handleMouseMove_ = function (e) {
          return i.handleMouseMove(e);
        }),
        (i.update_ = function (e) {
          return i.update(e);
        }),
        (i.bar = i.getChild(i.options_.barName)),
        i.vertical(!!i.options_.vertical),
        i.enable(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.enabled = function () {
        return this.enabled_;
      }),
      (t.enable = function () {
        this.enabled() ||
          (this.on("mousedown", this.handleMouseDown_),
          this.on("touchstart", this.handleMouseDown_),
          this.on("keydown", this.handleKeyDown_),
          this.on("click", this.handleClick_),
          this.on(this.player_, "controlsvisible", this.update),
          this.playerEvent &&
            this.on(this.player_, this.playerEvent, this.update),
          this.removeClass("disabled"),
          this.setAttribute("tabindex", 0),
          (this.enabled_ = !0));
      }),
      (t.disable = function () {
        var e;
        this.enabled() &&
          ((e = this.bar.el_.ownerDocument),
          this.off("mousedown", this.handleMouseDown_),
          this.off("touchstart", this.handleMouseDown_),
          this.off("keydown", this.handleKeyDown_),
          this.off("click", this.handleClick_),
          this.off(this.player_, "controlsvisible", this.update_),
          this.off(e, "mousemove", this.handleMouseMove_),
          this.off(e, "mouseup", this.handleMouseUp_),
          this.off(e, "touchmove", this.handleMouseMove_),
          this.off(e, "touchend", this.handleMouseUp_),
          this.removeAttribute("tabindex"),
          this.addClass("disabled"),
          this.playerEvent &&
            this.off(this.player_, this.playerEvent, this.update),
          (this.enabled_ = !1));
      }),
      (t.createEl = function (e, t, i) {
        return (
          void 0 === i && (i = {}),
          ((t = void 0 === t ? {} : t).className = t.className + " vjs-slider"),
          (t = b({ tabIndex: 0 }, t)),
          (i = b(
            {
              role: "slider",
              "aria-valuenow": 0,
              "aria-valuemin": 0,
              "aria-valuemax": 100,
              tabIndex: 0,
            },
            i
          )),
          n.prototype.createEl.call(this, e, t, i)
        );
      }),
      (t.handleMouseDown = function (e) {
        var t = this.bar.el_.ownerDocument;
        "mousedown" === e.type && e.preventDefault(),
          "touchstart" !== e.type || R || e.preventDefault(),
          le(),
          this.addClass("vjs-sliding"),
          this.trigger("slideractive"),
          this.on(t, "mousemove", this.handleMouseMove_),
          this.on(t, "mouseup", this.handleMouseUp_),
          this.on(t, "touchmove", this.handleMouseMove_),
          this.on(t, "touchend", this.handleMouseUp_),
          this.handleMouseMove(e, !0);
      }),
      (t.handleMouseMove = function (e) {}),
      (t.handleMouseUp = function () {
        var e = this.bar.el_.ownerDocument;
        ce(),
          this.removeClass("vjs-sliding"),
          this.trigger("sliderinactive"),
          this.off(e, "mousemove", this.handleMouseMove_),
          this.off(e, "mouseup", this.handleMouseUp_),
          this.off(e, "touchmove", this.handleMouseMove_),
          this.off(e, "touchend", this.handleMouseUp_),
          this.update();
      }),
      (t.update = function () {
        var t = this;
        if (this.el_ && this.bar) {
          var i = this.getProgress();
          return i === this.progress_
            ? i
            : ((this.progress_ = i),
              this.requestNamedAnimationFrame("Slider#update", function () {
                var e = t.vertical() ? "height" : "width";
                t.bar.el().style[e] = (100 * i).toFixed(2) + "%";
              }),
              i);
        }
      }),
      (t.getProgress = function () {
        return Number(cn(this.getPercent(), 0, 1).toFixed(4));
      }),
      (t.calculateDistance = function (e) {
        e = pe(this.el_, e);
        return this.vertical() ? e.y : e.x;
      }),
      (t.handleKeyDown = function (e) {
        ht.isEventKey(e, "Left") || ht.isEventKey(e, "Down")
          ? (e.preventDefault(), e.stopPropagation(), this.stepBack())
          : ht.isEventKey(e, "Right") || ht.isEventKey(e, "Up")
          ? (e.preventDefault(), e.stopPropagation(), this.stepForward())
          : n.prototype.handleKeyDown.call(this, e);
      }),
      (t.handleClick = function (e) {
        e.stopPropagation(), e.preventDefault();
      }),
      (t.vertical = function (e) {
        if (void 0 === e) return this.vertical_ || !1;
        (this.vertical_ = !!e),
          this.vertical_
            ? this.addClass("vjs-slider-vertical")
            : this.addClass("vjs-slider-horizontal");
      }),
      e
    );
  })(pt);
  pt.registerComponent("Slider", li);
  function dn(e, t) {
    return cn((e / t) * 100, 0, 100).toFixed(2) + "%";
  }
  pt.registerComponent(
    "LoadProgressBar",
    (function (r) {
      function e(e, t) {
        var i = r.call(this, e, t) || this;
        return (
          (i.partEls_ = []),
          i.on(e, "progress", function (e) {
            return i.update(e);
          }),
          i
        );
      }
      mt(e, r);
      var t = e.prototype;
      return (
        (t.createEl = function () {
          var e = r.prototype.createEl.call(this, "div", {
              className: "vjs-load-progress",
            }),
            t = $("span", { className: "vjs-control-text" }),
            i = $("span", { textContent: this.localize("Loaded") }),
            n = document.createTextNode(": ");
          return (
            (this.percentageEl_ = $("span", {
              className: "vjs-control-text-loaded-percentage",
              textContent: "0%",
            })),
            e.appendChild(t),
            t.appendChild(i),
            t.appendChild(n),
            t.appendChild(this.percentageEl_),
            e
          );
        }),
        (t.dispose = function () {
          (this.partEls_ = null),
            (this.percentageEl_ = null),
            r.prototype.dispose.call(this);
        }),
        (t.update = function (e) {
          var l = this;
          this.requestNamedAnimationFrame(
            "LoadProgressBar#update",
            function () {
              var e = l.player_.liveTracker,
                t = l.player_.buffered(),
                e = e && e.isLive() ? e.seekableEnd() : l.player_.duration(),
                i = l.player_.bufferedEnd(),
                n = l.partEls_,
                e = dn(i, e);
              l.percent_ !== e &&
                ((l.el_.style.width = e),
                J(l.percentageEl_, e),
                (l.percent_ = e));
              for (var r = 0; r < t.length; r++) {
                var a = t.start(r),
                  s = t.end(r),
                  o = n[r];
                o || ((o = l.el_.appendChild($())), (n[r] = o)),
                  (o.dataset.start === a && o.dataset.end === s) ||
                    ((o.dataset.start = a),
                    (o.dataset.end = s),
                    (o.style.left = dn(a, i)),
                    (o.style.width = dn(s - a, i)));
              }
              for (var u = n.length; u > t.length; u--)
                l.el_.removeChild(n[u - 1]);
              n.length = t.length;
            }
          );
        }),
        e
      );
    })(pt)
  ),
    pt.registerComponent(
      "TimeTooltip",
      (function (i) {
        function e(e, t) {
          t = i.call(this, e, t) || this;
          return (t.update = We(Ve(ft(t), t.update), 30)), t;
        }
        mt(e, i);
        var t = e.prototype;
        return (
          (t.createEl = function () {
            return i.prototype.createEl.call(
              this,
              "div",
              { className: "vjs-time-tooltip" },
              { "aria-hidden": "true" }
            );
          }),
          (t.update = function (e, t, i) {
            var n = he(this.el_),
              r = de(this.player_.el()),
              a = e.width * t;
            r &&
              n &&
              ((t = e.left - r.left + a),
              (r = e.width - a + (r.right - e.right)),
              t < (e = n.width / 2) ? (e += e - t) : r < e && (e = r),
              e < 0 ? (e = 0) : e > n.width && (e = n.width),
              (e = Math.round(e)),
              (this.el_.style.right = "-" + e + "px"),
              this.write(i));
          }),
          (t.write = function (e) {
            J(this.el_, e);
          }),
          (t.updateTime = function (n, r, a, s) {
            var o = this;
            this.requestNamedAnimationFrame(
              "TimeTooltip#updateTime",
              function () {
                var e,
                  t,
                  i = o.player_.duration();
                (i =
                  o.player_.liveTracker && o.player_.liveTracker.isLive()
                    ? ((t = (e = o.player_.liveTracker.liveWindow()) - r * e) <
                      1
                        ? ""
                        : "-") + ln(t, e)
                    : ln(a, i)),
                  o.update(n, r, i),
                  s && s();
              }
            );
          }),
          e
        );
      })(pt)
    );
  Xt = (function (i) {
    function e(e, t) {
      t = i.call(this, e, t) || this;
      return (t.update = We(Ve(ft(t), t.update), 30)), t;
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        return i.prototype.createEl.call(
          this,
          "div",
          { className: "vjs-play-progress vjs-slider-bar" },
          { "aria-hidden": "true" }
        );
      }),
      (t.update = function (e, t) {
        var i,
          n = this.getChild("timeTooltip");
        n &&
          ((i = this.player_.scrubbing()
            ? this.player_.getCache().currentTime
            : this.player_.currentTime()),
          n.updateTime(e, t, i));
      }),
      e
    );
  })(pt);
  (Xt.prototype.options_ = { children: [] }),
    q || A || Xt.prototype.options_.children.push("timeTooltip"),
    pt.registerComponent("PlayProgressBar", Xt);
  I = (function (i) {
    function e(e, t) {
      t = i.call(this, e, t) || this;
      return (t.update = We(Ve(ft(t), t.update), 30)), t;
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        return i.prototype.createEl.call(this, "div", {
          className: "vjs-mouse-display",
        });
      }),
      (t.update = function (e, t) {
        var i = this,
          n = t * this.player_.duration();
        this.getChild("timeTooltip").updateTime(e, t, n, function () {
          i.el_.style.left = e.width * t + "px";
        });
      }),
      e
    );
  })(pt);
  (I.prototype.options_ = { children: ["timeTooltip"] }),
    pt.registerComponent("MouseTimeDisplay", I);
  Bt = (function (a) {
    function e(e, t) {
      t = a.call(this, e, t) || this;
      return t.setEventHandlers_(), t;
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.setEventHandlers_ = function () {
        var t = this;
        (this.update_ = Ve(this, this.update)),
          (this.update = We(this.update_, 30)),
          this.on(
            this.player_,
            ["ended", "durationchange", "timeupdate"],
            this.update
          ),
          this.player_.liveTracker &&
            this.on(this.player_.liveTracker, "liveedgechange", this.update),
          (this.updateInterval = null),
          (this.enableIntervalHandler_ = function (e) {
            return t.enableInterval_(e);
          }),
          (this.disableIntervalHandler_ = function (e) {
            return t.disableInterval_(e);
          }),
          this.on(this.player_, ["playing"], this.enableIntervalHandler_),
          this.on(
            this.player_,
            ["ended", "pause", "waiting"],
            this.disableIntervalHandler_
          ),
          "hidden" in document &&
            "visibilityState" in document &&
            this.on(document, "visibilitychange", this.toggleVisibility_);
      }),
      (t.toggleVisibility_ = function (e) {
        "hidden" === document.visibilityState
          ? (this.cancelNamedAnimationFrame("SeekBar#update"),
            this.cancelNamedAnimationFrame("Slider#update"),
            this.disableInterval_(e))
          : (this.player_.ended() ||
              this.player_.paused() ||
              this.enableInterval_(),
            this.update());
      }),
      (t.enableInterval_ = function () {
        this.updateInterval ||
          (this.updateInterval = this.setInterval(this.update, 30));
      }),
      (t.disableInterval_ = function (e) {
        (this.player_.liveTracker &&
          this.player_.liveTracker.isLive() &&
          e &&
          "ended" !== e.type) ||
          (this.updateInterval &&
            (this.clearInterval(this.updateInterval),
            (this.updateInterval = null)));
      }),
      (t.createEl = function () {
        return a.prototype.createEl.call(
          this,
          "div",
          { className: "vjs-progress-holder" },
          { "aria-label": this.localize("Progress Bar") }
        );
      }),
      (t.update = function (e) {
        var n = this;
        if ("hidden" !== document.visibilityState) {
          var r = a.prototype.update.call(this);
          return (
            this.requestNamedAnimationFrame("SeekBar#update", function () {
              var e = n.player_.ended()
                  ? n.player_.duration()
                  : n.getCurrentTime_(),
                t = n.player_.liveTracker,
                i = n.player_.duration();
              t && t.isLive() && (i = n.player_.liveTracker.liveCurrentTime()),
                n.percent_ !== r &&
                  (n.el_.setAttribute("aria-valuenow", (100 * r).toFixed(2)),
                  (n.percent_ = r)),
                (n.currentTime_ === e && n.duration_ === i) ||
                  (n.el_.setAttribute(
                    "aria-valuetext",
                    n.localize(
                      "progress bar timing: currentTime={1} duration={2}",
                      [ln(e, i), ln(i, i)],
                      "{1} of {2}"
                    )
                  ),
                  (n.currentTime_ = e),
                  (n.duration_ = i)),
                n.bar && n.bar.update(de(n.el()), n.getProgress());
            }),
            r
          );
        }
      }),
      (t.userSeek_ = function (e) {
        this.player_.liveTracker &&
          this.player_.liveTracker.isLive() &&
          this.player_.liveTracker.nextSeekedFromUser(),
          this.player_.currentTime(e);
      }),
      (t.getCurrentTime_ = function () {
        return this.player_.scrubbing()
          ? this.player_.getCache().currentTime
          : this.player_.currentTime();
      }),
      (t.getPercent = function () {
        var e,
          t = this.getCurrentTime_(),
          i = this.player_.liveTracker;
        return (
          i && i.isLive()
            ? ((e = (t - i.seekableStart()) / i.liveWindow()),
              i.atLiveEdge() && (e = 1))
            : (e = t / this.player_.duration()),
          e
        );
      }),
      (t.handleMouseDown = function (e) {
        _e(e) &&
          (e.stopPropagation(),
          (this.videoWasPlaying = !this.player_.paused()),
          this.player_.pause(),
          a.prototype.handleMouseDown.call(this, e));
      }),
      (t.handleMouseMove = function (e, t) {
        if ((void 0 === t && (t = !1), _e(e))) {
          t || this.player_.scrubbing() || this.player_.scrubbing(!0);
          var i = this.calculateDistance(e),
            n = this.player_.liveTracker;
          if (n && n.isLive()) {
            if (0.99 <= i) return void n.seekToLiveEdge();
            var r,
              t = n.seekableStart(),
              e = n.liveCurrentTime();
            if (
              (r =
                (r = e <= (r = t + i * n.liveWindow()) ? e : r) <= t
                  ? t + 0.1
                  : r) ===
              1 / 0
            )
              return;
          } else
            (r = i * this.player_.duration()) === this.player_.duration() &&
              (r -= 0.1);
          this.userSeek_(r);
        }
      }),
      (t.enable = function () {
        a.prototype.enable.call(this);
        var e = this.getChild("mouseTimeDisplay");
        e && e.show();
      }),
      (t.disable = function () {
        a.prototype.disable.call(this);
        var e = this.getChild("mouseTimeDisplay");
        e && e.hide();
      }),
      (t.handleMouseUp = function (e) {
        a.prototype.handleMouseUp.call(this, e),
          e && e.stopPropagation(),
          this.player_.scrubbing(!1),
          this.player_.trigger({
            type: "timeupdate",
            target: this,
            manuallyTriggered: !0,
          }),
          this.videoWasPlaying ? Et(this.player_.play()) : this.update_();
      }),
      (t.stepForward = function () {
        this.userSeek_(this.player_.currentTime() + 5);
      }),
      (t.stepBack = function () {
        this.userSeek_(this.player_.currentTime() - 5);
      }),
      (t.handleAction = function (e) {
        this.player_.paused() ? this.player_.play() : this.player_.pause();
      }),
      (t.handleKeyDown = function (e) {
        var t,
          i = this.player_.liveTracker;
        ht.isEventKey(e, "Space") || ht.isEventKey(e, "Enter")
          ? (e.preventDefault(), e.stopPropagation(), this.handleAction(e))
          : ht.isEventKey(e, "Home")
          ? (e.preventDefault(), e.stopPropagation(), this.userSeek_(0))
          : ht.isEventKey(e, "End")
          ? (e.preventDefault(),
            e.stopPropagation(),
            i && i.isLive()
              ? this.userSeek_(i.liveCurrentTime())
              : this.userSeek_(this.player_.duration()))
          : /^[0-9]$/.test(ht(e))
          ? (e.preventDefault(),
            e.stopPropagation(),
            (t = (10 * (ht.codes[ht(e)] - ht.codes[0])) / 100),
            i && i.isLive()
              ? this.userSeek_(i.seekableStart() + i.liveWindow() * t)
              : this.userSeek_(this.player_.duration() * t))
          : ht.isEventKey(e, "PgDn")
          ? (e.preventDefault(),
            e.stopPropagation(),
            this.userSeek_(this.player_.currentTime() - 60))
          : ht.isEventKey(e, "PgUp")
          ? (e.preventDefault(),
            e.stopPropagation(),
            this.userSeek_(this.player_.currentTime() + 60))
          : a.prototype.handleKeyDown.call(this, e);
      }),
      (t.dispose = function () {
        this.disableInterval_(),
          this.off(
            this.player_,
            ["ended", "durationchange", "timeupdate"],
            this.update
          ),
          this.player_.liveTracker &&
            this.off(this.player_.liveTracker, "liveedgechange", this.update),
          this.off(this.player_, ["playing"], this.enableIntervalHandler_),
          this.off(
            this.player_,
            ["ended", "pause", "waiting"],
            this.disableIntervalHandler_
          ),
          "hidden" in document &&
            "visibilityState" in document &&
            this.off(document, "visibilitychange", this.toggleVisibility_),
          a.prototype.dispose.call(this);
      }),
      e
    );
  })(li);
  (Bt.prototype.options_ = {
    children: ["loadProgressBar", "playProgressBar"],
    barName: "playProgressBar",
  }),
    q || A || Bt.prototype.options_.children.splice(1, 0, "mouseTimeDisplay"),
    pt.registerComponent("SeekBar", Bt);
  Ft = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        (i.handleMouseMove = We(Ve(ft(i), i.handleMouseMove), 30)),
        (i.throttledHandleMouseSeek = We(Ve(ft(i), i.handleMouseSeek), 30)),
        (i.handleMouseUpHandler_ = function (e) {
          return i.handleMouseUp(e);
        }),
        (i.handleMouseDownHandler_ = function (e) {
          return i.handleMouseDown(e);
        }),
        i.enable(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        return n.prototype.createEl.call(this, "div", {
          className: "vjs-progress-control vjs-control",
        });
      }),
      (t.handleMouseMove = function (e) {
        var t,
          i,
          n,
          r,
          a = this.getChild("seekBar");
        a &&
          ((t = a.getChild("playProgressBar")),
          (i = a.getChild("mouseTimeDisplay")),
          (t || i) &&
            ((r = he((n = a.el()))),
            (e = pe(n, e).x),
            (e = cn(e, 0, 1)),
            i && i.update(r, e),
            t && t.update(r, a.getProgress())));
      }),
      (t.handleMouseSeek = function (e) {
        var t = this.getChild("seekBar");
        t && t.handleMouseMove(e);
      }),
      (t.enabled = function () {
        return this.enabled_;
      }),
      (t.disable = function () {
        var e;
        this.children().forEach(function (e) {
          return e.disable && e.disable();
        }),
          this.enabled() &&
            (this.off(
              ["mousedown", "touchstart"],
              this.handleMouseDownHandler_
            ),
            this.off(this.el_, "mousemove", this.handleMouseMove),
            this.removeListenersAddedOnMousedownAndTouchstart(),
            this.addClass("disabled"),
            (this.enabled_ = !1),
            this.player_.scrubbing() &&
              ((e = this.getChild("seekBar")),
              this.player_.scrubbing(!1),
              e.videoWasPlaying && Et(this.player_.play())));
      }),
      (t.enable = function () {
        this.children().forEach(function (e) {
          return e.enable && e.enable();
        }),
          this.enabled() ||
            (this.on(["mousedown", "touchstart"], this.handleMouseDownHandler_),
            this.on(this.el_, "mousemove", this.handleMouseMove),
            this.removeClass("disabled"),
            (this.enabled_ = !0));
      }),
      (t.removeListenersAddedOnMousedownAndTouchstart = function () {
        var e = this.el_.ownerDocument;
        this.off(e, "mousemove", this.throttledHandleMouseSeek),
          this.off(e, "touchmove", this.throttledHandleMouseSeek),
          this.off(e, "mouseup", this.handleMouseUpHandler_),
          this.off(e, "touchend", this.handleMouseUpHandler_);
      }),
      (t.handleMouseDown = function (e) {
        var t = this.el_.ownerDocument,
          i = this.getChild("seekBar");
        i && i.handleMouseDown(e),
          this.on(t, "mousemove", this.throttledHandleMouseSeek),
          this.on(t, "touchmove", this.throttledHandleMouseSeek),
          this.on(t, "mouseup", this.handleMouseUpHandler_),
          this.on(t, "touchend", this.handleMouseUpHandler_);
      }),
      (t.handleMouseUp = function (e) {
        var t = this.getChild("seekBar");
        t && t.handleMouseUp(e),
          this.removeListenersAddedOnMousedownAndTouchstart();
      }),
      e
    );
  })(pt);
  (Ft.prototype.options_ = { children: ["seekBar"] }),
    pt.registerComponent("ProgressControl", Ft);
  jt = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on(
          e,
          ["enterpictureinpicture", "leavepictureinpicture"],
          function (e) {
            return i.handlePictureInPictureChange(e);
          }
        ),
        i.on(
          e,
          ["disablepictureinpicturechanged", "loadedmetadata"],
          function (e) {
            return i.handlePictureInPictureEnabledChange(e);
          }
        ),
        i.disable(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return (
          "vjs-picture-in-picture-control " +
          n.prototype.buildCSSClass.call(this)
        );
      }),
      (t.handlePictureInPictureEnabledChange = function () {
        document.pictureInPictureEnabled &&
        !1 === this.player_.disablePictureInPicture()
          ? this.enable()
          : this.disable();
      }),
      (t.handlePictureInPictureChange = function (e) {
        this.player_.isInPictureInPicture()
          ? this.controlText("Exit Picture-in-Picture")
          : this.controlText("Picture-in-Picture"),
          this.handlePictureInPictureEnabledChange();
      }),
      (t.handleClick = function (e) {
        this.player_.isInPictureInPicture()
          ? this.player_.exitPictureInPicture()
          : this.player_.requestPictureInPicture();
      }),
      e
    );
  })(sn);
  (jt.prototype.controlText_ = "Picture-in-Picture"),
    pt.registerComponent("PictureInPictureToggle", jt);
  j = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on(e, "fullscreenchange", function (e) {
          return i.handleFullscreenChange(e);
        }),
        !1 === document[e.fsApi_.fullscreenEnabled] && i.disable(),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-fullscreen-control " + n.prototype.buildCSSClass.call(this);
      }),
      (t.handleFullscreenChange = function (e) {
        this.player_.isFullscreen()
          ? this.controlText("Non-Fullscreen")
          : this.controlText("Fullscreen");
      }),
      (t.handleClick = function (e) {
        this.player_.isFullscreen()
          ? this.player_.exitFullscreen()
          : this.player_.requestFullscreen();
      }),
      e
    );
  })(sn);
  (j.prototype.controlText_ = "Fullscreen"),
    pt.registerComponent("FullscreenToggle", j);
  pt.registerComponent(
    "VolumeLevel",
    (function (t) {
      function e() {
        return t.apply(this, arguments) || this;
      }
      return (
        mt(e, t),
        (e.prototype.createEl = function () {
          var e = t.prototype.createEl.call(this, "div", {
            className: "vjs-volume-level",
          });
          return (
            e.appendChild(
              t.prototype.createEl.call(this, "span", {
                className: "vjs-control-text",
              })
            ),
            e
          );
        }),
        e
      );
    })(pt)
  ),
    pt.registerComponent(
      "VolumeLevelTooltip",
      (function (i) {
        function e(e, t) {
          t = i.call(this, e, t) || this;
          return (t.update = We(Ve(ft(t), t.update), 30)), t;
        }
        mt(e, i);
        var t = e.prototype;
        return (
          (t.createEl = function () {
            return i.prototype.createEl.call(
              this,
              "div",
              { className: "vjs-volume-tooltip" },
              { "aria-hidden": "true" }
            );
          }),
          (t.update = function (e, t, i, n) {
            if (!i) {
              var r = de(this.el_),
                a = de(this.player_.el()),
                i = e.width * t;
              if (!a || !r) return;
              (t = e.left - a.left + i),
                (a = e.width - i + (a.right - e.right)),
                (e = r.width / 2);
              t < e ? (e += e - t) : a < e && (e = a),
                e < 0 ? (e = 0) : e > r.width && (e = r.width),
                (this.el_.style.right = "-" + e + "px");
            }
            this.write(n + "%");
          }),
          (t.write = function (e) {
            J(this.el_, e);
          }),
          (t.updateVolume = function (e, t, i, n, r) {
            var a = this;
            this.requestNamedAnimationFrame(
              "VolumeLevelTooltip#updateVolume",
              function () {
                a.update(e, t, i, n.toFixed(0)), r && r();
              }
            );
          }),
          e
        );
      })(pt)
    );
  k = (function (i) {
    function e(e, t) {
      t = i.call(this, e, t) || this;
      return (t.update = We(Ve(ft(t), t.update), 30)), t;
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        return i.prototype.createEl.call(this, "div", {
          className: "vjs-mouse-display",
        });
      }),
      (t.update = function (e, t, i) {
        var n = this,
          r = 100 * t;
        this.getChild("volumeLevelTooltip").updateVolume(
          e,
          t,
          i,
          r,
          function () {
            i
              ? (n.el_.style.bottom = e.height * t + "px")
              : (n.el_.style.left = e.width * t + "px");
          }
        );
      }),
      e
    );
  })(pt);
  (k.prototype.options_ = { children: ["volumeLevelTooltip"] }),
    pt.registerComponent("MouseVolumeLevelDisplay", k);
  f = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on("slideractive", function (e) {
          return i.updateLastVolume_(e);
        }),
        i.on(e, "volumechange", function (e) {
          return i.updateARIAAttributes(e);
        }),
        e.ready(function () {
          return i.updateARIAAttributes();
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        return n.prototype.createEl.call(
          this,
          "div",
          { className: "vjs-volume-bar vjs-slider-bar" },
          { "aria-label": this.localize("Volume Level"), "aria-live": "polite" }
        );
      }),
      (t.handleMouseDown = function (e) {
        _e(e) && n.prototype.handleMouseDown.call(this, e);
      }),
      (t.handleMouseMove = function (e) {
        var t,
          i,
          n,
          r = this.getChild("mouseVolumeLevelDisplay");
        r &&
          ((t = de((n = this.el()))),
          (i = this.vertical()),
          (n = pe(n, e)),
          (n = i ? n.y : n.x),
          (n = cn(n, 0, 1)),
          r.update(t, n, i)),
          _e(e) &&
            (this.checkMuted(), this.player_.volume(this.calculateDistance(e)));
      }),
      (t.checkMuted = function () {
        this.player_.muted() && this.player_.muted(!1);
      }),
      (t.getPercent = function () {
        return this.player_.muted() ? 0 : this.player_.volume();
      }),
      (t.stepForward = function () {
        this.checkMuted(), this.player_.volume(this.player_.volume() + 0.1);
      }),
      (t.stepBack = function () {
        this.checkMuted(), this.player_.volume(this.player_.volume() - 0.1);
      }),
      (t.updateARIAAttributes = function (e) {
        var t = this.player_.muted() ? 0 : this.volumeAsPercentage_();
        this.el_.setAttribute("aria-valuenow", t),
          this.el_.setAttribute("aria-valuetext", t + "%");
      }),
      (t.volumeAsPercentage_ = function () {
        return Math.round(100 * this.player_.volume());
      }),
      (t.updateLastVolume_ = function () {
        var e = this,
          t = this.player_.volume();
        this.one("sliderinactive", function () {
          0 === e.player_.volume() && e.player_.lastVolume_(t);
        });
      }),
      e
    );
  })(li);
  (f.prototype.options_ = {
    children: ["volumeLevel"],
    barName: "volumeLevel",
  }),
    q ||
      A ||
      f.prototype.options_.children.splice(0, 0, "mouseVolumeLevelDisplay"),
    (f.prototype.playerEvent = "volumechange"),
    pt.registerComponent("VolumeBar", f);
  ui = (function (a) {
    function e(e, t) {
      var i, n, r;
      return (
        ((t = void 0 === t ? {} : t).vertical = t.vertical || !1),
        ("undefined" != typeof t.volumeBar && !S(t.volumeBar)) ||
          ((t.volumeBar = t.volumeBar || {}),
          (t.volumeBar.vertical = t.vertical)),
        (i = a.call(this, e, t) || this),
        (n = ft(i)),
        (r = e).tech_ &&
          !r.tech_.featuresVolumeControl &&
          n.addClass("vjs-hidden"),
        n.on(r, "loadstart", function () {
          r.tech_.featuresVolumeControl
            ? n.removeClass("vjs-hidden")
            : n.addClass("vjs-hidden");
        }),
        (i.throttledHandleMouseMove = We(Ve(ft(i), i.handleMouseMove), 30)),
        (i.handleMouseUpHandler_ = function (e) {
          return i.handleMouseUp(e);
        }),
        i.on("mousedown", function (e) {
          return i.handleMouseDown(e);
        }),
        i.on("touchstart", function (e) {
          return i.handleMouseDown(e);
        }),
        i.on("mousemove", function (e) {
          return i.handleMouseMove(e);
        }),
        i.on(i.volumeBar, ["focus", "slideractive"], function () {
          i.volumeBar.addClass("vjs-slider-active"),
            i.addClass("vjs-slider-active"),
            i.trigger("slideractive");
        }),
        i.on(i.volumeBar, ["blur", "sliderinactive"], function () {
          i.volumeBar.removeClass("vjs-slider-active"),
            i.removeClass("vjs-slider-active"),
            i.trigger("sliderinactive");
        }),
        i
      );
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        var e = "vjs-volume-horizontal";
        return (
          this.options_.vertical && (e = "vjs-volume-vertical"),
          a.prototype.createEl.call(this, "div", {
            className: "vjs-volume-control vjs-control " + e,
          })
        );
      }),
      (t.handleMouseDown = function (e) {
        var t = this.el_.ownerDocument;
        this.on(t, "mousemove", this.throttledHandleMouseMove),
          this.on(t, "touchmove", this.throttledHandleMouseMove),
          this.on(t, "mouseup", this.handleMouseUpHandler_),
          this.on(t, "touchend", this.handleMouseUpHandler_);
      }),
      (t.handleMouseUp = function (e) {
        var t = this.el_.ownerDocument;
        this.off(t, "mousemove", this.throttledHandleMouseMove),
          this.off(t, "touchmove", this.throttledHandleMouseMove),
          this.off(t, "mouseup", this.handleMouseUpHandler_),
          this.off(t, "touchend", this.handleMouseUpHandler_);
      }),
      (t.handleMouseMove = function (e) {
        this.volumeBar.handleMouseMove(e);
      }),
      e
    );
  })(pt);
  (ui.prototype.options_ = { children: ["volumeBar"] }),
    pt.registerComponent("VolumeControl", ui);
  Xt = (function (a) {
    function e(e, t) {
      var i,
        n,
        r = a.call(this, e, t) || this;
      return (
        (i = ft(r)),
        (n = e).tech_ &&
          !n.tech_.featuresMuteControl &&
          i.addClass("vjs-hidden"),
        i.on(n, "loadstart", function () {
          n.tech_.featuresMuteControl
            ? i.removeClass("vjs-hidden")
            : i.addClass("vjs-hidden");
        }),
        r.on(e, ["loadstart", "volumechange"], function (e) {
          return r.update(e);
        }),
        r
      );
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-mute-control " + a.prototype.buildCSSClass.call(this);
      }),
      (t.handleClick = function (e) {
        var t = this.player_.volume(),
          i = this.player_.lastVolume_();
        0 === t
          ? (this.player_.volume(i < 0.1 ? 0.1 : i), this.player_.muted(!1))
          : this.player_.muted(!this.player_.muted());
      }),
      (t.update = function (e) {
        this.updateIcon_(), this.updateControlText_();
      }),
      (t.updateIcon_ = function () {
        var e = this.player_.volume(),
          t = 3;
        q &&
          this.player_.tech_ &&
          this.player_.tech_.el_ &&
          this.player_.muted(this.player_.tech_.el_.muted),
          0 === e || this.player_.muted()
            ? (t = 0)
            : e < 0.33
            ? (t = 1)
            : e < 0.67 && (t = 2);
        for (var i = 0; i < 4; i++) ie(this.el_, "vjs-vol-" + i);
        te(this.el_, "vjs-vol-" + t);
      }),
      (t.updateControlText_ = function () {
        var e =
          this.player_.muted() || 0 === this.player_.volume()
            ? "Unmute"
            : "Mute";
        this.controlText() !== e && this.controlText(e);
      }),
      e
    );
  })(sn);
  (Xt.prototype.controlText_ = "Mute"), pt.registerComponent("MuteToggle", Xt);
  I = (function (n) {
    function e(e, t) {
      var i;
      return (
        "undefined" != typeof (t = void 0 === t ? {} : t).inline
          ? (t.inline = t.inline)
          : (t.inline = !0),
        ("undefined" != typeof t.volumeControl && !S(t.volumeControl)) ||
          ((t.volumeControl = t.volumeControl || {}),
          (t.volumeControl.vertical = !t.inline)),
        ((i = n.call(this, e, t) || this).handleKeyPressHandler_ = function (
          e
        ) {
          return i.handleKeyPress(e);
        }),
        i.on(e, ["loadstart"], function (e) {
          return i.volumePanelState_(e);
        }),
        i.on(i.muteToggle, "keyup", function (e) {
          return i.handleKeyPress(e);
        }),
        i.on(i.volumeControl, "keyup", function (e) {
          return i.handleVolumeControlKeyUp(e);
        }),
        i.on("keydown", function (e) {
          return i.handleKeyPress(e);
        }),
        i.on("mouseover", function (e) {
          return i.handleMouseOver(e);
        }),
        i.on("mouseout", function (e) {
          return i.handleMouseOut(e);
        }),
        i.on(i.volumeControl, ["slideractive"], i.sliderActive_),
        i.on(i.volumeControl, ["sliderinactive"], i.sliderInactive_),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.sliderActive_ = function () {
        this.addClass("vjs-slider-active");
      }),
      (t.sliderInactive_ = function () {
        this.removeClass("vjs-slider-active");
      }),
      (t.volumePanelState_ = function () {
        this.volumeControl.hasClass("vjs-hidden") &&
          this.muteToggle.hasClass("vjs-hidden") &&
          this.addClass("vjs-hidden"),
          this.volumeControl.hasClass("vjs-hidden") &&
            !this.muteToggle.hasClass("vjs-hidden") &&
            this.addClass("vjs-mute-toggle-only");
      }),
      (t.createEl = function () {
        var e = "vjs-volume-panel-horizontal";
        return (
          this.options_.inline || (e = "vjs-volume-panel-vertical"),
          n.prototype.createEl.call(this, "div", {
            className: "vjs-volume-panel vjs-control " + e,
          })
        );
      }),
      (t.dispose = function () {
        this.handleMouseOut(), n.prototype.dispose.call(this);
      }),
      (t.handleVolumeControlKeyUp = function (e) {
        ht.isEventKey(e, "Esc") && this.muteToggle.focus();
      }),
      (t.handleMouseOver = function (e) {
        this.addClass("vjs-hover"),
          Be(document, "keyup", this.handleKeyPressHandler_);
      }),
      (t.handleMouseOut = function (e) {
        this.removeClass("vjs-hover"),
          Fe(document, "keyup", this.handleKeyPressHandler_);
      }),
      (t.handleKeyPress = function (e) {
        ht.isEventKey(e, "Esc") && this.handleMouseOut();
      }),
      e
    );
  })(pt);
  (I.prototype.options_ = { children: ["muteToggle", "volumeControl"] }),
    pt.registerComponent("VolumePanel", I);
  var hn = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        t && (i.menuButton_ = t.menuButton),
        (i.focusedChild_ = -1),
        i.on("keydown", function (e) {
          return i.handleKeyDown(e);
        }),
        (i.boundHandleBlur_ = function (e) {
          return i.handleBlur(e);
        }),
        (i.boundHandleTapClick_ = function (e) {
          return i.handleTapClick(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.addEventListenerForItem = function (e) {
        e instanceof pt &&
          (this.on(e, "blur", this.boundHandleBlur_),
          this.on(e, ["tap", "click"], this.boundHandleTapClick_));
      }),
      (t.removeEventListenerForItem = function (e) {
        e instanceof pt &&
          (this.off(e, "blur", this.boundHandleBlur_),
          this.off(e, ["tap", "click"], this.boundHandleTapClick_));
      }),
      (t.removeChild = function (e) {
        "string" == typeof e && (e = this.getChild(e)),
          this.removeEventListenerForItem(e),
          n.prototype.removeChild.call(this, e);
      }),
      (t.addItem = function (e) {
        e = this.addChild(e);
        e && this.addEventListenerForItem(e);
      }),
      (t.createEl = function () {
        var e = this.options_.contentElType || "ul";
        (this.contentEl_ = $(e, { className: "vjs-menu-content" })),
          this.contentEl_.setAttribute("role", "menu");
        e = n.prototype.createEl.call(this, "div", {
          append: this.contentEl_,
          className: "vjs-menu",
        });
        return (
          e.appendChild(this.contentEl_),
          Be(e, "click", function (e) {
            e.preventDefault(), e.stopImmediatePropagation();
          }),
          e
        );
      }),
      (t.dispose = function () {
        (this.contentEl_ = null),
          (this.boundHandleBlur_ = null),
          (this.boundHandleTapClick_ = null),
          n.prototype.dispose.call(this);
      }),
      (t.handleBlur = function (e) {
        var t = e.relatedTarget || document.activeElement;
        this.children().some(function (e) {
          return e.el() === t;
        }) ||
          ((e = this.menuButton_) &&
            e.buttonPressed_ &&
            t !== e.el().firstChild &&
            e.unpressButton());
      }),
      (t.handleTapClick = function (t) {
        var e;
        this.menuButton_ &&
          (this.menuButton_.unpressButton(),
          (e = this.children()),
          !Array.isArray(e) ||
            ((e = e.filter(function (e) {
              return e.el() === t.target;
            })[0]) &&
              "CaptionSettingsMenuItem" !== e.name() &&
              this.menuButton_.focus()));
      }),
      (t.handleKeyDown = function (e) {
        ht.isEventKey(e, "Left") || ht.isEventKey(e, "Down")
          ? (e.preventDefault(), e.stopPropagation(), this.stepForward())
          : (ht.isEventKey(e, "Right") || ht.isEventKey(e, "Up")) &&
            (e.preventDefault(), e.stopPropagation(), this.stepBack());
      }),
      (t.stepForward = function () {
        var e = 0;
        void 0 !== this.focusedChild_ && (e = this.focusedChild_ + 1),
          this.focus(e);
      }),
      (t.stepBack = function () {
        var e = 0;
        void 0 !== this.focusedChild_ && (e = this.focusedChild_ - 1),
          this.focus(e);
      }),
      (t.focus = function (e) {
        void 0 === e && (e = 0);
        var t = this.children().slice();
        t.length && t[0].hasClass("vjs-menu-title") && t.shift(),
          0 < t.length &&
            (e < 0 ? (e = 0) : e >= t.length && (e = t.length - 1),
            t[(this.focusedChild_ = e)].el_.focus());
      }),
      e
    );
  })(pt);
  pt.registerComponent("Menu", hn);
  Bt = (function (n) {
    function e(e, t) {
      var i;
      ((i = n.call(this, e, (t = void 0 === t ? {} : t)) || this).menuButton_ =
        new sn(e, t)),
        i.menuButton_.controlText(i.controlText_),
        i.menuButton_.el_.setAttribute("aria-haspopup", "true");
      t = sn.prototype.buildCSSClass();
      (i.menuButton_.el_.className = i.buildCSSClass() + " " + t),
        i.menuButton_.removeClass("vjs-control"),
        i.addChild(i.menuButton_),
        i.update(),
        (i.enabled_ = !0);
      t = function (e) {
        return i.handleClick(e);
      };
      return (
        (i.handleMenuKeyUp_ = function (e) {
          return i.handleMenuKeyUp(e);
        }),
        i.on(i.menuButton_, "tap", t),
        i.on(i.menuButton_, "click", t),
        i.on(i.menuButton_, "keydown", function (e) {
          return i.handleKeyDown(e);
        }),
        i.on(i.menuButton_, "mouseenter", function () {
          i.addClass("vjs-hover"),
            i.menu.show(),
            Be(document, "keyup", i.handleMenuKeyUp_);
        }),
        i.on("mouseleave", function (e) {
          return i.handleMouseLeave(e);
        }),
        i.on("keydown", function (e) {
          return i.handleSubmenuKeyDown(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.update = function () {
        var e = this.createMenu();
        this.menu && (this.menu.dispose(), this.removeChild(this.menu)),
          (this.menu = e),
          this.addChild(e),
          (this.buttonPressed_ = !1),
          this.menuButton_.el_.setAttribute("aria-expanded", "false"),
          this.items && this.items.length <= this.hideThreshold_
            ? this.hide()
            : this.show();
      }),
      (t.createMenu = function () {
        var e,
          t = new hn(this.player_, { menuButton: this });
        if (
          ((this.hideThreshold_ = 0),
          this.options_.title &&
            ((e = $("li", {
              className: "vjs-menu-title",
              textContent: ut(this.options_.title),
              tabIndex: -1,
            })),
            (e = new pt(this.player_, { el: e })),
            t.addItem(e)),
          (this.items = this.createItems()),
          this.items)
        )
          for (var i = 0; i < this.items.length; i++) t.addItem(this.items[i]);
        return t;
      }),
      (t.createItems = function () {}),
      (t.createEl = function () {
        return n.prototype.createEl.call(
          this,
          "div",
          { className: this.buildWrapperCSSClass() },
          {}
        );
      }),
      (t.buildWrapperCSSClass = function () {
        var e = "vjs-menu-button";
        return (
          !0 === this.options_.inline ? (e += "-inline") : (e += "-popup"),
          "vjs-menu-button " +
            e +
            " " +
            sn.prototype.buildCSSClass() +
            " " +
            n.prototype.buildCSSClass.call(this)
        );
      }),
      (t.buildCSSClass = function () {
        var e = "vjs-menu-button";
        return (
          !0 === this.options_.inline ? (e += "-inline") : (e += "-popup"),
          "vjs-menu-button " + e + " " + n.prototype.buildCSSClass.call(this)
        );
      }),
      (t.controlText = function (e, t) {
        return (
          void 0 === t && (t = this.menuButton_.el()),
          this.menuButton_.controlText(e, t)
        );
      }),
      (t.dispose = function () {
        this.handleMouseLeave(), n.prototype.dispose.call(this);
      }),
      (t.handleClick = function (e) {
        this.buttonPressed_ ? this.unpressButton() : this.pressButton();
      }),
      (t.handleMouseLeave = function (e) {
        this.removeClass("vjs-hover"),
          Fe(document, "keyup", this.handleMenuKeyUp_);
      }),
      (t.focus = function () {
        this.menuButton_.focus();
      }),
      (t.blur = function () {
        this.menuButton_.blur();
      }),
      (t.handleKeyDown = function (e) {
        ht.isEventKey(e, "Esc") || ht.isEventKey(e, "Tab")
          ? (this.buttonPressed_ && this.unpressButton(),
            ht.isEventKey(e, "Tab") ||
              (e.preventDefault(), this.menuButton_.focus()))
          : (ht.isEventKey(e, "Up") || ht.isEventKey(e, "Down")) &&
            (this.buttonPressed_ || (e.preventDefault(), this.pressButton()));
      }),
      (t.handleMenuKeyUp = function (e) {
        (ht.isEventKey(e, "Esc") || ht.isEventKey(e, "Tab")) &&
          this.removeClass("vjs-hover");
      }),
      (t.handleSubmenuKeyPress = function (e) {
        this.handleSubmenuKeyDown(e);
      }),
      (t.handleSubmenuKeyDown = function (e) {
        (ht.isEventKey(e, "Esc") || ht.isEventKey(e, "Tab")) &&
          (this.buttonPressed_ && this.unpressButton(),
          ht.isEventKey(e, "Tab") ||
            (e.preventDefault(), this.menuButton_.focus()));
      }),
      (t.pressButton = function () {
        this.enabled_ &&
          ((this.buttonPressed_ = !0),
          this.menu.show(),
          this.menu.lockShowing(),
          this.menuButton_.el_.setAttribute("aria-expanded", "true"),
          (q && Y()) || this.menu.focus());
      }),
      (t.unpressButton = function () {
        this.enabled_ &&
          ((this.buttonPressed_ = !1),
          this.menu.unlockShowing(),
          this.menu.hide(),
          this.menuButton_.el_.setAttribute("aria-expanded", "false"));
      }),
      (t.disable = function () {
        this.unpressButton(),
          (this.enabled_ = !1),
          this.addClass("vjs-disabled"),
          this.menuButton_.disable();
      }),
      (t.enable = function () {
        (this.enabled_ = !0),
          this.removeClass("vjs-disabled"),
          this.menuButton_.enable();
      }),
      e
    );
  })(pt);
  pt.registerComponent("MenuButton", Bt);
  Ft = (function (r) {
    function e(e, t) {
      var i = t.tracks,
        t = r.call(this, e, t) || this;
      if ((t.items.length <= 1 && t.hide(), !i)) return ft(t);
      var n = Ve(ft(t), t.update);
      return (
        i.addEventListener("removetrack", n),
        i.addEventListener("addtrack", n),
        i.addEventListener("labelchange", n),
        t.player_.on("ready", n),
        t.player_.on("dispose", function () {
          i.removeEventListener("removetrack", n),
            i.removeEventListener("addtrack", n),
            i.removeEventListener("labelchange", n);
        }),
        t
      );
    }
    return mt(e, r), e;
  })(Bt);
  pt.registerComponent("TrackButton", Ft);
  var pn = ["Tab", "Esc", "Up", "Down", "Right", "Left"],
    jt = (function (n) {
      function e(e, t) {
        e = n.call(this, e, t) || this;
        return (
          (e.selectable = t.selectable),
          (e.isSelected_ = t.selected || !1),
          (e.multiSelectable = t.multiSelectable),
          e.selected(e.isSelected_),
          e.selectable
            ? e.multiSelectable
              ? e.el_.setAttribute("role", "menuitemcheckbox")
              : e.el_.setAttribute("role", "menuitemradio")
            : e.el_.setAttribute("role", "menuitem"),
          e
        );
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.createEl = function (e, t, i) {
          this.nonIconControl = !0;
          i = n.prototype.createEl.call(
            this,
            "li",
            b({ className: "vjs-menu-item", tabIndex: -1 }, t),
            i
          );
          return (
            i.replaceChild(
              $("span", {
                className: "vjs-menu-item-text",
                textContent: this.localize(this.options_.label),
              }),
              i.querySelector(".vjs-icon-placeholder")
            ),
            i
          );
        }),
        (t.handleKeyDown = function (t) {
          pn.some(function (e) {
            return ht.isEventKey(t, e);
          }) || n.prototype.handleKeyDown.call(this, t);
        }),
        (t.handleClick = function (e) {
          this.selected(!0);
        }),
        (t.selected = function (e) {
          this.selectable &&
            (e
              ? (this.addClass("vjs-selected"),
                this.el_.setAttribute("aria-checked", "true"),
                this.controlText(", selected"),
                (this.isSelected_ = !0))
              : (this.removeClass("vjs-selected"),
                this.el_.setAttribute("aria-checked", "false"),
                this.controlText(""),
                (this.isSelected_ = !1)));
        }),
        e
      );
    })(C);
  pt.registerComponent("MenuItem", jt);
  var fn = (function (u) {
    function e(e, t) {
      var n,
        i = t.track,
        r = e.textTracks();
      (t.label = i.label || i.language || "Unknown"),
        (t.selected = "showing" === i.mode),
        ((n = u.call(this, e, t) || this).track = i),
        (n.kinds = (t.kinds || [t.kind || n.track.kind]).filter(Boolean));
      function a() {
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        n.handleTracksChange.apply(ft(n), t);
      }
      function s() {
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        n.handleSelectedLanguageChange.apply(ft(n), t);
      }
      var o;
      return (
        e.on(["loadstart", "texttrackchange"], a),
        r.addEventListener("change", a),
        r.addEventListener("selectedlanguagechange", s),
        n.on("dispose", function () {
          e.off(["loadstart", "texttrackchange"], a),
            r.removeEventListener("change", a),
            r.removeEventListener("selectedlanguagechange", s);
        }),
        void 0 === r.onchange &&
          n.on(["tap", "click"], function () {
            if ("object" != typeof window.Event)
              try {
                o = new window.Event("change");
              } catch (e) {}
            o ||
              (o = document.createEvent("Event")).initEvent("change", !0, !0),
              r.dispatchEvent(o);
          }),
        n.handleTracksChange(),
        n
      );
    }
    mt(e, u);
    var t = e.prototype;
    return (
      (t.handleClick = function (e) {
        var t = this.track,
          i = this.player_.textTracks();
        if ((u.prototype.handleClick.call(this, e), i))
          for (var n = 0; n < i.length; n++) {
            var r = i[n];
            -1 !== this.kinds.indexOf(r.kind) &&
              (r === t
                ? "showing" !== r.mode && (r.mode = "showing")
                : "disabled" !== r.mode && (r.mode = "disabled"));
          }
      }),
      (t.handleTracksChange = function (e) {
        var t = "showing" === this.track.mode;
        t !== this.isSelected_ && this.selected(t);
      }),
      (t.handleSelectedLanguageChange = function (e) {
        var t;
        "showing" === this.track.mode &&
          (((t = this.player_.cache_.selectedLanguage) &&
            t.enabled &&
            t.language === this.track.language &&
            t.kind !== this.track.kind) ||
            (this.player_.cache_.selectedLanguage = {
              enabled: !0,
              language: this.track.language,
              kind: this.track.kind,
            }));
      }),
      (t.dispose = function () {
        (this.track = null), u.prototype.dispose.call(this);
      }),
      e
    );
  })(jt);
  pt.registerComponent("TextTrackMenuItem", fn);
  var mn = (function (i) {
    function e(e, t) {
      return (
        (t.track = {
          player: e,
          kind: t.kind,
          kinds: t.kinds,
          default: !1,
          mode: "disabled",
        }),
        t.kinds || (t.kinds = [t.kind]),
        t.label
          ? (t.track.label = t.label)
          : (t.track.label = t.kinds.join(" and ") + " off"),
        (t.selectable = !0),
        (t.multiSelectable = !1),
        i.call(this, e, t) || this
      );
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.handleTracksChange = function (e) {
        for (
          var t = this.player().textTracks(), i = !0, n = 0, r = t.length;
          n < r;
          n++
        ) {
          var a = t[n];
          if (
            -1 < this.options_.kinds.indexOf(a.kind) &&
            "showing" === a.mode
          ) {
            i = !1;
            break;
          }
        }
        i !== this.isSelected_ && this.selected(i);
      }),
      (t.handleSelectedLanguageChange = function (e) {
        for (
          var t = this.player().textTracks(), i = !0, n = 0, r = t.length;
          n < r;
          n++
        ) {
          var a = t[n];
          if (
            -1 < ["captions", "descriptions", "subtitles"].indexOf(a.kind) &&
            "showing" === a.mode
          ) {
            i = !1;
            break;
          }
        }
        i && (this.player_.cache_.selectedLanguage = { enabled: !1 });
      }),
      e
    );
  })(fn);
  pt.registerComponent("OffTextTrackMenuItem", mn);
  j = (function (i) {
    function e(e, t) {
      return (
        ((t = void 0 === t ? {} : t).tracks = e.textTracks()),
        i.call(this, e, t) || this
      );
    }
    return (
      mt(e, i),
      (e.prototype.createItems = function (e, t) {
        var i;
        void 0 === t && (t = fn),
          this.label_ && (i = this.label_ + " off"),
          (e = void 0 === e ? [] : e).push(
            new mn(this.player_, {
              kinds: this.kinds_,
              kind: this.kind_,
              label: i,
            })
          ),
          (this.hideThreshold_ += 1);
        var n = this.player_.textTracks();
        Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]);
        for (var r = 0; r < n.length; r++) {
          var a,
            s = n[r];
          -1 < this.kinds_.indexOf(s.kind) &&
            ((a = new t(this.player_, {
              track: s,
              kinds: this.kinds_,
              kind: this.kind_,
              selectable: !0,
              multiSelectable: !1,
            })).addClass("vjs-" + s.kind + "-menu-item"),
            e.push(a));
        }
        return e;
      }),
      e
    );
  })(Ft);
  pt.registerComponent("TextTrackButton", j);
  var gn = (function (a) {
    function e(e, t) {
      var i = t.track,
        n = t.cue,
        r = e.currentTime();
      return (
        (t.selectable = !0),
        (t.multiSelectable = !1),
        (t.label = n.text),
        (t.selected = n.startTime <= r && r < n.endTime),
        ((t = a.call(this, e, t) || this).track = i),
        (t.cue = n),
        i.addEventListener("cuechange", Ve(ft(t), t.update)),
        t
      );
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.handleClick = function (e) {
        a.prototype.handleClick.call(this),
          this.player_.currentTime(this.cue.startTime),
          this.update(this.cue.startTime);
      }),
      (t.update = function (e) {
        var t = this.cue,
          i = this.player_.currentTime();
        this.selected(t.startTime <= i && i < t.endTime);
      }),
      e
    );
  })(jt);
  pt.registerComponent("ChaptersTrackMenuItem", gn);
  k = (function (n) {
    function e(e, t, i) {
      return n.call(this, e, t, i) || this;
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-chapters-button " + n.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-chapters-button " + n.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      (t.update = function (e) {
        (this.track_ &&
          (!e || ("addtrack" !== e.type && "removetrack" !== e.type))) ||
          this.setTrack(this.findChaptersTrack()),
          n.prototype.update.call(this);
      }),
      (t.setTrack = function (e) {
        var t;
        this.track_ !== e &&
          (this.updateHandler_ ||
            (this.updateHandler_ = this.update.bind(this)),
          this.track_ &&
            ((t = this.player_
              .remoteTextTrackEls()
              .getTrackElementByTrack_(this.track_)) &&
              t.removeEventListener("load", this.updateHandler_),
            (this.track_ = null)),
          (this.track_ = e),
          this.track_ &&
            ((this.track_.mode = "hidden"),
            (e = this.player_
              .remoteTextTrackEls()
              .getTrackElementByTrack_(this.track_)) &&
              e.addEventListener("load", this.updateHandler_)));
      }),
      (t.findChaptersTrack = function () {
        for (
          var e = this.player_.textTracks() || [], t = e.length - 1;
          0 <= t;
          t--
        ) {
          var i = e[t];
          if (i.kind === this.kind_) return i;
        }
      }),
      (t.getMenuCaption = function () {
        return this.track_ && this.track_.label
          ? this.track_.label
          : this.localize(ut(this.kind_));
      }),
      (t.createMenu = function () {
        return (
          (this.options_.title = this.getMenuCaption()),
          n.prototype.createMenu.call(this)
        );
      }),
      (t.createItems = function () {
        var e = [];
        if (!this.track_) return e;
        var t = this.track_.cues;
        if (!t) return e;
        for (var i = 0, n = t.length; i < n; i++) {
          var r = t[i],
            r = new gn(this.player_, { track: this.track_, cue: r });
          e.push(r);
        }
        return e;
      }),
      e
    );
  })(j);
  (k.prototype.kind_ = "chapters"),
    (k.prototype.controlText_ = "Chapters"),
    pt.registerComponent("ChaptersButton", k);
  li = (function (a) {
    function e(e, t, i) {
      var i = a.call(this, e, t, i) || this,
        n = e.textTracks(),
        r = Ve(ft(i), i.handleTracksChange);
      return (
        n.addEventListener("change", r),
        i.on("dispose", function () {
          n.removeEventListener("change", r);
        }),
        i
      );
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.handleTracksChange = function (e) {
        for (
          var t = this.player().textTracks(), i = !1, n = 0, r = t.length;
          n < r;
          n++
        ) {
          var a = t[n];
          if (a.kind !== this.kind_ && "showing" === a.mode) {
            i = !0;
            break;
          }
        }
        i ? this.disable() : this.enable();
      }),
      (t.buildCSSClass = function () {
        return (
          "vjs-descriptions-button " + a.prototype.buildCSSClass.call(this)
        );
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-descriptions-button " +
          a.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      e
    );
  })(j);
  (li.prototype.kind_ = "descriptions"),
    (li.prototype.controlText_ = "Descriptions"),
    pt.registerComponent("DescriptionsButton", li);
  f = (function (n) {
    function e(e, t, i) {
      return n.call(this, e, t, i) || this;
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-subtitles-button " + n.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-subtitles-button " + n.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      e
    );
  })(j);
  (f.prototype.kind_ = "subtitles"),
    (f.prototype.controlText_ = "Subtitles"),
    pt.registerComponent("SubtitlesButton", f);
  var yn = (function (i) {
    function e(e, t) {
      return (
        (t.track = {
          player: e,
          kind: t.kind,
          label: t.kind + " settings",
          selectable: !1,
          default: !1,
          mode: "disabled",
        }),
        (t.selectable = !1),
        (t.name = "CaptionSettingsMenuItem"),
        (e = i.call(this, e, t) || this).addClass("vjs-texttrack-settings"),
        e.controlText(", opens " + t.kind + " settings dialog"),
        e
      );
    }
    return (
      mt(e, i),
      (e.prototype.handleClick = function (e) {
        this.player().getChild("textTrackSettings").open();
      }),
      e
    );
  })(fn);
  pt.registerComponent("CaptionSettingsMenuItem", yn);
  ui = (function (n) {
    function e(e, t, i) {
      return n.call(this, e, t, i) || this;
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-captions-button " + n.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-captions-button " + n.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      (t.createItems = function () {
        var e = [];
        return (
          (this.player().tech_ &&
            this.player().tech_.featuresNativeTextTracks) ||
            !this.player().getChild("textTrackSettings") ||
            (e.push(new yn(this.player_, { kind: this.kind_ })),
            (this.hideThreshold_ += 1)),
          n.prototype.createItems.call(this, e)
        );
      }),
      e
    );
  })(j);
  (ui.prototype.kind_ = "captions"),
    (ui.prototype.controlText_ = "Captions"),
    pt.registerComponent("CaptionsButton", ui);
  var vn = (function (n) {
    function e() {
      return n.apply(this, arguments) || this;
    }
    return (
      mt(e, n),
      (e.prototype.createEl = function (e, t, i) {
        (t = n.prototype.createEl.call(this, e, t, i)),
          (i = t.querySelector(".vjs-menu-item-text"));
        return (
          "captions" === this.options_.track.kind &&
            (i.appendChild(
              $(
                "span",
                { className: "vjs-icon-placeholder" },
                { "aria-hidden": !0 }
              )
            ),
            i.appendChild(
              $("span", {
                className: "vjs-control-text",
                textContent: " " + this.localize("Captions"),
              })
            )),
          t
        );
      }),
      e
    );
  })(fn);
  pt.registerComponent("SubsCapsMenuItem", vn);
  Xt = (function (i) {
    function e(e, t) {
      return (
        ((t = i.call(this, e, (t = void 0 === t ? {} : t)) || this).label_ =
          "subtitles"),
        -1 < ["en", "en-us", "en-ca", "fr-ca"].indexOf(t.player_.language_) &&
          (t.label_ = "captions"),
        t.menuButton_.controlText(ut(t.label_)),
        t
      );
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-subs-caps-button " + i.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-subs-caps-button " + i.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      (t.createItems = function () {
        var e = [];
        return (
          (this.player().tech_ &&
            this.player().tech_.featuresNativeTextTracks) ||
            !this.player().getChild("textTrackSettings") ||
            (e.push(new yn(this.player_, { kind: this.label_ })),
            (this.hideThreshold_ += 1)),
          (e = i.prototype.createItems.call(this, e, vn))
        );
      }),
      e
    );
  })(j);
  (Xt.prototype.kinds_ = ["captions", "subtitles"]),
    (Xt.prototype.controlText_ = "Subtitles"),
    pt.registerComponent("SubsCapsButton", Xt);
  var _n = (function (s) {
    function e(e, t) {
      var n,
        i = t.track,
        r = e.audioTracks();
      (t.label = i.label || i.language || "Unknown"),
        (t.selected = i.enabled),
        ((n = s.call(this, e, t) || this).track = i),
        n.addClass("vjs-" + i.kind + "-menu-item");
      function a() {
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        n.handleTracksChange.apply(ft(n), t);
      }
      return (
        r.addEventListener("change", a),
        n.on("dispose", function () {
          r.removeEventListener("change", a);
        }),
        n
      );
    }
    mt(e, s);
    var t = e.prototype;
    return (
      (t.createEl = function (e, t, i) {
        (t = s.prototype.createEl.call(this, e, t, i)),
          (i = t.querySelector(".vjs-menu-item-text"));
        return (
          "main-desc" === this.options_.track.kind &&
            (i.appendChild(
              $(
                "span",
                { className: "vjs-icon-placeholder" },
                { "aria-hidden": !0 }
              )
            ),
            i.appendChild(
              $("span", {
                className: "vjs-control-text",
                textContent: " " + this.localize("Descriptions"),
              })
            )),
          t
        );
      }),
      (t.handleClick = function (e) {
        if (
          (s.prototype.handleClick.call(this, e),
          (this.track.enabled = !0),
          this.player_.tech_.featuresNativeAudioTracks)
        )
          for (var t = this.player_.audioTracks(), i = 0; i < t.length; i++) {
            var n = t[i];
            n !== this.track && (n.enabled = n === this.track);
          }
      }),
      (t.handleTracksChange = function (e) {
        this.selected(this.track.enabled);
      }),
      e
    );
  })(jt);
  pt.registerComponent("AudioTrackMenuItem", _n);
  I = (function (i) {
    function e(e, t) {
      return (
        ((t = void 0 === t ? {} : t).tracks = e.audioTracks()),
        i.call(this, e, t) || this
      );
    }
    mt(e, i);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-audio-button " + i.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-audio-button " + i.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      (t.createItems = function (e) {
        void 0 === e && (e = []), (this.hideThreshold_ = 1);
        for (var t = this.player_.audioTracks(), i = 0; i < t.length; i++) {
          var n = t[i];
          e.push(
            new _n(this.player_, {
              track: n,
              selectable: !0,
              multiSelectable: !1,
            })
          );
        }
        return e;
      }),
      e
    );
  })(Ft);
  (I.prototype.controlText_ = "Audio Track"),
    pt.registerComponent("AudioTrackButton", I);
  var bn = (function (a) {
    function e(e, t) {
      var i,
        n = t.rate,
        r = parseFloat(n, 10);
      return (
        (t.label = n),
        (t.selected = r === e.playbackRate()),
        (t.selectable = !0),
        (t.multiSelectable = !1),
        ((i = a.call(this, e, t) || this).label = n),
        (i.rate = r),
        i.on(e, "ratechange", function (e) {
          return i.update(e);
        }),
        i
      );
    }
    mt(e, a);
    var t = e.prototype;
    return (
      (t.handleClick = function (e) {
        a.prototype.handleClick.call(this),
          this.player().playbackRate(this.rate);
      }),
      (t.update = function (e) {
        this.selected(this.player().playbackRate() === this.rate);
      }),
      e
    );
  })(jt);
  (bn.prototype.contentElType = "button"),
    pt.registerComponent("PlaybackRateMenuItem", bn);
  C = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.menuButton_.el_.setAttribute("aria-describedby", i.labelElId_),
        i.updateVisibility(),
        i.updateLabel(),
        i.on(e, "loadstart", function (e) {
          return i.updateVisibility(e);
        }),
        i.on(e, "ratechange", function (e) {
          return i.updateLabel(e);
        }),
        i.on(e, "playbackrateschange", function (e) {
          return i.handlePlaybackRateschange(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.createEl = function () {
        var e = n.prototype.createEl.call(this);
        return (
          (this.labelElId_ = "vjs-playback-rate-value-label-" + this.id_),
          (this.labelEl_ = $("div", {
            className: "vjs-playback-rate-value",
            id: this.labelElId_,
            textContent: "1x",
          })),
          e.appendChild(this.labelEl_),
          e
        );
      }),
      (t.dispose = function () {
        (this.labelEl_ = null), n.prototype.dispose.call(this);
      }),
      (t.buildCSSClass = function () {
        return "vjs-playback-rate " + n.prototype.buildCSSClass.call(this);
      }),
      (t.buildWrapperCSSClass = function () {
        return (
          "vjs-playback-rate " + n.prototype.buildWrapperCSSClass.call(this)
        );
      }),
      (t.createItems = function () {
        for (
          var e = this.playbackRates(), t = [], i = e.length - 1;
          0 <= i;
          i--
        )
          t.push(new bn(this.player(), { rate: e[i] + "x" }));
        return t;
      }),
      (t.updateARIAAttributes = function () {
        this.el().setAttribute("aria-valuenow", this.player().playbackRate());
      }),
      (t.handleClick = function (e) {
        var t = this.player().playbackRate(),
          i = this.playbackRates(),
          t = (i.indexOf(t) + 1) % i.length;
        this.player().playbackRate(i[t]);
      }),
      (t.handlePlaybackRateschange = function (e) {
        this.update();
      }),
      (t.playbackRates = function () {
        var e = this.player();
        return (e.playbackRates && e.playbackRates()) || [];
      }),
      (t.playbackRateSupported = function () {
        return (
          this.player().tech_ &&
          this.player().tech_.featuresPlaybackRate &&
          this.playbackRates() &&
          0 < this.playbackRates().length
        );
      }),
      (t.updateVisibility = function (e) {
        this.playbackRateSupported()
          ? this.removeClass("vjs-hidden")
          : this.addClass("vjs-hidden");
      }),
      (t.updateLabel = function (e) {
        this.playbackRateSupported() &&
          (this.labelEl_.textContent = this.player().playbackRate() + "x");
      }),
      e
    );
  })(Bt);
  (C.prototype.controlText_ = "Playback Rate"),
    pt.registerComponent("PlaybackRateMenuButton", C);
  k = (function (n) {
    function e() {
      return n.apply(this, arguments) || this;
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-spacer " + n.prototype.buildCSSClass.call(this);
      }),
      (t.createEl = function (e, t, i) {
        return (
          void 0 === e && (e = "div"),
          void 0 === i && (i = {}),
          (t = void 0 === t ? {} : t).className ||
            (t.className = this.buildCSSClass()),
          n.prototype.createEl.call(this, e, t, i)
        );
      }),
      e
    );
  })(pt);
  pt.registerComponent("Spacer", k),
    pt.registerComponent(
      "CustomControlSpacer",
      (function (e) {
        function t() {
          return e.apply(this, arguments) || this;
        }
        mt(t, e);
        var i = t.prototype;
        return (
          (i.buildCSSClass = function () {
            return (
              "vjs-custom-control-spacer " +
              e.prototype.buildCSSClass.call(this)
            );
          }),
          (i.createEl = function () {
            return e.prototype.createEl.call(this, "div", {
              className: this.buildCSSClass(),
              textContent: " ",
            });
          }),
          t
        );
      })(k)
    );
  li = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    return (
      mt(t, e),
      (t.prototype.createEl = function () {
        return e.prototype.createEl.call(this, "div", {
          className: "vjs-control-bar",
          dir: "ltr",
        });
      }),
      t
    );
  })(pt);
  (li.prototype.options_ = {
    children: [
      "playToggle",
      "volumePanel",
      "currentTimeDisplay",
      "timeDivider",
      "durationDisplay",
      "progressControl",
      "liveDisplay",
      "seekToLive",
      "remainingTimeDisplay",
      "customControlSpacer",
      "playbackRateMenuButton",
      "chaptersButton",
      "descriptionsButton",
      "subsCapsButton",
      "audioTrackButton",
      "fullscreenToggle",
    ],
  }),
    "exitPictureInPicture" in document &&
      li.prototype.options_.children.splice(
        li.prototype.options_.children.length - 1,
        0,
        "pictureInPictureToggle"
      ),
    pt.registerComponent("ControlBar", li);
  f = (function (n) {
    function e(e, t) {
      var i = n.call(this, e, t) || this;
      return (
        i.on(e, "error", function (e) {
          return i.open(e);
        }),
        i
      );
    }
    mt(e, n);
    var t = e.prototype;
    return (
      (t.buildCSSClass = function () {
        return "vjs-error-display " + n.prototype.buildCSSClass.call(this);
      }),
      (t.content = function () {
        var e = this.player().error();
        return e ? this.localize(e.message) : "";
      }),
      e
    );
  })(At);
  (f.prototype.options_ = g({}, At.prototype.options_, {
    pauseOnOpen: !1,
    fillAlways: !0,
    temporary: !1,
    uncloseable: !0,
  })),
    pt.registerComponent("ErrorDisplay", f);
  var Tn = "vjs-text-track-settings",
    ui = ["#000", "Black"],
    j = ["#00F", "Blue"],
    Xt = ["#0FF", "Cyan"],
    Ft = ["#0F0", "Green"],
    I = ["#F0F", "Magenta"],
    jt = ["#F00", "Red"],
    Bt = ["#FFF", "White"],
    C = ["#FF0", "Yellow"],
    k = ["1", "Opaque"],
    li = ["0.5", "Semi-Transparent"],
    f = ["0", "Transparent"],
    Sn = {
      backgroundColor: {
        selector: ".vjs-bg-color > select",
        id: "captions-background-color-%s",
        label: "Color",
        options: [ui, Bt, jt, Ft, j, C, I, Xt],
      },
      backgroundOpacity: {
        selector: ".vjs-bg-opacity > select",
        id: "captions-background-opacity-%s",
        label: "Transparency",
        options: [k, li, f],
      },
      color: {
        selector: ".vjs-fg-color > select",
        id: "captions-foreground-color-%s",
        label: "Color",
        options: [Bt, ui, jt, Ft, j, C, I, Xt],
      },
      edgeStyle: {
        selector: ".vjs-edge-style > select",
        id: "%s",
        label: "Text Edge Style",
        options: [
          ["none", "None"],
          ["raised", "Raised"],
          ["depressed", "Depressed"],
          ["uniform", "Uniform"],
          ["dropshadow", "Dropshadow"],
        ],
      },
      fontFamily: {
        selector: ".vjs-font-family > select",
        id: "captions-font-family-%s",
        label: "Font Family",
        options: [
          ["proportionalSansSerif", "Proportional Sans-Serif"],
          ["monospaceSansSerif", "Monospace Sans-Serif"],
          ["proportionalSerif", "Proportional Serif"],
          ["monospaceSerif", "Monospace Serif"],
          ["casual", "Casual"],
          ["script", "Script"],
          ["small-caps", "Small Caps"],
        ],
      },
      fontPercent: {
        selector: ".vjs-font-percent > select",
        id: "captions-font-size-%s",
        label: "Font Size",
        options: [
          ["0.50", "50%"],
          ["0.75", "75%"],
          ["1.00", "100%"],
          ["1.25", "125%"],
          ["1.50", "150%"],
          ["1.75", "175%"],
          ["2.00", "200%"],
          ["3.00", "300%"],
          ["4.00", "400%"],
        ],
        default: 2,
        parser: function (e) {
          return "1.00" === e ? null : Number(e);
        },
      },
      textOpacity: {
        selector: ".vjs-text-opacity > select",
        id: "captions-foreground-opacity-%s",
        label: "Transparency",
        options: [k, li],
      },
      windowColor: {
        selector: ".vjs-window-color > select",
        id: "captions-window-color-%s",
        label: "Color",
      },
      windowOpacity: {
        selector: ".vjs-window-opacity > select",
        id: "captions-window-opacity-%s",
        label: "Transparency",
        options: [f, li, k],
      },
    };
  function wn(e, t) {
    if ((e = t ? t(e) : e) && "none" !== e) return e;
  }
  (Sn.windowColor.options = Sn.backgroundColor.options),
    pt.registerComponent(
      "TextTrackSettings",
      (function (n) {
        function e(e, t) {
          var i;
          return (
            (t.temporary = !1),
            ((i = n.call(this, e, t) || this).updateDisplay =
              i.updateDisplay.bind(ft(i))),
            i.fill(),
            (i.hasBeenOpened_ = i.hasBeenFilled_ = !0),
            (i.endDialog = $("p", {
              className: "vjs-control-text",
              textContent: i.localize("End of dialog window."),
            })),
            i.el().appendChild(i.endDialog),
            i.setDefaults(),
            void 0 === t.persistTextTrackSettings &&
              (i.options_.persistTextTrackSettings =
                i.options_.playerOptions.persistTextTrackSettings),
            i.on(i.$(".vjs-done-button"), "click", function () {
              i.saveSettings(), i.close();
            }),
            i.on(i.$(".vjs-default-button"), "click", function () {
              i.setDefaults(), i.updateDisplay();
            }),
            _(Sn, function (e) {
              i.on(i.$(e.selector), "change", i.updateDisplay);
            }),
            i.options_.persistTextTrackSettings && i.restoreSettings(),
            i
          );
        }
        mt(e, n);
        var t = e.prototype;
        return (
          (t.dispose = function () {
            (this.endDialog = null), n.prototype.dispose.call(this);
          }),
          (t.createElSelect_ = function (e, t, i) {
            var n = this;
            void 0 === t && (t = ""), void 0 === i && (i = "label");
            var e = Sn[e],
              r = e.id.replace("%s", this.id_),
              a = [t, r].join(" ").trim();
            return [
              "<" +
                i +
                ' id="' +
                r +
                '" class="' +
                ("label" === i ? "vjs-label" : "") +
                '">',
              this.localize(e.label),
              "</" + i + ">",
              '<select aria-labelledby="' + a + '">',
            ]
              .concat(
                e.options.map(function (e) {
                  var t = r + "-" + e[1].replace(/\W+/g, "");
                  return [
                    '<option id="' + t + '" value="' + e[0] + '" ',
                    'aria-labelledby="' + a + " " + t + '">',
                    n.localize(e[1]),
                    "</option>",
                  ].join("");
                })
              )
              .concat("</select>")
              .join("");
          }),
          (t.createElFgColor_ = function () {
            var e = "captions-text-legend-" + this.id_;
            return [
              '<fieldset class="vjs-fg-color vjs-track-setting">',
              '<legend id="' + e + '">',
              this.localize("Text"),
              "</legend>",
              this.createElSelect_("color", e),
              '<span class="vjs-text-opacity vjs-opacity">',
              this.createElSelect_("textOpacity", e),
              "</span>",
              "</fieldset>",
            ].join("");
          }),
          (t.createElBgColor_ = function () {
            var e = "captions-background-" + this.id_;
            return [
              '<fieldset class="vjs-bg-color vjs-track-setting">',
              '<legend id="' + e + '">',
              this.localize("Background"),
              "</legend>",
              this.createElSelect_("backgroundColor", e),
              '<span class="vjs-bg-opacity vjs-opacity">',
              this.createElSelect_("backgroundOpacity", e),
              "</span>",
              "</fieldset>",
            ].join("");
          }),
          (t.createElWinColor_ = function () {
            var e = "captions-window-" + this.id_;
            return [
              '<fieldset class="vjs-window-color vjs-track-setting">',
              '<legend id="' + e + '">',
              this.localize("Window"),
              "</legend>",
              this.createElSelect_("windowColor", e),
              '<span class="vjs-window-opacity vjs-opacity">',
              this.createElSelect_("windowOpacity", e),
              "</span>",
              "</fieldset>",
            ].join("");
          }),
          (t.createElColors_ = function () {
            return $("div", {
              className: "vjs-track-settings-colors",
              innerHTML: [
                this.createElFgColor_(),
                this.createElBgColor_(),
                this.createElWinColor_(),
              ].join(""),
            });
          }),
          (t.createElFont_ = function () {
            return $("div", {
              className: "vjs-track-settings-font",
              innerHTML: [
                '<fieldset class="vjs-font-percent vjs-track-setting">',
                this.createElSelect_("fontPercent", "", "legend"),
                "</fieldset>",
                '<fieldset class="vjs-edge-style vjs-track-setting">',
                this.createElSelect_("edgeStyle", "", "legend"),
                "</fieldset>",
                '<fieldset class="vjs-font-family vjs-track-setting">',
                this.createElSelect_("fontFamily", "", "legend"),
                "</fieldset>",
              ].join(""),
            });
          }),
          (t.createElControls_ = function () {
            var e = this.localize("restore all settings to the default values");
            return $("div", {
              className: "vjs-track-settings-controls",
              innerHTML: [
                '<button type="button" class="vjs-default-button" title="' +
                  e +
                  '">',
                this.localize("Reset"),
                '<span class="vjs-control-text"> ' + e + "</span>",
                "</button>",
                '<button type="button" class="vjs-done-button">' +
                  this.localize("Done") +
                  "</button>",
              ].join(""),
            });
          }),
          (t.content = function () {
            return [
              this.createElColors_(),
              this.createElFont_(),
              this.createElControls_(),
            ];
          }),
          (t.label = function () {
            return this.localize("Caption Settings Dialog");
          }),
          (t.description = function () {
            return this.localize(
              "Beginning of dialog window. Escape will cancel and close the window."
            );
          }),
          (t.buildCSSClass = function () {
            return (
              n.prototype.buildCSSClass.call(this) + " vjs-text-track-settings"
            );
          }),
          (t.getValues = function () {
            var i,
              n,
              e,
              r = this;
            return (
              (n = function (e, t, i) {
                var n,
                  t =
                    ((n = r.$(t.selector)),
                    (t = t.parser),
                    wn(n.options[n.options.selectedIndex].value, t));
                return void 0 !== t && (e[i] = t), e;
              }),
              void 0 === (e = {}) && (e = 0),
              v((i = Sn)).reduce(function (e, t) {
                return n(e, i[t], t);
              }, e)
            );
          }),
          (t.setValues = function (i) {
            var n = this;
            _(Sn, function (e, t) {
              !(function (e, t, i) {
                if (t)
                  for (var n = 0; n < e.options.length; n++)
                    if (wn(e.options[n].value, i) === t) {
                      e.selectedIndex = n;
                      break;
                    }
              })(n.$(e.selector), i[t], e.parser);
            });
          }),
          (t.setDefaults = function () {
            var i = this;
            _(Sn, function (e) {
              var t = e.hasOwnProperty("default") ? e.default : 0;
              i.$(e.selector).selectedIndex = t;
            });
          }),
          (t.restoreSettings = function () {
            var e;
            try {
              e = JSON.parse(window.localStorage.getItem(Tn));
            } catch (e) {
              h.warn(e);
            }
            e && this.setValues(e);
          }),
          (t.saveSettings = function () {
            if (this.options_.persistTextTrackSettings) {
              var e = this.getValues();
              try {
                Object.keys(e).length
                  ? window.localStorage.setItem(Tn, JSON.stringify(e))
                  : window.localStorage.removeItem(Tn);
              } catch (e) {
                h.warn(e);
              }
            }
          }),
          (t.updateDisplay = function () {
            var e = this.player_.getChild("textTrackDisplay");
            e && e.updateDisplay();
          }),
          (t.conditionalBlur_ = function () {
            this.previouslyActiveEl_ = null;
            var e = this.player_.controlBar,
              t = e && e.subsCapsButton,
              e = e && e.captionsButton;
            t ? t.focus() : e && e.focus();
          }),
          e
        );
      })(At)
    ),
    pt.registerComponent(
      "ResizeManager",
      (function (a) {
        function e(e, t) {
          var i,
            n = t.ResizeObserver || window.ResizeObserver,
            r = lt(
              {
                createEl: !(n = null === t.ResizeObserver ? !1 : n),
                reportTouchActivity: !1,
              },
              t
            );
          return (
            ((i = a.call(this, e, r) || this).ResizeObserver =
              t.ResizeObserver || window.ResizeObserver),
            (i.loadListener_ = null),
            (i.resizeObserver_ = null),
            (i.debouncedHandler_ = Ge(
              function () {
                i.resizeHandler();
              },
              100,
              !1,
              ft(i)
            )),
            n
              ? ((i.resizeObserver_ = new i.ResizeObserver(
                  i.debouncedHandler_
                )),
                i.resizeObserver_.observe(e.el()))
              : ((i.loadListener_ = function () {
                  var e, t;
                  i.el_ &&
                    i.el_.contentWindow &&
                    ((e = i.debouncedHandler_),
                    (t = i.unloadListener_ =
                      function () {
                        Fe(this, "resize", e),
                          Fe(this, "unload", t),
                          (t = null);
                      }),
                    Be(i.el_.contentWindow, "unload", t),
                    Be(i.el_.contentWindow, "resize", e));
                }),
                i.one("load", i.loadListener_)),
            i
          );
        }
        mt(e, a);
        var t = e.prototype;
        return (
          (t.createEl = function () {
            return a.prototype.createEl.call(
              this,
              "iframe",
              { className: "vjs-resize-manager", tabIndex: -1 },
              { "aria-hidden": "true" }
            );
          }),
          (t.resizeHandler = function () {
            this.player_ &&
              this.player_.trigger &&
              this.player_.trigger("playerresize");
          }),
          (t.dispose = function () {
            this.debouncedHandler_ && this.debouncedHandler_.cancel(),
              this.resizeObserver_ &&
                (this.player_.el() &&
                  this.resizeObserver_.unobserve(this.player_.el()),
                this.resizeObserver_.disconnect()),
              this.loadListener_ && this.off("load", this.loadListener_),
              this.el_ &&
                this.el_.contentWindow &&
                this.unloadListener_ &&
                this.unloadListener_.call(this.el_.contentWindow),
              (this.ResizeObserver = null),
              (this.resizeObserver = null),
              (this.debouncedHandler_ = null),
              (this.loadListener_ = null),
              a.prototype.dispose.call(this);
          }),
          e
        );
      })(pt)
    );
  var En = { trackingThreshold: 20, liveTolerance: 15 };
  pt.registerComponent(
    "LiveTracker",
    (function (n) {
      function e(e, t) {
        var t = lt(En, t, { createEl: !1 }),
          i = n.call(this, e, t) || this;
        return (
          (i.handleVisibilityChange_ = function (e) {
            return i.handleVisibilityChange(e);
          }),
          (i.trackLiveHandler_ = function () {
            return i.trackLive_();
          }),
          (i.handlePlay_ = function (e) {
            return i.handlePlay(e);
          }),
          (i.handleFirstTimeupdate_ = function (e) {
            return i.handleFirstTimeupdate(e);
          }),
          (i.handleSeeked_ = function (e) {
            return i.handleSeeked(e);
          }),
          (i.seekToLiveEdge_ = function (e) {
            return i.seekToLiveEdge(e);
          }),
          i.reset_(),
          i.on(i.player_, "durationchange", function (e) {
            return i.handleDurationchange(e);
          }),
          i.on(i.player_, "canplay", function () {
            return i.toggleTracking();
          }),
          N &&
            "hidden" in document &&
            "visibilityState" in document &&
            i.on(document, "visibilitychange", i.handleVisibilityChange_),
          i
        );
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.handleVisibilityChange = function () {
          this.player_.duration() === 1 / 0 &&
            (document.hidden ? this.stopTracking() : this.startTracking());
        }),
        (t.trackLive_ = function () {
          var e,
            t = this.player_.seekable();
          t &&
            t.length &&
            ((e = Number(window.performance.now().toFixed(4))),
            (t = -1 === this.lastTime_ ? 0 : (e - this.lastTime_) / 1e3),
            (this.lastTime_ = e),
            (this.pastSeekEnd_ = this.pastSeekEnd() + t),
            (e = this.liveCurrentTime()),
            (t = this.player_.currentTime()),
            (t =
              this.player_.paused() ||
              this.seekedBehindLive_ ||
              Math.abs(e - t) > this.options_.liveTolerance),
            (t = !this.timeupdateSeen_ || e === 1 / 0 ? !1 : t) !==
              this.behindLiveEdge_ &&
              ((this.behindLiveEdge_ = t), this.trigger("liveedgechange")));
        }),
        (t.handleDurationchange = function () {
          this.toggleTracking();
        }),
        (t.toggleTracking = function () {
          this.player_.duration() === 1 / 0 &&
          this.liveWindow() >= this.options_.trackingThreshold
            ? (this.player_.options_.liveui &&
                this.player_.addClass("vjs-liveui"),
              this.startTracking())
            : (this.player_.removeClass("vjs-liveui"), this.stopTracking());
        }),
        (t.startTracking = function () {
          this.isTracking() ||
            (this.timeupdateSeen_ ||
              (this.timeupdateSeen_ = this.player_.hasStarted()),
            (this.trackingInterval_ = this.setInterval(
              this.trackLiveHandler_,
              30
            )),
            this.trackLive_(),
            this.on(this.player_, ["play", "pause"], this.trackLiveHandler_),
            this.timeupdateSeen_
              ? this.on(this.player_, "seeked", this.handleSeeked_)
              : (this.one(this.player_, "play", this.handlePlay_),
                this.one(
                  this.player_,
                  "timeupdate",
                  this.handleFirstTimeupdate_
                )));
        }),
        (t.handleFirstTimeupdate = function () {
          (this.timeupdateSeen_ = !0),
            this.on(this.player_, "seeked", this.handleSeeked_);
        }),
        (t.handleSeeked = function () {
          var e = Math.abs(this.liveCurrentTime() - this.player_.currentTime());
          (this.seekedBehindLive_ = this.nextSeekedFromUser_ && 2 < e),
            (this.nextSeekedFromUser_ = !1),
            this.trackLive_();
        }),
        (t.handlePlay = function () {
          this.one(this.player_, "timeupdate", this.seekToLiveEdge_);
        }),
        (t.reset_ = function () {
          (this.lastTime_ = -1),
            (this.pastSeekEnd_ = 0),
            (this.lastSeekEnd_ = -1),
            (this.behindLiveEdge_ = !0),
            (this.timeupdateSeen_ = !1),
            (this.seekedBehindLive_ = !1),
            (this.nextSeekedFromUser_ = !1),
            this.clearInterval(this.trackingInterval_),
            (this.trackingInterval_ = null),
            this.off(this.player_, ["play", "pause"], this.trackLiveHandler_),
            this.off(this.player_, "seeked", this.handleSeeked_),
            this.off(this.player_, "play", this.handlePlay_),
            this.off(this.player_, "timeupdate", this.handleFirstTimeupdate_),
            this.off(this.player_, "timeupdate", this.seekToLiveEdge_);
        }),
        (t.nextSeekedFromUser = function () {
          this.nextSeekedFromUser_ = !0;
        }),
        (t.stopTracking = function () {
          this.isTracking() && (this.reset_(), this.trigger("liveedgechange"));
        }),
        (t.seekableEnd = function () {
          for (
            var e = this.player_.seekable(), t = [], i = e ? e.length : 0;
            i--;

          )
            t.push(e.end(i));
          return t.length ? t.sort()[t.length - 1] : 1 / 0;
        }),
        (t.seekableStart = function () {
          for (
            var e = this.player_.seekable(), t = [], i = e ? e.length : 0;
            i--;

          )
            t.push(e.start(i));
          return t.length ? t.sort()[0] : 0;
        }),
        (t.liveWindow = function () {
          var e = this.liveCurrentTime();
          return e === 1 / 0 ? 0 : e - this.seekableStart();
        }),
        (t.isLive = function () {
          return this.isTracking();
        }),
        (t.atLiveEdge = function () {
          return !this.behindLiveEdge();
        }),
        (t.liveCurrentTime = function () {
          return this.pastSeekEnd() + this.seekableEnd();
        }),
        (t.pastSeekEnd = function () {
          var e = this.seekableEnd();
          return (
            -1 !== this.lastSeekEnd_ &&
              e !== this.lastSeekEnd_ &&
              (this.pastSeekEnd_ = 0),
            (this.lastSeekEnd_ = e),
            this.pastSeekEnd_
          );
        }),
        (t.behindLiveEdge = function () {
          return this.behindLiveEdge_;
        }),
        (t.isTracking = function () {
          return "number" == typeof this.trackingInterval_;
        }),
        (t.seekToLiveEdge = function () {
          (this.seekedBehindLive_ = !1),
            this.atLiveEdge() ||
              ((this.nextSeekedFromUser_ = !1),
              this.player_.currentTime(this.liveCurrentTime()));
        }),
        (t.dispose = function () {
          this.off(document, "visibilitychange", this.handleVisibilityChange_),
            this.stopTracking(),
            n.prototype.dispose.call(this);
        }),
        e
      );
    })(pt)
  );
  function kn(e) {
    if ((n = e.el()).hasAttribute("src")) return e.triggerSourceset(n.src), 1;
    var t = e.$$("source"),
      i = [],
      n = "";
    if (t.length) {
      for (var r = 0; r < t.length; r++) {
        var a = t[r].src;
        a && -1 === i.indexOf(a) && i.push(a);
      }
      return (
        !!i.length && (1 === i.length && (n = i[0]), e.triggerSourceset(n), !0)
      );
    }
  }
  function Cn(e, t) {
    for (
      var i = {}, n = 0;
      n < e.length &&
      !((i = Object.getOwnPropertyDescriptor(e[n], t)) && i.set && i.get);
      n++
    );
    return (i.enumerable = !0), (i.configurable = !0), i;
  }
  function In(a) {
    var t,
      e,
      i,
      s = a.el();
    s.resetSourceWatch_ ||
      ((t = {}),
      (e = Cn(
        [
          a.el(),
          window.HTMLMediaElement.prototype,
          window.Element.prototype,
          Ln,
        ],
        "innerHTML"
      )),
      (i = function (r) {
        return function () {
          for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
            t[i] = arguments[i];
          var n = r.apply(s, t);
          return kn(a), n;
        };
      }),
      ["append", "appendChild", "insertAdjacentHTML"].forEach(function (e) {
        s[e] && ((t[e] = s[e]), (s[e] = i(t[e])));
      }),
      Object.defineProperty(s, "innerHTML", lt(e, { set: i(e.set) })),
      (s.resetSourceWatch_ = function () {
        (s.resetSourceWatch_ = null),
          Object.keys(t).forEach(function (e) {
            s[e] = t[e];
          }),
          Object.defineProperty(s, "innerHTML", e);
      }),
      a.one("sourceset", s.resetSourceWatch_));
  }
  function xn(i) {
    var n, t, r, a;
    i.featuresSourceset &&
      ((n = i.el()).resetSourceset_ ||
        ((t = Cn([i.el(), window.HTMLMediaElement.prototype, Dn], "src")),
        (r = n.setAttribute),
        (a = n.load),
        Object.defineProperty(
          n,
          "src",
          lt(t, {
            set: function (e) {
              e = t.set.call(n, e);
              return i.triggerSourceset(n.src), e;
            },
          })
        ),
        (n.setAttribute = function (e, t) {
          t = r.call(n, e, t);
          return /src/i.test(e) && i.triggerSourceset(n.src), t;
        }),
        (n.load = function () {
          var e = a.call(n);
          return kn(i) || (i.triggerSourceset(""), In(i)), e;
        }),
        n.currentSrc ? i.triggerSourceset(n.currentSrc) : kn(i) || In(i),
        (n.resetSourceset_ = function () {
          (n.resetSourceset_ = null),
            (n.load = a),
            (n.setAttribute = r),
            Object.defineProperty(n, "src", t),
            n.resetSourceWatch_ && n.resetSourceWatch_();
        })));
  }
  function An(t, i, n, e) {
    function r(e) {
      return Object.defineProperty(t, i, {
        value: e,
        enumerable: !0,
        writable: !0,
      });
    }
    var a = {
      configurable: !0,
      enumerable: !0,
      get: function () {
        var e = n();
        return r(e), e;
      },
    };
    return (
      (e = void 0 === e ? !0 : e) && (a.set = r), Object.defineProperty(t, i, a)
    );
  }
  var Pn,
    Ln = Object.defineProperty({}, "innerHTML", {
      get: function () {
        return this.cloneNode(!0).innerHTML;
      },
      set: function (e) {
        var t = document.createElement(this.nodeName.toLowerCase());
        t.innerHTML = e;
        for (var i = document.createDocumentFragment(); t.childNodes.length; )
          i.appendChild(t.childNodes[0]);
        return (
          (this.innerText = ""),
          window.Element.prototype.appendChild.call(this, i),
          this.innerHTML
        );
      },
    }),
    Dn = Object.defineProperty({}, "src", {
      get: function () {
        return this.hasAttribute("src")
          ? Mt(window.Element.prototype.getAttribute.call(this, "src"))
          : "";
      },
      set: function (e) {
        return window.Element.prototype.setAttribute.call(this, "src", e), e;
      },
    }),
    On = (function (l) {
      function s(e, t) {
        var i = l.call(this, e, t) || this,
          t = e.source,
          n = !1;
        if (
          (t &&
          (i.el_.currentSrc !== t.src ||
            (e.tag && 3 === e.tag.initNetworkState_))
            ? i.setSource(t)
            : i.handleLateInit_(i.el_),
          e.enableSourceset && i.setupSourcesetHandling_(),
          (i.isScrubbing_ = !1),
          i.el_.hasChildNodes())
        ) {
          for (var r = i.el_.childNodes, a = r.length, s = []; a--; ) {
            var o = r[a];
            "track" === o.nodeName.toLowerCase() &&
              (i.featuresNativeTextTracks
                ? (i.remoteTextTrackEls().addTrackElement_(o),
                  i.remoteTextTracks().addTrack(o.track),
                  i.textTracks().addTrack(o.track),
                  n ||
                    i.el_.hasAttribute("crossorigin") ||
                    !Ut(o.src) ||
                    (n = !0))
                : s.push(o));
          }
          for (var u = 0; u < s.length; u++) i.el_.removeChild(s[u]);
        }
        return (
          i.proxyNativeTracks_(),
          i.featuresNativeTextTracks &&
            n &&
            h.warn(
              "Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."
            ),
          i.restoreMetadataTracksInIOSNativePlayer_(),
          (F || H || L) && !0 === e.nativeControlsForTouch && i.setControls(!0),
          i.proxyWebkitFullscreen_(),
          i.triggerReady(),
          i
        );
      }
      mt(s, l);
      var e = s.prototype;
      return (
        (e.dispose = function () {
          this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(),
            s.disposeMediaElement(this.el_),
            (this.options_ = null),
            l.prototype.dispose.call(this);
        }),
        (e.setupSourcesetHandling_ = function () {
          xn(this);
        }),
        (e.restoreMetadataTracksInIOSNativePlayer_ = function () {
          function e() {
            i = [];
            for (var e = 0; e < n.length; e++) {
              var t = n[e];
              "metadata" === t.kind && i.push({ track: t, storedMode: t.mode });
            }
          }
          var i,
            n = this.textTracks();
          e(),
            n.addEventListener("change", e),
            this.on("dispose", function () {
              return n.removeEventListener("change", e);
            });
          function r() {
            for (var e = 0; e < i.length; e++) {
              var t = i[e];
              "disabled" === t.track.mode &&
                t.track.mode !== t.storedMode &&
                (t.track.mode = t.storedMode);
            }
            n.removeEventListener("change", r);
          }
          this.on("webkitbeginfullscreen", function () {
            n.removeEventListener("change", e),
              n.removeEventListener("change", r),
              n.addEventListener("change", r);
          }),
            this.on("webkitendfullscreen", function () {
              n.removeEventListener("change", e),
                n.addEventListener("change", e),
                n.removeEventListener("change", r);
            });
        }),
        (e.overrideNative_ = function (e, t) {
          var i,
            n = this;
          t === this["featuresNative" + e + "Tracks"] &&
            (this[(i = e.toLowerCase()) + "TracksListeners_"] &&
              Object.keys(this[i + "TracksListeners_"]).forEach(function (e) {
                n.el()[i + "Tracks"].removeEventListener(
                  e,
                  n[i + "TracksListeners_"][e]
                );
              }),
            (this["featuresNative" + e + "Tracks"] = !t),
            (this[i + "TracksListeners_"] = null),
            this.proxyNativeTracksForType_(i));
        }),
        (e.overrideNativeAudioTracks = function (e) {
          this.overrideNative_("Audio", e);
        }),
        (e.overrideNativeVideoTracks = function (e) {
          this.overrideNative_("Video", e);
        }),
        (e.proxyNativeTracksForType_ = function (i) {
          var e,
            t,
            n = this,
            r = ai[i],
            a = this.el()[r.getterName],
            s = this[r.getterName]();
          this["featuresNative" + r.capitalName + "Tracks"] &&
            a &&
            a.addEventListener &&
            ((t = function () {
              for (var e = [], t = 0; t < s.length; t++) {
                for (var i = !1, n = 0; n < a.length; n++)
                  if (a[n] === s[t]) {
                    i = !0;
                    break;
                  }
                i || e.push(s[t]);
              }
              for (; e.length; ) s.removeTrack(e.shift());
            }),
            (this[r.getterName + "Listeners_"] = e =
              {
                change: function (e) {
                  var t = {
                    type: "change",
                    target: s,
                    currentTarget: s,
                    srcElement: s,
                  };
                  s.trigger(t),
                    "text" === i && n[si.remoteText.getterName]().trigger(t);
                },
                addtrack: function (e) {
                  s.addTrack(e.track);
                },
                removetrack: function (e) {
                  s.removeTrack(e.track);
                },
              }),
            Object.keys(e).forEach(function (t) {
              var i = e[t];
              a.addEventListener(t, i),
                n.on("dispose", function (e) {
                  return a.removeEventListener(t, i);
                });
            }),
            this.on("loadstart", t),
            this.on("dispose", function (e) {
              return n.off("loadstart", t);
            }));
        }),
        (e.proxyNativeTracks_ = function () {
          var t = this;
          ai.names.forEach(function (e) {
            t.proxyNativeTracksForType_(e);
          });
        }),
        (e.createEl = function () {
          var e,
            t = this.options_.tag;
          (t &&
            (this.options_.playerElIngest || this.movingMediaElementInDOM)) ||
            (t
              ? ((e = t.cloneNode(!0)),
                t.parentNode && t.parentNode.insertBefore(e, t),
                s.disposeMediaElement(t),
                (t = e))
              : ((t = document.createElement("video")),
                (e = lt({}, this.options_.tag && ae(this.options_.tag))),
                (F && !0 === this.options_.nativeControlsForTouch) ||
                  delete e.controls,
                re(t, b(e, { id: this.options_.techId, class: "vjs-tech" }))),
            (t.playerId = this.options_.playerId)),
            "undefined" != typeof this.options_.preload &&
              oe(t, "preload", this.options_.preload),
            void 0 !== this.options_.disablePictureInPicture &&
              (t.disablePictureInPicture =
                this.options_.disablePictureInPicture);
          for (
            var i = ["loop", "muted", "playsinline", "autoplay"], n = 0;
            n < i.length;
            n++
          ) {
            var r = i[n],
              a = this.options_[r];
            "undefined" != typeof a && (a ? oe(t, r, r) : ue(t, r), (t[r] = a));
          }
          return t;
        }),
        (e.handleLateInit_ = function (e) {
          if (0 !== e.networkState && 3 !== e.networkState) {
            if (0 === e.readyState) {
              var t = !1,
                i = function () {
                  t = !0;
                };
              this.on("loadstart", i);
              var n = function () {
                t || this.trigger("loadstart");
              };
              return (
                this.on("loadedmetadata", n),
                void this.ready(function () {
                  this.off("loadstart", i),
                    this.off("loadedmetadata", n),
                    t || this.trigger("loadstart");
                })
              );
            }
            var r = ["loadstart"];
            r.push("loadedmetadata"),
              2 <= e.readyState && r.push("loadeddata"),
              3 <= e.readyState && r.push("canplay"),
              4 <= e.readyState && r.push("canplaythrough"),
              this.ready(function () {
                r.forEach(function (e) {
                  this.trigger(e);
                }, this);
              });
          }
        }),
        (e.setScrubbing = function (e) {
          this.isScrubbing_ = e;
        }),
        (e.scrubbing = function () {
          return this.isScrubbing_;
        }),
        (e.setCurrentTime = function (e) {
          try {
            this.isScrubbing_ && this.el_.fastSeek && V
              ? this.el_.fastSeek(e)
              : (this.el_.currentTime = e);
          } catch (e) {
            h(e, "Video is not ready. (Video.js)");
          }
        }),
        (e.duration = function () {
          var t = this;
          return this.el_.duration === 1 / 0 &&
            A &&
            R &&
            0 === this.el_.currentTime
            ? (this.on("timeupdate", function e() {
                0 < t.el_.currentTime &&
                  (t.el_.duration === 1 / 0 && t.trigger("durationchange"),
                  t.off("timeupdate", e));
              }),
              NaN)
            : this.el_.duration || NaN;
        }),
        (e.width = function () {
          return this.el_.offsetWidth;
        }),
        (e.height = function () {
          return this.el_.offsetHeight;
        }),
        (e.proxyWebkitFullscreen_ = function () {
          var e,
            t,
            i = this;
          "webkitDisplayingFullscreen" in this.el_ &&
            ((e = function () {
              this.trigger("fullscreenchange", { isFullscreen: !1 }),
                this.el_.controls &&
                  !this.options_.nativeControlsForTouch &&
                  this.controls() &&
                  (this.el_.controls = !1);
            }),
            (t = function () {
              "webkitPresentationMode" in this.el_ &&
                "picture-in-picture" !== this.el_.webkitPresentationMode &&
                (this.one("webkitendfullscreen", e),
                this.trigger("fullscreenchange", {
                  isFullscreen: !0,
                  nativeIOSFullscreen: !0,
                }));
            }),
            this.on("webkitbeginfullscreen", t),
            this.on("dispose", function () {
              i.off("webkitbeginfullscreen", t),
                i.off("webkitendfullscreen", e);
            }));
        }),
        (e.supportsFullScreen = function () {
          if ("function" == typeof this.el_.webkitEnterFullScreen) {
            var e = (window.navigator && window.navigator.userAgent) || "";
            if (/Android/.test(e) || !/Chrome|Mac OS X 10.5/.test(e)) return !0;
          }
          return !1;
        }),
        (e.enterFullScreen = function () {
          var e = this.el_;
          if (e.paused && e.networkState <= e.HAVE_METADATA)
            Et(this.el_.play()),
              this.setTimeout(function () {
                e.pause();
                try {
                  e.webkitEnterFullScreen();
                } catch (e) {
                  this.trigger("fullscreenerror", e);
                }
              }, 0);
          else
            try {
              e.webkitEnterFullScreen();
            } catch (e) {
              this.trigger("fullscreenerror", e);
            }
        }),
        (e.exitFullScreen = function () {
          this.el_.webkitDisplayingFullscreen
            ? this.el_.webkitExitFullScreen()
            : this.trigger(
                "fullscreenerror",
                new Error("The video is not fullscreen")
              );
        }),
        (e.requestPictureInPicture = function () {
          return this.el_.requestPictureInPicture();
        }),
        (e.src = function (e) {
          if (void 0 === e) return this.el_.src;
          this.setSrc(e);
        }),
        (e.reset = function () {
          s.resetMediaElement(this.el_);
        }),
        (e.currentSrc = function () {
          return this.currentSource_
            ? this.currentSource_.src
            : this.el_.currentSrc;
        }),
        (e.setControls = function (e) {
          this.el_.controls = !!e;
        }),
        (e.addTextTrack = function (e, t, i) {
          return this.featuresNativeTextTracks
            ? this.el_.addTextTrack(e, t, i)
            : l.prototype.addTextTrack.call(this, e, t, i);
        }),
        (e.createRemoteTextTrack = function (e) {
          if (!this.featuresNativeTextTracks)
            return l.prototype.createRemoteTextTrack.call(this, e);
          var t = document.createElement("track");
          return (
            e.kind && (t.kind = e.kind),
            e.label && (t.label = e.label),
            (e.language || e.srclang) && (t.srclang = e.language || e.srclang),
            e.default && (t.default = e.default),
            e.id && (t.id = e.id),
            e.src && (t.src = e.src),
            t
          );
        }),
        (e.addRemoteTextTrack = function (e, t) {
          t = l.prototype.addRemoteTextTrack.call(this, e, t);
          return this.featuresNativeTextTracks && this.el().appendChild(t), t;
        }),
        (e.removeRemoteTextTrack = function (e) {
          if (
            (l.prototype.removeRemoteTextTrack.call(this, e),
            this.featuresNativeTextTracks)
          )
            for (var t = this.$$("track"), i = t.length; i--; )
              (e !== t[i] && e !== t[i].track) || this.el().removeChild(t[i]);
        }),
        (e.getVideoPlaybackQuality = function () {
          if ("function" == typeof this.el().getVideoPlaybackQuality)
            return this.el().getVideoPlaybackQuality();
          var e = {};
          return (
            "undefined" != typeof this.el().webkitDroppedFrameCount &&
              "undefined" != typeof this.el().webkitDecodedFrameCount &&
              ((e.droppedVideoFrames = this.el().webkitDroppedFrameCount),
              (e.totalVideoFrames = this.el().webkitDecodedFrameCount)),
            window.performance && "function" == typeof window.performance.now
              ? (e.creationTime = window.performance.now())
              : window.performance &&
                window.performance.timing &&
                "number" == typeof window.performance.timing.navigationStart &&
                (e.creationTime =
                  window.Date.now() -
                  window.performance.timing.navigationStart),
            e
          );
        }),
        s
      );
    })(ji);
  An(On, "TEST_VID", function () {
    if (X()) {
      var e = document.createElement("video"),
        t = document.createElement("track");
      return (
        (t.kind = "captions"),
        (t.srclang = "en"),
        (t.label = "English"),
        e.appendChild(t),
        e
      );
    }
  }),
    (On.isSupported = function () {
      try {
        On.TEST_VID.volume = 0.5;
      } catch (e) {
        return !1;
      }
      return !(!On.TEST_VID || !On.TEST_VID.canPlayType);
    }),
    (On.canPlayType = function (e) {
      return On.TEST_VID.canPlayType(e);
    }),
    (On.canPlaySource = function (e, t) {
      return On.canPlayType(e.type);
    }),
    (On.canControlVolume = function () {
      try {
        var e = On.TEST_VID.volume;
        On.TEST_VID.volume = e / 2 + 0.1;
        var t = e !== On.TEST_VID.volume;
        return t && q
          ? (window.setTimeout(function () {
              On &&
                On.prototype &&
                (On.prototype.featuresVolumeControl = e !== On.TEST_VID.volume);
            }),
            !1)
          : t;
      } catch (e) {
        return !1;
      }
    }),
    (On.canMuteVolume = function () {
      try {
        var e = On.TEST_VID.muted;
        return (
          (On.TEST_VID.muted = !e),
          On.TEST_VID.muted
            ? oe(On.TEST_VID, "muted", "muted")
            : ue(On.TEST_VID, "muted"),
          e !== On.TEST_VID.muted
        );
      } catch (e) {
        return !1;
      }
    }),
    (On.canControlPlaybackRate = function () {
      if (A && R && M < 58) return !1;
      try {
        var e = On.TEST_VID.playbackRate;
        return (
          (On.TEST_VID.playbackRate = e / 2 + 0.1),
          e !== On.TEST_VID.playbackRate
        );
      } catch (e) {
        return !1;
      }
    }),
    (On.canOverrideAttributes = function () {
      try {
        var e = function () {};
        Object.defineProperty(document.createElement("video"), "src", {
          get: e,
          set: e,
        }),
          Object.defineProperty(document.createElement("audio"), "src", {
            get: e,
            set: e,
          }),
          Object.defineProperty(document.createElement("video"), "innerHTML", {
            get: e,
            set: e,
          }),
          Object.defineProperty(document.createElement("audio"), "innerHTML", {
            get: e,
            set: e,
          });
      } catch (e) {
        return !1;
      }
      return !0;
    }),
    (On.supportsNativeTextTracks = function () {
      return V || (q && R);
    }),
    (On.supportsNativeVideoTracks = function () {
      return !(!On.TEST_VID || !On.TEST_VID.videoTracks);
    }),
    (On.supportsNativeAudioTracks = function () {
      return !(!On.TEST_VID || !On.TEST_VID.audioTracks);
    }),
    (On.Events = [
      "loadstart",
      "suspend",
      "abort",
      "error",
      "emptied",
      "stalled",
      "loadedmetadata",
      "loadeddata",
      "canplay",
      "canplaythrough",
      "playing",
      "waiting",
      "seeking",
      "seeked",
      "ended",
      "durationchange",
      "timeupdate",
      "progress",
      "play",
      "pause",
      "ratechange",
      "resize",
      "volumechange",
    ]),
    [
      ["featuresMuteControl", "canMuteVolume"],
      ["featuresPlaybackRate", "canControlPlaybackRate"],
      ["featuresSourceset", "canOverrideAttributes"],
      ["featuresNativeTextTracks", "supportsNativeTextTracks"],
      ["featuresNativeVideoTracks", "supportsNativeVideoTracks"],
      ["featuresNativeAudioTracks", "supportsNativeAudioTracks"],
    ].forEach(function (e) {
      var t = e[0],
        i = e[1];
      An(
        On.prototype,
        t,
        function () {
          return On[i]();
        },
        !0
      );
    }),
    (On.prototype.featuresVolumeControl = On.canControlVolume()),
    (On.prototype.movingMediaElementInDOM = !q),
    (On.prototype.featuresFullscreenResize = !0),
    (On.prototype.featuresProgressEvents = !0),
    (On.prototype.featuresTimeupdateEvents = !0),
    (On.patchCanPlayType = function () {
      4 <= P &&
        !D &&
        !R &&
        ((Pn = On.TEST_VID && On.TEST_VID.constructor.prototype.canPlayType),
        (On.TEST_VID.constructor.prototype.canPlayType = function (e) {
          return e && /^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)
            ? "maybe"
            : Pn.call(this, e);
        }));
    }),
    (On.unpatchCanPlayType = function () {
      var e = On.TEST_VID.constructor.prototype.canPlayType;
      return Pn && (On.TEST_VID.constructor.prototype.canPlayType = Pn), e;
    }),
    On.patchCanPlayType(),
    (On.disposeMediaElement = function (e) {
      if (e) {
        for (e.parentNode && e.parentNode.removeChild(e); e.hasChildNodes(); )
          e.removeChild(e.firstChild);
        e.removeAttribute("src"),
          "function" == typeof e.load &&
            (function () {
              try {
                e.load();
              } catch (e) {}
            })();
      }
    }),
    (On.resetMediaElement = function (e) {
      if (e) {
        for (var t = e.querySelectorAll("source"), i = t.length; i--; )
          e.removeChild(t[i]);
        e.removeAttribute("src"),
          "function" == typeof e.load &&
            (function () {
              try {
                e.load();
              } catch (e) {}
            })();
      }
    }),
    [
      "muted",
      "defaultMuted",
      "autoplay",
      "controls",
      "loop",
      "playsinline",
    ].forEach(function (e) {
      On.prototype[e] = function () {
        return this.el_[e] || this.el_.hasAttribute(e);
      };
    }),
    ["muted", "defaultMuted", "autoplay", "loop", "playsinline"].forEach(
      function (t) {
        On.prototype["set" + ut(t)] = function (e) {
          (this.el_[t] = e)
            ? this.el_.setAttribute(t, t)
            : this.el_.removeAttribute(t);
        };
      }
    ),
    [
      "paused",
      "currentTime",
      "buffered",
      "volume",
      "poster",
      "preload",
      "error",
      "seeking",
      "seekable",
      "ended",
      "playbackRate",
      "defaultPlaybackRate",
      "disablePictureInPicture",
      "played",
      "networkState",
      "readyState",
      "videoWidth",
      "videoHeight",
      "crossOrigin",
    ].forEach(function (e) {
      On.prototype[e] = function () {
        return this.el_[e];
      };
    }),
    [
      "volume",
      "src",
      "poster",
      "preload",
      "playbackRate",
      "defaultPlaybackRate",
      "disablePictureInPicture",
      "crossOrigin",
    ].forEach(function (t) {
      On.prototype["set" + ut(t)] = function (e) {
        this.el_[t] = e;
      };
    }),
    ["pause", "load", "play"].forEach(function (e) {
      On.prototype[e] = function () {
        return this.el_[e]();
      };
    }),
    ji.withSourceHandlers(On),
    (On.nativeSourceHandler = {}),
    (On.nativeSourceHandler.canPlayType = function (e) {
      try {
        return On.TEST_VID.canPlayType(e);
      } catch (e) {
        return "";
      }
    }),
    (On.nativeSourceHandler.canHandleSource = function (e, t) {
      if (e.type) return On.nativeSourceHandler.canPlayType(e.type);
      if (e.src) {
        e = Nt(e.src);
        return On.nativeSourceHandler.canPlayType("video/" + e);
      }
      return "";
    }),
    (On.nativeSourceHandler.handleSource = function (e, t, i) {
      t.setSrc(e.src);
    }),
    (On.nativeSourceHandler.dispose = function () {}),
    On.registerSourceHandler(On.nativeSourceHandler),
    ji.registerTech("Html5", On);
  var Rn = [
      "progress",
      "abort",
      "suspend",
      "emptied",
      "stalled",
      "loadedmetadata",
      "loadeddata",
      "timeupdate",
      "resize",
      "volumechange",
      "texttrackchange",
    ],
    Mn = {
      canplay: "CanPlay",
      canplaythrough: "CanPlayThrough",
      playing: "Playing",
      seeked: "Seeked",
    },
    Nn = ["tiny", "xsmall", "small", "medium", "large", "xlarge", "huge"],
    Un = {};
  Nn.forEach(function (e) {
    var t = "x" === e.charAt(0) ? "x-" + e.substring(1) : e;
    Un[e] = "vjs-layout-" + t;
  });
  var Bn = {
      tiny: 210,
      xsmall: 320,
      small: 425,
      medium: 768,
      large: 1440,
      xlarge: 2560,
      huge: 1 / 0,
    },
    Fn = (function (c) {
      function o(e, t, i) {
        var n, r;
        if (
          ((e.id = e.id || t.id || "vjs_video_" + Pe++),
          ((t = b(o.getTagSettings(e), t)).initChildren = !1),
          (t.createEl = !1),
          (t.evented = !1),
          (t.reportTouchActivity = !1),
          !t.language)
        )
          if ("function" == typeof e.closest) {
            var a = e.closest("[lang]");
            a && a.getAttribute && (t.language = a.getAttribute("lang"));
          } else
            for (var s = e; s && 1 === s.nodeType; ) {
              if (ae(s).hasOwnProperty("lang")) {
                t.language = s.getAttribute("lang");
                break;
              }
              s = s.parentNode;
            }
        if (
          (((n =
            c.call(this, null, t, i) || this).boundDocumentFullscreenChange_ =
            function (e) {
              return n.documentFullscreenChange_(e);
            }),
          (n.boundFullWindowOnEscKey_ = function (e) {
            return n.fullWindowOnEscKey(e);
          }),
          (n.boundUpdateStyleEl_ = function (e) {
            return n.updateStyleEl_(e);
          }),
          (n.boundApplyInitTime_ = function (e) {
            return n.applyInitTime_(e);
          }),
          (n.boundUpdateCurrentBreakpoint_ = function (e) {
            return n.updateCurrentBreakpoint_(e);
          }),
          (n.boundHandleTechClick_ = function (e) {
            return n.handleTechClick_(e);
          }),
          (n.boundHandleTechDoubleClick_ = function (e) {
            return n.handleTechDoubleClick_(e);
          }),
          (n.boundHandleTechTouchStart_ = function (e) {
            return n.handleTechTouchStart_(e);
          }),
          (n.boundHandleTechTouchMove_ = function (e) {
            return n.handleTechTouchMove_(e);
          }),
          (n.boundHandleTechTouchEnd_ = function (e) {
            return n.handleTechTouchEnd_(e);
          }),
          (n.boundHandleTechTap_ = function (e) {
            return n.handleTechTap_(e);
          }),
          (n.isFullscreen_ = !1),
          (n.log = p(n.id_)),
          (n.fsApi_ = l),
          (n.isPosterFromTech_ = !1),
          (n.queuedCallbacks_ = []),
          (n.isReady_ = !1),
          (n.hasStarted_ = !1),
          (n.userActive_ = !1),
          (n.debugEnabled_ = !1),
          !n.options_ || !n.options_.techOrder || !n.options_.techOrder.length)
        )
          throw new Error(
            "No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?"
          );
        (n.tag = e),
          (n.tagAttributes = e && ae(e)),
          n.language(n.options_.language),
          t.languages
            ? ((r = {}),
              Object.getOwnPropertyNames(t.languages).forEach(function (e) {
                r[e.toLowerCase()] = t.languages[e];
              }),
              (n.languages_ = r))
            : (n.languages_ = o.prototype.options_.languages),
          n.resetCache_(),
          (n.poster_ = t.poster || ""),
          (n.controls_ = !!t.controls),
          (e.controls = !1),
          e.removeAttribute("controls"),
          (n.changingSrc_ = !1),
          (n.playCallbacks_ = []),
          (n.playTerminatedQueue_ = []),
          e.hasAttribute("autoplay")
            ? n.autoplay(!0)
            : n.autoplay(n.options_.autoplay),
          t.plugins &&
            Object.keys(t.plugins).forEach(function (e) {
              if ("function" != typeof n[e])
                throw new Error('plugin "' + e + '" does not exist');
            }),
          (n.scrubbing_ = !1),
          (n.el_ = n.createEl()),
          rt(ft(n), { eventBusKey: "el_" }),
          n.fsApi_.requestFullscreen &&
            (Be(
              document,
              n.fsApi_.fullscreenchange,
              n.boundDocumentFullscreenChange_
            ),
            n.on(n.fsApi_.fullscreenchange, n.boundDocumentFullscreenChange_)),
          n.fluid_ && n.on(["playerreset", "resize"], n.boundUpdateStyleEl_);
        i = lt(n.options_);
        t.plugins &&
          Object.keys(t.plugins).forEach(function (e) {
            n[e](t.plugins[e]);
          }),
          t.debug && n.debug(!0),
          (n.options_.playerOptions = i),
          (n.middleware_ = []),
          n.playbackRates(t.playbackRates),
          n.initChildren(),
          n.isAudio("audio" === e.nodeName.toLowerCase()),
          n.controls()
            ? n.addClass("vjs-controls-enabled")
            : n.addClass("vjs-controls-disabled"),
          n.el_.setAttribute("role", "region"),
          n.isAudio()
            ? n.el_.setAttribute("aria-label", n.localize("Audio Player"))
            : n.el_.setAttribute("aria-label", n.localize("Video Player")),
          n.isAudio() && n.addClass("vjs-audio"),
          n.flexNotSupported_() && n.addClass("vjs-no-flex"),
          F && n.addClass("vjs-touch-enabled"),
          q || n.addClass("vjs-workinghover"),
          (o.players[n.id_] = ft(n));
        e = u.split(".")[0];
        return (
          n.addClass("vjs-v" + e),
          n.userActive(!0),
          n.reportUserActivity(),
          n.one("play", function (e) {
            return n.listenForUserActivity_(e);
          }),
          n.on("stageclick", function (e) {
            return n.handleStageClick_(e);
          }),
          n.on("keydown", function (e) {
            return n.handleKeyDown(e);
          }),
          n.on("languagechange", function (e) {
            return n.handleLanguagechange(e);
          }),
          n.breakpoints(n.options_.breakpoints),
          n.responsive(n.options_.responsive),
          n
        );
      }
      mt(o, c);
      var e = o.prototype;
      return (
        (e.dispose = function () {
          var t = this;
          this.trigger("dispose"),
            this.off("dispose"),
            Fe(
              document,
              this.fsApi_.fullscreenchange,
              this.boundDocumentFullscreenChange_
            ),
            Fe(document, "keydown", this.boundFullWindowOnEscKey_),
            this.styleEl_ &&
              this.styleEl_.parentNode &&
              (this.styleEl_.parentNode.removeChild(this.styleEl_),
              (this.styleEl_ = null)),
            (o.players[this.id_] = null),
            this.tag && this.tag.player && (this.tag.player = null),
            this.el_ && this.el_.player && (this.el_.player = null),
            this.tech_ &&
              (this.tech_.dispose(),
              (this.isPosterFromTech_ = !1),
              (this.poster_ = "")),
            this.playerElIngest_ && (this.playerElIngest_ = null),
            this.tag && (this.tag = null),
            (qi[this.id()] = null),
            oi.names.forEach(function (e) {
              (e = oi[e]), (e = t[e.getterName]());
              e && e.off && e.off();
            }),
            c.prototype.dispose.call(this);
        }),
        (e.createEl = function () {
          var t,
            i = this.tag,
            e = (this.playerElIngest_ =
              i.parentNode &&
              i.parentNode.hasAttribute &&
              i.parentNode.hasAttribute("data-vjs-player")),
            n = "video-js" === this.tag.tagName.toLowerCase();
          e
            ? (t = this.el_ = i.parentNode)
            : n || (t = this.el_ = c.prototype.createEl.call(this, "div"));
          var r,
            a,
            s = ae(i);
          if (n) {
            for (
              t = this.el_ = i, i = this.tag = document.createElement("video");
              t.children.length;

            )
              i.appendChild(t.firstChild);
            ee(t, "video-js") || te(t, "video-js"),
              t.appendChild(i),
              (e = this.playerElIngest_ = t),
              Object.keys(t).forEach(function (e) {
                try {
                  i[e] = t[e];
                } catch (e) {}
              });
          }
          i.setAttribute("tabindex", "-1"),
            (s.tabindex = "-1"),
            (N || (R && B)) &&
              (i.setAttribute("role", "application"), (s.role = "application")),
            i.removeAttribute("width"),
            i.removeAttribute("height"),
            "width" in s && delete s.width,
            "height" in s && delete s.height,
            Object.getOwnPropertyNames(s).forEach(function (e) {
              (n && "class" === e) || t.setAttribute(e, s[e]),
                n && i.setAttribute(e, s[e]);
            }),
            (i.playerId = i.id),
            (i.id += "_html5_api"),
            (i.className = "vjs-tech"),
            (i.player = t.player = this).addClass("vjs-paused"),
            !0 !== window.VIDEOJS_NO_DYNAMIC_STYLE &&
              ((this.styleEl_ = xe("vjs-styles-dimensions")),
              (r = Te(".vjs-styles-defaults")),
              (a = Te("head")).insertBefore(
                this.styleEl_,
                r ? r.nextSibling : a.firstChild
              )),
            (this.fill_ = !1),
            (this.fluid_ = !1),
            this.width(this.options_.width),
            this.height(this.options_.height),
            this.fill(this.options_.fill),
            this.fluid(this.options_.fluid),
            this.aspectRatio(this.options_.aspectRatio),
            this.crossOrigin(
              this.options_.crossOrigin || this.options_.crossorigin
            );
          for (var o = i.getElementsByTagName("a"), u = 0; u < o.length; u++) {
            var l = o.item(u);
            te(l, "vjs-hidden"), l.setAttribute("hidden", "hidden");
          }
          return (
            (i.initNetworkState_ = i.networkState),
            i.parentNode && !e && i.parentNode.insertBefore(t, i),
            Z(i, t),
            this.children_.unshift(i),
            this.el_.setAttribute("lang", this.language_),
            this.el_.setAttribute("translate", "no"),
            (this.el_ = t)
          );
        }),
        (e.crossOrigin = function (e) {
          if (!e) return this.techGet_("crossOrigin");
          "anonymous" === e || "use-credentials" === e
            ? this.techCall_("setCrossOrigin", e)
            : h.warn(
                'crossOrigin must be "anonymous" or "use-credentials", given "' +
                  e +
                  '"'
              );
        }),
        (e.width = function (e) {
          return this.dimension("width", e);
        }),
        (e.height = function (e) {
          return this.dimension("height", e);
        }),
        (e.dimension = function (e, t) {
          var i = e + "_";
          if (void 0 === t) return this[i] || 0;
          if ("" === t || "auto" === t)
            return (this[i] = void 0), void this.updateStyleEl_();
          var n = parseFloat(t);
          isNaN(n)
            ? h.error('Improper value "' + t + '" supplied for for ' + e)
            : ((this[i] = n), this.updateStyleEl_());
        }),
        (e.fluid = function (e) {
          var t,
            i = this;
          if (void 0 === e) return !!this.fluid_;
          (this.fluid_ = !!e),
            it(this) &&
              this.off(["playerreset", "resize"], this.boundUpdateStyleEl_),
            e
              ? (this.addClass("vjs-fluid"),
                this.fill(!1),
                (t = function () {
                  i.on(["playerreset", "resize"], i.boundUpdateStyleEl_);
                }),
                it((e = this))
                  ? t()
                  : (e.eventedCallbacks || (e.eventedCallbacks = []),
                    e.eventedCallbacks.push(t)))
              : this.removeClass("vjs-fluid"),
            this.updateStyleEl_();
        }),
        (e.fill = function (e) {
          if (void 0 === e) return !!this.fill_;
          (this.fill_ = !!e),
            e
              ? (this.addClass("vjs-fill"), this.fluid(!1))
              : this.removeClass("vjs-fill");
        }),
        (e.aspectRatio = function (e) {
          if (void 0 === e) return this.aspectRatio_;
          if (!/^\d+\:\d+$/.test(e))
            throw new Error(
              "Improper value supplied for aspect ratio. The format should be width:height, for example 16:9."
            );
          (this.aspectRatio_ = e), this.fluid(!0), this.updateStyleEl_();
        }),
        (e.updateStyleEl_ = function () {
          var e, t, i, n;
          !0 !== window.VIDEOJS_NO_DYNAMIC_STYLE
            ? ((n =
                (i = (
                  void 0 !== this.aspectRatio_ && "auto" !== this.aspectRatio_
                    ? this.aspectRatio_
                    : 0 < this.videoWidth()
                    ? this.videoWidth() + ":" + this.videoHeight()
                    : "16:9"
                ).split(":"))[1] / i[0]),
              (e =
                void 0 !== this.width_
                  ? this.width_
                  : void 0 !== this.height_
                  ? this.height_ / n
                  : this.videoWidth() || 300),
              (t = void 0 !== this.height_ ? this.height_ : e * n),
              (i = /^[^a-zA-Z]/.test(this.id())
                ? "dimensions-" + this.id()
                : this.id() + "-dimensions"),
              this.addClass(i),
              Ae(
                this.styleEl_,
                "\n      ." +
                  i +
                  " {\n        width: " +
                  e +
                  "px;\n        height: " +
                  t +
                  "px;\n      }\n\n      ." +
                  i +
                  ".vjs-fluid {\n        padding-top: " +
                  100 * n +
                  "%;\n      }\n    "
              ))
            : ((t =
                "number" == typeof this.width_
                  ? this.width_
                  : this.options_.width),
              (i =
                "number" == typeof this.height_
                  ? this.height_
                  : this.options_.height),
              (n = this.tech_ && this.tech_.el()) &&
                (0 <= t && (n.width = t), 0 <= i && (n.height = i)));
        }),
        (e.loadTech_ = function (e, t) {
          var i = this;
          this.tech_ && this.unloadTech_();
          var n = ut(e),
            r = e.charAt(0).toLowerCase() + e.slice(1);
          "Html5" !== n &&
            this.tag &&
            (ji.getTech("Html5").disposeMediaElement(this.tag),
            (this.tag.player = null),
            (this.tag = null)),
            (this.techName_ = n),
            (this.isReady_ = !1);
          var a = this.autoplay(),
            s = {
              source: t,
              autoplay: (a =
                "string" == typeof this.autoplay() ||
                (!0 === this.autoplay() && this.options_.normalizeAutoplay)
                  ? !1
                  : a),
              nativeControlsForTouch: this.options_.nativeControlsForTouch,
              playerId: this.id(),
              techId: this.id() + "_" + r + "_api",
              playsinline: this.options_.playsinline,
              preload: this.options_.preload,
              loop: this.options_.loop,
              disablePictureInPicture: this.options_.disablePictureInPicture,
              muted: this.options_.muted,
              poster: this.poster(),
              language: this.language(),
              playerElIngest: this.playerElIngest_ || !1,
              "vtt.js": this.options_["vtt.js"],
              canOverridePoster: !!this.options_.techCanOverridePoster,
              enableSourceset: this.options_.enableSourceset,
              Promise: this.options_.Promise,
            };
          oi.names.forEach(function (e) {
            e = oi[e];
            s[e.getterName] = i[e.privateName];
          }),
            b(s, this.options_[n]),
            b(s, this.options_[r]),
            b(s, this.options_[e.toLowerCase()]),
            this.tag && (s.tag = this.tag),
            t &&
              t.src === this.cache_.src &&
              0 < this.cache_.currentTime &&
              (s.startTime = this.cache_.currentTime);
          e = ji.getTech(e);
          if (!e)
            throw new Error(
              "No Tech named '" +
                n +
                "' exists! '" +
                n +
                "' should be registered using videojs.registerTech()'"
            );
          (this.tech_ = new e(s)),
            this.tech_.ready(Ve(this, this.handleTechReady_), !0),
            It(this.textTracksJson_ || [], this.tech_),
            Rn.forEach(function (t) {
              i.on(i.tech_, t, function (e) {
                return i["handleTech" + ut(t) + "_"](e);
              });
            }),
            Object.keys(Mn).forEach(function (t) {
              i.on(i.tech_, t, function (e) {
                0 === i.tech_.playbackRate() && i.tech_.seeking()
                  ? i.queuedCallbacks_.push({
                      callback: i["handleTech" + Mn[t] + "_"].bind(i),
                      event: e,
                    })
                  : i["handleTech" + Mn[t] + "_"](e);
              });
            }),
            this.on(this.tech_, "loadstart", function (e) {
              return i.handleTechLoadStart_(e);
            }),
            this.on(this.tech_, "sourceset", function (e) {
              return i.handleTechSourceset_(e);
            }),
            this.on(this.tech_, "waiting", function (e) {
              return i.handleTechWaiting_(e);
            }),
            this.on(this.tech_, "ended", function (e) {
              return i.handleTechEnded_(e);
            }),
            this.on(this.tech_, "seeking", function (e) {
              return i.handleTechSeeking_(e);
            }),
            this.on(this.tech_, "play", function (e) {
              return i.handleTechPlay_(e);
            }),
            this.on(this.tech_, "firstplay", function (e) {
              return i.handleTechFirstPlay_(e);
            }),
            this.on(this.tech_, "pause", function (e) {
              return i.handleTechPause_(e);
            }),
            this.on(this.tech_, "durationchange", function (e) {
              return i.handleTechDurationChange_(e);
            }),
            this.on(this.tech_, "fullscreenchange", function (e, t) {
              return i.handleTechFullscreenChange_(e, t);
            }),
            this.on(this.tech_, "fullscreenerror", function (e, t) {
              return i.handleTechFullscreenError_(e, t);
            }),
            this.on(this.tech_, "enterpictureinpicture", function (e) {
              return i.handleTechEnterPictureInPicture_(e);
            }),
            this.on(this.tech_, "leavepictureinpicture", function (e) {
              return i.handleTechLeavePictureInPicture_(e);
            }),
            this.on(this.tech_, "error", function (e) {
              return i.handleTechError_(e);
            }),
            this.on(this.tech_, "posterchange", function (e) {
              return i.handleTechPosterChange_(e);
            }),
            this.on(this.tech_, "textdata", function (e) {
              return i.handleTechTextData_(e);
            }),
            this.on(this.tech_, "ratechange", function (e) {
              return i.handleTechRateChange_(e);
            }),
            this.on(this.tech_, "loadedmetadata", this.boundUpdateStyleEl_),
            this.usingNativeControls(this.techGet_("controls")),
            this.controls() &&
              !this.usingNativeControls() &&
              this.addTechControlsListeners_(),
            this.tech_.el().parentNode === this.el() ||
              ("Html5" === n && this.tag) ||
              Z(this.tech_.el(), this.el()),
            this.tag && ((this.tag.player = null), (this.tag = null));
        }),
        (e.unloadTech_ = function () {
          var t = this;
          oi.names.forEach(function (e) {
            e = oi[e];
            t[e.privateName] = t[e.getterName]();
          }),
            (this.textTracksJson_ = Ct(this.tech_)),
            (this.isReady_ = !1),
            this.tech_.dispose(),
            (this.tech_ = !1),
            this.isPosterFromTech_ &&
              ((this.poster_ = ""), this.trigger("posterchange")),
            (this.isPosterFromTech_ = !1);
        }),
        (e.tech = function (e) {
          return (
            void 0 === e &&
              h.warn(
                "Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"
              ),
            this.tech_
          );
        }),
        (e.addTechControlsListeners_ = function () {
          this.removeTechControlsListeners_(),
            this.on(this.tech_, "click", this.boundHandleTechClick_),
            this.on(this.tech_, "dblclick", this.boundHandleTechDoubleClick_),
            this.on(this.tech_, "touchstart", this.boundHandleTechTouchStart_),
            this.on(this.tech_, "touchmove", this.boundHandleTechTouchMove_),
            this.on(this.tech_, "touchend", this.boundHandleTechTouchEnd_),
            this.on(this.tech_, "tap", this.boundHandleTechTap_);
        }),
        (e.removeTechControlsListeners_ = function () {
          this.off(this.tech_, "tap", this.boundHandleTechTap_),
            this.off(this.tech_, "touchstart", this.boundHandleTechTouchStart_),
            this.off(this.tech_, "touchmove", this.boundHandleTechTouchMove_),
            this.off(this.tech_, "touchend", this.boundHandleTechTouchEnd_),
            this.off(this.tech_, "click", this.boundHandleTechClick_),
            this.off(this.tech_, "dblclick", this.boundHandleTechDoubleClick_);
        }),
        (e.handleTechReady_ = function () {
          this.triggerReady(),
            this.cache_.volume &&
              this.techCall_("setVolume", this.cache_.volume),
            this.handleTechPosterChange_(),
            this.handleTechDurationChange_();
        }),
        (e.handleTechLoadStart_ = function () {
          this.removeClass("vjs-ended"),
            this.removeClass("vjs-seeking"),
            this.error(null),
            this.handleTechDurationChange_(),
            this.paused()
              ? (this.hasStarted(!1), this.trigger("loadstart"))
              : (this.trigger("loadstart"), this.trigger("firstplay")),
            this.manualAutoplay_(
              !0 === this.autoplay() && this.options_.normalizeAutoplay
                ? "play"
                : this.autoplay()
            );
        }),
        (e.manualAutoplay_ = function (e) {
          var n = this;
          if (this.tech_ && "string" == typeof e) {
            var t,
              i = function () {
                var e = n.muted();
                n.muted(!0);
                function t() {
                  n.muted(e);
                }
                n.playTerminatedQueue_.push(t);
                var i = n.play();
                if (wt(i))
                  return i.catch(function (e) {
                    throw (
                      (t(),
                      new Error(
                        "Rejection at manualAutoplay. Restoring muted value. " +
                          (e || "")
                      ))
                    );
                  });
              };
            if (
              ("any" !== e || this.muted()
                ? (t = "muted" !== e || this.muted() ? this.play() : i())
                : wt((t = this.play())) && (t = t.catch(i)),
              wt(t))
            )
              return t
                .then(function () {
                  n.trigger({ type: "autoplay-success", autoplay: e });
                })
                .catch(function () {
                  n.trigger({ type: "autoplay-failure", autoplay: e });
                });
          }
        }),
        (e.updateSourceCaches_ = function (e) {
          var t = (e = void 0 === e ? "" : e),
            i = "";
          "string" != typeof t && ((t = e.src), (i = e.type)),
            (this.cache_.source = this.cache_.source || {}),
            (this.cache_.sources = this.cache_.sources || []),
            t &&
              !i &&
              (i = (function (e, t) {
                if (!t) return "";
                if (e.cache_.source.src === t && e.cache_.source.type)
                  return e.cache_.source.type;
                var i = e.cache_.sources.filter(function (e) {
                  return e.src === t;
                });
                if (i.length) return i[0].type;
                for (var n = e.$$("source"), r = 0; r < n.length; r++) {
                  var a = n[r];
                  if (a.type && a.src && a.src === t) return a.type;
                }
                return $i(t);
              })(this, t)),
            (this.cache_.source = lt({}, e, { src: t, type: i }));
          for (
            var i = this.cache_.sources.filter(function (e) {
                return e.src && e.src === t;
              }),
              n = [],
              r = this.$$("source"),
              a = [],
              s = 0;
            s < r.length;
            s++
          ) {
            var o = ae(r[s]);
            n.push(o), o.src && o.src === t && a.push(o.src);
          }
          a.length && !i.length
            ? (this.cache_.sources = n)
            : i.length || (this.cache_.sources = [this.cache_.source]),
            (this.cache_.src = t);
        }),
        (e.handleTechSourceset_ = function (e) {
          var t,
            i,
            n,
            r = this;
          this.changingSrc_ ||
            ((t = function (e) {
              return r.updateSourceCaches_(e);
            }),
            (i = this.currentSource().src),
            (n = e.src),
            i &&
              !/^blob:/.test(i) &&
              /^blob:/.test(n) &&
              ((this.lastSource_ &&
                (this.lastSource_.tech === n ||
                  this.lastSource_.player === i)) ||
                (t = function () {})),
            t(n),
            e.src ||
              this.tech_.any(["sourceset", "loadstart"], function (e) {
                "sourceset" !== e.type &&
                  ((e = r.techGet("currentSrc")),
                  (r.lastSource_.tech = e),
                  r.updateSourceCaches_(e));
              })),
            (this.lastSource_ = {
              player: this.currentSource().src,
              tech: e.src,
            }),
            this.trigger({ src: e.src, type: "sourceset" });
        }),
        (e.hasStarted = function (e) {
          if (void 0 === e) return this.hasStarted_;
          e !== this.hasStarted_ &&
            ((this.hasStarted_ = e),
            this.hasStarted_
              ? (this.addClass("vjs-has-started"), this.trigger("firstplay"))
              : this.removeClass("vjs-has-started"));
        }),
        (e.handleTechPlay_ = function () {
          this.removeClass("vjs-ended"),
            this.removeClass("vjs-paused"),
            this.addClass("vjs-playing"),
            this.hasStarted(!0),
            this.trigger("play");
        }),
        (e.handleTechRateChange_ = function () {
          0 < this.tech_.playbackRate() &&
            0 === this.cache_.lastPlaybackRate &&
            (this.queuedCallbacks_.forEach(function (e) {
              return e.callback(e.event);
            }),
            (this.queuedCallbacks_ = [])),
            (this.cache_.lastPlaybackRate = this.tech_.playbackRate()),
            this.trigger("ratechange");
        }),
        (e.handleTechWaiting_ = function () {
          var t = this;
          this.addClass("vjs-waiting"), this.trigger("waiting");
          var i = this.currentTime();
          this.on("timeupdate", function e() {
            i !== t.currentTime() &&
              (t.removeClass("vjs-waiting"), t.off("timeupdate", e));
          });
        }),
        (e.handleTechCanPlay_ = function () {
          this.removeClass("vjs-waiting"), this.trigger("canplay");
        }),
        (e.handleTechCanPlayThrough_ = function () {
          this.removeClass("vjs-waiting"), this.trigger("canplaythrough");
        }),
        (e.handleTechPlaying_ = function () {
          this.removeClass("vjs-waiting"), this.trigger("playing");
        }),
        (e.handleTechSeeking_ = function () {
          this.addClass("vjs-seeking"), this.trigger("seeking");
        }),
        (e.handleTechSeeked_ = function () {
          this.removeClass("vjs-seeking"),
            this.removeClass("vjs-ended"),
            this.trigger("seeked");
        }),
        (e.handleTechFirstPlay_ = function () {
          this.options_.starttime &&
            (h.warn(
              "Passing the `starttime` option to the player will be deprecated in 6.0"
            ),
            this.currentTime(this.options_.starttime)),
            this.addClass("vjs-has-started"),
            this.trigger("firstplay");
        }),
        (e.handleTechPause_ = function () {
          this.removeClass("vjs-playing"),
            this.addClass("vjs-paused"),
            this.trigger("pause");
        }),
        (e.handleTechEnded_ = function () {
          this.addClass("vjs-ended"),
            this.removeClass("vjs-waiting"),
            this.options_.loop
              ? (this.currentTime(0), this.play())
              : this.paused() || this.pause(),
            this.trigger("ended");
        }),
        (e.handleTechDurationChange_ = function () {
          this.duration(this.techGet_("duration"));
        }),
        (e.handleTechClick_ = function (e) {
          this.controls_ &&
            ((void 0 !== this.options_ &&
              void 0 !== this.options_.userActions &&
              void 0 !== this.options_.userActions.click &&
              !1 === this.options_.userActions.click) ||
              (void 0 !== this.options_ &&
              void 0 !== this.options_.userActions &&
              "function" == typeof this.options_.userActions.click
                ? this.options_.userActions.click.call(this, e)
                : this.paused()
                ? Et(this.play())
                : this.pause()));
        }),
        (e.handleTechDoubleClick_ = function (t) {
          this.controls_ &&
            (Array.prototype.some.call(
              this.$$(".vjs-control-bar, .vjs-modal-dialog"),
              function (e) {
                return e.contains(t.target);
              }
            ) ||
              (void 0 !== this.options_ &&
                void 0 !== this.options_.userActions &&
                void 0 !== this.options_.userActions.doubleClick &&
                !1 === this.options_.userActions.doubleClick) ||
              (void 0 !== this.options_ &&
              void 0 !== this.options_.userActions &&
              "function" == typeof this.options_.userActions.doubleClick
                ? this.options_.userActions.doubleClick.call(this, t)
                : this.isFullscreen()
                ? this.exitFullscreen()
                : this.requestFullscreen()));
        }),
        (e.handleTechTap_ = function () {
          this.userActive(!this.userActive());
        }),
        (e.handleTechTouchStart_ = function () {
          this.userWasActive = this.userActive();
        }),
        (e.handleTechTouchMove_ = function () {
          this.userWasActive && this.reportUserActivity();
        }),
        (e.handleTechTouchEnd_ = function (e) {
          e.cancelable && e.preventDefault();
        }),
        (e.handleStageClick_ = function () {
          this.reportUserActivity();
        }),
        (e.toggleFullscreenClass_ = function () {
          this.isFullscreen()
            ? this.addClass("vjs-fullscreen")
            : this.removeClass("vjs-fullscreen");
        }),
        (e.documentFullscreenChange_ = function (e) {
          var t = e.target.player;
          (t && t !== this) ||
            ((e = this.el()),
            !(t = document[this.fsApi_.fullscreenElement] === e) && e.matches
              ? (t = e.matches(":" + this.fsApi_.fullscreen))
              : !t &&
                e.msMatchesSelector &&
                (t = e.msMatchesSelector(":" + this.fsApi_.fullscreen)),
            this.isFullscreen(t));
        }),
        (e.handleTechFullscreenChange_ = function (e, t) {
          var i = this;
          t &&
            (t.nativeIOSFullscreen &&
              (this.addClass("vjs-ios-native-fs"),
              this.tech_.one("webkitendfullscreen", function () {
                i.removeClass("vjs-ios-native-fs");
              })),
            this.isFullscreen(t.isFullscreen));
        }),
        (e.handleTechFullscreenError_ = function (e, t) {
          this.trigger("fullscreenerror", t);
        }),
        (e.togglePictureInPictureClass_ = function () {
          this.isInPictureInPicture()
            ? this.addClass("vjs-picture-in-picture")
            : this.removeClass("vjs-picture-in-picture");
        }),
        (e.handleTechEnterPictureInPicture_ = function (e) {
          this.isInPictureInPicture(!0);
        }),
        (e.handleTechLeavePictureInPicture_ = function (e) {
          this.isInPictureInPicture(!1);
        }),
        (e.handleTechError_ = function () {
          var e = this.tech_.error();
          this.error(e);
        }),
        (e.handleTechTextData_ = function () {
          this.trigger("textdata", 1 < arguments.length ? arguments[1] : null);
        }),
        (e.getCache = function () {
          return this.cache_;
        }),
        (e.resetCache_ = function () {
          this.cache_ = {
            currentTime: 0,
            initTime: 0,
            inactivityTimeout: this.options_.inactivityTimeout,
            duration: NaN,
            lastVolume: 1,
            lastPlaybackRate: this.defaultPlaybackRate(),
            media: null,
            src: "",
            source: {},
            sources: [],
            playbackRates: [],
            volume: 1,
          };
        }),
        (e.techCall_ = function (n, r) {
          this.ready(function () {
            if (n in Xi)
              return (
                (e = this.middleware_),
                (t = this.tech_),
                (i = r),
                t[(t = n)](e.reduce(Yi(t), i))
              );
            if (n in Ki) return Gi(this.middleware_, this.tech_, n, r);
            var e, t, i;
            try {
              this.tech_ && this.tech_[n](r);
            } catch (e) {
              throw (h(e), e);
            }
          }, !0);
        }),
        (e.techGet_ = function (t) {
          if (this.tech_ && this.tech_.isReady_) {
            if (t in zi)
              return (
                (e = this.middleware_),
                (i = this.tech_),
                (n = t),
                e.reduceRight(Yi(n), i[n]())
              );
            if (t in Ki) return Gi(this.middleware_, this.tech_, t);
            var e, i, n;
            try {
              return this.tech_[t]();
            } catch (e) {
              if (void 0 === this.tech_[t])
                throw (
                  (h(
                    "Video.js: " +
                      t +
                      " method not defined for " +
                      this.techName_ +
                      " playback technology.",
                    e
                  ),
                  e)
                );
              if ("TypeError" === e.name)
                throw (
                  (h(
                    "Video.js: " +
                      t +
                      " unavailable on " +
                      this.techName_ +
                      " playback technology element.",
                    e
                  ),
                  (this.tech_.isReady_ = !1),
                  e)
                );
              throw (h(e), e);
            }
          }
        }),
        (e.play = function () {
          var t = this,
            e = this.options_.Promise || window.Promise;
          return e
            ? new e(function (e) {
                t.play_(e);
              })
            : this.play_();
        }),
        (e.play_ = function (e) {
          var t = this;
          this.playCallbacks_.push((e = void 0 === e ? Et : e));
          e = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc()));
          if (
            (this.waitToPlay_ &&
              (this.off(["ready", "loadstart"], this.waitToPlay_),
              (this.waitToPlay_ = null)),
            !this.isReady_ || !e)
          )
            return (
              (this.waitToPlay_ = function (e) {
                t.play_();
              }),
              this.one(["ready", "loadstart"], this.waitToPlay_),
              void (e || (!V && !q) || this.load())
            );
          e = this.techGet_("play");
          null === e
            ? this.runPlayTerminatedQueue_()
            : this.runPlayCallbacks_(e);
        }),
        (e.runPlayTerminatedQueue_ = function () {
          var e = this.playTerminatedQueue_.slice(0);
          (this.playTerminatedQueue_ = []),
            e.forEach(function (e) {
              e();
            });
        }),
        (e.runPlayCallbacks_ = function (t) {
          var e = this.playCallbacks_.slice(0);
          (this.playCallbacks_ = []),
            (this.playTerminatedQueue_ = []),
            e.forEach(function (e) {
              e(t);
            });
        }),
        (e.pause = function () {
          this.techCall_("pause");
        }),
        (e.paused = function () {
          return !1 !== this.techGet_("paused");
        }),
        (e.played = function () {
          return this.techGet_("played") || vt(0, 0);
        }),
        (e.scrubbing = function (e) {
          if ("undefined" == typeof e) return this.scrubbing_;
          (this.scrubbing_ = !!e),
            this.techCall_("setScrubbing", this.scrubbing_),
            e
              ? this.addClass("vjs-scrubbing")
              : this.removeClass("vjs-scrubbing");
        }),
        (e.currentTime = function (e) {
          return "undefined" != typeof e
            ? (e < 0 && (e = 0),
              this.isReady_ &&
              !this.changingSrc_ &&
              this.tech_ &&
              this.tech_.isReady_
                ? (this.techCall_("setCurrentTime", e),
                  void (this.cache_.initTime = 0))
                : ((this.cache_.initTime = e),
                  this.off("canplay", this.boundApplyInitTime_),
                  void this.one("canplay", this.boundApplyInitTime_)))
            : ((this.cache_.currentTime = this.techGet_("currentTime") || 0),
              this.cache_.currentTime);
        }),
        (e.applyInitTime_ = function () {
          this.currentTime(this.cache_.initTime);
        }),
        (e.duration = function (e) {
          if (void 0 === e)
            return void 0 !== this.cache_.duration ? this.cache_.duration : NaN;
          (e = (e = parseFloat(e)) < 0 ? 1 / 0 : e) !== this.cache_.duration &&
            ((this.cache_.duration = e) === 1 / 0
              ? this.addClass("vjs-live")
              : this.removeClass("vjs-live"),
            isNaN(e) || this.trigger("durationchange"));
        }),
        (e.remainingTime = function () {
          return this.duration() - this.currentTime();
        }),
        (e.remainingTimeDisplay = function () {
          return Math.floor(this.duration()) - Math.floor(this.currentTime());
        }),
        (e.buffered = function () {
          var e;
          return (e =
            !(e = this.techGet_("buffered")) || !e.length ? vt(0, 0) : e);
        }),
        (e.bufferedPercent = function () {
          return _t(this.buffered(), this.duration());
        }),
        (e.bufferedEnd = function () {
          var e = this.buffered(),
            t = this.duration(),
            e = e.end(e.length - 1);
          return (e = t < e ? t : e);
        }),
        (e.volume = function (e) {
          var t;
          return void 0 !== e
            ? ((t = Math.max(0, Math.min(1, parseFloat(e)))),
              (this.cache_.volume = t),
              this.techCall_("setVolume", t),
              void (0 < t && this.lastVolume_(t)))
            : ((t = parseFloat(this.techGet_("volume"))), isNaN(t) ? 1 : t);
        }),
        (e.muted = function (e) {
          if (void 0 === e) return this.techGet_("muted") || !1;
          this.techCall_("setMuted", e);
        }),
        (e.defaultMuted = function (e) {
          return void 0 !== e
            ? this.techCall_("setDefaultMuted", e)
            : this.techGet_("defaultMuted") || !1;
        }),
        (e.lastVolume_ = function (e) {
          if (void 0 === e || 0 === e) return this.cache_.lastVolume;
          this.cache_.lastVolume = e;
        }),
        (e.supportsFullScreen = function () {
          return this.techGet_("supportsFullScreen") || !1;
        }),
        (e.isFullscreen = function (e) {
          if (void 0 === e) return this.isFullscreen_;
          var t = this.isFullscreen_;
          (this.isFullscreen_ = Boolean(e)),
            this.isFullscreen_ !== t &&
              this.fsApi_.prefixed &&
              this.trigger("fullscreenchange"),
            this.toggleFullscreenClass_();
        }),
        (e.requestFullscreen = function (s) {
          var e = this.options_.Promise || window.Promise;
          if (e) {
            var o = this;
            return new e(function (e, i) {
              function n() {
                o.off("fullscreenerror", r), o.off("fullscreenchange", t);
              }
              function t() {
                n(), e();
              }
              function r(e, t) {
                n(), i(t);
              }
              o.one("fullscreenchange", t), o.one("fullscreenerror", r);
              var a = o.requestFullscreenHelper_(s);
              a && (a.then(n, n), a.then(e, i));
            });
          }
          return this.requestFullscreenHelper_();
        }),
        (e.requestFullscreenHelper_ = function (e) {
          var t = this;
          if (
            (this.fsApi_.prefixed ||
              ((i =
                (this.options_.fullscreen &&
                  this.options_.fullscreen.options) ||
                {}),
              void 0 !== e && (i = e)),
            this.fsApi_.requestFullscreen)
          ) {
            var i = this.el_[this.fsApi_.requestFullscreen](i);
            return (
              i &&
                i.then(
                  function () {
                    return t.isFullscreen(!0);
                  },
                  function () {
                    return t.isFullscreen(!1);
                  }
                ),
              i
            );
          }
          this.tech_.supportsFullScreen() &&
          !0 == !this.options_.preferFullWindow
            ? this.techCall_("enterFullScreen")
            : this.enterFullWindow();
        }),
        (e.exitFullscreen = function () {
          var e = this.options_.Promise || window.Promise;
          if (e) {
            var s = this;
            return new e(function (e, i) {
              function n() {
                s.off("fullscreenerror", r), s.off("fullscreenchange", t);
              }
              function t() {
                n(), e();
              }
              function r(e, t) {
                n(), i(t);
              }
              s.one("fullscreenchange", t), s.one("fullscreenerror", r);
              var a = s.exitFullscreenHelper_();
              a && (a.then(n, n), a.then(e, i));
            });
          }
          return this.exitFullscreenHelper_();
        }),
        (e.exitFullscreenHelper_ = function () {
          var e = this;
          if (this.fsApi_.requestFullscreen) {
            var t = document[this.fsApi_.exitFullscreen]();
            return (
              t &&
                Et(
                  t.then(function () {
                    return e.isFullscreen(!1);
                  })
                ),
              t
            );
          }
          this.tech_.supportsFullScreen() &&
          !0 == !this.options_.preferFullWindow
            ? this.techCall_("exitFullScreen")
            : this.exitFullWindow();
        }),
        (e.enterFullWindow = function () {
          this.isFullscreen(!0),
            (this.isFullWindow = !0),
            (this.docOrigOverflow = document.documentElement.style.overflow),
            Be(document, "keydown", this.boundFullWindowOnEscKey_),
            (document.documentElement.style.overflow = "hidden"),
            te(document.body, "vjs-full-window"),
            this.trigger("enterFullWindow");
        }),
        (e.fullWindowOnEscKey = function (e) {
          ht.isEventKey(e, "Esc") &&
            !0 === this.isFullscreen() &&
            (this.isFullWindow ? this.exitFullWindow() : this.exitFullscreen());
        }),
        (e.exitFullWindow = function () {
          this.isFullscreen(!1),
            (this.isFullWindow = !1),
            Fe(document, "keydown", this.boundFullWindowOnEscKey_),
            (document.documentElement.style.overflow = this.docOrigOverflow),
            ie(document.body, "vjs-full-window"),
            this.trigger("exitFullWindow");
        }),
        (e.disablePictureInPicture = function (e) {
          if (void 0 === e) return this.techGet_("disablePictureInPicture");
          this.techCall_("setDisablePictureInPicture", e),
            (this.options_.disablePictureInPicture = e),
            this.trigger("disablepictureinpicturechanged");
        }),
        (e.isInPictureInPicture = function (e) {
          return void 0 !== e
            ? ((this.isInPictureInPicture_ = !!e),
              void this.togglePictureInPictureClass_())
            : !!this.isInPictureInPicture_;
        }),
        (e.requestPictureInPicture = function () {
          if (
            "pictureInPictureEnabled" in document &&
            !1 === this.disablePictureInPicture()
          )
            return this.techGet_("requestPictureInPicture");
        }),
        (e.exitPictureInPicture = function () {
          if ("pictureInPictureEnabled" in document)
            return document.exitPictureInPicture();
        }),
        (e.handleKeyDown = function (e) {
          var t = this.options_.userActions;
          t &&
            t.hotkeys &&
            ((function (e) {
              var t = e.tagName.toLowerCase();
              if (e.isContentEditable) return !0;
              if ("input" === t)
                return (
                  -1 ===
                  [
                    "button",
                    "checkbox",
                    "hidden",
                    "radio",
                    "reset",
                    "submit",
                  ].indexOf(e.type)
                );
              return -1 !== ["textarea"].indexOf(t);
            })(this.el_.ownerDocument.activeElement) ||
              ("function" == typeof t.hotkeys
                ? t.hotkeys.call(this, e)
                : this.handleHotkeys(e)));
        }),
        (e.handleHotkeys = function (e) {
          var t = this.options_.userActions
              ? this.options_.userActions.hotkeys
              : {},
            i = t.fullscreenKey,
            n = t.muteKey,
            n =
              void 0 === n
                ? function (e) {
                    return ht.isEventKey(e, "m");
                  }
                : n,
            t = t.playPauseKey,
            t =
              void 0 === t
                ? function (e) {
                    return ht.isEventKey(e, "k") || ht.isEventKey(e, "Space");
                  }
                : t;
          (void 0 === i
            ? function (e) {
                return ht.isEventKey(e, "f");
              }
            : i
          ).call(this, e)
            ? (e.preventDefault(),
              e.stopPropagation(),
              (i = pt.getComponent("FullscreenToggle")),
              !1 !== document[this.fsApi_.fullscreenEnabled] &&
                i.prototype.handleClick.call(this, e))
            : n.call(this, e)
            ? (e.preventDefault(),
              e.stopPropagation(),
              pt.getComponent("MuteToggle").prototype.handleClick.call(this, e))
            : t.call(this, e) &&
              (e.preventDefault(),
              e.stopPropagation(),
              pt
                .getComponent("PlayToggle")
                .prototype.handleClick.call(this, e));
        }),
        (e.canPlayType = function (e) {
          for (var t, i = 0, n = this.options_.techOrder; i < n.length; i++) {
            var r = n[i],
              a = ji.getTech(r);
            if ((a = a || pt.getComponent(r))) {
              if (a.isSupported() && (t = a.canPlayType(e))) return t;
            } else
              h.error(
                'The "' +
                  r +
                  '" tech is undefined. Skipped browser support check for that tech.'
              );
          }
          return "";
        }),
        (e.selectSource = function (e) {
          function t(e, i, n) {
            var r;
            return (
              e.some(function (t) {
                return i.some(function (e) {
                  if ((r = n(t, e))) return !0;
                });
              }),
              r
            );
          }
          var i,
            n = this,
            r = this.options_.techOrder
              .map(function (e) {
                return [e, ji.getTech(e)];
              })
              .filter(function (e) {
                var t = e[0],
                  e = e[1];
                return e
                  ? e.isSupported()
                  : (h.error(
                      'The "' +
                        t +
                        '" tech is undefined. Skipped browser support check for that tech.'
                    ),
                    !1);
              }),
            a = function (e, t) {
              var i = e[0];
              if (e[1].canPlaySource(t, n.options_[i.toLowerCase()]))
                return { source: t, tech: i };
            },
            a = this.options_.sourceOrder
              ? t(
                  e,
                  r,
                  ((i = a),
                  function (e, t) {
                    return i(t, e);
                  })
                )
              : t(r, e, a);
          return a || !1;
        }),
        (e.handleSrc_ = function (e, n) {
          var r = this;
          if ("undefined" == typeof e) return this.cache_.src || "";
          this.resetRetryOnError_ && this.resetRetryOnError_();
          var t,
            i,
            a = Ji(e);
          a.length
            ? ((this.changingSrc_ = !0),
              n || (this.cache_.sources = a),
              this.updateSourceCaches_(a[0]),
              Wi(this, a[0], function (e, t) {
                var i;
                return (
                  (r.middleware_ = t),
                  n || (r.cache_.sources = a),
                  r.updateSourceCaches_(e),
                  r.src_(e)
                    ? 1 < a.length
                      ? r.handleSrc_(a.slice(1))
                      : ((r.changingSrc_ = !1),
                        r.setTimeout(function () {
                          this.error({
                            code: 4,
                            message: this.localize(
                              this.options_.notSupportedMessage
                            ),
                          });
                        }, 0),
                        void r.triggerReady())
                    : ((t = t),
                      (i = r.tech_),
                      void t.forEach(function (e) {
                        return e.setTech && e.setTech(i);
                      }))
                );
              }),
              this.options_.retryOnError &&
                1 < a.length &&
                ((i = function () {
                  r.off("error", t);
                }),
                this.one(
                  "error",
                  (t = function () {
                    r.error(null), r.handleSrc_(a.slice(1), !0);
                  })
                ),
                this.one("playing", i),
                (this.resetRetryOnError_ = function () {
                  r.off("error", t), r.off("playing", i);
                })))
            : this.setTimeout(function () {
                this.error({
                  code: 4,
                  message: this.localize(this.options_.notSupportedMessage),
                });
              }, 0);
        }),
        (e.src = function (e) {
          return this.handleSrc_(e, !1);
        }),
        (e.src_ = function (e) {
          var t,
            i,
            n = this,
            r = this.selectSource([e]);
          return (
            !r ||
            ((t = r.tech),
            (i = this.techName_),
            ut(t) !== ut(i)
              ? ((this.changingSrc_ = !0),
                this.loadTech_(r.tech, r.source),
                this.tech_.ready(function () {
                  n.changingSrc_ = !1;
                }))
              : this.ready(function () {
                  this.tech_.constructor.prototype.hasOwnProperty("setSource")
                    ? this.techCall_("setSource", e)
                    : this.techCall_("src", e.src),
                    (this.changingSrc_ = !1);
                }, !0),
            !1)
          );
        }),
        (e.load = function () {
          this.techCall_("load");
        }),
        (e.reset = function () {
          var e = this,
            t = this.options_.Promise || window.Promise;
          this.paused() || !t
            ? this.doReset_()
            : Et(
                this.play().then(function () {
                  return e.doReset_();
                })
              );
        }),
        (e.doReset_ = function () {
          this.tech_ && this.tech_.clearTracks("text"),
            this.resetCache_(),
            this.poster(""),
            this.loadTech_(this.options_.techOrder[0], null),
            this.techCall_("reset"),
            this.resetControlBarUI_(),
            it(this) && this.trigger("playerreset");
        }),
        (e.resetControlBarUI_ = function () {
          this.resetProgressBar_(),
            this.resetPlaybackRate_(),
            this.resetVolumeBar_();
        }),
        (e.resetProgressBar_ = function () {
          this.currentTime(0);
          var e = this.controlBar,
            t = e.durationDisplay,
            e = e.remainingTimeDisplay;
          t && t.updateContent(), e && e.updateContent();
        }),
        (e.resetPlaybackRate_ = function () {
          this.playbackRate(this.defaultPlaybackRate()),
            this.handleTechRateChange_();
        }),
        (e.resetVolumeBar_ = function () {
          this.volume(1), this.trigger("volumechange");
        }),
        (e.currentSources = function () {
          var e = this.currentSource(),
            t = [];
          return (
            0 !== Object.keys(e).length && t.push(e), this.cache_.sources || t
          );
        }),
        (e.currentSource = function () {
          return this.cache_.source || {};
        }),
        (e.currentSrc = function () {
          return (this.currentSource() && this.currentSource().src) || "";
        }),
        (e.currentType = function () {
          return (this.currentSource() && this.currentSource().type) || "";
        }),
        (e.preload = function (e) {
          return void 0 !== e
            ? (this.techCall_("setPreload", e),
              void (this.options_.preload = e))
            : this.techGet_("preload");
        }),
        (e.autoplay = function (e) {
          if (void 0 === e) return this.options_.autoplay || !1;
          var t;
          ("string" == typeof e && /(any|play|muted)/.test(e)) ||
          (!0 === e && this.options_.normalizeAutoplay)
            ? ((this.options_.autoplay = e),
              this.manualAutoplay_("string" == typeof e ? e : "play"),
              (t = !1))
            : (this.options_.autoplay = !!e),
            (t = "undefined" == typeof t ? this.options_.autoplay : t),
            this.tech_ && this.techCall_("setAutoplay", t);
        }),
        (e.playsinline = function (e) {
          return void 0 !== e
            ? (this.techCall_("setPlaysinline", e),
              (this.options_.playsinline = e),
              this)
            : this.techGet_("playsinline");
        }),
        (e.loop = function (e) {
          return void 0 !== e
            ? (this.techCall_("setLoop", e), void (this.options_.loop = e))
            : this.techGet_("loop");
        }),
        (e.poster = function (e) {
          if (void 0 === e) return this.poster_;
          (e = e || "") !== this.poster_ &&
            ((this.poster_ = e),
            this.techCall_("setPoster", e),
            (this.isPosterFromTech_ = !1),
            this.trigger("posterchange"));
        }),
        (e.handleTechPosterChange_ = function () {
          var e;
          (this.poster_ && !this.options_.techCanOverridePoster) ||
            !this.tech_ ||
            !this.tech_.poster ||
            ((e = this.tech_.poster() || "") !== this.poster_ &&
              ((this.poster_ = e),
              (this.isPosterFromTech_ = !0),
              this.trigger("posterchange")));
        }),
        (e.controls = function (e) {
          if (void 0 === e) return !!this.controls_;
          this.controls_ !== (e = !!e) &&
            ((this.controls_ = e),
            this.usingNativeControls() && this.techCall_("setControls", e),
            this.controls_
              ? (this.removeClass("vjs-controls-disabled"),
                this.addClass("vjs-controls-enabled"),
                this.trigger("controlsenabled"),
                this.usingNativeControls() || this.addTechControlsListeners_())
              : (this.removeClass("vjs-controls-enabled"),
                this.addClass("vjs-controls-disabled"),
                this.trigger("controlsdisabled"),
                this.usingNativeControls() ||
                  this.removeTechControlsListeners_()));
        }),
        (e.usingNativeControls = function (e) {
          if (void 0 === e) return !!this.usingNativeControls_;
          this.usingNativeControls_ !== (e = !!e) &&
            ((this.usingNativeControls_ = e),
            this.usingNativeControls_
              ? (this.addClass("vjs-using-native-controls"),
                this.trigger("usingnativecontrols"))
              : (this.removeClass("vjs-using-native-controls"),
                this.trigger("usingcustomcontrols")));
        }),
        (e.error = function (t) {
          var i = this;
          if (void 0 === t) return this.error_ || null;
          if (
            (a("beforeerror").forEach(function (e) {
              e = e(i, t);
              (T(e) && !Array.isArray(e)) ||
              "string" == typeof e ||
              "number" == typeof e ||
              null === e
                ? (t = e)
                : i.log.error(
                    "please return a value that MediaError expects in beforeerror hooks"
                  );
            }),
            this.options_.suppressNotSupportedError && t && 4 === t.code)
          ) {
            var e = function () {
              this.error(t);
            };
            return (
              (this.options_.suppressNotSupportedError = !1),
              this.any(["click", "touchstart"], e),
              void this.one("loadstart", function () {
                this.off(["click", "touchstart"], e);
              })
            );
          }
          if (null === t)
            return (
              (this.error_ = t),
              this.removeClass("vjs-error"),
              void (this.errorDisplay && this.errorDisplay.close())
            );
          (this.error_ = new bt(t)),
            this.addClass("vjs-error"),
            h.error(
              "(CODE:" +
                this.error_.code +
                " " +
                bt.errorTypes[this.error_.code] +
                ")",
              this.error_.message,
              this.error_
            ),
            this.trigger("error"),
            a("error").forEach(function (e) {
              return e(i, i.error_);
            });
        }),
        (e.reportUserActivity = function (e) {
          this.userActivity_ = !0;
        }),
        (e.userActive = function (e) {
          if (void 0 === e) return this.userActive_;
          if ((e = !!e) !== this.userActive_) {
            if (((this.userActive_ = e), this.userActive_))
              return (
                (this.userActivity_ = !0),
                this.removeClass("vjs-user-inactive"),
                this.addClass("vjs-user-active"),
                void this.trigger("useractive")
              );
            this.tech_ &&
              this.tech_.one("mousemove", function (e) {
                e.stopPropagation(), e.preventDefault();
              }),
              (this.userActivity_ = !1),
              this.removeClass("vjs-user-active"),
              this.addClass("vjs-user-inactive"),
              this.trigger("userinactive");
          }
        }),
        (e.listenForUserActivity_ = function () {
          var t,
            i,
            n,
            r = Ve(this, this.reportUserActivity),
            e = function (e) {
              r(), this.clearInterval(t);
            };
          this.on("mousedown", function () {
            r(), this.clearInterval(t), (t = this.setInterval(r, 250));
          }),
            this.on("mousemove", function (e) {
              (e.screenX === i && e.screenY === n) ||
                ((i = e.screenX), (n = e.screenY), r());
            }),
            this.on("mouseup", e),
            this.on("mouseleave", e);
          var a,
            e = this.getChild("controlBar");
          !e ||
            q ||
            A ||
            (e.on("mouseenter", function (e) {
              0 !== this.player().options_.inactivityTimeout &&
                (this.player().cache_.inactivityTimeout =
                  this.player().options_.inactivityTimeout),
                (this.player().options_.inactivityTimeout = 0);
            }),
            e.on("mouseleave", function (e) {
              this.player().options_.inactivityTimeout =
                this.player().cache_.inactivityTimeout;
            })),
            this.on("keydown", r),
            this.on("keyup", r),
            this.setInterval(function () {
              var e;
              this.userActivity_ &&
                ((this.userActivity_ = !1),
                this.userActive(!0),
                this.clearTimeout(a),
                (e = this.options_.inactivityTimeout) <= 0 ||
                  (a = this.setTimeout(function () {
                    this.userActivity_ || this.userActive(!1);
                  }, e)));
            }, 250);
        }),
        (e.playbackRate = function (e) {
          if (void 0 === e)
            return this.tech_ && this.tech_.featuresPlaybackRate
              ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate")
              : 1;
          this.techCall_("setPlaybackRate", e);
        }),
        (e.defaultPlaybackRate = function (e) {
          return void 0 !== e
            ? this.techCall_("setDefaultPlaybackRate", e)
            : this.tech_ && this.tech_.featuresPlaybackRate
            ? this.techGet_("defaultPlaybackRate")
            : 1;
        }),
        (e.isAudio = function (e) {
          if (void 0 === e) return !!this.isAudio_;
          this.isAudio_ = !!e;
        }),
        (e.addTextTrack = function (e, t, i) {
          if (this.tech_) return this.tech_.addTextTrack(e, t, i);
        }),
        (e.addRemoteTextTrack = function (e, t) {
          if (this.tech_) return this.tech_.addRemoteTextTrack(e, t);
        }),
        (e.removeRemoteTextTrack = function (e) {
          var t = (t = (e = void 0 === e ? {} : e).track) || e;
          if (this.tech_) return this.tech_.removeRemoteTextTrack(t);
        }),
        (e.getVideoPlaybackQuality = function () {
          return this.techGet_("getVideoPlaybackQuality");
        }),
        (e.videoWidth = function () {
          return (
            (this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth()) ||
            0
          );
        }),
        (e.videoHeight = function () {
          return (
            (this.tech_ &&
              this.tech_.videoHeight &&
              this.tech_.videoHeight()) ||
            0
          );
        }),
        (e.language = function (e) {
          if (void 0 === e) return this.language_;
          this.language_ !== String(e).toLowerCase() &&
            ((this.language_ = String(e).toLowerCase()),
            it(this) && this.trigger("languagechange"));
        }),
        (e.languages = function () {
          return lt(o.prototype.options_.languages, this.languages_);
        }),
        (e.toJSON = function () {
          var e = lt(this.options_),
            t = e.tracks;
          e.tracks = [];
          for (var i = 0; i < t.length; i++) {
            var n = t[i];
            ((n = lt(n)).player = void 0), (e.tracks[i] = n);
          }
          return e;
        }),
        (e.createModal = function (e, t) {
          var i = this;
          (t = t || {}).content = e || "";
          var n = new At(this, t);
          return (
            this.addChild(n),
            n.on("dispose", function () {
              i.removeChild(n);
            }),
            n.open(),
            n
          );
        }),
        (e.updateCurrentBreakpoint_ = function () {
          if (this.responsive())
            for (
              var e = this.currentBreakpoint(), t = this.currentWidth(), i = 0;
              i < Nn.length;
              i++
            ) {
              var n = Nn[i];
              if (t <= this.breakpoints_[n]) {
                if (e === n) return;
                e && this.removeClass(Un[e]),
                  this.addClass(Un[n]),
                  (this.breakpoint_ = n);
                break;
              }
            }
        }),
        (e.removeCurrentBreakpoint_ = function () {
          var e = this.currentBreakpointClass();
          (this.breakpoint_ = ""), e && this.removeClass(e);
        }),
        (e.breakpoints = function (e) {
          return (
            void 0 === e ||
              ((this.breakpoint_ = ""),
              (this.breakpoints_ = b({}, Bn, e)),
              this.updateCurrentBreakpoint_()),
            b(this.breakpoints_)
          );
        }),
        (e.responsive = function (e) {
          return void 0 === e
            ? this.responsive_
            : (e = Boolean(e)) !== this.responsive_
            ? ((this.responsive_ = e)
                ? (this.on("playerresize", this.boundUpdateCurrentBreakpoint_),
                  this.updateCurrentBreakpoint_())
                : (this.off("playerresize", this.boundUpdateCurrentBreakpoint_),
                  this.removeCurrentBreakpoint_()),
              e)
            : void 0;
        }),
        (e.currentBreakpoint = function () {
          return this.breakpoint_;
        }),
        (e.currentBreakpointClass = function () {
          return Un[this.breakpoint_] || "";
        }),
        (e.loadMedia = function (e, t) {
          var i,
            n,
            r,
            a = this;
          e &&
            "object" == typeof e &&
            (this.reset(),
            (this.cache_.media = lt(e)),
            (i = (r = this.cache_.media).artwork),
            (n = r.poster),
            (e = r.src),
            (r = r.textTracks),
            !i && n && (this.cache_.media.artwork = [{ src: n, type: $i(n) }]),
            e && this.src(e),
            n && this.poster(n),
            Array.isArray(r) &&
              r.forEach(function (e) {
                return a.addRemoteTextTrack(e, !1);
              }),
            this.ready(t));
        }),
        (e.getMedia = function () {
          if (this.cache_.media) return lt(this.cache_.media);
          var e = this.poster(),
            t = {
              src: this.currentSources(),
              textTracks: Array.prototype.map.call(
                this.remoteTextTracks(),
                function (e) {
                  return {
                    kind: e.kind,
                    label: e.label,
                    language: e.language,
                    src: e.src,
                  };
                }
              ),
            };
          return (
            e &&
              ((t.poster = e),
              (t.artwork = [{ src: t.poster, type: $i(t.poster) }])),
            t
          );
        }),
        (o.getTagSettings = function (e) {
          var t,
            i = { sources: [], tracks: [] },
            n = ae(e),
            r = n["data-setup"];
          if (
            (ee(e, "vjs-fill") && (n.fill = !0),
            ee(e, "vjs-fluid") && (n.fluid = !0),
            null !== r &&
              ((r = (t = St(r || "{}"))[0]),
              (t = t[1]),
              r && h.error(r),
              b(n, t)),
            b(i, n),
            e.hasChildNodes())
          )
            for (var a = e.childNodes, s = 0, o = a.length; s < o; s++) {
              var u = a[s],
                l = u.nodeName.toLowerCase();
              "source" === l
                ? i.sources.push(ae(u))
                : "track" === l && i.tracks.push(ae(u));
            }
          return i;
        }),
        (e.flexNotSupported_ = function () {
          var e = document.createElement("i");
          return !(
            "flexBasis" in e.style ||
            "webkitFlexBasis" in e.style ||
            "mozFlexBasis" in e.style ||
            "msFlexBasis" in e.style ||
            "msFlexOrder" in e.style
          );
        }),
        (e.debug = function (e) {
          if (void 0 === e) return this.debugEnabled_;
          e
            ? (this.trigger("debugon"),
              (this.previousLogLevel_ = this.log.level),
              this.log.level("debug"),
              (this.debugEnabled_ = !0))
            : (this.trigger("debugoff"),
              this.log.level(this.previousLogLevel_),
              (this.previousLogLevel_ = void 0),
              (this.debugEnabled_ = !1));
        }),
        (e.playbackRates = function (e) {
          if (void 0 === e) return this.cache_.playbackRates;
          Array.isArray(e) &&
            e.every(function (e) {
              return "number" == typeof e;
            }) &&
            ((this.cache_.playbackRates = e),
            this.trigger("playbackrateschange"));
        }),
        o
      );
    })(pt);
  oi.names.forEach(function (e) {
    var t = oi[e];
    Fn.prototype[t.getterName] = function () {
      return this.tech_
        ? this.tech_[t.getterName]()
        : ((this[t.privateName] = this[t.privateName] || new t.ListClass()),
          this[t.privateName]);
    };
  }),
    (Fn.prototype.crossorigin = Fn.prototype.crossOrigin),
    (Fn.players = {});
  k = window.navigator;
  (Fn.prototype.options_ = {
    techOrder: ji.defaultTechOrder_,
    html5: {},
    inactivityTimeout: 2e3,
    playbackRates: [],
    liveui: !1,
    children: [
      "mediaLoader",
      "posterImage",
      "textTrackDisplay",
      "loadingSpinner",
      "bigPlayButton",
      "liveTracker",
      "controlBar",
      "errorDisplay",
      "textTrackSettings",
      "resizeManager",
    ],
    language:
      (k &&
        ((k.languages && k.languages[0]) || k.userLanguage || k.language)) ||
      "en",
    languages: {},
    notSupportedMessage: "No compatible source was found for this media.",
    normalizeAutoplay: !1,
    fullscreen: { options: { navigationUI: "hide" } },
    breakpoints: {},
    responsive: !1,
  }),
    ["ended", "seeking", "seekable", "networkState", "readyState"].forEach(
      function (e) {
        Fn.prototype[e] = function () {
          return this.techGet_(e);
        };
      }
    ),
    Rn.forEach(function (e) {
      Fn.prototype["handleTech" + ut(e) + "_"] = function () {
        return this.trigger(e);
      };
    }),
    pt.registerComponent("Player", Fn);
  var jn = m(function (i) {
    function n(e, t) {
      return (
        (i.exports = n =
          Object.setPrototypeOf ||
          function (e, t) {
            return (e.__proto__ = t), e;
          }),
        n(e, t)
      );
    }
    i.exports = n;
  });
  function Hn(e) {
    return Qn.hasOwnProperty(e);
  }
  function qn(e) {
    return Hn(e) ? Qn[e] : void 0;
  }
  function Vn(e, t, i) {
    (i = (i ? "before" : "") + "pluginsetup"),
      e.trigger(i, t),
      e.trigger(i + ":" + t.name, t);
  }
  function Wn(t, i) {
    function n() {
      Vn(this, { name: t, plugin: i, instance: null }, !0);
      var e = i.apply(this, arguments);
      return $n(this, t), Vn(this, { name: t, plugin: i, instance: e }), e;
    }
    return (
      Object.keys(i).forEach(function (e) {
        n[e] = i[e];
      }),
      n
    );
  }
  function Gn(r, a) {
    return (
      (a.prototype.name = r),
      function () {
        Vn(this, { name: r, plugin: a, instance: null }, !0);
        for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
          t[i] = arguments[i];
        var n = Xn(a, [this].concat(t));
        return (
          (this[r] = function () {
            return n;
          }),
          Vn(this, n.getEventHash()),
          n
        );
      }
    );
  }
  var zn = function () {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;
      try {
        return (
          Date.prototype.toString.call(
            Reflect.construct(Date, [], function () {})
          ),
          !0
        );
      } catch (e) {
        return !1;
      }
    },
    Xn = m(function (n) {
      function r(e, t, i) {
        return (
          zn()
            ? (n.exports = r = Reflect.construct)
            : (n.exports = r =
                function (e, t, i) {
                  var n = [null];
                  n.push.apply(n, t);
                  n = new (Function.bind.apply(e, n))();
                  return i && jn(n, i.prototype), n;
                }),
          r.apply(null, arguments)
        );
      }
      n.exports = r;
    }),
    Kn = "plugin",
    Yn = "activePlugins_",
    Qn = {},
    $n = function (e, t) {
      (e[Yn] = e[Yn] || {}), (e[Yn][t] = !0);
    },
    Jn = (function () {
      function i(e) {
        if (this.constructor === i)
          throw new Error(
            "Plugin must be sub-classed; not directly instantiated."
          );
        (this.player = e),
          this.log || (this.log = this.player.log.createLogger(this.name)),
          rt(this),
          delete this.trigger,
          st(this, this.constructor.defaultState),
          $n(e, this.name),
          (this.dispose = this.dispose.bind(this)),
          e.on("dispose", this.dispose);
      }
      var e = i.prototype;
      return (
        (e.version = function () {
          return this.constructor.VERSION;
        }),
        (e.getEventHash = function (e) {
          return (
            ((e = void 0 === e ? {} : e).name = this.name),
            (e.plugin = this.constructor),
            (e.instance = this),
            e
          );
        }),
        (e.trigger = function (e, t) {
          return je(
            this.eventBusEl_,
            e,
            this.getEventHash((t = void 0 === t ? {} : t))
          );
        }),
        (e.handleStateChanged = function (e) {}),
        (e.dispose = function () {
          var e = this.name,
            t = this.player;
          this.trigger("dispose"),
            this.off(),
            t.off("dispose", this.dispose),
            (t[Yn][e] = !1),
            (this.player = this.state = null),
            (t[e] = Gn(e, Qn[e]));
        }),
        (i.isBasic = function (e) {
          e = "string" == typeof e ? qn(e) : e;
          return (
            "function" == typeof e && !i.prototype.isPrototypeOf(e.prototype)
          );
        }),
        (i.registerPlugin = function (e, t) {
          if ("string" != typeof e)
            throw new Error(
              'Illegal plugin name, "' +
                e +
                '", must be a string, was ' +
                typeof e +
                "."
            );
          if (Hn(e))
            h.warn(
              'A plugin named "' +
                e +
                '" already exists. You may want to avoid re-registering plugins!'
            );
          else if (Fn.prototype.hasOwnProperty(e))
            throw new Error(
              'Illegal plugin name, "' +
                e +
                '", cannot share a name with an existing player method!'
            );
          if ("function" != typeof t)
            throw new Error(
              'Illegal plugin for "' +
                e +
                '", must be a function, was ' +
                typeof t +
                "."
            );
          return (
            (Qn[e] = t),
            e !== Kn &&
              (i.isBasic(t)
                ? (Fn.prototype[e] = Wn(e, t))
                : (Fn.prototype[e] = Gn(e, t))),
            t
          );
        }),
        (i.deregisterPlugin = function (e) {
          if (e === Kn) throw new Error("Cannot de-register base plugin.");
          Hn(e) && (delete Qn[e], delete Fn.prototype[e]);
        }),
        (i.getPlugins = function (e) {
          var i;
          return (
            (e = void 0 === e ? Object.keys(Qn) : e).forEach(function (e) {
              var t = qn(e);
              t && ((i = i || {})[e] = t);
            }),
            i
          );
        }),
        (i.getPluginVersion = function (e) {
          e = qn(e);
          return (e && e.VERSION) || "";
        }),
        i
      );
    })();
  (Jn.getPlugin = qn),
    (Jn.BASE_PLUGIN_NAME = Kn),
    Jn.registerPlugin(Kn, Jn),
    (Fn.prototype.usingPlugin = function (e) {
      return !!this[Yn] && !0 === this[Yn][e];
    }),
    (Fn.prototype.hasPlugin = function (e) {
      return !!Hn(e);
    });
  var Zn = function (e, t) {
      if ("function" != typeof t && null !== t)
        throw new TypeError(
          "Super expression must either be null or a function"
        );
      (e.prototype = Object.create(t && t.prototype, {
        constructor: { value: e, writable: !0, configurable: !0 },
      })),
        t && jn(e, t);
    },
    er = function (e) {
      return 0 === e.indexOf("#") ? e.slice(1) : e;
    };
  function tr(e, t, i) {
    if ((r = tr.getPlayer(e)))
      return (
        t &&
          h.warn(
            'Player "' +
              e +
              '" is already initialised. Options will not be applied.'
          ),
        i && r.ready(i),
        r
      );
    var n = "string" == typeof e ? Te("#" + er(e)) : e;
    if (!K(n))
      throw new TypeError("The element or ID supplied is not valid. (videojs)");
    (n.ownerDocument.defaultView && n.ownerDocument.body.contains(n)) ||
      h.warn("The element supplied is not included in the DOM"),
      (t = t || {}),
      a("beforesetup").forEach(function (e) {
        e = e(n, lt(t));
        T(e) && !Array.isArray(e)
          ? (t = lt(t, e))
          : h.error("please return an object in beforesetup hooks");
      });
    var r = new (pt.getComponent("Player"))(n, t, i);
    return (
      a("setup").forEach(function (e) {
        return e(r);
      }),
      r
    );
  }
  (tr.hooks_ = i),
    (tr.hooks = a),
    (tr.hook = function (e, t) {
      a(e, t);
    }),
    (tr.hookOnce = function (i, e) {
      a(
        i,
        [].concat(e).map(function (t) {
          return function e() {
            return n(i, e), t.apply(void 0, arguments);
          };
        })
      );
    }),
    (tr.removeHook = n),
    !0 !== window.VIDEOJS_NO_DYNAMIC_STYLE &&
      X() &&
      ((ar = Te(".vjs-styles-defaults")) ||
        ((ar = xe("vjs-styles-defaults")),
        (k = Te("head")) && k.insertBefore(ar, k.firstChild),
        Ae(
          ar,
          "\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "
        ))),
    Ce(1, tr),
    (tr.VERSION = u),
    (tr.options = Fn.prototype.options_),
    (tr.getPlayers = function () {
      return Fn.players;
    }),
    (tr.getPlayer = function (e) {
      var t = Fn.players;
      if ("string" == typeof e) {
        var i = er(e),
          n = t[i];
        if (n) return n;
        i = Te("#" + i);
      } else i = e;
      if (K(i)) {
        (e = i.player), (i = i.playerId);
        if (e || t[i]) return e || t[i];
      }
    }),
    (tr.getAllPlayers = function () {
      return Object.keys(Fn.players)
        .map(function (e) {
          return Fn.players[e];
        })
        .filter(Boolean);
    }),
    (tr.players = Fn.players),
    (tr.getComponent = pt.getComponent),
    (tr.registerComponent = function (e, t) {
      ji.isTech(t) &&
        h.warn(
          "The " +
            e +
            " tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"
        ),
        pt.registerComponent.call(pt, e, t);
    }),
    (tr.getTech = ji.getTech),
    (tr.registerTech = ji.registerTech),
    (tr.use = function (e, t) {
      (Hi[e] = Hi[e] || []), Hi[e].push(t);
    }),
    Object.defineProperty(tr, "middleware", {
      value: {},
      writeable: !1,
      enumerable: !0,
    }),
    Object.defineProperty(tr.middleware, "TERMINATOR", {
      value: Vi,
      writeable: !1,
      enumerable: !0,
    }),
    (tr.browser = W),
    (tr.TOUCH_ENABLED = F),
    (tr.extend = function (e, t) {
      var i,
        n = function () {
          e.apply(this, arguments);
        },
        r = {};
      for (i in ("object" == typeof (t = void 0 === t ? {} : t)
        ? (t.constructor !== Object.prototype.constructor &&
            (n = t.constructor),
          (r = t))
        : "function" == typeof t && (n = t),
      Zn(n, e),
      e && (n.super_ = e),
      r))
        r.hasOwnProperty(i) && (n.prototype[i] = r[i]);
      return n;
    }),
    (tr.mergeOptions = lt),
    (tr.bind = Ve),
    (tr.registerPlugin = Jn.registerPlugin),
    (tr.deregisterPlugin = Jn.deregisterPlugin),
    (tr.plugin = function (e, t) {
      return (
        h.warn(
          "videojs.plugin() is deprecated; use videojs.registerPlugin() instead"
        ),
        Jn.registerPlugin(e, t)
      );
    }),
    (tr.getPlugins = Jn.getPlugins),
    (tr.getPlugin = Jn.getPlugin),
    (tr.getPluginVersion = Jn.getPluginVersion),
    (tr.addLanguage = function (e, t) {
      var i;
      return (
        (e = ("" + e).toLowerCase()),
        (tr.options.languages = lt(
          tr.options.languages,
          (((i = {})[e] = t), i)
        )),
        tr.options.languages[e]
      );
    }),
    (tr.log = h),
    (tr.createLogger = p),
    (tr.createTimeRange = tr.createTimeRanges = vt),
    (tr.formatTime = ln),
    (tr.setFormatTime = function (e) {
      un = e;
    }),
    (tr.resetFormatTime = function () {
      un = on;
    }),
    (tr.parseUrl = Rt),
    (tr.isCrossOrigin = Ut),
    (tr.EventTarget = ze),
    (tr.on = Be),
    (tr.one = He),
    (tr.off = Fe),
    (tr.trigger = je),
    (tr.xhr = Jt),
    (tr.TextTrack = ri),
    (tr.AudioTrack = x),
    (tr.VideoTrack = U),
    [
      "isEl",
      "isTextNode",
      "createEl",
      "hasClass",
      "addClass",
      "removeClass",
      "toggleClass",
      "setAttributes",
      "getAttributes",
      "emptyEl",
      "appendContent",
      "insertContent",
    ].forEach(function (e) {
      tr[e] = function () {
        return (
          h.warn(
            "videojs." +
              e +
              "() is deprecated; use videojs.dom." +
              e +
              "() instead"
          ),
          we[e].apply(null, arguments)
        );
      };
    }),
    (tr.computedStyle = w),
    (tr.dom = we),
    (tr.url = zt),
    (tr.defineLazyProperty = An),
    tr.addLanguage("en", { "Non-Fullscreen": "Exit Fullscreen" });
  function ir(e, t) {
    if (/^[a-z]+:/i.test(t)) return t;
    /^data:/.test(e) && (e = (window.location && window.location.href) || "");
    var i = "function" == typeof window.URL,
      n = /^\/\//.test(e),
      r = !window.location && !/\/\//i.test(e);
    if (
      (i
        ? (e = new window.URL(e, window.location || rr))
        : /\/\//i.test(e) ||
          (e = nr.buildAbsoluteURL(
            (window.location && window.location.href) || "",
            e
          )),
      i)
    ) {
      i = new URL(t, e);
      return r
        ? i.href.slice(rr.length)
        : n
        ? i.href.slice(i.protocol.length)
        : i.href;
    }
    return nr.buildAbsoluteURL(e, t);
  }
  var nr = m(function (e, t) {
      var i, a, n, r, s;
      (i =
        /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/),
        (a = /^([^\/?#]*)([^]*)$/),
        (n = /(?:\/|^)\.(?=\/)/g),
        (r = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g),
        (s = {
          buildAbsoluteURL: function (e, t, i) {
            if (((i = i || {}), (e = e.trim()), !(t = t.trim()))) {
              if (!i.alwaysNormalize) return e;
              var n = s.parseURL(e);
              if (!n) throw new Error("Error trying to parse base URL.");
              return (n.path = s.normalizePath(n.path)), s.buildURLFromParts(n);
            }
            n = s.parseURL(t);
            if (!n) throw new Error("Error trying to parse relative URL.");
            if (n.scheme)
              return i.alwaysNormalize
                ? ((n.path = s.normalizePath(n.path)), s.buildURLFromParts(n))
                : t;
            t = s.parseURL(e);
            if (!t) throw new Error("Error trying to parse base URL.");
            !t.netLoc &&
              t.path &&
              "/" !== t.path[0] &&
              ((r = a.exec(t.path)), (t.netLoc = r[1]), (t.path = r[2])),
              t.netLoc && !t.path && (t.path = "/");
            var r,
              e = {
                scheme: t.scheme,
                netLoc: n.netLoc,
                path: null,
                params: n.params,
                query: n.query,
                fragment: n.fragment,
              };
            return (
              n.netLoc ||
                ((e.netLoc = t.netLoc),
                "/" !== n.path[0] &&
                  (n.path
                    ? ((r =
                        (r = t.path).substring(0, r.lastIndexOf("/") + 1) +
                        n.path),
                      (e.path = s.normalizePath(r)))
                    : ((e.path = t.path),
                      n.params ||
                        ((e.params = t.params),
                        n.query || (e.query = t.query))))),
              null === e.path &&
                (e.path = i.alwaysNormalize ? s.normalizePath(n.path) : n.path),
              s.buildURLFromParts(e)
            );
          },
          parseURL: function (e) {
            e = i.exec(e);
            return e
              ? {
                  scheme: e[1] || "",
                  netLoc: e[2] || "",
                  path: e[3] || "",
                  params: e[4] || "",
                  query: e[5] || "",
                  fragment: e[6] || "",
                }
              : null;
          },
          normalizePath: function (e) {
            for (
              e = e.split("").reverse().join("").replace(n, "");
              e.length !== (e = e.replace(r, "")).length;

            );
            return e.split("").reverse().join("");
          },
          buildURLFromParts: function (e) {
            return (
              e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
            );
          },
        }),
        (e.exports = s);
    }),
    rr = "http://example.com",
    ar = (function () {
      function e() {
        this.listeners = {};
      }
      var t = e.prototype;
      return (
        (t.on = function (e, t) {
          this.listeners[e] || (this.listeners[e] = []),
            this.listeners[e].push(t);
        }),
        (t.off = function (e, t) {
          if (!this.listeners[e]) return !1;
          t = this.listeners[e].indexOf(t);
          return (
            (this.listeners[e] = this.listeners[e].slice(0)),
            this.listeners[e].splice(t, 1),
            -1 < t
          );
        }),
        (t.trigger = function (e) {
          var t = this.listeners[e];
          if (t)
            if (2 === arguments.length)
              for (var i = t.length, n = 0; n < i; ++n)
                t[n].call(this, arguments[1]);
            else
              for (
                var r = Array.prototype.slice.call(arguments, 1),
                  a = t.length,
                  s = 0;
                s < a;
                ++s
              )
                t[s].apply(this, r);
        }),
        (t.dispose = function () {
          this.listeners = {};
        }),
        (t.pipe = function (t) {
          this.on("data", function (e) {
            t.push(e);
          });
        }),
        e
      );
    })(),
    sr = function (e) {
      return window.atob
        ? window.atob(e)
        : Buffer.from(e, "base64").toString("binary");
    };
  function or(e) {
    for (var t = sr(e), i = new Uint8Array(t.length), n = 0; n < t.length; n++)
      i[n] = t.charCodeAt(n);
    return i;
  }
  /*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */ function ur(e) {
    var t = /([0-9.]*)?@?([0-9.]*)?/.exec(e || ""),
      e = {};
    return (
      t[1] && (e.length = parseInt(t[1], 10)),
      t[2] && (e.offset = parseInt(t[2], 10)),
      e
    );
  }
  function lr(e) {
    for (
      var t,
        i = e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),
        n = {},
        r = i.length;
      r--;

    )
      "" !== i[r] &&
        (((t = /([^=]*)=(.*)/.exec(i[r]).slice(1))[0] = t[0].replace(
          /^\s+|\s+$/g,
          ""
        )),
        (t[1] = t[1].replace(/^\s+|\s+$/g, "")),
        (t[1] = t[1].replace(/^['"](.*)['"]$/g, "$1")),
        (n[t[0]] = t[1]));
    return n;
  }
  function cr(t) {
    var i = {};
    return (
      Object.keys(t).forEach(function (e) {
        i[
          e.toLowerCase().replace(/-(\w)/g, function (e) {
            return e[1].toUpperCase();
          })
        ] = t[e];
      }),
      i
    );
  }
  function dr(e) {
    var t,
      i,
      n,
      r,
      a = e.serverControl,
      s = e.targetDuration,
      o = e.partTargetDuration;
    a &&
      ((t = "#EXT-X-SERVER-CONTROL"),
      (i = "holdBack"),
      (n = "partHoldBack"),
      (r = s && 3 * s),
      (e = o && 2 * o),
      s &&
        !a.hasOwnProperty(i) &&
        ((a[i] = r),
        this.trigger("info", {
          message:
            t + " defaulting HOLD-BACK to targetDuration * 3 (" + r + ").",
        })),
      r &&
        a[i] < r &&
        (this.trigger("warn", {
          message:
            t +
            " clamping HOLD-BACK (" +
            a[i] +
            ") to targetDuration * 3 (" +
            r +
            ")",
        }),
        (a[i] = r)),
      o &&
        !a.hasOwnProperty(n) &&
        ((a[n] = 3 * o),
        this.trigger("info", {
          message:
            t +
            " defaulting PART-HOLD-BACK to partTargetDuration * 3 (" +
            a[n] +
            ").",
        })),
      o &&
        a[n] < e &&
        (this.trigger("warn", {
          message:
            t +
            " clamping PART-HOLD-BACK (" +
            a[n] +
            ") to partTargetDuration * 2 (" +
            e +
            ").",
        }),
        (a[n] = e)));
  }
  function hr(e) {
    return (
      e &&
      e.replace(/avc1\.(\d+)\.(\d+)/i, function (e, t, i) {
        return (
          "avc1." +
          ("00" + Number(t).toString(16)).slice(-2) +
          "00" +
          ("00" + Number(i).toString(16)).slice(-2)
        );
      })
    );
  }
  function pr(e) {
    var e = (e = void 0 === e ? "" : e).split(","),
      a = [];
    return (
      e.forEach(function (n) {
        var r;
        (n = n.trim()),
          Er.forEach(function (e) {
            var t,
              i = wr[e].exec(n.toLowerCase());
            !i ||
              i.length <= 1 ||
              ((r = e),
              (t = n.substring(0, i[1].length)),
              (i = n.replace(t, "")),
              a.push({ type: t, details: i, mediaType: e }));
          }),
          r || a.push({ type: n, details: "", mediaType: "unknown" });
      }),
      a
    );
  }
  function fr(e) {
    return wr.audio.test((e = void 0 === e ? "" : e).trim().toLowerCase());
  }
  function mr(e) {
    if (e && "string" == typeof e) {
      var t = e
          .toLowerCase()
          .split(",")
          .map(function (e) {
            return hr(e.trim());
          }),
        i = "video";
      1 === t.length && fr(t[0])
        ? (i = "audio")
        : 1 === t.length &&
          ((n = t[0]),
          wr.text.test((n = void 0 === n ? "" : n).trim().toLowerCase())) &&
          (i = "application");
      var n = "mp4";
      return (
        t.every(function (e) {
          return wr.mp4.test(e);
        })
          ? (n = "mp4")
          : t.every(function (e) {
              return wr.webm.test(e);
            })
          ? (n = "webm")
          : t.every(function (e) {
              return wr.ogg.test(e);
            }) && (n = "ogg"),
        i + "/" + n + ';codecs="' + e + '"'
      );
    }
  }
  function gr(e) {
    return (
      void 0 === e && (e = ""),
      (window.MediaSource &&
        window.MediaSource.isTypeSupported &&
        window.MediaSource.isTypeSupported(mr(e))) ||
        !1
    );
  }
  function yr(e) {
    return (e = void 0 === e ? "" : e)
      .toLowerCase()
      .split(",")
      .every(function (e) {
        e = e.trim();
        for (var t = 0; t < kr.length; t++)
          if (wr["muxer" + kr[t]].test(e)) return !0;
        return !1;
      });
  }
  function vr(e) {
    return Ir.test(e)
      ? "hls"
      : xr.test(e)
      ? "dash"
      : "application/vnd.videojs.vhs+json" === e
      ? "vhs-json"
      : null;
  }
  var _r = (function (t) {
      function e() {
        var e = t.call(this) || this;
        return (e.buffer = ""), e;
      }
      return (
        mt(e, t),
        (e.prototype.push = function (e) {
          var t;
          for (
            this.buffer += e, t = this.buffer.indexOf("\n");
            -1 < t;
            t = this.buffer.indexOf("\n")
          )
            this.trigger("data", this.buffer.substring(0, t)),
              (this.buffer = this.buffer.substring(t + 1));
        }),
        e
      );
    })(ar),
    br = String.fromCharCode(9),
    Tr = (function (t) {
      function e() {
        var e = t.call(this) || this;
        return (e.customParsers = []), (e.tagMappers = []), e;
      }
      mt(e, t);
      var i = e.prototype;
      return (
        (i.push = function (i) {
          var r,
            a,
            s = this;
          0 !== (i = i.trim()).length &&
            ("#" === i[0]
              ? this.tagMappers
                  .reduce(
                    function (e, t) {
                      t = t(i);
                      return t === i ? e : e.concat([t]);
                    },
                    [i]
                  )
                  .forEach(function (e) {
                    for (var t, i, n = 0; n < s.customParsers.length; n++)
                      if (s.customParsers[n].call(s, e)) return;
                    if (0 === e.indexOf("#EXT"))
                      if (((e = e.replace("\r", "")), (r = /^#EXTM3U/.exec(e))))
                        s.trigger("data", { type: "tag", tagType: "m3u" });
                      else {
                        if ((r = /^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "inf" }),
                            r[1] && (a.duration = parseFloat(r[1])),
                            r[2] && (a.title = r[2]),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "targetduration" }),
                            r[1] && (a.duration = parseInt(r[1], 10)),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "version" }),
                            r[1] && (a.version = parseInt(r[1], 10)),
                            void s.trigger("data", a)
                          );
                        if (
                          (r = /^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))
                        )
                          return (
                            (a = { type: "tag", tagType: "media-sequence" }),
                            r[1] && (a.number = parseInt(r[1], 10)),
                            void s.trigger("data", a)
                          );
                        if (
                          (r =
                            /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(
                              e
                            ))
                        )
                          return (
                            (a = {
                              type: "tag",
                              tagType: "discontinuity-sequence",
                            }),
                            r[1] && (a.number = parseInt(r[1], 10)),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "playlist-type" }),
                            r[1] && (a.playlistType = r[1]),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(e)))
                          return (
                            (a = g(ur(r[1]), {
                              type: "tag",
                              tagType: "byterange",
                            })),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "allow-cache" }),
                            r[1] && (a.allowed = !/NO/.test(r[1])),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-MAP:?(.*)$/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "map" }),
                            r[1] &&
                              ((t = lr(r[1])).URI && (a.uri = t.URI),
                              t.BYTERANGE && (a.byterange = ur(t.BYTERANGE))),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-STREAM-INF:?(.*)$/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "stream-inf" }),
                            r[1] &&
                              ((a.attributes = lr(r[1])),
                              a.attributes.RESOLUTION &&
                                ((i = {}),
                                (t = a.attributes.RESOLUTION.split("x"))[0] &&
                                  (i.width = parseInt(t[0], 10)),
                                t[1] && (i.height = parseInt(t[1], 10)),
                                (a.attributes.RESOLUTION = i)),
                              a.attributes.BANDWIDTH &&
                                (a.attributes.BANDWIDTH = parseInt(
                                  a.attributes.BANDWIDTH,
                                  10
                                )),
                              a.attributes["PROGRAM-ID"] &&
                                (a.attributes["PROGRAM-ID"] = parseInt(
                                  a.attributes["PROGRAM-ID"],
                                  10
                                ))),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-MEDIA:?(.*)$/.exec(e)))
                          return (
                            (a = { type: "tag", tagType: "media" }),
                            r[1] && (a.attributes = lr(r[1])),
                            void s.trigger("data", a)
                          );
                        if ((r = /^#EXT-X-ENDLIST/.exec(e)))
                          s.trigger("data", {
                            type: "tag",
                            tagType: "endlist",
                          });
                        else {
                          if (!(r = /^#EXT-X-DISCONTINUITY/.exec(e)))
                            return (r = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(
                              e
                            ))
                              ? ((a = {
                                  type: "tag",
                                  tagType: "program-date-time",
                                }),
                                r[1] &&
                                  ((a.dateTimeString = r[1]),
                                  (a.dateTimeObject = new Date(r[1]))),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-KEY:?(.*)$/.exec(e))
                              ? ((a = { type: "tag", tagType: "key" }),
                                r[1] &&
                                  ((a.attributes = lr(r[1])),
                                  a.attributes.IV &&
                                    ("0x" ===
                                      a.attributes.IV.substring(
                                        0,
                                        2
                                      ).toLowerCase() &&
                                      (a.attributes.IV =
                                        a.attributes.IV.substring(2)),
                                    (a.attributes.IV =
                                      a.attributes.IV.match(/.{8}/g)),
                                    (a.attributes.IV[0] = parseInt(
                                      a.attributes.IV[0],
                                      16
                                    )),
                                    (a.attributes.IV[1] = parseInt(
                                      a.attributes.IV[1],
                                      16
                                    )),
                                    (a.attributes.IV[2] = parseInt(
                                      a.attributes.IV[2],
                                      16
                                    )),
                                    (a.attributes.IV[3] = parseInt(
                                      a.attributes.IV[3],
                                      16
                                    )),
                                    (a.attributes.IV = new Uint32Array(
                                      a.attributes.IV
                                    )))),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-START:?(.*)$/.exec(e))
                              ? ((a = { type: "tag", tagType: "start" }),
                                r[1] &&
                                  ((a.attributes = lr(r[1])),
                                  (a.attributes["TIME-OFFSET"] = parseFloat(
                                    a.attributes["TIME-OFFSET"]
                                  )),
                                  (a.attributes.PRECISE = /YES/.test(
                                    a.attributes.PRECISE
                                  ))),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))
                              ? ((a = { type: "tag", tagType: "cue-out-cont" }),
                                r[1] ? (a.data = r[1]) : (a.data = ""),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))
                              ? ((a = { type: "tag", tagType: "cue-out" }),
                                r[1] ? (a.data = r[1]) : (a.data = ""),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-CUE-IN:?(.*)?$/.exec(e))
                              ? ((a = { type: "tag", tagType: "cue-in" }),
                                r[1] ? (a.data = r[1]) : (a.data = ""),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-SKIP:(.*)$/.exec(e)) && r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "skip",
                                }).attributes = lr(r[1])),
                                a.attributes.hasOwnProperty(
                                  "SKIPPED-SEGMENTS"
                                ) &&
                                  (a.attributes["SKIPPED-SEGMENTS"] = parseInt(
                                    a.attributes["SKIPPED-SEGMENTS"],
                                    10
                                  )),
                                a.attributes.hasOwnProperty(
                                  "RECENTLY-REMOVED-DATERANGES"
                                ) &&
                                  (a.attributes["RECENTLY-REMOVED-DATERANGES"] =
                                    a.attributes[
                                      "RECENTLY-REMOVED-DATERANGES"
                                    ].split(br)),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-PART:(.*)$/.exec(e)) && r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "part",
                                }).attributes = lr(r[1])),
                                ["DURATION"].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = parseFloat(
                                      a.attributes[e]
                                    ));
                                }),
                                ["INDEPENDENT", "GAP"].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = /YES/.test(
                                      a.attributes[e]
                                    ));
                                }),
                                a.attributes.hasOwnProperty("BYTERANGE") &&
                                  (a.attributes.byterange = ur(
                                    a.attributes.BYTERANGE
                                  )),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e)) &&
                                r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "server-control",
                                }).attributes = lr(r[1])),
                                [
                                  "CAN-SKIP-UNTIL",
                                  "PART-HOLD-BACK",
                                  "HOLD-BACK",
                                ].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = parseFloat(
                                      a.attributes[e]
                                    ));
                                }),
                                [
                                  "CAN-SKIP-DATERANGES",
                                  "CAN-BLOCK-RELOAD",
                                ].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = /YES/.test(
                                      a.attributes[e]
                                    ));
                                }),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-PART-INF:(.*)$/.exec(e)) && r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "part-inf",
                                }).attributes = lr(r[1])),
                                ["PART-TARGET"].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = parseFloat(
                                      a.attributes[e]
                                    ));
                                }),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e)) &&
                                r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "preload-hint",
                                }).attributes = lr(r[1])),
                                ["BYTERANGE-START", "BYTERANGE-LENGTH"].forEach(
                                  function (e) {
                                    var t;
                                    a.attributes.hasOwnProperty(e) &&
                                      ((a.attributes[e] = parseInt(
                                        a.attributes[e],
                                        10
                                      )),
                                      (t =
                                        "BYTERANGE-LENGTH" === e
                                          ? "length"
                                          : "offset"),
                                      (a.attributes.byterange =
                                        a.attributes.byterange || {}),
                                      (a.attributes.byterange[t] =
                                        a.attributes[e]),
                                      delete a.attributes[e]);
                                  }
                                ),
                                void s.trigger("data", a))
                              : (r = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(
                                  e
                                )) && r[1]
                              ? (((a = {
                                  type: "tag",
                                  tagType: "rendition-report",
                                }).attributes = lr(r[1])),
                                ["LAST-MSN", "LAST-PART"].forEach(function (e) {
                                  a.attributes.hasOwnProperty(e) &&
                                    (a.attributes[e] = parseInt(
                                      a.attributes[e],
                                      10
                                    ));
                                }),
                                void s.trigger("data", a))
                              : void s.trigger("data", {
                                  type: "tag",
                                  data: e.slice(4),
                                });
                          s.trigger("data", {
                            type: "tag",
                            tagType: "discontinuity",
                          });
                        }
                      }
                    else
                      s.trigger("data", { type: "comment", text: e.slice(1) });
                  })
              : this.trigger("data", { type: "uri", uri: i }));
        }),
        (i.addParser = function (e) {
          var t = this,
            i = e.expression,
            n = e.customType,
            r = e.dataParser,
            a = e.segment;
          "function" != typeof r &&
            (r = function (e) {
              return e;
            }),
            this.customParsers.push(function (e) {
              if (i.exec(e))
                return (
                  t.trigger("data", {
                    type: "custom",
                    data: r(e),
                    customType: n,
                    segment: a,
                  }),
                  !0
                );
            });
        }),
        (i.addTagMapper = function (e) {
          var t = e.expression,
            i = e.map;
          this.tagMappers.push(function (e) {
            return t.test(e) ? i(e) : e;
          });
        }),
        e
      );
    })(ar),
    Sr = (function (t) {
      function e() {
        var e = t.call(this) || this;
        (e.lineStream = new _r()),
          (e.parseStream = new Tr()),
          e.lineStream.pipe(e.parseStream);
        var n,
          r,
          a = ft(e),
          o = [],
          u = {},
          l = !1,
          c = { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} },
          d = 0;
        e.manifest = { allowCache: !0, discontinuityStarts: [], segments: [] };
        var h = 0,
          p = 0;
        return (
          e.on("end", function () {
            u.uri ||
              (!u.parts && !u.preloadHints) ||
              (!u.map && n && (u.map = n),
              !u.key && r && (u.key = r),
              u.timeline || "number" != typeof d || (u.timeline = d),
              (e.manifest.preloadSegment = u));
          }),
          e.parseStream.on("data", function (s) {
            var t, i;
            ({
              tag: function () {
                ((
                  {
                    version: function () {
                      s.version && (this.manifest.version = s.version);
                    },
                    "allow-cache": function () {
                      (this.manifest.allowCache = s.allowed),
                        "allowed" in s ||
                          (this.trigger("info", {
                            message: "defaulting allowCache to YES",
                          }),
                          (this.manifest.allowCache = !0));
                    },
                    byterange: function () {
                      var e = {};
                      "length" in s &&
                        (((u.byterange = e).length = s.length),
                        "offset" in s || (s.offset = h)),
                        "offset" in s && ((u.byterange = e).offset = s.offset),
                        (h = e.offset + e.length);
                    },
                    endlist: function () {
                      this.manifest.endList = !0;
                    },
                    inf: function () {
                      "mediaSequence" in this.manifest ||
                        ((this.manifest.mediaSequence = 0),
                        this.trigger("info", {
                          message: "defaulting media sequence to zero",
                        })),
                        "discontinuitySequence" in this.manifest ||
                          ((this.manifest.discontinuitySequence = 0),
                          this.trigger("info", {
                            message:
                              "defaulting discontinuity sequence to zero",
                          })),
                        0 < s.duration && (u.duration = s.duration),
                        0 === s.duration &&
                          ((u.duration = 0.01),
                          this.trigger("info", {
                            message:
                              "updating zero segment duration to a small value",
                          })),
                        (this.manifest.segments = o);
                    },
                    key: function () {
                      if (s.attributes)
                        if ("NONE" !== s.attributes.METHOD)
                          if (s.attributes.URI) {
                            if (
                              "com.apple.streamingkeydelivery" ===
                              s.attributes.KEYFORMAT
                            )
                              return (
                                (this.manifest.contentProtection =
                                  this.manifest.contentProtection || {}),
                                void (this.manifest.contentProtection[
                                  "com.apple.fps.1_0"
                                ] = { attributes: s.attributes })
                              );
                            if (
                              "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" ===
                              s.attributes.KEYFORMAT
                            )
                              return -1 ===
                                [
                                  "SAMPLE-AES",
                                  "SAMPLE-AES-CTR",
                                  "SAMPLE-AES-CENC",
                                ].indexOf(s.attributes.METHOD)
                                ? void this.trigger("warn", {
                                    message:
                                      "invalid key method provided for Widevine",
                                  })
                                : ("SAMPLE-AES-CENC" === s.attributes.METHOD &&
                                    this.trigger("warn", {
                                      message:
                                        "SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead",
                                    }),
                                  "data:text/plain;base64," !==
                                  s.attributes.URI.substring(0, 23)
                                    ? void this.trigger("warn", {
                                        message:
                                          "invalid key URI provided for Widevine",
                                      })
                                    : s.attributes.KEYID &&
                                      "0x" ===
                                        s.attributes.KEYID.substring(0, 2)
                                    ? ((this.manifest.contentProtection =
                                        this.manifest.contentProtection || {}),
                                      void (this.manifest.contentProtection[
                                        "com.widevine.alpha"
                                      ] = {
                                        attributes: {
                                          schemeIdUri: s.attributes.KEYFORMAT,
                                          keyId:
                                            s.attributes.KEYID.substring(2),
                                        },
                                        pssh: or(
                                          s.attributes.URI.split(",")[1]
                                        ),
                                      }))
                                    : void this.trigger("warn", {
                                        message:
                                          "invalid key ID provided for Widevine",
                                      }));
                            s.attributes.METHOD ||
                              this.trigger("warn", {
                                message: "defaulting key method to AES-128",
                              }),
                              (r = {
                                method: s.attributes.METHOD || "AES-128",
                                uri: s.attributes.URI,
                              }),
                              "undefined" != typeof s.attributes.IV &&
                                (r.iv = s.attributes.IV);
                          } else
                            this.trigger("warn", {
                              message: "ignoring key declaration without URI",
                            });
                        else r = null;
                      else
                        this.trigger("warn", {
                          message:
                            "ignoring key declaration without attribute list",
                        });
                    },
                    "media-sequence": function () {
                      isFinite(s.number)
                        ? (this.manifest.mediaSequence = s.number)
                        : this.trigger("warn", {
                            message:
                              "ignoring invalid media sequence: " + s.number,
                          });
                    },
                    "discontinuity-sequence": function () {
                      isFinite(s.number)
                        ? ((this.manifest.discontinuitySequence = s.number),
                          (d = s.number))
                        : this.trigger("warn", {
                            message:
                              "ignoring invalid discontinuity sequence: " +
                              s.number,
                          });
                    },
                    "playlist-type": function () {
                      /VOD|EVENT/.test(s.playlistType)
                        ? (this.manifest.playlistType = s.playlistType)
                        : this.trigger("warn", {
                            message:
                              "ignoring unknown playlist type: " + s.playlist,
                          });
                    },
                    map: function () {
                      (n = {}),
                        s.uri && (n.uri = s.uri),
                        s.byterange && (n.byterange = s.byterange),
                        r && (n.key = r);
                    },
                    "stream-inf": function () {
                      (this.manifest.playlists = o),
                        (this.manifest.mediaGroups =
                          this.manifest.mediaGroups || c),
                        s.attributes
                          ? (u.attributes || (u.attributes = {}),
                            g(u.attributes, s.attributes))
                          : this.trigger("warn", {
                              message: "ignoring empty stream-inf attributes",
                            });
                    },
                    media: function () {
                      var e;
                      (this.manifest.mediaGroups =
                        this.manifest.mediaGroups || c),
                        s.attributes &&
                        s.attributes.TYPE &&
                        s.attributes["GROUP-ID"] &&
                        s.attributes.NAME
                          ? (((e =
                              this.manifest.mediaGroups[s.attributes.TYPE])[
                              s.attributes["GROUP-ID"]
                            ] = e[s.attributes["GROUP-ID"]] || {}),
                            (t = e[s.attributes["GROUP-ID"]]),
                            (i = { default: /yes/i.test(s.attributes.DEFAULT) })
                              .default
                              ? (i.autoselect = !0)
                              : (i.autoselect = /yes/i.test(
                                  s.attributes.AUTOSELECT
                                )),
                            s.attributes.LANGUAGE &&
                              (i.language = s.attributes.LANGUAGE),
                            s.attributes.URI && (i.uri = s.attributes.URI),
                            s.attributes["INSTREAM-ID"] &&
                              (i.instreamId = s.attributes["INSTREAM-ID"]),
                            s.attributes.CHARACTERISTICS &&
                              (i.characteristics =
                                s.attributes.CHARACTERISTICS),
                            s.attributes.FORCED &&
                              (i.forced = /yes/i.test(s.attributes.FORCED)),
                            (t[s.attributes.NAME] = i))
                          : this.trigger("warn", {
                              message:
                                "ignoring incomplete or missing media group",
                            });
                    },
                    discontinuity: function () {
                      (d += 1),
                        (u.discontinuity = !0),
                        this.manifest.discontinuityStarts.push(o.length);
                    },
                    "program-date-time": function () {
                      "undefined" == typeof this.manifest.dateTimeString &&
                        ((this.manifest.dateTimeString = s.dateTimeString),
                        (this.manifest.dateTimeObject = s.dateTimeObject)),
                        (u.dateTimeString = s.dateTimeString),
                        (u.dateTimeObject = s.dateTimeObject);
                    },
                    targetduration: function () {
                      !isFinite(s.duration) || s.duration < 0
                        ? this.trigger("warn", {
                            message:
                              "ignoring invalid target duration: " + s.duration,
                          })
                        : ((this.manifest.targetDuration = s.duration),
                          dr.call(this, this.manifest));
                    },
                    start: function () {
                      s.attributes && !isNaN(s.attributes["TIME-OFFSET"])
                        ? (this.manifest.start = {
                            timeOffset: s.attributes["TIME-OFFSET"],
                            precise: s.attributes.PRECISE,
                          })
                        : this.trigger("warn", {
                            message:
                              "ignoring start declaration without appropriate attribute list",
                          });
                    },
                    "cue-out": function () {
                      u.cueOut = s.data;
                    },
                    "cue-out-cont": function () {
                      u.cueOutCont = s.data;
                    },
                    "cue-in": function () {
                      u.cueIn = s.data;
                    },
                    skip: function () {
                      (this.manifest.skip = cr(s.attributes)),
                        this.warnOnMissingAttributes_(
                          "#EXT-X-SKIP",
                          s.attributes,
                          ["SKIPPED-SEGMENTS"]
                        );
                    },
                    part: function () {
                      var i = this;
                      l = !0;
                      var e = this.manifest.segments.length,
                        t = cr(s.attributes);
                      (u.parts = u.parts || []),
                        u.parts.push(t),
                        t.byterange &&
                          (t.byterange.hasOwnProperty("offset") ||
                            (t.byterange.offset = p),
                          (p = t.byterange.offset + t.byterange.length));
                      var n = u.parts.length - 1;
                      this.warnOnMissingAttributes_(
                        "#EXT-X-PART #" + n + " for segment #" + e,
                        s.attributes,
                        ["URI", "DURATION"]
                      ),
                        this.manifest.renditionReports &&
                          this.manifest.renditionReports.forEach(function (
                            e,
                            t
                          ) {
                            e.hasOwnProperty("lastPart") ||
                              i.trigger("warn", {
                                message:
                                  "#EXT-X-RENDITION-REPORT #" +
                                  t +
                                  " lacks required attribute(s): LAST-PART",
                              });
                          });
                    },
                    "server-control": function () {
                      var e = (this.manifest.serverControl = cr(s.attributes));
                      e.hasOwnProperty("canBlockReload") ||
                        ((e.canBlockReload = !1),
                        this.trigger("info", {
                          message:
                            "#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false",
                        })),
                        dr.call(this, this.manifest),
                        e.canSkipDateranges &&
                          !e.hasOwnProperty("canSkipUntil") &&
                          this.trigger("warn", {
                            message:
                              "#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set",
                          });
                    },
                    "preload-hint": function () {
                      var e = this.manifest.segments.length,
                        t = cr(s.attributes),
                        i = t.type && "PART" === t.type;
                      (u.preloadHints = u.preloadHints || []),
                        u.preloadHints.push(t),
                        t.byterange &&
                          (t.byterange.hasOwnProperty("offset") ||
                            ((t.byterange.offset = i ? p : 0),
                            i &&
                              (p = t.byterange.offset + t.byterange.length)));
                      var n = u.preloadHints.length - 1;
                      if (
                        (this.warnOnMissingAttributes_(
                          "#EXT-X-PRELOAD-HINT #" + n + " for segment #" + e,
                          s.attributes,
                          ["TYPE", "URI"]
                        ),
                        t.type)
                      )
                        for (var r = 0; r < u.preloadHints.length - 1; r++) {
                          var a = u.preloadHints[r];
                          a.type &&
                            a.type === t.type &&
                            this.trigger("warn", {
                              message:
                                "#EXT-X-PRELOAD-HINT #" +
                                n +
                                " for segment #" +
                                e +
                                " has the same TYPE " +
                                t.type +
                                " as preload hint #" +
                                r,
                            });
                        }
                    },
                    "rendition-report": function () {
                      var e = cr(s.attributes);
                      (this.manifest.renditionReports =
                        this.manifest.renditionReports || []),
                        this.manifest.renditionReports.push(e);
                      var t = this.manifest.renditionReports.length - 1,
                        e = ["LAST-MSN", "URI"];
                      l && e.push("LAST-PART"),
                        this.warnOnMissingAttributes_(
                          "#EXT-X-RENDITION-REPORT #" + t,
                          s.attributes,
                          e
                        );
                    },
                    "part-inf": function () {
                      (this.manifest.partInf = cr(s.attributes)),
                        this.warnOnMissingAttributes_(
                          "#EXT-X-PART-INF",
                          s.attributes,
                          ["PART-TARGET"]
                        ),
                        this.manifest.partInf.partTarget &&
                          (this.manifest.partTargetDuration =
                            this.manifest.partInf.partTarget),
                        dr.call(this, this.manifest);
                    },
                  }[s.tagType] || function () {}
                ).call(a));
              },
              uri: function () {
                (u.uri = s.uri),
                  o.push(u),
                  !this.manifest.targetDuration ||
                    "duration" in u ||
                    (this.trigger("warn", {
                      message:
                        "defaulting segment duration to the target duration",
                    }),
                    (u.duration = this.manifest.targetDuration)),
                  r && (u.key = r),
                  (u.timeline = d),
                  n && (u.map = n),
                  (p = 0),
                  (u = {});
              },
              comment: function () {},
              custom: function () {
                s.segment
                  ? ((u.custom = u.custom || {}),
                    (u.custom[s.customType] = s.data))
                  : ((this.manifest.custom = this.manifest.custom || {}),
                    (this.manifest.custom[s.customType] = s.data));
              },
            }[s.type].call(a));
          }),
          e
        );
      }
      mt(e, t);
      var i = e.prototype;
      return (
        (i.warnOnMissingAttributes_ = function (e, t, i) {
          var n = [];
          i.forEach(function (e) {
            t.hasOwnProperty(e) || n.push(e);
          }),
            n.length &&
              this.trigger("warn", {
                message: e + " lacks required attribute(s): " + n.join(", "),
              });
        }),
        (i.push = function (e) {
          this.lineStream.push(e);
        }),
        (i.end = function () {
          this.lineStream.push("\n"), this.trigger("end");
        }),
        (i.addParser = function (e) {
          this.parseStream.addParser(e);
        }),
        (i.addTagMapper = function (e) {
          this.parseStream.addTagMapper(e);
        }),
        e
      );
    })(ar),
    wr = {
      mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,
      webm: /^(vp0?[89]|av0?1|opus|vorbis)/,
      ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/,
      video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,
      audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,
      text: /^(stpp.ttml.im1t)/,
      muxerVideo: /^(avc0?1)/,
      muxerAudio: /^(mp4a)/,
      muxerText: /a^/,
    },
    Er = ["video", "audio", "text"],
    kr = ["Video", "Audio", "Text"],
    Cr = "mp4a.40.2",
    Ir = /^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,
    xr = /^application\/dash\+xml/i;
  function Ar(e, t) {
    return (t = void 0 === t ? Object : t) && "function" == typeof t.freeze
      ? t.freeze(e)
      : e;
  }
  var Pr = Ar({
      HTML: "text/html",
      isHTML: function (e) {
        return e === Pr.HTML;
      },
      XML_APPLICATION: "application/xml",
      XML_TEXT: "text/xml",
      XML_XHTML_APPLICATION: "application/xhtml+xml",
      XML_SVG_IMAGE: "image/svg+xml",
    }),
    Lr = Ar({
      HTML: "http://www.w3.org/1999/xhtml",
      isHTML: function (e) {
        return e === Lr.HTML;
      },
      SVG: "http://www.w3.org/2000/svg",
      XML: "http://www.w3.org/XML/1998/namespace",
      XMLNS: "http://www.w3.org/2000/xmlns/",
    }),
    Dr = { freeze: Ar, MIME_TYPE: Pr, NAMESPACE: Lr },
    Or = Dr.NAMESPACE;
  function Rr(e) {
    return "" !== e;
  }
  function Mr(e, t) {
    return e.hasOwnProperty(t) || (e[t] = !0), e;
  }
  function Nr(e) {
    if (!e) return [];
    e = (e = e) ? e.split(/[\t\n\f\r ]+/).filter(Rr) : [];
    return Object.keys(e.reduce(Mr, {}));
  }
  function Ur(e, t) {
    for (var i in e) t[i] = e[i];
  }
  function Br(e, t) {
    var i,
      n = e.prototype;
    n instanceof t ||
      (((i = function () {}).prototype = t.prototype),
      Ur(n, (i = new i())),
      (e.prototype = n = i)),
      n.constructor != e && (n.constructor = e);
  }
  var W = {},
    Fr = (W.ELEMENT_NODE = 1),
    jr = (W.ATTRIBUTE_NODE = 2),
    Hr = (W.TEXT_NODE = 3),
    qr = (W.CDATA_SECTION_NODE = 4),
    Vr = (W.ENTITY_REFERENCE_NODE = 5),
    Wr = ((W.ENTITY_NODE = 6), (W.PROCESSING_INSTRUCTION_NODE = 7)),
    Gr = (W.COMMENT_NODE = 8),
    zr = (W.DOCUMENT_NODE = 9),
    Xr = (W.DOCUMENT_TYPE_NODE = 10),
    Kr = (W.DOCUMENT_FRAGMENT_NODE = 11),
    x = ((W.NOTATION_NODE = 12), {}),
    Yr = {};
  (x.INDEX_SIZE_ERR = ((Yr[1] = "Index size error"), 1)),
    (x.DOMSTRING_SIZE_ERR = ((Yr[2] = "DOMString size error"), 2));
  x.HIERARCHY_REQUEST_ERR = ((Yr[3] = "Hierarchy request error"), 3);
  (x.WRONG_DOCUMENT_ERR = ((Yr[4] = "Wrong document"), 4)),
    (x.INVALID_CHARACTER_ERR = ((Yr[5] = "Invalid character"), 5)),
    (x.NO_DATA_ALLOWED_ERR = ((Yr[6] = "No data allowed"), 6)),
    (x.NO_MODIFICATION_ALLOWED_ERR = ((Yr[7] = "No modification allowed"), 7));
  x.NOT_FOUND_ERR = ((Yr[8] = "Not found"), 8);
  x.NOT_SUPPORTED_ERR = ((Yr[9] = "Not supported"), 9);
  var Qr;
  x.INUSE_ATTRIBUTE_ERR = ((Yr[10] = "Attribute in use"), 10);
  function $r(e, t) {
    var i;
    return (
      t instanceof Error
        ? (i = t)
        : ((i = this),
          Error.call(this, Yr[e]),
          (this.message = Yr[e]),
          Error.captureStackTrace && Error.captureStackTrace(this, $r)),
      (i.code = e),
      t && (this.message = this.message + ": " + t),
      i
    );
  }
  function Jr() {}
  function Zr(e, t) {
    (this._node = e), (this._refresh = t), ea(this);
  }
  function ea(e) {
    var t,
      i = e._node._inc || e._node.ownerDocument._inc;
    e._inc != i &&
      ((t = e._refresh(e._node)),
      La(e, "length", t.length),
      Ur(t, e),
      (e._inc = i));
  }
  function ta() {}
  function ia(e, t) {
    for (var i = e.length; i--; ) if (e[i] === t) return i;
  }
  function na(e, t, i, n) {
    n ? (t[ia(t, n)] = i) : (t[t.length++] = i),
      !e ||
        ((t = (i.ownerElement = e).ownerDocument) &&
          (n && ca(t, e, n),
          (e = e),
          (i = i),
          (t = t) && t._inc++,
          i.namespaceURI === Or.XMLNS &&
            (e._nsMap[i.prefix ? i.localName : ""] = i.value)));
  }
  function ra(e, t, i) {
    var n = ia(t, i);
    if (!(0 <= n)) throw $r(8, new Error(e.tagName + "@" + i));
    for (var r, a = t.length - 1; n < a; ) t[n] = t[++n];
    (t.length = a),
      !e || ((r = e.ownerDocument) && (ca(r, e, i), (i.ownerElement = null)));
  }
  function aa() {}
  function sa() {}
  function oa(e) {
    return (
      ("<" == e ? "&lt;" : ">" == e && "&gt;") ||
      ("&" == e && "&amp;") ||
      ('"' == e && "&quot;") ||
      "&#" + e.charCodeAt() + ";"
    );
  }
  function ua(e, t) {
    if (t(e)) return 1;
    if ((e = e.firstChild))
      do {
        if (ua(e, t)) return 1;
      } while ((e = e.nextSibling));
  }
  function la() {}
  function ca(e, t, i) {
    e && e._inc++,
      i.namespaceURI === Or.XMLNS &&
        delete t._nsMap[i.prefix ? i.localName : ""];
  }
  function da(e, t, i) {
    if (e && e._inc) {
      e._inc++;
      var n = t.childNodes;
      if (i) n[n.length++] = i;
      else {
        for (var r = t.firstChild, a = 0; r; ) r = (n[a++] = r).nextSibling;
        n.length = a;
      }
    }
  }
  function ha(e, t) {
    var i = t.previousSibling,
      n = t.nextSibling;
    return (
      i ? (i.nextSibling = n) : (e.firstChild = n),
      n ? (n.previousSibling = i) : (e.lastChild = i),
      da(e.ownerDocument, e),
      t
    );
  }
  function pa(e, t, i) {
    var n = t.parentNode;
    if ((n && n.removeChild(t), t.nodeType === Kr)) {
      var r = t.firstChild;
      if (null == r) return t;
      var a = t.lastChild;
    } else r = a = t;
    n = i ? i.previousSibling : e.lastChild;
    for (
      r.previousSibling = n,
        a.nextSibling = i,
        n ? (n.nextSibling = r) : (e.firstChild = r),
        null == i ? (e.lastChild = a) : (i.previousSibling = a);
      (r.parentNode = e), r !== a && (r = r.nextSibling);

    );
    return (
      da(e.ownerDocument || e, e),
      t.nodeType == Kr && (t.firstChild = t.lastChild = null),
      t
    );
  }
  function fa() {
    this._nsMap = {};
  }
  function ma() {}
  function ga() {}
  function ya() {}
  function va() {}
  function _a() {}
  function ba() {}
  function Ta() {}
  function Sa() {}
  function wa() {}
  function Ea() {}
  function ka() {}
  function Ca() {}
  function Ia(e, t) {
    var i,
      n = [],
      r = (9 == this.nodeType && this.documentElement) || this,
      a = r.prefix,
      s = r.namespaceURI;
    return (
      Pa(
        this,
        n,
        e,
        t,
        (i =
          s && null == a && null == (a = r.lookupPrefix(s))
            ? [{ namespace: s, prefix: null }]
            : i)
      ),
      n.join("")
    );
  }
  function xa(e, t, i) {
    var n = e.prefix || "",
      r = e.namespaceURI;
    if (r && ("xml" !== n || r !== Or.XML) && r !== Or.XMLNS) {
      for (var a = i.length; a--; ) {
        var s = i[a];
        if (s.prefix === n) return s.namespace !== r;
      }
      return 1;
    }
  }
  function Aa(e, t, i) {
    e.push(" ", t, '="', i.replace(/[<&"]/g, oa), '"');
  }
  function Pa(e, t, i, n, r) {
    if (((r = r || []), n)) {
      if (!(e = n(e))) return;
      if ("string" == typeof e) return void t.push(e);
    }
    switch (e.nodeType) {
      case Fr:
        var a = e.attributes,
          s = a.length,
          o = e.firstChild,
          u = e.tagName,
          l = u;
        if (
          !(i = Or.isHTML(e.namespaceURI) || i) &&
          !e.prefix &&
          e.namespaceURI
        ) {
          for (var c, d = 0; d < a.length; d++)
            if ("xmlns" === a.item(d).name) {
              c = a.item(d).value;
              break;
            }
          if (!c)
            for (var h = r.length - 1; 0 <= h; h--)
              if ("" === (p = r[h]).prefix && p.namespace === e.namespaceURI) {
                c = p.namespace;
                break;
              }
          if (c !== e.namespaceURI)
            for (var p, h = r.length - 1; 0 <= h; h--)
              if ((p = r[h]).namespace === e.namespaceURI) {
                p.prefix && (l = p.prefix + ":" + u);
                break;
              }
        }
        t.push("<", l);
        for (var f = 0; f < s; f++)
          "xmlns" == (m = a.item(f)).prefix
            ? r.push({ prefix: m.localName, namespace: m.value })
            : "xmlns" == m.nodeName &&
              r.push({ prefix: "", namespace: m.value });
        for (var m, g, y, f = 0; f < s; f++)
          xa((m = a.item(f)), 0, r) &&
            (Aa(
              t,
              (g = m.prefix || "") ? "xmlns:" + g : "xmlns",
              (y = m.namespaceURI)
            ),
            r.push({ prefix: g, namespace: y })),
            Pa(m, t, i, n, r);
        if (
          (u === l &&
            xa(e, 0, r) &&
            (Aa(
              t,
              (g = e.prefix || "") ? "xmlns:" + g : "xmlns",
              (y = e.namespaceURI)
            ),
            r.push({ prefix: g, namespace: y })),
          o || (i && !/^(?:meta|link|img|br|hr|input)$/i.test(u)))
        ) {
          if ((t.push(">"), i && /^script$/i.test(u)))
            for (; o; )
              o.data ? t.push(o.data) : Pa(o, t, i, n, r.slice()),
                (o = o.nextSibling);
          else for (; o; ) Pa(o, t, i, n, r.slice()), (o = o.nextSibling);
          t.push("</", l, ">");
        } else t.push("/>");
        return;
      case zr:
      case Kr:
        for (o = e.firstChild; o; )
          Pa(o, t, i, n, r.slice()), (o = o.nextSibling);
        return;
      case jr:
        return Aa(t, e.name, e.value), 0;
      case Hr:
        return t.push(e.data.replace(/[<&]/g, oa).replace(/]]>/g, "]]&gt;"));
      case qr:
        return t.push("<![CDATA[", e.data, "]]>");
      case Gr:
        return t.push("\x3c!--", e.data, "--\x3e");
      case Xr:
        var v = e.publicId,
          _ = e.systemId;
        return (
          t.push("<!DOCTYPE ", e.name),
          void (v
            ? (t.push(" PUBLIC ", v),
              _ && "." != _ && t.push(" ", _),
              t.push(">"))
            : _ && "." != _
            ? t.push(" SYSTEM ", _, ">")
            : ((_ = e.internalSubset) && t.push(" [", _, "]"), t.push(">")))
        );
      case Wr:
        return t.push("<?", e.target, " ", e.data, "?>");
      case Vr:
        return t.push("&", e.nodeName, ";");
      default:
        t.push("??", e.nodeName);
    }
  }
  function La(e, t, i) {
    e[t] = i;
  }
  (x.INVALID_STATE_ERR = ((Yr[11] = "Invalid state"), 11)),
    (x.SYNTAX_ERR = ((Yr[12] = "Syntax error"), 12)),
    (x.INVALID_MODIFICATION_ERR = ((Yr[13] = "Invalid modification"), 13)),
    (x.NAMESPACE_ERR = ((Yr[14] = "Invalid namespace"), 14)),
    (x.INVALID_ACCESS_ERR = ((Yr[15] = "Invalid access"), 15)),
    ($r.prototype = Error.prototype),
    Ur(x, $r),
    (Jr.prototype = {
      length: 0,
      item: function (e) {
        return this[e] || null;
      },
      toString: function (e, t) {
        for (var i = [], n = 0; n < this.length; n++) Pa(this[n], i, e, t);
        return i.join("");
      },
    }),
    (Zr.prototype.item = function (e) {
      return ea(this), this[e];
    }),
    Br(Zr, Jr),
    (ta.prototype = {
      length: 0,
      item: Jr.prototype.item,
      getNamedItem: function (e) {
        for (var t = this.length; t--; ) {
          var i = this[t];
          if (i.nodeName == e) return i;
        }
      },
      setNamedItem: function (e) {
        var t = e.ownerElement;
        if (t && t != this._ownerElement) throw new $r(10);
        t = this.getNamedItem(e.nodeName);
        return na(this._ownerElement, this, e, t), t;
      },
      setNamedItemNS: function (e) {
        var t = e.ownerElement;
        if (t && t != this._ownerElement) throw new $r(10);
        return (
          (t = this.getNamedItemNS(e.namespaceURI, e.localName)),
          na(this._ownerElement, this, e, t),
          t
        );
      },
      removeNamedItem: function (e) {
        e = this.getNamedItem(e);
        return ra(this._ownerElement, this, e), e;
      },
      removeNamedItemNS: function (e, t) {
        t = this.getNamedItemNS(e, t);
        return ra(this._ownerElement, this, t), t;
      },
      getNamedItemNS: function (e, t) {
        for (var i = this.length; i--; ) {
          var n = this[i];
          if (n.localName == t && n.namespaceURI == e) return n;
        }
        return null;
      },
    }),
    (aa.prototype = {
      hasFeature: function (e, t) {
        return !0;
      },
      createDocument: function (e, t, i) {
        var n = new la();
        return (
          (n.implementation = this),
          (n.childNodes = new Jr()),
          (n.doctype = i || null),
          i && n.appendChild(i),
          t && ((t = n.createElementNS(e, t)), n.appendChild(t)),
          n
        );
      },
      createDocumentType: function (e, t, i) {
        var n = new ba();
        return (
          (n.name = e),
          (n.nodeName = e),
          (n.publicId = t || ""),
          (n.systemId = i || ""),
          n
        );
      },
    }),
    (sa.prototype = {
      firstChild: null,
      lastChild: null,
      previousSibling: null,
      nextSibling: null,
      attributes: null,
      parentNode: null,
      childNodes: null,
      ownerDocument: null,
      nodeValue: null,
      namespaceURI: null,
      prefix: null,
      localName: null,
      insertBefore: function (e, t) {
        return pa(this, e, t);
      },
      replaceChild: function (e, t) {
        this.insertBefore(e, t), t && this.removeChild(t);
      },
      removeChild: function (e) {
        return ha(this, e);
      },
      appendChild: function (e) {
        return this.insertBefore(e, null);
      },
      hasChildNodes: function () {
        return null != this.firstChild;
      },
      cloneNode: function (e) {
        return (function e(t, i, n) {
          var r = new i.constructor();
          for (var a in i) {
            var s = i[a];
            "object" != typeof s && s != r[a] && (r[a] = s);
          }
          i.childNodes && (r.childNodes = new Jr());
          r.ownerDocument = t;
          switch (r.nodeType) {
            case Fr:
              var o = i.attributes,
                u = (r.attributes = new ta()),
                l = o.length;
              u._ownerElement = r;
              for (var c = 0; c < l; c++)
                r.setAttributeNode(e(t, o.item(c), !0));
              break;
            case jr:
              n = !0;
          }
          if (n)
            for (var d = i.firstChild; d; )
              r.appendChild(e(t, d, n)), (d = d.nextSibling);
          return r;
        })(this.ownerDocument || this, this, e);
      },
      normalize: function () {
        for (var e = this.firstChild; e; ) {
          var t = e.nextSibling;
          t && t.nodeType == Hr && e.nodeType == Hr
            ? (this.removeChild(t), e.appendData(t.data))
            : (e.normalize(), (e = t));
        }
      },
      isSupported: function (e, t) {
        return this.ownerDocument.implementation.hasFeature(e, t);
      },
      hasAttributes: function () {
        return 0 < this.attributes.length;
      },
      lookupPrefix: function (e) {
        for (var t = this; t; ) {
          var i = t._nsMap;
          if (i) for (var n in i) if (i[n] == e) return n;
          t = t.nodeType == jr ? t.ownerDocument : t.parentNode;
        }
        return null;
      },
      lookupNamespaceURI: function (e) {
        for (var t = this; t; ) {
          var i = t._nsMap;
          if (i && e in i) return i[e];
          t = t.nodeType == jr ? t.ownerDocument : t.parentNode;
        }
        return null;
      },
      isDefaultNamespace: function (e) {
        return null == this.lookupPrefix(e);
      },
    }),
    Ur(W, sa),
    Ur(W, sa.prototype),
    (la.prototype = {
      nodeName: "#document",
      nodeType: zr,
      doctype: null,
      documentElement: null,
      _inc: 1,
      insertBefore: function (e, t) {
        if (e.nodeType != Kr)
          return (
            null == this.documentElement &&
              e.nodeType == Fr &&
              (this.documentElement = e),
            pa(this, e, t),
            (e.ownerDocument = this),
            e
          );
        for (var i = e.firstChild; i; ) {
          var n = i.nextSibling;
          this.insertBefore(i, t), (i = n);
        }
        return e;
      },
      removeChild: function (e) {
        return (
          this.documentElement == e && (this.documentElement = null),
          ha(this, e)
        );
      },
      importNode: function (e, t) {
        return (function e(t, i, n) {
          var r;
          switch (i.nodeType) {
            case Fr:
              (r = i.cloneNode(!1)).ownerDocument = t;
            case Kr:
              break;
            case jr:
              n = !0;
          }
          r = r || i.cloneNode(!1);
          r.ownerDocument = t;
          r.parentNode = null;
          if (n)
            for (var a = i.firstChild; a; )
              r.appendChild(e(t, a, n)), (a = a.nextSibling);
          return r;
        })(this, e, t);
      },
      getElementById: function (t) {
        var i = null;
        return (
          ua(this.documentElement, function (e) {
            if (e.nodeType == Fr && e.getAttribute("id") == t)
              return (i = e), !0;
          }),
          i
        );
      },
      getElementsByClassName: function (s) {
        var o = Nr(s);
        return new Zr(this, function (r) {
          var a = [];
          return (
            0 < o.length &&
              ua(r.documentElement, function (e) {
                var t, i, n;
                e === r ||
                  e.nodeType !== Fr ||
                  ((t = e.getAttribute("class")) &&
                    ((i = s === t) ||
                      ((t = Nr(t)),
                      (i = o.every(
                        ((n = t),
                        function (e) {
                          return n && -1 !== n.indexOf(e);
                        })
                      ))),
                    i && a.push(e)));
              }),
            a
          );
        });
      },
      createElement: function (e) {
        var t = new fa();
        return (
          (t.ownerDocument = this),
          (t.nodeName = e),
          (t.tagName = e),
          (t.localName = e),
          (t.childNodes = new Jr()),
          ((t.attributes = new ta())._ownerElement = t)
        );
      },
      createDocumentFragment: function () {
        var e = new Ea();
        return (e.ownerDocument = this), (e.childNodes = new Jr()), e;
      },
      createTextNode: function (e) {
        var t = new ya();
        return (t.ownerDocument = this), t.appendData(e), t;
      },
      createComment: function (e) {
        var t = new va();
        return (t.ownerDocument = this), t.appendData(e), t;
      },
      createCDATASection: function (e) {
        var t = new _a();
        return (t.ownerDocument = this), t.appendData(e), t;
      },
      createProcessingInstruction: function (e, t) {
        var i = new ka();
        return (
          (i.ownerDocument = this),
          (i.tagName = i.target = e),
          (i.nodeValue = i.data = t),
          i
        );
      },
      createAttribute: function (e) {
        var t = new ma();
        return (
          (t.ownerDocument = this),
          (t.name = e),
          (t.nodeName = e),
          (t.localName = e),
          (t.specified = !0),
          t
        );
      },
      createEntityReference: function (e) {
        var t = new wa();
        return (t.ownerDocument = this), (t.nodeName = e), t;
      },
      createElementNS: function (e, t) {
        var i = new fa(),
          n = t.split(":"),
          r = (i.attributes = new ta());
        return (
          (i.childNodes = new Jr()),
          (i.ownerDocument = this),
          (i.nodeName = t),
          (i.tagName = t),
          (i.namespaceURI = e),
          2 == n.length
            ? ((i.prefix = n[0]), (i.localName = n[1]))
            : (i.localName = t),
          (r._ownerElement = i)
        );
      },
      createAttributeNS: function (e, t) {
        var i = new ma(),
          n = t.split(":");
        return (
          (i.ownerDocument = this),
          (i.nodeName = t),
          (i.name = t),
          (i.namespaceURI = e),
          (i.specified = !0),
          2 == n.length
            ? ((i.prefix = n[0]), (i.localName = n[1]))
            : (i.localName = t),
          i
        );
      },
    }),
    Br(la, sa),
    (la.prototype.getElementsByTagName = (fa.prototype = {
      nodeType: Fr,
      hasAttribute: function (e) {
        return null != this.getAttributeNode(e);
      },
      getAttribute: function (e) {
        e = this.getAttributeNode(e);
        return (e && e.value) || "";
      },
      getAttributeNode: function (e) {
        return this.attributes.getNamedItem(e);
      },
      setAttribute: function (e, t) {
        e = this.ownerDocument.createAttribute(e);
        (e.value = e.nodeValue = "" + t), this.setAttributeNode(e);
      },
      removeAttribute: function (e) {
        e = this.getAttributeNode(e);
        e && this.removeAttributeNode(e);
      },
      appendChild: function (e) {
        return e.nodeType === Kr
          ? this.insertBefore(e, null)
          : (function (e, t) {
              var i = t.parentNode;
              i && ((n = e.lastChild), i.removeChild(t), (n = e.lastChild));
              var n = e.lastChild;
              return (
                (t.parentNode = e),
                (t.previousSibling = n),
                (t.nextSibling = null),
                n ? (n.nextSibling = t) : (e.firstChild = t),
                (e.lastChild = t),
                da(e.ownerDocument, e, t),
                t
              );
            })(this, e);
      },
      setAttributeNode: function (e) {
        return this.attributes.setNamedItem(e);
      },
      setAttributeNodeNS: function (e) {
        return this.attributes.setNamedItemNS(e);
      },
      removeAttributeNode: function (e) {
        return this.attributes.removeNamedItem(e.nodeName);
      },
      removeAttributeNS: function (e, t) {
        t = this.getAttributeNodeNS(e, t);
        t && this.removeAttributeNode(t);
      },
      hasAttributeNS: function (e, t) {
        return null != this.getAttributeNodeNS(e, t);
      },
      getAttributeNS: function (e, t) {
        t = this.getAttributeNodeNS(e, t);
        return (t && t.value) || "";
      },
      setAttributeNS: function (e, t, i) {
        t = this.ownerDocument.createAttributeNS(e, t);
        (t.value = t.nodeValue = "" + i), this.setAttributeNode(t);
      },
      getAttributeNodeNS: function (e, t) {
        return this.attributes.getNamedItemNS(e, t);
      },
      getElementsByTagName: function (n) {
        return new Zr(this, function (t) {
          var i = [];
          return (
            ua(t, function (e) {
              e === t ||
                e.nodeType != Fr ||
                ("*" !== n && e.tagName != n) ||
                i.push(e);
            }),
            i
          );
        });
      },
      getElementsByTagNameNS: function (n, r) {
        return new Zr(this, function (t) {
          var i = [];
          return (
            ua(t, function (e) {
              e === t ||
                e.nodeType !== Fr ||
                ("*" !== n && e.namespaceURI !== n) ||
                ("*" !== r && e.localName != r) ||
                i.push(e);
            }),
            i
          );
        });
      },
    }).getElementsByTagName),
    (la.prototype.getElementsByTagNameNS = fa.prototype.getElementsByTagNameNS),
    Br(fa, sa),
    (ma.prototype.nodeType = jr),
    Br(ma, sa),
    (ga.prototype = {
      data: "",
      substringData: function (e, t) {
        return this.data.substring(e, e + t);
      },
      appendData: function (e) {
        (e = this.data + e),
          (this.nodeValue = this.data = e),
          (this.length = e.length);
      },
      insertData: function (e, t) {
        this.replaceData(e, 0, t);
      },
      appendChild: function (e) {
        throw new Error(Yr[3]);
      },
      deleteData: function (e, t) {
        this.replaceData(e, t, "");
      },
      replaceData: function (e, t, i) {
        var n = this.data.substring(0, e),
          t = this.data.substring(e + t);
        (this.nodeValue = this.data = i = n + i + t), (this.length = i.length);
      },
    }),
    Br(ga, sa),
    (ya.prototype = {
      nodeName: "#text",
      nodeType: Hr,
      splitText: function (e) {
        var t = (i = this.data).substring(e),
          i = i.substring(0, e);
        (this.data = this.nodeValue = i), (this.length = i.length);
        t = this.ownerDocument.createTextNode(t);
        return (
          this.parentNode && this.parentNode.insertBefore(t, this.nextSibling),
          t
        );
      },
    }),
    Br(ya, ga),
    (va.prototype = { nodeName: "#comment", nodeType: Gr }),
    Br(va, ga),
    (_a.prototype = { nodeName: "#cdata-section", nodeType: qr }),
    Br(_a, ga),
    (ba.prototype.nodeType = Xr),
    Br(ba, sa),
    (Ta.prototype.nodeType = 12),
    Br(Ta, sa),
    (Sa.prototype.nodeType = 6),
    Br(Sa, sa),
    (wa.prototype.nodeType = Vr),
    Br(wa, sa),
    (Ea.prototype.nodeName = "#document-fragment"),
    (Ea.prototype.nodeType = Kr),
    Br(Ea, sa),
    (ka.prototype.nodeType = Wr),
    Br(ka, sa),
    (Ca.prototype.serializeToString = function (e, t, i) {
      return Ia.call(e, t, i);
    }),
    (sa.prototype.toString = Ia);
  try {
    Object.defineProperty &&
      ((Qr = function e(t) {
        switch (t.nodeType) {
          case Fr:
          case Kr:
            var i = [];
            for (t = t.firstChild; t; )
              7 !== t.nodeType && 8 !== t.nodeType && i.push(e(t)),
                (t = t.nextSibling);
            return i.join("");
          default:
            return t.nodeValue;
        }
      }),
      Object.defineProperty(Zr.prototype, "length", {
        get: function () {
          return ea(this), this.$$length;
        },
      }),
      Object.defineProperty(sa.prototype, "textContent", {
        get: function () {
          return Qr(this);
        },
        set: function (e) {
          switch (this.nodeType) {
            case Fr:
            case Kr:
              for (; this.firstChild; ) this.removeChild(this.firstChild);
              (e || String(e)) &&
                this.appendChild(this.ownerDocument.createTextNode(e));
              break;
            default:
              (this.data = e), (this.value = e), (this.nodeValue = e);
          }
        },
      }),
      (La = function (e, t, i) {
        e["$$" + t] = i;
      }));
  } catch (e) {}
  var U = {
      DocumentType: ba,
      DOMException: $r,
      DOMImplementation: aa,
      Element: fa,
      Node: sa,
      NodeList: Jr,
      XMLSerializer: Ca,
    },
    Da = m(function (e, t) {
      var i = Dr.freeze;
      (t.XML_ENTITIES = i({
        amp: "&",
        apos: "'",
        gt: ">",
        lt: "<",
        quot: '"',
      })),
        (t.HTML_ENTITIES = i({
          lt: "<",
          gt: ">",
          amp: "&",
          quot: '"',
          apos: "'",
          Agrave: "À",
          Aacute: "Á",
          Acirc: "Â",
          Atilde: "Ã",
          Auml: "Ä",
          Aring: "Å",
          AElig: "Æ",
          Ccedil: "Ç",
          Egrave: "È",
          Eacute: "É",
          Ecirc: "Ê",
          Euml: "Ë",
          Igrave: "Ì",
          Iacute: "Í",
          Icirc: "Î",
          Iuml: "Ï",
          ETH: "Ð",
          Ntilde: "Ñ",
          Ograve: "Ò",
          Oacute: "Ó",
          Ocirc: "Ô",
          Otilde: "Õ",
          Ouml: "Ö",
          Oslash: "Ø",
          Ugrave: "Ù",
          Uacute: "Ú",
          Ucirc: "Û",
          Uuml: "Ü",
          Yacute: "Ý",
          THORN: "Þ",
          szlig: "ß",
          agrave: "à",
          aacute: "á",
          acirc: "â",
          atilde: "ã",
          auml: "ä",
          aring: "å",
          aelig: "æ",
          ccedil: "ç",
          egrave: "è",
          eacute: "é",
          ecirc: "ê",
          euml: "ë",
          igrave: "ì",
          iacute: "í",
          icirc: "î",
          iuml: "ï",
          eth: "ð",
          ntilde: "ñ",
          ograve: "ò",
          oacute: "ó",
          ocirc: "ô",
          otilde: "õ",
          ouml: "ö",
          oslash: "ø",
          ugrave: "ù",
          uacute: "ú",
          ucirc: "û",
          uuml: "ü",
          yacute: "ý",
          thorn: "þ",
          yuml: "ÿ",
          nbsp: " ",
          iexcl: "¡",
          cent: "¢",
          pound: "£",
          curren: "¤",
          yen: "¥",
          brvbar: "¦",
          sect: "§",
          uml: "¨",
          copy: "©",
          ordf: "ª",
          laquo: "«",
          not: "¬",
          shy: "­­",
          reg: "®",
          macr: "¯",
          deg: "°",
          plusmn: "±",
          sup2: "²",
          sup3: "³",
          acute: "´",
          micro: "µ",
          para: "¶",
          middot: "·",
          cedil: "¸",
          sup1: "¹",
          ordm: "º",
          raquo: "»",
          frac14: "¼",
          frac12: "½",
          frac34: "¾",
          iquest: "¿",
          times: "×",
          divide: "÷",
          forall: "∀",
          part: "∂",
          exist: "∃",
          empty: "∅",
          nabla: "∇",
          isin: "∈",
          notin: "∉",
          ni: "∋",
          prod: "∏",
          sum: "∑",
          minus: "−",
          lowast: "∗",
          radic: "√",
          prop: "∝",
          infin: "∞",
          ang: "∠",
          and: "∧",
          or: "∨",
          cap: "∩",
          cup: "∪",
          int: "∫",
          there4: "∴",
          sim: "∼",
          cong: "≅",
          asymp: "≈",
          ne: "≠",
          equiv: "≡",
          le: "≤",
          ge: "≥",
          sub: "⊂",
          sup: "⊃",
          nsub: "⊄",
          sube: "⊆",
          supe: "⊇",
          oplus: "⊕",
          otimes: "⊗",
          perp: "⊥",
          sdot: "⋅",
          Alpha: "Α",
          Beta: "Β",
          Gamma: "Γ",
          Delta: "Δ",
          Epsilon: "Ε",
          Zeta: "Ζ",
          Eta: "Η",
          Theta: "Θ",
          Iota: "Ι",
          Kappa: "Κ",
          Lambda: "Λ",
          Mu: "Μ",
          Nu: "Ν",
          Xi: "Ξ",
          Omicron: "Ο",
          Pi: "Π",
          Rho: "Ρ",
          Sigma: "Σ",
          Tau: "Τ",
          Upsilon: "Υ",
          Phi: "Φ",
          Chi: "Χ",
          Psi: "Ψ",
          Omega: "Ω",
          alpha: "α",
          beta: "β",
          gamma: "γ",
          delta: "δ",
          epsilon: "ε",
          zeta: "ζ",
          eta: "η",
          theta: "θ",
          iota: "ι",
          kappa: "κ",
          lambda: "λ",
          mu: "μ",
          nu: "ν",
          xi: "ξ",
          omicron: "ο",
          pi: "π",
          rho: "ρ",
          sigmaf: "ς",
          sigma: "σ",
          tau: "τ",
          upsilon: "υ",
          phi: "φ",
          chi: "χ",
          psi: "ψ",
          omega: "ω",
          thetasym: "ϑ",
          upsih: "ϒ",
          piv: "ϖ",
          OElig: "Œ",
          oelig: "œ",
          Scaron: "Š",
          scaron: "š",
          Yuml: "Ÿ",
          fnof: "ƒ",
          circ: "ˆ",
          tilde: "˜",
          ensp: " ",
          emsp: " ",
          thinsp: " ",
          zwnj: "‌",
          zwj: "‍",
          lrm: "‎",
          rlm: "‏",
          ndash: "–",
          mdash: "—",
          lsquo: "‘",
          rsquo: "’",
          sbquo: "‚",
          ldquo: "“",
          rdquo: "”",
          bdquo: "„",
          dagger: "†",
          Dagger: "‡",
          bull: "•",
          hellip: "…",
          permil: "‰",
          prime: "′",
          Prime: "″",
          lsaquo: "‹",
          rsaquo: "›",
          oline: "‾",
          euro: "€",
          trade: "™",
          larr: "←",
          uarr: "↑",
          rarr: "→",
          darr: "↓",
          harr: "↔",
          crarr: "↵",
          lceil: "⌈",
          rceil: "⌉",
          lfloor: "⌊",
          rfloor: "⌋",
          loz: "◊",
          spades: "♠",
          clubs: "♣",
          hearts: "♥",
          diams: "♦",
        })),
        (t.entityMap = t.HTML_ENTITIES);
    });
  Da.XML_ENTITIES, Da.HTML_ENTITIES, Da.entityMap;
  var Oa = Dr.NAMESPACE,
    zt =
      /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,
    ar = new RegExp(
      "[\\-\\.0-9" +
        zt.source.slice(1, -1) +
        "\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"
    ),
    Ra = new RegExp(
      "^" + zt.source + ar.source + "*(?::" + zt.source + ar.source + "*)?$"
    ),
    Ma = 0,
    Na = 1,
    Ua = 2,
    Ba = 3,
    Fa = 4,
    ja = 5,
    Ha = 6,
    qa = 7;
  function Va(e, t) {
    (this.message = e),
      (this.locator = t),
      Error.captureStackTrace && Error.captureStackTrace(this, Va);
  }
  function Wa() {}
  function Ga(e, t) {
    return (t.lineNumber = e.lineNumber), (t.columnNumber = e.columnNumber), t;
  }
  function za(e, t, i) {
    for (var n = e.tagName, r = null, a = e.length; a--; ) {
      var s = e[a],
        o = s.qName,
        u = s.value,
        o =
          0 < (c = o.indexOf(":"))
            ? ((l = s.prefix = o.slice(0, c)),
              (d = o.slice(c + 1)),
              "xmlns" === l && d)
            : ((l = null), "xmlns" === (d = o) && "");
      (s.localName = d),
        !1 !== o &&
          (null == r && ((r = {}), Xa(i, (i = {}))),
          (i[o] = r[o] = u),
          (s.uri = Oa.XMLNS),
          t.startPrefixMapping(o, u));
    }
    for (var l, a = e.length; a--; )
      (l = (s = e[a]).prefix) &&
        ("xml" === l && (s.uri = Oa.XML),
        "xmlns" !== l && (s.uri = i[l || ""]));
    var c,
      d =
        0 < (c = n.indexOf(":"))
          ? ((l = e.prefix = n.slice(0, c)), (e.localName = n.slice(c + 1)))
          : ((l = null), (e.localName = n)),
      h = (e.uri = i[l || ""]);
    if ((t.startElement(h, d, n, e), !e.closed))
      return (e.currentNSMap = i), (e.localNSMap = r), 1;
    if ((t.endElement(h, d, n), r)) for (l in r) t.endPrefixMapping(l);
  }
  function Xa(e, t) {
    for (var i in e) t[i] = e[i];
  }
  function Ka() {
    this.attributeNames = {};
  }
  ((Va.prototype = new Error()).name = Va.name),
    (Wa.prototype = {
      parse: function (e, t, i) {
        var n = this.domBuilder;
        n.startDocument(),
          Xa(t, (t = {})),
          (function (i, e, n, r, a) {
            function s(e) {
              var t = e.slice(1, -1);
              return t in n
                ? n[t]
                : "#" === t.charAt(0)
                ? 65535 < (t = parseInt(t.substr(1).replace("x", "0x")))
                  ? ((t -= 65536),
                    String.fromCharCode(55296 + (t >> 10), 56320 + (1023 & t)))
                  : String.fromCharCode(t)
                : (a.error("entity not found:" + e), e);
            }
            function t(e) {
              var t;
              f < e &&
                ((t = i.substring(f, e).replace(/&#?\w+;/g, s)),
                d && o(f),
                r.characters(t, 0, e - f),
                (f = e));
            }
            function o(e, t) {
              for (; l <= e && (t = c.exec(i)); )
                (u = t.index), (l = u + t[0].length), d.lineNumber++;
              d.columnNumber = e - u + 1;
            }
            var u = 0,
              l = 0,
              c = /.*(?:\r\n?|\n)|.*$/g,
              d = r.locator,
              h = [{ currentNSMap: e }],
              p = {},
              f = 0;
            for (;;) {
              try {
                var m,
                  g,
                  y = i.indexOf("<", f);
                if (y < 0)
                  return (
                    i.substr(f).match(/^\s*$/) ||
                    ((m = r.doc),
                    (g = m.createTextNode(i.substr(f))),
                    m.appendChild(g),
                    (r.currentElement = g))
                  );
                switch ((f < y && t(y), i.charAt(y + 1))) {
                  case "/":
                    var v = i.indexOf(">", y + 3),
                      _ = i.substring(y + 2, v).replace(/[ \t\n\r]+$/g, ""),
                      b = h.pop();
                    v < 0
                      ? ((_ = i.substring(y + 2).replace(/[\s<].*/, "")),
                        a.error(
                          "end tag name: " + _ + " is not complete:" + b.tagName
                        ),
                        (v = y + 1 + _.length))
                      : _.match(/\s</) &&
                        ((_ = _.replace(/[\s<].*/, "")),
                        a.error("end tag name: " + _ + " maybe not complete"),
                        (v = y + 1 + _.length));
                    var T = b.localNSMap,
                      S = b.tagName == _;
                    if (
                      S ||
                      (b.tagName && b.tagName.toLowerCase() == _.toLowerCase())
                    ) {
                      if ((r.endElement(b.uri, b.localName, _), T))
                        for (var w in T) r.endPrefixMapping(w);
                      S ||
                        a.fatalError(
                          "end tag name: " +
                            _ +
                            " is not match the current start tagName:" +
                            b.tagName
                        );
                    } else h.push(b);
                    v++;
                    break;
                  case "?":
                    d && o(y),
                      (v = (function (e, t, i) {
                        var n = e.indexOf("?>", t);
                        if (n) {
                          t = e
                            .substring(t, n)
                            .match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
                          return t
                            ? (t[0].length,
                              i.processingInstruction(t[1], t[2]),
                              n + 2)
                            : -1;
                        }
                        return -1;
                      })(i, y, r));
                    break;
                  case "!":
                    d && o(y),
                      (v = (function (e, t, i, n) {
                        {
                          if ("-" === e.charAt(t + 2)) {
                            if ("-" !== e.charAt(t + 3)) return -1;
                            var r = e.indexOf("--\x3e", t + 4);
                            return t < r
                              ? (i.comment(e, t + 4, r - t - 4), r + 3)
                              : (n.error("Unclosed comment"), -1);
                          }
                          if ("CDATA[" == e.substr(t + 3, 6)) {
                            r = e.indexOf("]]>", t + 9);
                            return (
                              i.startCDATA(),
                              i.characters(e, t + 9, r - t - 9),
                              i.endCDATA(),
                              r + 3
                            );
                          }
                          var a = (function (e, t) {
                              var i,
                                n = [],
                                r =
                                  /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
                              (r.lastIndex = t), r.exec(e);
                              for (; (i = r.exec(e)); )
                                if ((n.push(i), i[1])) return n;
                            })(e, t),
                            n = a.length;
                          if (1 < n && /!doctype/i.test(a[0][0])) {
                            (r = a[1][0]), (e = !1), (t = !1);
                            3 < n &&
                              (/^public$/i.test(a[2][0])
                                ? ((e = a[3][0]), (t = 4 < n && a[4][0]))
                                : /^system$/i.test(a[2][0]) && (t = a[3][0]));
                            n = a[n - 1];
                            return (
                              i.startDTD(r, e, t),
                              i.endDTD(),
                              n.index + n[0].length
                            );
                          }
                        }
                        return -1;
                      })(i, y, r, a));
                    break;
                  default:
                    d && o(y);
                    var E = new Ka(),
                      k = h[h.length - 1].currentNSMap,
                      v = (function (e, t, n, i, r, a) {
                        function s(e, t, i) {
                          n.attributeNames.hasOwnProperty(e) &&
                            a.fatalError("Attribute " + e + " redefined"),
                            n.addValue(e, t, i);
                        }
                        var o,
                          u = ++t,
                          l = Ma;
                        for (;;) {
                          var c = e.charAt(u);
                          switch (c) {
                            case "=":
                              if (l === Na) (o = e.slice(t, u)), (l = Ba);
                              else {
                                if (l !== Ua)
                                  throw new Error(
                                    "attribute equal must after attrName"
                                  );
                                l = Ba;
                              }
                              break;
                            case "'":
                            case '"':
                              if (l === Ba || l === Na) {
                                if (
                                  (l === Na &&
                                    (a.warning(
                                      'attribute value must after "="'
                                    ),
                                    (o = e.slice(t, u))),
                                  (t = u + 1),
                                  !(0 < (u = e.indexOf(c, t))))
                                )
                                  throw new Error(
                                    "attribute value no end '" + c + "' match"
                                  );
                                (d = e.slice(t, u).replace(/&#?\w+;/g, r)),
                                  s(o, d, t - 1),
                                  (l = ja);
                              } else {
                                if (l != Fa)
                                  throw new Error(
                                    'attribute value must after "="'
                                  );
                                (d = e.slice(t, u).replace(/&#?\w+;/g, r)),
                                  s(o, d, t),
                                  a.warning(
                                    'attribute "' +
                                      o +
                                      '" missed start quot(' +
                                      c +
                                      ")!!"
                                  ),
                                  (t = u + 1),
                                  (l = ja);
                              }
                              break;
                            case "/":
                              switch (l) {
                                case Ma:
                                  n.setTagName(e.slice(t, u));
                                case ja:
                                case Ha:
                                case qa:
                                  (l = qa), (n.closed = !0);
                                case Fa:
                                case Na:
                                case Ua:
                                  break;
                                default:
                                  throw new Error(
                                    "attribute invalid close char('/')"
                                  );
                              }
                              break;
                            case "":
                              return (
                                a.error("unexpected end of input"),
                                l == Ma && n.setTagName(e.slice(t, u)),
                                u
                              );
                            case ">":
                              switch (l) {
                                case Ma:
                                  n.setTagName(e.slice(t, u));
                                case ja:
                                case Ha:
                                case qa:
                                  break;
                                case Fa:
                                case Na:
                                  "/" === (d = e.slice(t, u)).slice(-1) &&
                                    ((n.closed = !0), (d = d.slice(0, -1)));
                                case Ua:
                                  l === Ua && (d = o),
                                    l == Fa
                                      ? (a.warning(
                                          'attribute "' +
                                            d +
                                            '" missed quot(")!'
                                        ),
                                        s(o, d.replace(/&#?\w+;/g, r), t))
                                      : ((Oa.isHTML(i[""]) &&
                                          d.match(
                                            /^(?:disabled|checked|selected)$/i
                                          )) ||
                                          a.warning(
                                            'attribute "' +
                                              d +
                                              '" missed value!! "' +
                                              d +
                                              '" instead!!'
                                          ),
                                        s(d, d, t));
                                  break;
                                case Ba:
                                  throw new Error("attribute value missed!!");
                              }
                              return u;
                            case "":
                              c = " ";
                            default:
                              if (c <= " ")
                                switch (l) {
                                  case Ma:
                                    n.setTagName(e.slice(t, u)), (l = Ha);
                                    break;
                                  case Na:
                                    (o = e.slice(t, u)), (l = Ua);
                                    break;
                                  case Fa:
                                    var d = e
                                      .slice(t, u)
                                      .replace(/&#?\w+;/g, r);
                                    a.warning(
                                      'attribute "' + d + '" missed quot(")!!'
                                    ),
                                      s(o, d, t);
                                  case ja:
                                    l = Ha;
                                }
                              else
                                switch (l) {
                                  case Ua:
                                    n.tagName,
                                      (Oa.isHTML(i[""]) &&
                                        o.match(
                                          /^(?:disabled|checked|selected)$/i
                                        )) ||
                                        a.warning(
                                          'attribute "' +
                                            o +
                                            '" missed value!! "' +
                                            o +
                                            '" instead2!!'
                                        ),
                                      s(o, o, t),
                                      (t = u),
                                      (l = Na);
                                    break;
                                  case ja:
                                    a.warning(
                                      'attribute space is required"' + o + '"!!'
                                    );
                                  case Ha:
                                    (l = Na), (t = u);
                                    break;
                                  case Ba:
                                    (l = Fa), (t = u);
                                    break;
                                  case qa:
                                    throw new Error(
                                      "elements closed character '/' and '>' must be connected to"
                                    );
                                }
                          }
                          u++;
                        }
                      })(i, y, E, k, s, a),
                      C = E.length;
                    if (
                      (!E.closed &&
                        (function (e, t, i, n) {
                          var r = n[i];
                          null == r &&
                            ((r = e.lastIndexOf("</" + i + ">")) < t &&
                              (r = e.lastIndexOf("</" + i)),
                            (n[i] = r));
                          return r < t;
                        })(i, v, E.tagName, p) &&
                        ((E.closed = !0),
                        n.nbsp || a.warning("unclosed xml attribute")),
                      d && C)
                    ) {
                      for (var I = Ga(d, {}), x = 0; x < C; x++) {
                        var A = E[x];
                        o(A.offset), (A.locator = Ga(d, {}));
                      }
                      (r.locator = I),
                        za(E, r, k) && h.push(E),
                        (r.locator = d);
                    } else za(E, r, k) && h.push(E);
                    Oa.isHTML(E.uri) && !E.closed
                      ? (v = (function (e, t, i, n, r) {
                          if (/^(?:script|textarea)$/i.test(i)) {
                            var a = e.indexOf("</" + i + ">", t),
                              e = e.substring(t + 1, a);
                            if (/[&<]/.test(e))
                              return (
                                /^script$/i.test(i) ||
                                  (e = e.replace(/&#?\w+;/g, n)),
                                r.characters(e, 0, e.length),
                                a
                              );
                          }
                          return t + 1;
                        })(i, v, E.tagName, s, r))
                      : v++;
                }
              } catch (e) {
                if (e instanceof Va) throw e;
                a.error("element parse error: " + e), (v = -1);
              }
              f < v ? (f = v) : t(Math.max(y, f) + 1);
            }
          })(e, t, i, n, this.errorHandler),
          n.endDocument();
      },
    }),
    (Ka.prototype = {
      setTagName: function (e) {
        if (!Ra.test(e)) throw new Error("invalid tagName:" + e);
        this.tagName = e;
      },
      addValue: function (e, t, i) {
        if (!Ra.test(e)) throw new Error("invalid attribute:" + e);
        (this.attributeNames[e] = this.length),
          (this[this.length++] = { qName: e, value: t, offset: i });
      },
      length: 0,
      getLocalName: function (e) {
        return this[e].localName;
      },
      getLocator: function (e) {
        return this[e].locator;
      },
      getQName: function (e) {
        return this[e].qName;
      },
      getURI: function (e) {
        return this[e].uri;
      },
      getValue: function (e) {
        return this[e].value;
      },
    });
  var x = { XMLReader: Wa, ParseError: Va },
    Ya = U.DOMImplementation,
    Qa = Dr.NAMESPACE,
    $a = x.ParseError,
    Ja = x.XMLReader;
  function Za(e) {
    this.options = e || { locator: {} };
  }
  function es() {
    this.cdata = !1;
  }
  function ts(e, t) {
    (t.lineNumber = e.lineNumber), (t.columnNumber = e.columnNumber);
  }
  function is(e) {
    if (e)
      return (
        "\n@" +
        (e.systemId || "") +
        "#[line:" +
        e.lineNumber +
        ",col:" +
        e.columnNumber +
        "]"
      );
  }
  function ns(e, t, i) {
    return "string" == typeof e
      ? e.substr(t, i)
      : e.length >= t + i || t
      ? new java.lang.String(e, t, i) + ""
      : e;
  }
  function rs(e, t) {
    (e.currentElement || e.doc).appendChild(t);
  }
  (Za.prototype.parseFromString = function (e, t) {
    var i = this.options,
      n = new Ja(),
      r = i.domBuilder || new es(),
      a = i.errorHandler,
      s = i.locator,
      o = i.xmlns || {},
      u = /\/x?html?$/.test(t),
      t = u ? Da.HTML_ENTITIES : Da.XML_ENTITIES;
    return (
      s && r.setDocumentLocator(s),
      (n.errorHandler = (function (n, e, r) {
        if (!n) {
          if (e instanceof es) return e;
          n = e;
        }
        var a = {},
          s = n instanceof Function;
        function t(t) {
          var i = n[t];
          !i &&
            s &&
            (i =
              2 == n.length
                ? function (e) {
                    n(t, e);
                  }
                : n),
            (a[t] = i
              ? function (e) {
                  i("[xmldom " + t + "]\t" + e + is(r));
                }
              : function () {});
        }
        return (r = r || {}), t("warning"), t("error"), t("fatalError"), a;
      })(a, r, s)),
      (n.domBuilder = i.domBuilder || r),
      u && (o[""] = Qa.HTML),
      (o.xml = o.xml || Qa.XML),
      e && "string" == typeof e
        ? n.parse(e, o, t)
        : n.errorHandler.error("invalid doc source"),
      r.doc
    );
  }),
    (es.prototype = {
      startDocument: function () {
        (this.doc = new Ya().createDocument(null, null, null)),
          this.locator && (this.doc.documentURI = this.locator.systemId);
      },
      startElement: function (e, t, i, n) {
        var r = this.doc,
          a = r.createElementNS(e, i || t),
          s = n.length;
        rs(this, a),
          (this.currentElement = a),
          this.locator && ts(this.locator, a);
        for (var o = 0; o < s; o++) {
          var e = n.getURI(o),
            u = n.getValue(o),
            i = n.getQName(o),
            l = r.createAttributeNS(e, i);
          this.locator && ts(n.getLocator(o), l),
            (l.value = l.nodeValue = u),
            a.setAttributeNode(l);
        }
      },
      endElement: function (e, t, i) {
        var n = this.currentElement;
        n.tagName, (this.currentElement = n.parentNode);
      },
      startPrefixMapping: function (e, t) {},
      endPrefixMapping: function (e) {},
      processingInstruction: function (e, t) {
        t = this.doc.createProcessingInstruction(e, t);
        this.locator && ts(this.locator, t), rs(this, t);
      },
      ignorableWhitespace: function (e, t, i) {},
      characters: function (e, t, i) {
        var n;
        (e = ns.apply(this, arguments)) &&
          ((n = this.cdata
            ? this.doc.createCDATASection(e)
            : this.doc.createTextNode(e)),
          this.currentElement
            ? this.currentElement.appendChild(n)
            : /^\s*$/.test(e) && this.doc.appendChild(n),
          this.locator && ts(this.locator, n));
      },
      skippedEntity: function (e) {},
      endDocument: function () {
        this.doc.normalize();
      },
      setDocumentLocator: function (e) {
        (this.locator = e) && (e.lineNumber = 0);
      },
      comment: function (e, t, i) {
        e = ns.apply(this, arguments);
        e = this.doc.createComment(e);
        this.locator && ts(this.locator, e), rs(this, e);
      },
      startCDATA: function () {
        this.cdata = !0;
      },
      endCDATA: function () {
        this.cdata = !1;
      },
      startDTD: function (e, t, i) {
        var n = this.doc.implementation;
        n &&
          n.createDocumentType &&
          ((i = n.createDocumentType(e, t, i)),
          this.locator && ts(this.locator, i),
          rs(this, i),
          (this.doc.doctype = i));
      },
      warning: function (e) {},
      error: function (e) {},
      fatalError: function (e) {
        throw new $a(e, this.locator);
      },
    }),
    "endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(
      /\w+/g,
      function (e) {
        es.prototype[e] = function () {
          return null;
        };
      }
    );
  function as(e) {
    return !!e && "object" == typeof e;
  }
  function ss() {
    for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
      t[i] = arguments[i];
    return t.reduce(function (t, i) {
      return (
        "object" != typeof i ||
          Object.keys(i).forEach(function (e) {
            Array.isArray(t[e]) && Array.isArray(i[e])
              ? (t[e] = t[e].concat(i[e]))
              : as(t[e]) && as(i[e])
              ? (t[e] = ss(t[e], i[e]))
              : (t[e] = i[e]);
          }),
        t
      );
    }, {});
  }
  function os(t) {
    return Object.keys(t).map(function (e) {
      return t[e];
    });
  }
  function us(e) {
    return e.reduce(function (e, t) {
      return e.concat(t);
    }, []);
  }
  function ls(e) {
    if (!e.length) return [];
    for (var t = [], i = 0; i < e.length; i++) t.push(e[i]);
    return t;
  }
  function cs(e, t) {
    for (var i = 0; i < e.length; i++) if (t(e[i])) return i;
    return -1;
  }
  function ds(e) {
    var t = e.baseUrl,
      i = void 0 === (n = e.source) ? "" : n,
      n = void 0 === (n = e.range) ? "" : n,
      e = void 0 === (e = e.indexRange) ? "" : e,
      i = { uri: i, resolvedUri: ir((void 0 === t ? "" : t) || "", i) };
    return (
      (n || e) &&
        ((n = (n || e).split("-")),
        (e = window.BigInt ? window.BigInt(n[0]) : parseInt(n[0], 10)),
        (n = window.BigInt ? window.BigInt(n[1]) : parseInt(n[1], 10)),
        e < Number.MAX_SAFE_INTEGER && "bigint" == typeof e && (e = Number(e)),
        "bigint" ==
          typeof (n =
            "bigint" ==
              typeof (n =
                n < Number.MAX_SAFE_INTEGER && "bigint" == typeof n
                  ? Number(n)
                  : n) || "bigint" == typeof e
              ? window.BigInt(n) - window.BigInt(e) + window.BigInt(1)
              : n - e + 1) &&
          n < Number.MAX_SAFE_INTEGER &&
          (n = Number(n)),
        (i.byterange = { length: n, offset: e })),
      i
    );
  }
  function hs(e) {
    return (
      e && "number" != typeof e && (e = parseInt(e, 10)), isNaN(e) ? null : e
    );
  }
  function ps(e) {
    var a,
      t = e.type,
      i = e.duration,
      n = e.timescale,
      r = void 0 === n ? 1 : n,
      s = e.periodDuration,
      o = e.sourceDuration,
      e = (function (e, t) {
        for (var i = [], n = e; n < t; n++) i.push(n);
        return i;
      })((n = ho[t](e)).start, n.end).map(
        ((a = e),
        function (e) {
          var t = a.duration,
            i = a.timescale,
            n = a.periodStart,
            r = a.startNumber;
          return {
            number: (void 0 === r ? 1 : r) + e,
            duration: t / (void 0 === i ? 1 : i),
            timeline: n,
            time: e * t,
          };
        })
      );
    return (
      "static" === t &&
        (e[(t = e.length - 1)].duration =
          ("number" == typeof s ? s : o) - (i / r) * t),
      e
    );
  }
  function fs(e) {
    var t = e.baseUrl,
      i = void 0 === (u = e.initialization) ? {} : u,
      n = e.sourceDuration,
      r = void 0 === (o = e.indexRange) ? "" : o,
      a = e.periodStart,
      s = e.presentationTime,
      o = void 0 === (u = e.number) ? 0 : u,
      u = e.duration;
    if (!t) throw new Error(uo);
    return (
      (i = ds({ baseUrl: t, source: i.sourceURL, range: i.range })),
      ((r = ds({ baseUrl: t, source: t, indexRange: r })).map = i),
      u
        ? (e = ps(e)).length &&
          ((r.duration = e[0].duration), (r.timeline = e[0].timeline))
        : n && ((r.duration = n), (r.timeline = a)),
      (r.presentationTime = s || a),
      (r.number = o),
      [r]
    );
  }
  function ms(e, t, i) {
    for (
      var n = e.sidx.map || null,
        r = e.sidx.duration,
        a = e.timeline || 0,
        s = (s = e.sidx.byterange).offset + s.length,
        o = t.timescale,
        u = t.references.filter(function (e) {
          return 1 !== e.referenceType;
        }),
        l = [],
        c = e.endList ? "static" : "dynamic",
        d = e.sidx.timeline,
        h = d,
        p = e.mediaSequence || 0,
        f =
          "bigint" == typeof t.firstOffset
            ? window.BigInt(s) + t.firstOffset
            : s + t.firstOffset,
        m = 0;
      m < u.length;
      m++
    ) {
      var g = t.references[m],
        y = g.referencedSize,
        v = g.subsegmentDuration,
        g = void 0,
        g =
          "bigint" == typeof f
            ? f + window.BigInt(y) - window.BigInt(1)
            : f + y - 1,
        g = fs({
          baseUrl: i,
          timescale: o,
          timeline: a,
          periodStart: d,
          presentationTime: h,
          number: p,
          duration: v,
          sourceDuration: r,
          indexRange: f + "-" + g,
          type: c,
        })[0];
      n && (g.map = n),
        l.push(g),
        (f += "bigint" == typeof f ? window.BigInt(y) : y),
        (h += v / o),
        p++;
    }
    return (e.segments = l), e;
  }
  function gs(e) {
    return (
      (i = function (e) {
        return e.timeline;
      }),
      os(
        e.reduce(function (t, e) {
          return (
            e.forEach(function (e) {
              t[i(e)] = e;
            }),
            t
          );
        }, {})
      ).sort(function (e, t) {
        return e.timeline > t.timeline ? 1 : -1;
      })
    );
    var i;
  }
  function ys(e) {
    var r,
      a,
      s = [];
    return (
      (r = e),
      (a = function (e, t, i, n) {
        s = s.concat(e.playlists || []);
      }),
      po.forEach(function (e) {
        for (var t in r.mediaGroups[e])
          for (var i in r.mediaGroups[e][t]) {
            var n = r.mediaGroups[e][t][i];
            a(n, e, t, i);
          }
      }),
      s
    );
  }
  function vs(e) {
    var i = e.playlist,
      e = e.mediaSequence;
    (i.mediaSequence = e),
      i.segments.forEach(function (e, t) {
        e.number = i.mediaSequence + t;
      });
  }
  function _s(e) {
    var r,
      a,
      t = e.oldManifest,
      i = e.newManifest,
      n = t.playlists.concat(ys(t)),
      e = i.playlists.concat(ys(i));
    return (
      (i.timelineStarts = gs([t.timelineStarts, i.timelineStarts])),
      (n = {
        oldPlaylists: n,
        newPlaylists: e,
        timelineStarts: i.timelineStarts,
      }),
      (r = n.oldPlaylists),
      (e = n.newPlaylists),
      (a = n.timelineStarts),
      e.forEach(function (t) {
        t.discontinuitySequence = cs(a, function (e) {
          return e.timeline === t.timeline;
        });
        var e = (function (e, t) {
          for (var i = 0; i < e.length; i++)
            if (e[i].attributes.NAME === t) return e[i];
          return null;
        })(r, t.attributes.NAME);
        if (e && !t.sidx) {
          var i = t.segments[0],
            n = cs(e.segments, function (e) {
              return Math.abs(e.presentationTime - i.presentationTime) < 1 / 60;
            });
          if (-1 === n)
            return (
              vs({
                playlist: t,
                mediaSequence: e.mediaSequence + e.segments.length,
              }),
              (t.segments[0].discontinuity = !0),
              t.discontinuityStarts.unshift(0),
              void (
                ((!e.segments.length && t.timeline > e.timeline) ||
                  (e.segments.length &&
                    t.timeline > e.segments[e.segments.length - 1].timeline)) &&
                t.discontinuitySequence--
              )
            );
          e.segments[n].discontinuity &&
            !i.discontinuity &&
            ((i.discontinuity = !0),
            t.discontinuityStarts.unshift(0),
            t.discontinuitySequence--),
            vs({ playlist: t, mediaSequence: e.segments[n].number });
        }
      }),
      i
    );
  }
  function bs(e) {
    return (
      e &&
      e.uri +
        "-" +
        ((t = e.byterange),
        (e =
          "bigint" == typeof t.offset || "bigint" == typeof t.length
            ? window.BigInt(t.offset) +
              window.BigInt(t.length) -
              window.BigInt(1)
            : t.offset + t.length - 1),
        t.offset + "-" + e)
    );
    var t;
  }
  function Ts(e) {
    return os(
      e.reduce(function (e, t) {
        var i,
          n = t.attributes.id + (t.attributes.lang || "");
        return (
          e[n]
            ? (t.segments &&
                (t.segments[0] && (t.segments[0].discontinuity = !0),
                (i = e[n].segments).push.apply(i, t.segments)),
              t.attributes.contentProtection &&
                (e[n].attributes.contentProtection =
                  t.attributes.contentProtection))
            : ((e[n] = t), (e[n].attributes.timelineStarts = [])),
          e[n].attributes.timelineStarts.push({
            start: t.attributes.periodStart,
            timeline: t.attributes.periodStart,
          }),
          e
        );
      }, {})
    ).map(function (e) {
      var t, n;
      return (
        (e.discontinuityStarts =
          ((t = e.segments || []),
          (n = "discontinuity"),
          t.reduce(function (e, t, i) {
            return t[n] && e.push(i), e;
          }, []))),
        e
      );
    });
  }
  function Ss(e, t) {
    var i = bs(e.sidx);
    return (i = i && t[i] && t[i].sidx) && ms(e, i, e.sidx.resolvedUri), e;
  }
  function ws(e, h, p) {
    var f;
    return (
      void 0 === h && (h = {}),
      void 0 === p && (p = !1),
      (e = e.reduce(function (e, t) {
        var i = (t.attributes.role && t.attributes.role.value) || "",
          n = t.attributes.lang || "",
          r = t.attributes.label || "main";
        e[
          (r =
            n && !t.attributes.label
              ? t.attributes.lang + (i ? " (" + i + ")" : "")
              : r)
        ] ||
          (e[r] = {
            language: n,
            autoselect: !0,
            default: "main" === i,
            playlists: [],
            uri: "",
          });
        var a,
          s,
          o,
          u,
          l,
          c,
          d,
          u = Ss(
            ((s = p),
            (o = (a = t).attributes),
            (u = a.segments),
            (l = a.sidx),
            (c = a.mediaSequence),
            (d = a.discontinuitySequence),
            (n = a.discontinuityStarts),
            (u = {
              attributes:
                (((a = {
                  NAME: o.id,
                  BANDWIDTH: o.bandwidth,
                  CODECS: o.codecs,
                })["PROGRAM-ID"] = 1),
                a),
              uri: "",
              endList: "static" === o.type,
              timeline: o.periodStart,
              resolvedUri: "",
              targetDuration: o.duration,
              discontinuitySequence: d,
              discontinuityStarts: n,
              timelineStarts: o.timelineStarts,
              mediaSequence: c,
              segments: u,
            }),
            o.contentProtection && (u.contentProtection = o.contentProtection),
            l && (u.sidx = l),
            s &&
              ((u.attributes.AUDIO = "audio"),
              (u.attributes.SUBTITLES = "subs")),
            u),
            h
          );
        return (
          e[r].playlists.push(u),
          "undefined" == typeof f && "main" === i && ((f = t).default = !0),
          e
        );
      }, {})),
      f || (e[Object.keys(e)[0]].default = !0),
      e
    );
  }
  function Es(e) {
    var t = e.attributes,
      i = e.segments,
      n = e.sidx,
      r = e.discontinuityStarts,
      i = {
        attributes:
          (((e = {
            NAME: t.id,
            AUDIO: "audio",
            SUBTITLES: "subs",
            RESOLUTION: { width: t.width, height: t.height },
            CODECS: t.codecs,
            BANDWIDTH: t.bandwidth,
          })["PROGRAM-ID"] = 1),
          e),
        uri: "",
        endList: "static" === t.type,
        timeline: t.periodStart,
        resolvedUri: "",
        targetDuration: t.duration,
        discontinuityStarts: r,
        timelineStarts: t.timelineStarts,
        segments: i,
      };
    return (
      t.contentProtection && (i.contentProtection = t.contentProtection),
      n && (i.sidx = n),
      i
    );
  }
  function ks(e) {
    return (
      "video/mp4" === (e = e.attributes).mimeType ||
      "video/webm" === e.mimeType ||
      "video" === e.contentType
    );
  }
  function Cs(e) {
    return (
      "audio/mp4" === (e = e.attributes).mimeType ||
      "audio/webm" === e.mimeType ||
      "audio" === e.contentType
    );
  }
  function Is(e) {
    return (
      "text/vtt" === (e = e.attributes).mimeType || "text" === e.contentType
    );
  }
  function xs(i) {
    return i
      ? Object.keys(i).reduce(function (e, t) {
          t = i[t];
          return e.concat(t.playlists);
        }, [])
      : [];
  }
  function As(e) {
    var t = e.dashPlaylists,
      i = e.locations,
      n = void 0 === (c = e.sidxMapping) ? {} : c,
      r = e.previousManifest;
    if (!t.length) return {};
    var a = (d = t[0].attributes).sourceDuration,
      s = d.type,
      o = d.suggestedPresentationDelay,
      u = d.minimumUpdatePeriod,
      l = Ts(t.filter(ks)).map(Es),
      c = Ts(t.filter(Cs)),
      e = Ts(t.filter(Is)),
      d = t
        .map(function (e) {
          return e.attributes.captionServices;
        })
        .filter(Boolean),
      a = {
        allowCache: !0,
        discontinuityStarts: [],
        segments: [],
        endList: !0,
        mediaGroups:
          (((t = { AUDIO: {}, VIDEO: {} })["CLOSED-CAPTIONS"] = {}),
          (t.SUBTITLES = {}),
          t),
        uri: "",
        duration: a,
        playlists: (function (e, t) {
          if ((void 0 === t && (t = {}), !Object.keys(t).length)) return e;
          for (var i in e) e[i] = Ss(e[i], t);
          return e;
        })(l, n),
      };
    0 <= u && (a.minimumUpdatePeriod = 1e3 * u),
      i && (a.locations = i),
      "dynamic" === s && (a.suggestedPresentationDelay = o);
    var h,
      p,
      o = 0 === a.playlists.length,
      o = c.length ? ws(c, n, o) : null,
      n = e.length
        ? (void 0 === (h = n) && (h = {}),
          e.reduce(function (e, t) {
            var i = t.attributes.lang || "text";
            return (
              e[i] ||
                (e[i] = {
                  language: i,
                  default: !1,
                  autoselect: !1,
                  playlists: [],
                  uri: "",
                }),
              e[i].playlists.push(
                Ss(
                  (function (e) {
                    var t = e.attributes,
                      i = e.segments,
                      n = e.mediaSequence,
                      r = e.discontinuityStarts,
                      a = e.discontinuitySequence;
                    "undefined" == typeof i &&
                      ((i = [
                        {
                          uri: t.baseUrl,
                          timeline: t.periodStart,
                          resolvedUri: t.baseUrl || "",
                          duration: t.sourceDuration,
                          number: 0,
                        },
                      ]),
                      (t.duration = t.sourceDuration));
                    (e = { NAME: t.id, BANDWIDTH: t.bandwidth })[
                      "PROGRAM-ID"
                    ] = 1;
                    return (
                      t.codecs && (e.CODECS = t.codecs),
                      {
                        attributes: e,
                        uri: "",
                        endList: "static" === t.type,
                        timeline: t.periodStart,
                        resolvedUri: t.baseUrl || "",
                        targetDuration: t.duration,
                        timelineStarts: t.timelineStarts,
                        discontinuityStarts: r,
                        discontinuitySequence: a,
                        mediaSequence: n,
                        segments: i,
                      }
                    );
                  })(t),
                  h
                )
              ),
              e
            );
          }, {}))
        : null,
      l = (e = l.concat(xs(o), xs(n))).map(function (e) {
        return e.timelineStarts;
      });
    return (
      (a.timelineStarts = gs(l)),
      (e = e),
      (p = a.timelineStarts),
      e.forEach(function (t) {
        (t.mediaSequence = 0),
          (t.discontinuitySequence = cs(p, function (e) {
            return e.timeline === t.timeline;
          })),
          t.segments &&
            t.segments.forEach(function (e, t) {
              e.number = t;
            });
      }),
      o && (a.mediaGroups.AUDIO.audio = o),
      n && (a.mediaGroups.SUBTITLES.subs = n),
      d.length &&
        (a.mediaGroups["CLOSED-CAPTIONS"].cc = d.reduce(function (n, e) {
          return (
            e &&
              e.forEach(function (e) {
                var t = e.channel,
                  i = e.language;
                (n[i] = {
                  autoselect: !1,
                  default: !1,
                  instreamId: t,
                  language: i,
                }),
                  e.hasOwnProperty("aspectRatio") &&
                    (n[i].aspectRatio = e.aspectRatio),
                  e.hasOwnProperty("easyReader") &&
                    (n[i].easyReader = e.easyReader),
                  e.hasOwnProperty("3D") && (n[i]["3D"] = e["3D"]);
              }),
            n
          );
        }, {})),
      r ? _s({ oldManifest: r, newManifest: a }) : a
    );
  }
  function Ps(e, t) {
    for (
      var i,
        n,
        r,
        a,
        s,
        o,
        u = e.type,
        l = e.minimumUpdatePeriod,
        c = void 0 === l ? 0 : l,
        d = void 0 === (l = e.media) ? "" : l,
        h = e.sourceDuration,
        p = void 0 === (l = e.timescale) ? 1 : l,
        f = void 0 === (l = e.startNumber) ? 1 : l,
        m = e.periodStart,
        g = [],
        y = -1,
        v = 0;
      v < t.length;
      v++
    ) {
      var _ = t[v],
        b = _.d,
        T = _.r || 0,
        S = _.t || 0;
      y < 0 && (y = S), S && y < S && (y = S);
      var w,
        E = void 0;
      E =
        T < 0
          ? (w = v + 1) === t.length
            ? "dynamic" === u && 0 < c && 0 < d.indexOf("$Number$")
              ? ((i = y),
                (n = b),
                (_ = o = s = a = r = void 0),
                (r = (S = e).NOW),
                (a = S.clientOffset),
                (s = S.availabilityStartTime),
                (o = S.timescale),
                (_ = S.periodStart),
                (S = S.minimumUpdatePeriod),
                Math.ceil(
                  (((r + a) / 1e3 +
                    (void 0 === S ? 0 : S) -
                    (s + (void 0 === _ ? 0 : _))) *
                    (void 0 === o ? 1 : o) -
                    i) /
                    n
                ))
              : (h * p - y) / b
            : (t[w].t - y) / b
          : T + 1;
      for (var k = f + g.length + E, C = f + g.length; C < k; )
        g.push({ number: C, duration: b / p, time: y, timeline: m }),
          (y += b),
          C++;
    }
    return g;
  }
  function Ls(e, t) {
    return e.replace(
      fo,
      ((r = t),
      function (e, t, i, n) {
        if ("$$" === e) return "$";
        if ("undefined" == typeof r[t]) return e;
        e = "" + r[t];
        return "RepresentationID" === t ||
          (n = i ? parseInt(n, 10) : 1) <= e.length
          ? e
          : new Array(n - e.length + 1).join("0") + e;
      })
    );
    var r;
  }
  function Ds(r, e) {
    var a = { RepresentationID: r.id, Bandwidth: r.bandwidth || 0 },
      t = void 0 === (t = r.initialization) ? { sourceURL: "", range: "" } : t,
      s = ds({
        baseUrl: r.baseUrl,
        source: Ls(t.sourceURL, a),
        range: t.range,
      });
    return ((t = e),
    (e = r).duration || t
      ? e.duration
        ? ps(e)
        : Ps(e, t)
      : [
          {
            number: e.startNumber || 1,
            duration: e.sourceDuration,
            time: 0,
            timeline: e.periodStart,
          },
        ]).map(function (e) {
      (a.Number = e.number), (a.Time = e.time);
      var t = Ls(r.media || "", a),
        i = r.timescale || 1,
        n = r.presentationTimeOffset || 0,
        i = r.periodStart + (e.time - n) / i;
      return {
        uri: t,
        timeline: e.timeline,
        duration: e.duration,
        resolvedUri: ir(r.baseUrl || "", t),
        map: s,
        number: e.number,
        presentationTime: i,
      };
    });
  }
  function Os(r, e) {
    var t = r.duration,
      i = void 0 === (i = r.segmentUrls) ? [] : i,
      a = r.periodStart;
    if ((!t && !e) || (t && e)) throw new Error(lo);
    var n,
      s = i.map(function (e) {
        return (
          (i = e),
          (e = (t = r).baseUrl),
          (t = t.initialization),
          (t = ds({
            baseUrl: e,
            source: (t = void 0 === t ? {} : t).sourceURL,
            range: t.range,
          })),
          ((i = ds({ baseUrl: e, source: i.media, range: i.mediaRange })).map =
            t),
          i
        );
        var t, i;
      });
    return (
      t && (n = ps(r)),
      (n = e ? Ps(r, e) : n)
        .map(function (e, t) {
          if (s[t]) {
            var i = s[t],
              n = r.timescale || 1,
              t = r.presentationTimeOffset || 0;
            return (
              (i.timeline = e.timeline),
              (i.duration = e.duration),
              (i.number = e.number),
              (i.presentationTime = a + (e.time - t) / n),
              i
            );
          }
        })
        .filter(function (e) {
          return e;
        })
    );
  }
  function Rs(e) {
    var t,
      i = e.attributes,
      n = e.segmentInfo;
    n.template
      ? ((a = Ds), (t = ss(i, n.template)))
      : n.base
      ? ((a = fs), (t = ss(i, n.base)))
      : n.list && ((a = Os), (t = ss(i, n.list)));
    var r = { attributes: i };
    if (!a) return r;
    var a,
      e = a(t, n.segmentTimeline);
    return (
      t.duration
        ? ((i = t.duration),
          (a = t.timescale),
          (t.duration = i / (void 0 === a ? 1 : a)))
        : e.length
        ? (t.duration = e.reduce(function (e, t) {
            return Math.max(e, Math.ceil(t.duration));
          }, 0))
        : (t.duration = 0),
      (r.attributes = t),
      (r.segments = e),
      n.base && t.indexRange && ((r.sidx = e[0]), (r.segments = [])),
      r
    );
  }
  function Ms(e, t) {
    return ls(e.childNodes).filter(function (e) {
      return e.tagName === t;
    });
  }
  function Ns(e) {
    return e.textContent.trim();
  }
  function Us(e) {
    if (
      !(r =
        /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(
          e
        ))
    )
      return 0;
    var t = (a = r.slice(1))[0],
      i = a[1],
      n = a[2],
      e = a[3],
      r = a[4],
      a = a[5];
    return (
      31536e3 * parseFloat(t || 0) +
      2592e3 * parseFloat(i || 0) +
      86400 * parseFloat(n || 0) +
      3600 * parseFloat(e || 0) +
      60 * parseFloat(r || 0) +
      parseFloat(a || 0)
    );
  }
  function Bs(e) {
    return e && e.attributes
      ? ls(e.attributes).reduce(function (e, t) {
          var i = mo[t.name] || mo.DEFAULT;
          return (e[t.name] = i(t.value)), e;
        }, {})
      : {};
  }
  function Fs(e, i) {
    return i.length
      ? us(
          e.map(function (t) {
            return i.map(function (e) {
              return ir(t, Ns(e));
            });
          })
        )
      : e;
  }
  function js(e) {
    var t = Ms(e, "SegmentTemplate")[0],
      i = Ms(e, "SegmentList")[0],
      n =
        i &&
        Ms(i, "SegmentURL").map(function (e) {
          return ss({ tag: "SegmentURL" }, Bs(e));
        }),
      r = Ms(e, "SegmentBase")[0],
      e = (a = i || t) && Ms(a, "SegmentTimeline")[0],
      a = (a = i || r || t) && Ms(a, "Initialization")[0];
    (t = t && Bs(t)) && a
      ? (t.initialization = a && Bs(a))
      : t &&
        t.initialization &&
        (t.initialization = { sourceURL: t.initialization });
    var s = {
      template: t,
      segmentTimeline: e && Ms(e, "S").map(Bs),
      list: i && ss(Bs(i), { segmentUrls: n, initialization: Bs(a) }),
      base: r && ss(Bs(r), { initialization: Bs(a) }),
    };
    return (
      Object.keys(s).forEach(function (e) {
        s[e] || delete s[e];
      }),
      s
    );
  }
  function Hs(u, l, c) {
    return function (e) {
      var t = Bs(e),
        i = Fs(l, Ms(e, "BaseURL")),
        n = Ms(e, "Role")[0],
        n = { role: Bs(n) },
        t = ss(u, t, n),
        n = Ms(e, "Accessibility")[0],
        n =
          "urn:scte:dash:cc:cea-608:2015" === (n = Bs(n)).schemeIdUri
            ? ("string" != typeof n.value ? [] : n.value.split(";")).map(
                function (e) {
                  var t, i, n;
                  return (
                    /^CC\d=/.test((n = e))
                      ? ((i = (t = e.split("="))[0]), (n = t[1]))
                      : /^CC\d$/.test(e) && (i = e),
                    { channel: i, language: n }
                  );
                }
              )
            : "urn:scte:dash:cc:cea-708:2015" === n.schemeIdUri
            ? ("string" != typeof n.value ? [] : n.value.split(";")).map(
                function (e) {
                  var t,
                    i,
                    n = {
                      channel: void 0,
                      language: void 0,
                      aspectRatio: 1,
                      easyReader: 0,
                      "3D": 0,
                    };
                  return (
                    /=/.test(e)
                      ? ((t = (i = e.split("="))[0]),
                        (i = void 0 === (i = i[1]) ? "" : i),
                        (n.channel = t),
                        (n.language = e),
                        i.split(",").forEach(function (e) {
                          var t = e.split(":"),
                            e = t[0],
                            t = t[1];
                          "lang" === e
                            ? (n.language = t)
                            : "er" === e
                            ? (n.easyReader = Number(t))
                            : "war" === e
                            ? (n.aspectRatio = Number(t))
                            : "3D" === e && (n["3D"] = Number(t));
                        }))
                      : (n.language = e),
                    n.channel && (n.channel = "SERVICE" + n.channel),
                    n
                  );
                }
              )
            : void 0;
      n && (t = ss(t, { captionServices: n }));
      n = Ms(e, "Label")[0];
      n &&
        n.childNodes.length &&
        ((r = n.childNodes[0].nodeValue.trim()), (t = ss(t, { label: r })));
      var r = Ms(e, "ContentProtection").reduce(function (e, t) {
        var i = Bs(t),
          n = go[i.schemeIdUri];
        return (
          n &&
            ((e[n] = { attributes: i }),
            (t = Ms(t, "cenc:pssh")[0]) &&
              ((t = (t = Ns(t)) && or(t)), (e[n].pssh = t))),
          e
        );
      }, {});
      Object.keys(r).length && (t = ss(t, { contentProtection: r }));
      var a,
        s,
        o,
        r = js(e),
        e = Ms(e, "Representation"),
        r = ss(c, r);
      return us(
        e.map(
          ((a = t),
          (s = i),
          (o = r),
          function (e) {
            var t = Ms(e, "BaseURL"),
              t = Fs(s, t),
              i = ss(a, Bs(e)),
              n = js(e);
            return t.map(function (e) {
              return {
                segmentInfo: ss(o, n),
                attributes: ss(i, { baseUrl: e }),
              };
            });
          })
        )
      );
    };
  }
  function qs(e, t) {
    var i = (t = void 0 === t ? {} : t),
      n = void 0 === (a = i.manifestUri) ? "" : a,
      t = void 0 === (r = i.NOW) ? Date.now() : r,
      r = void 0 === (a = i.clientOffset) ? 0 : a;
    if (!(i = Ms(e, "Period")).length) throw new Error(ao);
    var a = Ms(e, "Location"),
      s = Bs(e),
      e = Fs([n], Ms(e, "BaseURL"));
    (s.type = s.type || "static"),
      (s.sourceDuration = s.mediaPresentationDuration || 0),
      (s.NOW = t),
      (s.clientOffset = r),
      a.length && (s.locations = a.map(Ns));
    var o,
      u,
      l = [];
    return (
      i.forEach(function (e, t) {
        var i,
          n = Bs(e),
          r = l[t - 1];
        (n.start =
          ((i = {
            attributes: n,
            priorPeriodAttributes: r ? r.attributes : null,
            mpdType: s.type,
          }),
          (t = i.attributes),
          (r = i.priorPeriodAttributes),
          (i = i.mpdType),
          "number" == typeof t.start
            ? t.start
            : r && "number" == typeof r.start && "number" == typeof r.duration
            ? r.start + r.duration
            : r || "static" !== i
            ? null
            : 0)),
          l.push({ node: e, attributes: n });
      }),
      {
        locations: s.locations,
        representationInfo: us(
          l.map(
            ((o = s),
            (u = e),
            function (e, t) {
              var i = Fs(u, Ms(e.node, "BaseURL")),
                n = ss(o, { periodStart: e.attributes.start });
              "number" == typeof e.attributes.duration &&
                (n.periodDuration = e.attributes.duration);
              var r = Ms(e.node, "AdaptationSet"),
                e = js(e.node);
              return us(r.map(Hs(n, i, e)));
            })
          )
        ),
      }
    );
  }
  function Vs(e) {
    if ("" === e) throw new Error(so);
    var t,
      i,
      n = new ro();
    try {
      i =
        (t = n.parseFromString(e, "application/xml")) &&
        "MPD" === t.documentElement.tagName
          ? t.documentElement
          : null;
    } catch (e) {}
    if (!i || (i && 0 < i.getElementsByTagName("parsererror").length))
      throw new Error(oo);
    return i;
  }
  function Ws(e, t) {
    void 0 === t && (t = {});
    var i = qs(Vs(e), t),
      e = i.representationInfo.map(Rs);
    return As({
      dashPlaylists: e,
      locations: i.locations,
      sidxMapping: t.sidxMapping,
      previousManifest: t.previousManifest,
    });
  }
  function Gs(e) {
    return (function (e) {
      e = Ms(e, "UTCTiming")[0];
      if (!e) return null;
      var t = Bs(e);
      switch (t.schemeIdUri) {
        case "urn:mpeg:dash:utc:http-head:2014":
        case "urn:mpeg:dash:utc:http-head:2012":
          t.method = "HEAD";
          break;
        case "urn:mpeg:dash:utc:http-xsdate:2014":
        case "urn:mpeg:dash:utc:http-iso:2014":
        case "urn:mpeg:dash:utc:http-xsdate:2012":
        case "urn:mpeg:dash:utc:http-iso:2012":
          t.method = "GET";
          break;
        case "urn:mpeg:dash:utc:direct:2014":
        case "urn:mpeg:dash:utc:direct:2012":
          (t.method = "DIRECT"), (t.value = Date.parse(t.value));
          break;
        case "urn:mpeg:dash:utc:http-ntp:2014":
        case "urn:mpeg:dash:utc:ntp:2014":
        case "urn:mpeg:dash:utc:sntp:2014":
        default:
          throw new Error(co);
      }
      return t;
    })(Vs(e));
  }
  function zs(e) {
    return e instanceof Uint8Array
      ? e
      : (Array.isArray(e) ||
          ((t = e), ArrayBuffer.isView(t)) ||
          e instanceof ArrayBuffer ||
          (e =
            "number" != typeof e || ("number" == typeof e && e != e) ? 0 : [e]),
        new Uint8Array(
          (e && e.buffer) || e,
          (e && e.byteOffset) || 0,
          (e && e.byteLength) || 0
        ));
    var t;
  }
  function Xs(e, t) {
    var i = void 0 !== (t = (void 0 === t ? {} : t).le) && t;
    e = bo(
      (e =
        ("bigint" != typeof e && "number" != typeof e) ||
        ("number" == typeof e && e != e)
          ? 0
          : e)
    );
    for (
      var n = ((t = e), Math.ceil(t.toString(2).length / 8)),
        r = new Uint8Array(new ArrayBuffer(n)),
        a = 0;
      a < n;
      a++
    ) {
      var s = i ? a : Math.abs(a + 1 - r.length);
      (r[s] = Number((e / To[a]) & bo(255))),
        e < 0 && ((r[s] = Math.abs(~r[s])), (r[s] -= 0 === a ? 1 : 2));
    }
    return r;
  }
  function Ks(e, t) {
    if (
      "string" !=
      typeof (e =
        "string" != typeof e && e && "function" == typeof e.toString
          ? e.toString()
          : e)
    )
      return new Uint8Array();
    t || (e = unescape(encodeURIComponent(e)));
    for (var i = new Uint8Array(e.length), n = 0; n < e.length; n++)
      i[n] = e.charCodeAt(n);
    return i;
  }
  function Ys(i, e, t) {
    var n = void 0 === t ? {} : t,
      r = void 0 === (t = n.offset) ? 0 : t,
      a = void 0 === (n = n.mask) ? [] : n;
    return (
      (i = zs(i)),
      (n = (e = zs(e)).every || Array.prototype.every),
      e.length &&
        i.length - r >= e.length &&
        n.call(e, function (e, t) {
          return e === (a[t] ? a[t] & i[r + t] : i[r + t]);
        })
    );
  }
  function Qs(e, t) {
    return (
      void 0 === t && (t = 0),
      (e = zs(e)).length - t < 10 || !Ys(e, So, { offset: t })
        ? t
        : Qs(
            e,
            (t += (function (e, t) {
              void 0 === t && (t = 0);
              var i = (e = zs(e))[t + 5],
                t =
                  (e[t + 6] << 21) |
                  (e[t + 7] << 14) |
                  (e[t + 8] << 7) |
                  e[t + 9];
              return (16 & i) >> 4 ? 20 + t : 10 + t;
            })(e, t))
          )
    );
  }
  function $s(e) {
    return "string" == typeof e ? Ks(e) : e;
  }
  function Js(e, t, i) {
    var n;
    void 0 === i && (i = !1),
      (n = t),
      (t = Array.isArray(n) ? n.map($s) : [$s(n)]),
      (e = zs(e));
    var r = [];
    if (!t.length) return r;
    for (var a = 0; a < e.length; ) {
      var s =
          ((e[a] << 24) | (e[a + 1] << 16) | (e[a + 2] << 8) | e[a + 3]) >>> 0,
        o = e.subarray(a + 4, a + 8);
      if (0 == s) break;
      var u = a + s;
      if (u > e.length) {
        if (i) break;
        u = e.length;
      }
      s = e.subarray(a + 8, u);
      Ys(o, t[0]) &&
        (1 === t.length ? r.push(s) : r.push.apply(r, Js(s, t.slice(1), i))),
        (a = u);
    }
    return r;
  }
  function Zs(e, t, i, n) {
    void 0 === i && (i = !0), void 0 === n && (n = !1);
    var r = (function (e) {
        for (var t = 1, i = 0; i < Eo.length && !(e & Eo[i]); i++) t++;
        return t;
      })(e[t]),
      a = e.subarray(t, t + r);
    return (
      i && ((a = Array.prototype.slice.call(e, t, t + r))[0] ^= Eo[r - 1]),
      {
        length: r,
        value: (function (n, e) {
          var t = void 0 === e ? {} : e,
            e = t.signed,
            e = void 0 !== e && e,
            t = t.le,
            r = void 0 !== t && t;
          n = zs(n);
          (t = r ? "reduce" : "reduceRight"),
            (t = (n[t] || Array.prototype[t]).call(
              n,
              function (e, t, i) {
                i = r ? i : Math.abs(i + 1 - n.length);
                return e + bo(t) * To[i];
              },
              bo(0)
            ));
          return (
            !e ||
              ((e = To[n.length] / bo(2) - bo(1)) < (t = bo(t)) &&
                ((t -= e), (t -= e), (t -= bo(2)))),
            Number(t)
          );
        })(a, { signed: n }),
        bytes: a,
      }
    );
  }
  function eo(e) {
    return "string" == typeof e
      ? e.match(/.{1,2}/g).map(eo)
      : "number" == typeof e
      ? Xs(e)
      : e;
  }
  function to(e, t, i) {
    if (i >= t.length) return t.length;
    var n = Zs(t, i, !1);
    if (Ys(e.bytes, n.bytes)) return i;
    var r = Zs(t, i + n.length);
    return to(e, t, i + r.length + r.value + n.length);
  }
  function io(e, t) {
    var i;
    (i = t), (t = Array.isArray(i) ? i.map(eo) : [eo(i)]), (e = zs(e));
    var n = [];
    if (!t.length) return n;
    for (var r = 0; r < e.length; ) {
      var a = Zs(e, r, !1),
        s = Zs(e, r + a.length),
        o = r + a.length + s.length;
      127 === s.value &&
        ((s.value = to(a, e, o)), s.value !== e.length && (s.value -= o));
      var u = o + s.value > e.length ? e.length : o + s.value,
        u = e.subarray(o, u);
      Ys(t[0], a.bytes) &&
        (1 === t.length ? n.push(u) : (n = n.concat(io(u, t.slice(1))))),
        (r += a.length + s.length + u.length);
    }
    return n;
  }
  function no(e, t, i, n) {
    void 0 === n && (n = 1 / 0), (e = zs(e)), (i = [].concat(i));
    for (var r, a = 0, s = 0; a < e.length && (s < n || r); ) {
      var o = void 0;
      if (
        (Ys(e.subarray(a), ko) ? (o = 4) : Ys(e.subarray(a), Co) && (o = 3), o)
      ) {
        if ((s++, r))
          return (function (e) {
            for (var t = [], i = 1; i < e.length - 2; )
              Ys(e.subarray(i, i + 3), Io) && (t.push(i + 2), i++), i++;
            if (0 === t.length) return e;
            for (
              var n = e.length - t.length, r = new Uint8Array(n), a = 0, i = 0;
              i < n;
              a++, i++
            )
              a === t[0] && (a++, t.shift()), (r[i] = e[a]);
            return r;
          })(e.subarray(r, a));
        var u = void 0;
        "h264" === t
          ? (u = 31 & e[a + o])
          : "h265" === t && (u = (e[a + o] >> 1) & 63),
          -1 !== i.indexOf(u) && (r = a + o),
          (a += o + ("h264" === t ? 1 : 2));
      } else a++;
    }
    return e.subarray(0, 0);
  }
  var ro = {
      __DOMHandler: es,
      DOMParser: Za,
      DOMImplementation: U.DOMImplementation,
      XMLSerializer: U.XMLSerializer,
    }.DOMParser,
    ao = "INVALID_NUMBER_OF_PERIOD",
    so = "DASH_EMPTY_MANIFEST",
    oo = "DASH_INVALID_XML",
    uo = "NO_BASE_URL",
    lo = "SEGMENT_TIME_UNSPECIFIED",
    co = "UNSUPPORTED_UTC_TIMING_SCHEME",
    ho = {
      static: function (e) {
        var t = e.duration,
          i = e.timescale,
          n = void 0 === i ? 1 : i,
          r = e.sourceDuration,
          i = e.periodDuration,
          e = hs(e.endNumber),
          n = t / n;
        return "number" == typeof e
          ? { start: 0, end: e }
          : "number" == typeof i
          ? { start: 0, end: i / n }
          : { start: 0, end: r / n };
      },
      dynamic: function (e) {
        var t = e.NOW,
          i = e.clientOffset,
          n = e.availabilityStartTime,
          r = e.timescale,
          a = void 0 === r ? 1 : r,
          s = e.duration,
          o = e.periodStart,
          u = void 0 === o ? 0 : o,
          r = e.minimumUpdatePeriod,
          o = void 0 === r ? 0 : r,
          r = e.timeShiftBufferDepth,
          r = void 0 === r ? 1 / 0 : r,
          e = hs(e.endNumber),
          i = (t + i) / 1e3,
          u = n + u,
          o = Math.ceil(((i + o - u) * a) / s),
          r = Math.floor(((i - u - r) * a) / s),
          s = Math.floor(((i - u) * a) / s);
        return {
          start: Math.max(0, r),
          end: "number" == typeof e ? e : Math.min(o, s),
        };
      },
    },
    po = ["AUDIO", "SUBTITLES"],
    fo = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,
    mo = {
      mediaPresentationDuration: Us,
      availabilityStartTime: function (e) {
        return (
          /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test((e = e)) && (e += "Z"),
          Date.parse(e) / 1e3
        );
      },
      minimumUpdatePeriod: Us,
      suggestedPresentationDelay: Us,
      type: function (e) {
        return e;
      },
      timeShiftBufferDepth: Us,
      start: Us,
      width: function (e) {
        return parseInt(e, 10);
      },
      height: function (e) {
        return parseInt(e, 10);
      },
      bandwidth: function (e) {
        return parseInt(e, 10);
      },
      startNumber: function (e) {
        return parseInt(e, 10);
      },
      timescale: function (e) {
        return parseInt(e, 10);
      },
      presentationTimeOffset: function (e) {
        return parseInt(e, 10);
      },
      duration: function (e) {
        var t = parseInt(e, 10);
        return isNaN(t) ? Us(e) : t;
      },
      d: function (e) {
        return parseInt(e, 10);
      },
      t: function (e) {
        return parseInt(e, 10);
      },
      r: function (e) {
        return parseInt(e, 10);
      },
      DEFAULT: function (e) {
        return e;
      },
    },
    go = {
      "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
      "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
      "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":
        "com.microsoft.playready",
      "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime",
    },
    yo = Math.pow(2, 32),
    vo = function (e) {
      var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
      return t.getBigUint64
        ? (e = t.getBigUint64(0)) < Number.MAX_SAFE_INTEGER
          ? Number(e)
          : e
        : t.getUint32(0) * yo + t.getUint32(4);
    },
    _o = function (e) {
      var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
        i = {
          version: e[0],
          flags: new Uint8Array(e.subarray(1, 4)),
          references: [],
          referenceId: t.getUint32(4),
          timescale: t.getUint32(8),
        },
        n = 12;
      0 === i.version
        ? ((i.earliestPresentationTime = t.getUint32(n)),
          (i.firstOffset = t.getUint32(n + 4)),
          (n += 8))
        : ((i.earliestPresentationTime = vo(e.subarray(n))),
          (i.firstOffset = vo(e.subarray(n + 8))),
          (n += 16));
      var r = t.getUint16((n += 2));
      for (n += 2; 0 < r; n += 12, r--)
        i.references.push({
          referenceType: (128 & e[n]) >>> 7,
          referencedSize: 2147483647 & t.getUint32(n),
          subsegmentDuration: t.getUint32(n + 4),
          startsWithSap: !!(128 & e[n + 8]),
          sapType: (112 & e[n + 8]) >>> 4,
          sapDeltaTime: 268435455 & t.getUint32(n + 8),
        });
      return i;
    },
    bo = window.BigInt || Number,
    To = [
      bo("0x1"),
      bo("0x100"),
      bo("0x10000"),
      bo("0x1000000"),
      bo("0x100000000"),
      bo("0x10000000000"),
      bo("0x1000000000000"),
      bo("0x100000000000000"),
      bo("0x10000000000000000"),
    ],
    So = zs([73, 68, 51]),
    wo = {
      EBML: zs([26, 69, 223, 163]),
      DocType: zs([66, 130]),
      Segment: zs([24, 83, 128, 103]),
      SegmentInfo: zs([21, 73, 169, 102]),
      Tracks: zs([22, 84, 174, 107]),
      Track: zs([174]),
      TrackNumber: zs([215]),
      DefaultDuration: zs([35, 227, 131]),
      TrackEntry: zs([174]),
      TrackType: zs([131]),
      FlagDefault: zs([136]),
      CodecID: zs([134]),
      CodecPrivate: zs([99, 162]),
      VideoTrack: zs([224]),
      AudioTrack: zs([225]),
      Cluster: zs([31, 67, 182, 117]),
      Timestamp: zs([231]),
      TimestampScale: zs([42, 215, 177]),
      BlockGroup: zs([160]),
      BlockDuration: zs([155]),
      Block: zs([161]),
      SimpleBlock: zs([163]),
    },
    Eo = [128, 64, 32, 16, 8, 4, 2, 1],
    ko = zs([0, 0, 0, 1]),
    Co = zs([0, 0, 1]),
    Io = zs([0, 0, 3]),
    xo = {
      webm: zs([119, 101, 98, 109]),
      matroska: zs([109, 97, 116, 114, 111, 115, 107, 97]),
      flac: zs([102, 76, 97, 67]),
      ogg: zs([79, 103, 103, 83]),
      ac3: zs([11, 119]),
      riff: zs([82, 73, 70, 70]),
      avi: zs([65, 86, 73]),
      wav: zs([87, 65, 86, 69]),
      "3gp": zs([102, 116, 121, 112, 51, 103]),
      mp4: zs([102, 116, 121, 112]),
      fmp4: zs([115, 116, 121, 112]),
      mov: zs([102, 116, 121, 112, 113, 116]),
      moov: zs([109, 111, 111, 118]),
      moof: zs([109, 111, 111, 102]),
    },
    Ao = {
      aac: function (e) {
        var t = Qs(e);
        return Ys(e, [255, 16], { offset: t, mask: [255, 22] });
      },
      mp3: function (e) {
        var t = Qs(e);
        return Ys(e, [255, 2], { offset: t, mask: [255, 6] });
      },
      webm: function (e) {
        e = io(e, [wo.EBML, wo.DocType])[0];
        return Ys(e, xo.webm);
      },
      mkv: function (e) {
        e = io(e, [wo.EBML, wo.DocType])[0];
        return Ys(e, xo.matroska);
      },
      mp4: function (e) {
        return (
          !Ao["3gp"](e) &&
          !Ao.mov(e) &&
          (!(!Ys(e, xo.mp4, { offset: 4 }) && !Ys(e, xo.fmp4, { offset: 4 })) ||
            !(
              !Ys(e, xo.moof, { offset: 4 }) && !Ys(e, xo.moov, { offset: 4 })
            ) ||
            void 0)
        );
      },
      mov: function (e) {
        return Ys(e, xo.mov, { offset: 4 });
      },
      "3gp": function (e) {
        return Ys(e, xo["3gp"], { offset: 4 });
      },
      ac3: function (e) {
        var t = Qs(e);
        return Ys(e, xo.ac3, { offset: t });
      },
      ts: function (e) {
        if (e.length < 189 && 1 <= e.length) return 71 === e[0];
        for (var t = 0; t + 188 < e.length && t < 188; ) {
          if (71 === e[t] && 71 === e[t + 188]) return !0;
          t += 1;
        }
        return !1;
      },
      flac: function (e) {
        var t = Qs(e);
        return Ys(e, xo.flac, { offset: t });
      },
      ogg: function (e) {
        return Ys(e, xo.ogg);
      },
      avi: function (e) {
        return Ys(e, xo.riff) && Ys(e, xo.avi, { offset: 8 });
      },
      wav: function (e) {
        return Ys(e, xo.riff) && Ys(e, xo.wav, { offset: 8 });
      },
      h264: function (e) {
        return no(e, "h264", 7, 3).length;
      },
      h265: function (e) {
        return no(e, "h265", [32, 33], 3).length;
      },
    },
    Po = Object.keys(Ao)
      .filter(function (e) {
        return "ts" !== e && "h264" !== e && "h265" !== e;
      })
      .concat(["ts", "h264", "h265"]);
  Po.forEach(function (e) {
    var t = Ao[e];
    Ao[e] = function (e) {
      return t(zs(e));
    };
  });
  function Lo(e) {
    e = zs(e);
    for (var t = 0; t < Po.length; t++) {
      var i = Po[t];
      if (ll[i](e)) return i;
    }
    return "";
  }
  function Do(e, t, i) {
    return e && i && i.responseURL && t !== i.responseURL ? i.responseURL : t;
  }
  function Oo(e) {
    return tr.log.debug
      ? tr.log.debug.bind(tr, "VHS:", e + " >")
      : function () {};
  }
  function Ro(e, t) {
    var i,
      n = [];
    if (e && e.length)
      for (i = 0; i < e.length; i++)
        t(e.start(i), e.end(i)) && n.push([e.start(i), e.end(i)]);
    return tr.createTimeRanges(n);
  }
  function Mo(e, i) {
    return Ro(e, function (e, t) {
      return e - 0.1 <= i && i <= t + 0.1;
    });
  }
  function No(e, t) {
    return Ro(e, function (e) {
      return t <= e - hl;
    });
  }
  function Uo(e) {
    var t = [];
    if (!e || !e.length) return "";
    for (var i = 0; i < e.length; i++) t.push(e.start(i) + " => " + e.end(i));
    return t.join(", ");
  }
  function Bo(e) {
    for (var t = [], i = 0; i < e.length; i++)
      t.push({ start: e.start(i), end: e.end(i) });
    return t;
  }
  function Fo(e) {
    if (e && e.length && e.end) return e.end(e.length - 1);
  }
  function jo(e, t) {
    var i = 0;
    if (!e || !e.length) return i;
    for (var n = 0; n < e.length; n++) {
      var r = e.start(n),
        a = e.end(n);
      a < t || (i += r < t && t <= a ? a - t : a - r);
    }
    return i;
  }
  function Ho(t, e) {
    if (!e.preload) return e.duration;
    var i = 0;
    return (
      (e.parts || []).forEach(function (e) {
        i += e.duration;
      }),
      (e.preloadHints || []).forEach(function (e) {
        "PART" === e.type && (i += t.partTargetDuration);
      }),
      i
    );
  }
  function qo(e) {
    return (e.segments || []).reduce(function (i, n, r) {
      return (
        n.parts
          ? n.parts.forEach(function (e, t) {
              i.push({
                duration: e.duration,
                segmentIndex: r,
                partIndex: t,
                part: e,
                segment: n,
              });
            })
          : i.push({
              duration: n.duration,
              segmentIndex: r,
              partIndex: null,
              segment: n,
              part: null,
            }),
        i
      );
    }, []);
  }
  function Vo(e) {
    return (
      ((e =
        e.segments && e.segments.length && e.segments[e.segments.length - 1]) &&
        e.parts) ||
      []
    );
  }
  function Wo(e) {
    var t = e.preloadSegment;
    if (t) {
      (e = t.parts),
        (t = (t.preloadHints || []).reduce(function (e, t) {
          return e + ("PART" === t.type ? 1 : 0);
        }, 0));
      return (t += e && e.length ? e.length : 0);
    }
  }
  function Go(e, t) {
    return t.endList
      ? 0
      : e && e.suggestedPresentationDelay
      ? e.suggestedPresentationDelay
      : (e = 0 < Vo(t).length) &&
        t.serverControl &&
        t.serverControl.partHoldBack
      ? t.serverControl.partHoldBack
      : e && t.partTargetDuration
      ? 3 * t.partTargetDuration
      : t.serverControl && t.serverControl.holdBack
      ? t.serverControl.holdBack
      : t.targetDuration
      ? 3 * t.targetDuration
      : 0;
  }
  function zo(e, t, i) {
    if (
      (t = "undefined" == typeof t ? e.mediaSequence + e.segments.length : t) <
      e.mediaSequence
    )
      return 0;
    var n = (function (e, t) {
      var i = 0,
        n = t - e.mediaSequence,
        r = e.segments[n];
      if (r) {
        if ("undefined" != typeof r.start)
          return { result: r.start, precise: !0 };
        if ("undefined" != typeof r.end)
          return { result: r.end - r.duration, precise: !0 };
      }
      for (; n--; ) {
        if ("undefined" != typeof (r = e.segments[n]).end)
          return { result: i + r.end, precise: !0 };
        if (((i += Ho(e, r)), "undefined" != typeof r.start))
          return { result: i + r.start, precise: !0 };
      }
      return { result: i, precise: !1 };
    })(e, t);
    return n.precise
      ? n.result
      : (t = (function (e, t) {
          for (
            var i, n = 0, r = t - e.mediaSequence;
            r < e.segments.length;
            r++
          ) {
            if ("undefined" != typeof (i = e.segments[r]).start)
              return { result: i.start - n, precise: !0 };
            if (((n += Ho(e, i)), "undefined" != typeof i.end))
              return { result: i.end - n, precise: !0 };
          }
          return { result: -1, precise: !1 };
        })(e, t)).precise
      ? t.result
      : n.result + i;
  }
  function Xo(e, t, i) {
    if (!e) return 0;
    if (("number" != typeof i && (i = 0), "undefined" == typeof t)) {
      if (e.totalDuration) return e.totalDuration;
      if (!e.endList) return window.Infinity;
    }
    return zo(e, t, i);
  }
  function Ko(e) {
    var t = e.defaultDuration,
      i = e.durationList,
      n = e.startIndex,
      r = e.endIndex,
      a = 0;
    if ((r < n && ((n = (e = [r, n])[0]), (r = e[1])), n < 0)) {
      for (var s = n; s < Math.min(0, r); s++) a += t;
      n = 0;
    }
    for (var o = n; o < r; o++) a += i[o].duration;
    return a;
  }
  function Yo(e, t, i, n) {
    return e && e.segments
      ? e.endList
        ? Xo(e)
        : null === t
        ? null
        : ((t = zo(e, e.mediaSequence + e.segments.length, (t = t || 0))),
          i && (t -= n = "number" == typeof n ? n : Go(null, e)),
          Math.max(0, t))
      : null;
  }
  function Qo(e) {
    return e.excludeUntil && e.excludeUntil > Date.now();
  }
  function $o(e) {
    return e.excludeUntil && e.excludeUntil === 1 / 0;
  }
  function Jo(e) {
    var t = Qo(e);
    return !e.disabled && !t;
  }
  function Zo(e, t) {
    return t.attributes && t.attributes[e];
  }
  function eu(e, t) {
    if (1 === e.playlists.length) return !0;
    var i = t.attributes.BANDWIDTH || Number.MAX_VALUE;
    return (
      0 ===
      e.playlists.filter(function (e) {
        return !!Jo(e) && (e.attributes.BANDWIDTH || 0) < i;
      }).length
    );
  }
  function tu(e, t) {
    return (
      !((!e && !t) || (!e && t) || (e && !t)) &&
      (e === t ||
        !(!e.id || !t.id || e.id !== t.id) ||
        !(
          !e.resolvedUri ||
          !t.resolvedUri ||
          e.resolvedUri !== t.resolvedUri
        ) ||
        !(!e.uri || !t.uri || e.uri !== t.uri))
    );
  }
  function iu(e, t) {
    var i,
      n = (e && e.mediaGroups && e.mediaGroups.AUDIO) || {},
      r = !1;
    for (i in n) {
      for (var a in n[i]) if ((r = t(n[i][a]))) break;
      if (r) break;
    }
    return !!r;
  }
  function nu(i) {
    if (!i || !i.playlists || !i.playlists.length)
      return iu(i, function (e) {
        return (e.playlists && e.playlists.length) || e.uri;
      });
    for (var e = 0; e < i.playlists.length; e++) {
      var t = (function (e) {
        var t = i.playlists[e],
          e = t.attributes && t.attributes.CODECS;
        return (e && e.split(",").every(fr)) ||
          iu(i, function (e) {
            return tu(t, e);
          })
          ? "continue"
          : { v: !1 };
      })(e);
      if ("continue" !== t && "object" == typeof t) return t.v;
    }
    return !0;
  }
  function ru(e, t) {
    return e + "-" + t;
  }
  function au(r, a) {
    r.mediaGroups &&
      ["AUDIO", "SUBTITLES"].forEach(function (e) {
        if (r.mediaGroups[e])
          for (var t in r.mediaGroups[e])
            for (var i in r.mediaGroups[e][t]) {
              var n = r.mediaGroups[e][t][i];
              a(n, e, t, i);
            }
      });
  }
  function su(e) {
    var t = e.playlist,
      i = e.uri,
      e = e.id;
    (t.id = e),
      (t.playlistErrors_ = 0),
      i && (t.uri = i),
      (t.attributes = t.attributes || {});
  }
  function ou(o, e) {
    o.uri = e;
    for (var t = 0; t < o.playlists.length; t++)
      o.playlists[t].uri || (o.playlists[t].uri = "placeholder-uri-" + t);
    var i,
      u = nu(o);
    au(o, function (e, t, i, n) {
      var r = "placeholder-uri-" + t + "-" + i + "-" + n;
      if (!e.playlists || !e.playlists.length) {
        if (u && "AUDIO" === t && !e.uri)
          for (var a = 0; a < o.playlists.length; a++) {
            var s = o.playlists[a];
            if (s.attributes && s.attributes.AUDIO && s.attributes.AUDIO === i)
              return;
          }
        e.playlists = [g({}, e)];
      }
      e.playlists.forEach(function (e, t) {
        var i = ru(t, r);
        e.uri
          ? (e.resolvedUri = e.resolvedUri || dl(o.uri, e.uri))
          : ((e.uri = 0 === t ? r : i), (e.resolvedUri = e.uri)),
          (e.id = e.id || i),
          (e.attributes = e.attributes || {}),
          (o.playlists[e.id] = e),
          (o.playlists[e.uri] = e);
      });
    }),
      (function (e) {
        for (var t = e.playlists.length; t--; ) {
          var i = e.playlists[t];
          su({ playlist: i, id: ru(t, i.uri) }),
            (i.resolvedUri = dl(e.uri, i.uri)),
            (e.playlists[i.id] = i),
            (e.playlists[i.uri] = i).attributes.BANDWIDTH ||
              ml.warn(
                "Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."
              );
        }
      })(o),
      au((i = o), function (e) {
        e.uri && (e.resolvedUri = dl(i.uri, e.uri));
      });
  }
  function uu(e, t, i) {
    var n = e.slice(),
      r = t.slice();
    i = i || 0;
    for (var a, s = [], o = 0; o < r.length; o++) {
      var u = n[o + i],
        l = r[o];
      u
        ? ((a = u.map || a),
          s.push(
            (function (e, t) {
              if (!e) return t;
              var i = gl(e, t);
              if (
                (e.preloadHints && !t.preloadHints && delete i.preloadHints,
                e.parts && !t.parts)
              )
                delete i.parts;
              else if (e.parts && t.parts)
                for (var n = 0; n < t.parts.length; n++)
                  e.parts &&
                    e.parts[n] &&
                    (i.parts[n] = gl(e.parts[n], t.parts[n]));
              return (
                !e.skipped && t.skipped && (i.skipped = !1),
                e.preload && !t.preload && (i.preload = !1),
                i
              );
            })(u, l)
          ))
        : (a && !l.map && (l.map = a), s.push(l));
    }
    return s;
  }
  function lu(e, t) {
    !e.resolvedUri && e.uri && (e.resolvedUri = dl(t, e.uri)),
      e.key && !e.key.resolvedUri && (e.key.resolvedUri = dl(t, e.key.uri)),
      e.map && !e.map.resolvedUri && (e.map.resolvedUri = dl(t, e.map.uri)),
      e.map &&
        e.map.key &&
        !e.map.key.resolvedUri &&
        (e.map.key.resolvedUri = dl(t, e.map.key.uri)),
      e.parts &&
        e.parts.length &&
        e.parts.forEach(function (e) {
          e.resolvedUri || (e.resolvedUri = dl(t, e.uri));
        }),
      e.preloadHints &&
        e.preloadHints.length &&
        e.preloadHints.forEach(function (e) {
          e.resolvedUri || (e.resolvedUri = dl(t, e.uri));
        });
  }
  function cu(e) {
    var t = e.segments || [],
      i = e.preloadSegment;
    if (i && i.parts && i.parts.length) {
      if (i.preloadHints)
        for (var n = 0; n < i.preloadHints.length; n++)
          if ("MAP" === i.preloadHints[n].type) return t;
      (i.duration = e.targetDuration), (i.preload = !0), t.push(i);
    }
    return t;
  }
  function du(e, t) {
    return (
      e === t ||
      (e.segments &&
        t.segments &&
        e.segments.length === t.segments.length &&
        e.endList === t.endList &&
        e.mediaSequence === t.mediaSequence &&
        e.preloadSegment === t.preloadSegment)
    );
  }
  function hu(e, a, t) {
    void 0 === t && (t = du);
    var i = gl(e, {}),
      n = i.playlists[a.id];
    if (!n) return null;
    if (t(n, a)) return null;
    a.segments = cu(a);
    var r = gl(n, a);
    if (
      (r.preloadSegment && !a.preloadSegment && delete r.preloadSegment,
      n.segments)
    ) {
      if (a.skip) {
        a.segments = a.segments || [];
        for (var s = 0; s < a.skip.skippedSegments; s++)
          a.segments.unshift({ skipped: !0 });
      }
      r.segments = uu(
        n.segments,
        a.segments,
        a.mediaSequence - n.mediaSequence
      );
    }
    r.segments.forEach(function (e) {
      lu(e, r.resolvedUri);
    });
    for (var o = 0; o < i.playlists.length; o++)
      i.playlists[o].id === a.id && (i.playlists[o] = r);
    return (
      (i.playlists[a.id] = r),
      (i.playlists[a.uri] = r),
      au(e, function (e, t, i, n) {
        if (e.playlists)
          for (var r = 0; r < e.playlists.length; r++)
            a.id === e.playlists[r].id && (e.playlists[r] = a);
      }),
      i
    );
  }
  function pu(e, t) {
    var i = e.segments || [],
      n = i[i.length - 1],
      n =
        ((i = n && n.parts && n.parts[n.parts.length - 1]) && i.duration) ||
        (n && n.duration);
    return t && n
      ? 1e3 * n
      : 500 * (e.partTargetDuration || e.targetDuration || 10);
  }
  function fu(e, t, i, n) {
    var r = "arraybuffer" === e.responseType ? e.response : e.responseText;
    !t &&
      r &&
      ((e.responseTime = Date.now()),
      (e.roundTripTime = e.responseTime - e.requestTime),
      (e.bytesReceived = r.byteLength || r.length),
      e.bandwidth ||
        (e.bandwidth = Math.floor(
          (e.bytesReceived / e.roundTripTime) * 8 * 1e3
        ))),
      i.headers && (e.responseHeaders = i.headers),
      t && "ETIMEDOUT" === t.code && (e.timedout = !0),
      n(
        (t =
          !t &&
          !e.aborted &&
          200 !== i.statusCode &&
          206 !== i.statusCode &&
          0 !== i.statusCode
            ? new Error(
                "XHR Failed with a response of: " + (e && (r || e.responseText))
              )
            : t),
        e
      );
  }
  function mu() {
    function a(e, i) {
      e = _l({ timeout: 45e3 }, e);
      var t = a.beforeRequest || tr.Vhs.xhr.beforeRequest;
      !t || "function" != typeof t || ((t = t(e)) && (e = t));
      var n = (!0 === tr.Vhs.xhr.original ? vl : tr.Vhs.xhr)(
          e,
          function (e, t) {
            return fu(n, e, t, i);
          }
        ),
        r = n.abort;
      return (
        (n.abort = function () {
          return (n.aborted = !0), r.apply(n, arguments);
        }),
        (n.uri = e.uri),
        (n.requestTime = Date.now()),
        n
      );
    }
    return (a.original = !0), a;
  }
  function gu(e) {
    var t,
      i = {};
    return (
      e.byterange &&
        (i.Range =
          ((t = e.byterange),
          (e = t.offset),
          (t =
            "bigint" == typeof t.offset || "bigint" == typeof t.length
              ? window.BigInt(t.offset) +
                window.BigInt(t.length) -
                window.BigInt(1)
              : t.offset + t.length - 1),
          "bytes=" + e + "-" + t)),
      i
    );
  }
  function yu(e, t) {
    return (
      (e = e.toString(16)),
      "00".substring(0, 2 - e.length) + e + (t % 2 ? " " : "")
    );
  }
  function vu(e) {
    return 32 <= e && e < 126 ? String.fromCharCode(e) : ".";
  }
  function _u(i) {
    var n = {};
    return (
      Object.keys(i).forEach(function (e) {
        var t = i[e];
        ArrayBuffer.isView(t)
          ? (n[e] = {
              bytes: t.buffer,
              byteOffset: t.byteOffset,
              byteLength: t.byteLength,
            })
          : (n[e] = t);
      }),
      n
    );
  }
  function bu(e) {
    var t = e.byterange || { length: 1 / 0, offset: 0 };
    return [t.length, t.offset, e.resolvedUri].join(",");
  }
  function Tu(e) {
    return e.resolvedUri;
  }
  function Su(e) {
    for (
      var t = Array.prototype.slice.call(e), i = "", n = 0;
      n < t.length / 16;
      n++
    )
      i +=
        t
          .slice(16 * n, 16 * n + 16)
          .map(yu)
          .join("") +
        " " +
        t
          .slice(16 * n, 16 * n + 16)
          .map(vu)
          .join("") +
        "\n";
    return i;
  }
  function wu(e) {
    var t = e.playlist,
      i = e.time,
      n = void 0 === i ? void 0 : i;
    if (!(i = e.callback))
      throw new Error("getProgramTime: callback must be provided");
    return t && void 0 !== n
      ? (e = (function (e, t) {
          if (!t || !t.segments || 0 === t.segments.length) return null;
          for (
            var i, n = 0, r = 0;
            r < t.segments.length &&
            !(
              e <=
              (n = (i = t.segments[r]).videoTimingInfo
                ? i.videoTimingInfo.transmuxedPresentationEnd
                : n + i.duration)
            );
            r++
          );
          var a = t.segments[t.segments.length - 1];
          if (
            a.videoTimingInfo &&
            a.videoTimingInfo.transmuxedPresentationEnd < e
          )
            return null;
          if (n < e) {
            if (e > n + 0.25 * a.duration) return null;
            i = a;
          }
          return {
            segment: i,
            estimatedStart: i.videoTimingInfo
              ? i.videoTimingInfo.transmuxedPresentationStart
              : n - i.duration,
            type: i.videoTimingInfo ? "accurate" : "estimate",
          };
        })(n, t))
        ? "estimate" === e.type
          ? i({
              message:
                "Accurate programTime could not be determined. Please seek to e.seekTime and try again",
              seekTime: e.estimatedStart,
            })
          : ((t = { mediaSeconds: n }),
            (e = (function (e, t) {
              if (!t.dateTimeObject) return null;
              var i = t.videoTimingInfo.transmuxerPrependedSeconds,
                i = e - (t.videoTimingInfo.transmuxedPresentationStart + i);
              return new Date(t.dateTimeObject.getTime() + 1e3 * i);
            })(n, e.segment)) && (t.programDateTime = e.toISOString()),
            i(null, t))
        : i({ message: "valid programTime was not found" })
      : i({ message: "getProgramTime: playlist and time must be provided" });
  }
  function Eu(e) {
    var t = e.programTime,
      i = e.playlist,
      n = e.retryCount,
      r = void 0 === n ? 2 : n,
      a = e.seekTo,
      s = e.pauseAfterSeek,
      o = void 0 === s || s,
      u = e.tech,
      l = e.callback;
    if (!l) throw new Error("seekToProgramTime: callback must be provided");
    return "undefined" != typeof t && i && a
      ? i.endList || u.hasStarted_
        ? (function (e) {
            if (!e.segments || 0 === e.segments.length) return !1;
            for (var t = 0; t < e.segments.length; t++)
              if (!e.segments[t].dateTimeObject) return !1;
            return !0;
          })(i)
          ? (n = (function (e, t) {
              var i;
              try {
                i = new Date(e);
              } catch (e) {
                return null;
              }
              if (!t || !t.segments || 0 === t.segments.length) return null;
              if (i < (r = t.segments[0]).dateTimeObject) return null;
              for (var n = 0; n < t.segments.length - 1; n++) {
                var r = t.segments[n];
                if (i < t.segments[n + 1].dateTimeObject) break;
              }
              var a,
                s = t.segments[t.segments.length - 1],
                e = s.dateTimeObject,
                a = s.videoTimingInfo
                  ? (a = s.videoTimingInfo).transmuxedPresentationEnd -
                    a.transmuxedPresentationStart -
                    a.transmuxerPrependedSeconds
                  : s.duration + 0.25 * s.duration;
              return new Date(e.getTime() + 1e3 * a) < i
                ? null
                : {
                    segment: (r = e < i ? s : r),
                    estimatedStart: r.videoTimingInfo
                      ? r.videoTimingInfo.transmuxedPresentationStart
                      : fl.duration(t, t.mediaSequence + t.segments.indexOf(r)),
                    type: r.videoTimingInfo ? "accurate" : "estimate",
                  };
            })(t, i))
            ? ((s = n.segment),
              (e = (function (e, t) {
                var i;
                try {
                  (n = new Date(e)), (i = new Date(t));
                } catch (e) {}
                var n = n.getTime();
                return (i.getTime() - n) / 1e3;
              })(s.dateTimeObject, t)),
              "estimate" === n.type
                ? 0 === r
                  ? l({ message: t + " is not buffered yet. Try again" })
                  : (a(n.estimatedStart + e),
                    void u.one("seeked", function () {
                      Eu({
                        programTime: t,
                        playlist: i,
                        retryCount: r - 1,
                        seekTo: a,
                        pauseAfterSeek: o,
                        tech: u,
                        callback: l,
                      });
                    }))
                : ((e = s.start + e),
                  u.one("seeked", function () {
                    return l(null, u.currentTime());
                  }),
                  o && u.pause(),
                  void a(e)))
            : l({ message: t + " was not found in the stream" })
          : l({
              message:
                "programDateTime tags must be provided in the manifest " +
                i.resolvedUri,
            })
        : l({
            message: "player must be playing a live stream to start buffering",
          })
      : l({
          message:
            "seekToProgramTime: programTime, seekTo and playlist must be provided",
        });
  }
  function ku(e, t) {
    if (4 === e.readyState) return t();
  }
  function Cu(e, t, r) {
    function n(e, t, i, n) {
      return t.abort(), (o = !0), r(e, t, i, n);
    }
    function i(e, t) {
      if (!o) {
        if (e) return n(e, t, "", s);
        var i = t.responseText.substring(
          (s && s.byteLength) || 0,
          t.responseText.length
        );
        if (
          ((s = (function () {
            for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)
              t[i] = arguments[i];
            if (
              (t = t.filter(function (e) {
                return e && (e.byteLength || e.length) && "string" != typeof e;
              })).length <= 1
            )
              return zs(t[0]);
            var n = t.reduce(function (e, t, i) {
                return e + (t.byteLength || t.length);
              }, 0),
              r = new Uint8Array(n),
              a = 0;
            return (
              t.forEach(function (e) {
                (e = zs(e)), r.set(e, a), (a += e.byteLength);
              }),
              r
            );
          })(s, Ks(i, !0))),
          (a = a || Qs(s)),
          s.length < 10 || (a && s.length < a + 2))
        )
          return ku(t, function () {
            return n(e, t, "", s);
          });
        i = Lo(s);
        return ("ts" === i && s.length < 188) || (!i && s.length < 376)
          ? ku(t, function () {
              return n(e, t, "", s);
            })
          : n(null, t, i, s);
      }
    }
    var a,
      s = [],
      o = !1,
      u = t(
        {
          uri: e,
          beforeSend: function (t) {
            t.overrideMimeType("text/plain; charset=x-user-defined"),
              t.addEventListener("progress", function (e) {
                return (
                  e.total, e.loaded, fu(t, null, { statusCode: t.status }, i)
                );
              });
          },
        },
        function (e, t) {
          return fu(u, e, t, i);
        }
      );
    return u;
  }
  function Iu(e, t) {
    if (!du(e, t)) return !1;
    if (
      e.sidx &&
      t.sidx &&
      (e.sidx.offset !== t.sidx.offset || e.sidx.length !== t.sidx.length)
    )
      return !1;
    if ((!e.sidx && t.sidx) || (e.sidx && !t.sidx)) return !1;
    if ((e.segments && !t.segments) || (!e.segments && t.segments)) return !1;
    if (!e.segments && !t.segments) return !0;
    for (var i = 0; i < e.segments.length; i++) {
      var n = e.segments[i],
        r = t.segments[i];
      if (n.uri !== r.uri) return !1;
      if (n.byterange || r.byterange) {
        (n = n.byterange), (r = r.byterange);
        if ((n && !r) || (!n && r)) return !1;
        if (n.offset !== r.offset || n.length !== r.length) return !1;
      }
    }
    return !0;
  }
  function xu(e, t) {
    var i,
      n = {};
    for (i in e) {
      var r = e[i].sidx;
      if (r) {
        var a = bs(r);
        if (!t[a]) break;
        var s = t[a].sidxInfo;
        (s = s),
          (r = r),
          (Boolean(!s.map && !r.map) ||
            Boolean(
              s.map &&
                r.map &&
                s.map.byterange.offset === r.map.byterange.offset &&
                s.map.byterange.length === r.map.byterange.length
            )) &&
            s.uri === r.uri &&
            s.byterange.offset === r.byterange.offset &&
            s.byterange.length === r.byterange.length &&
            (n[a] = t[a]);
      }
    }
    return n;
  }
  function Au(e) {
    return (e.on = e.addEventListener), (e.off = e.removeEventListener), e;
  }
  function Pu(i) {
    var n = i.transmuxer,
      e = i.bytes,
      t = i.audioAppendStart,
      r = i.gopsToAlignWith,
      a = i.remux,
      s = i.onData,
      o = i.onTrackInfo,
      u = i.onAudioTimingInfo,
      l = i.onVideoTimingInfo,
      c = i.onVideoSegmentTimingInfo,
      d = i.onAudioSegmentTimingInfo,
      h = i.onId3,
      p = i.onCaptions,
      f = i.onDone,
      m = i.onEndedTimeline,
      g = i.onTransmuxerLog,
      y = i.isEndOfTimeline,
      v = { buffer: [] },
      _ = y;
    (n.onmessage = function (e) {
      var t;
      n.currentTransmux === i &&
        ("data" === e.data.action &&
          (function (e, t, i) {
            var n = e.data.segment,
              r = n.type,
              a = n.initSegment,
              s = n.captions,
              o = n.captionStreams,
              u = n.metadata,
              l = n.videoFrameDtsTime,
              n = n.videoFramePtsTime;
            t.buffer.push({ captions: s, captionStreams: o, metadata: u });
            (e = e.data.segment.boxes || { data: e.data.segment.data }),
              (a = {
                type: r,
                data: new Uint8Array(
                  e.data,
                  e.data.byteOffset,
                  e.data.byteLength
                ),
                initSegment: new Uint8Array(a.data, a.byteOffset, a.byteLength),
              });
            "undefined" != typeof l && (a.videoFrameDtsTime = l),
              "undefined" != typeof n && (a.videoFramePtsTime = n),
              i(a);
          })(e, v, s),
        "trackinfo" === e.data.action && o(e.data.trackInfo),
        "gopInfo" === e.data.action && (v.gopInfo = e.data.gopInfo),
        "audioTimingInfo" === e.data.action && u(e.data.audioTimingInfo),
        "videoTimingInfo" === e.data.action && l(e.data.videoTimingInfo),
        "videoSegmentTimingInfo" === e.data.action &&
          c(e.data.videoSegmentTimingInfo),
        "audioSegmentTimingInfo" === e.data.action &&
          d(e.data.audioSegmentTimingInfo),
        "id3Frame" === e.data.action &&
          h([e.data.id3Frame], e.data.id3Frame.dispatchType),
        "caption" === e.data.action && p(e.data.caption),
        "endedtimeline" === e.data.action && ((_ = !1), m()),
        "log" === e.data.action && g(e.data.log),
        "transmuxed" === e.data.type &&
          (_ ||
            ((n.onmessage = null),
            (e = (t = { transmuxedData: v, callback: f }).transmuxedData),
            (t = t.callback),
            (e.buffer = []),
            t(e),
            El(n))));
    }),
      t && n.postMessage({ action: "setAudioAppendStart", appendStart: t }),
      Array.isArray(r) &&
        n.postMessage({ action: "alignGopsWith", gopsToAlignWith: r }),
      "undefined" != typeof a &&
        n.postMessage({ action: "setRemux", remux: a }),
      e.byteLength &&
        ((r = e instanceof ArrayBuffer ? e : e.buffer),
        (a = e instanceof ArrayBuffer ? 0 : e.byteOffset),
        n.postMessage(
          { action: "push", data: r, byteOffset: a, byteLength: e.byteLength },
          [r]
        )),
      y && n.postMessage({ action: "endTimeline" }),
      n.postMessage({ action: "flush" });
  }
  function Lu(e, t) {
    e.postMessage({ action: t }), El(e);
  }
  function Du(e, t) {
    if (!t.currentTransmux) return (t.currentTransmux = e), Lu(t, e), 0;
    t.transmuxQueue.push(Lu.bind(null, t, e));
  }
  function Ou(e) {
    if (!e.transmuxer.currentTransmux)
      return (e.transmuxer.currentTransmux = e), void Pu(e);
    e.transmuxer.transmuxQueue.push(e);
  }
  function Ru(i) {
    var n = i.transmuxer,
      r = i.endAction || i.action,
      a = i.callback,
      e = g({}, i, { endAction: null, transmuxer: null, callback: null }),
      t = function e(t) {
        t.data.action === r &&
          (n.removeEventListener("message", e),
          t.data.data &&
            ((t.data.data = new Uint8Array(
              t.data.data,
              i.byteOffset || 0,
              i.byteLength || t.data.data.byteLength
            )),
            i.data && (i.data = t.data.data)),
          a(t.data));
      };
    n.addEventListener("message", t),
      i.data
        ? ((t = i.data instanceof ArrayBuffer),
          (e.byteOffset = t ? 0 : i.data.byteOffset),
          (e.byteLength = i.data.byteLength),
          (t = [t ? i.data : i.data.buffer]),
          n.postMessage(e, t))
        : n.postMessage(e);
  }
  function Mu(e) {
    e.forEach(function (e) {
      e.abort();
    });
  }
  function Nu(e, t) {
    return t.timedout
      ? {
          status: t.status,
          message: "HLS request timed-out at URL: " + t.uri,
          code: xl,
          xhr: t,
        }
      : t.aborted
      ? {
          status: t.status,
          message: "HLS request aborted at URL: " + t.uri,
          code: Al,
          xhr: t,
        }
      : e
      ? {
          status: t.status,
          message: "HLS request errored at URL: " + t.uri,
          code: Il,
          xhr: t,
        }
      : "arraybuffer" === t.responseType && 0 === t.response.byteLength
      ? {
          status: t.status,
          message: "Empty HLS response at URL: " + t.uri,
          code: Il,
          xhr: t,
        }
      : null;
  }
  function Uu(a, s, o) {
    return function (e, t) {
      var i = t.response,
        e = Nu(e, t);
      if (e) return o(e, a);
      if (16 !== i.byteLength)
        return o(
          {
            status: t.status,
            message: "Invalid HLS key at URL: " + t.uri,
            code: Il,
            xhr: t,
          },
          a
        );
      for (
        var i = new DataView(i),
          n = new Uint32Array([
            i.getUint32(0),
            i.getUint32(4),
            i.getUint32(8),
            i.getUint32(12),
          ]),
          r = 0;
        r < s.length;
        r++
      )
        s[r].bytes = n;
      return o(null, a);
    };
  }
  function Bu(i, n) {
    var e = Lo(i.map.bytes);
    if ("mp4" !== e) {
      var t = i.map.resolvedUri || i.map.uri;
      return n({
        internal: !0,
        message:
          "Found unsupported " +
          (e || "unknown") +
          " container for initialization segment at URL: " +
          t,
        code: Il,
      });
    }
    Ru({
      action: "probeMp4Tracks",
      data: i.map.bytes,
      transmuxer: i.transmuxer,
      callback: function (e) {
        var t = e.tracks,
          e = e.data;
        return (
          (i.map.bytes = e),
          t.forEach(function (e) {
            (i.map.tracks = i.map.tracks || {}),
              i.map.tracks[e.type] ||
                ("number" == typeof (i.map.tracks[e.type] = e).id &&
                  e.timescale &&
                  ((i.map.timescales = i.map.timescales || {}),
                  (i.map.timescales[e.id] = e.timescale)));
          }),
          n(null)
        );
      },
    });
  }
  function Fu(e) {
    var i = e.segment,
      n = e.finishProcessingFn,
      r = e.responseType;
    return function (e, t) {
      e = Nu(e, t);
      if (e) return n(e, i);
      e =
        "arraybuffer" !== r && t.responseText
          ? (function (e) {
              for (
                var t = new Uint8Array(new ArrayBuffer(e.length)), i = 0;
                i < e.length;
                i++
              )
                t[i] = e.charCodeAt(i);
              return t.buffer;
            })(t.responseText.substring(i.lastReachedChar || 0))
          : t.response;
      return (
        (i.stats = {
          bandwidth: (t = t).bandwidth,
          bytesReceived: t.bytesReceived || 0,
          roundTripTime: t.roundTripTime || 0,
        }),
        i.key
          ? (i.encryptedBytes = new Uint8Array(e))
          : (i.bytes = new Uint8Array(e)),
        n(null, i)
      );
    };
  }
  function ju(e) {
    var i = e.segment,
      t = e.bytes,
      n = e.trackInfoFn,
      r = e.timingInfoFn,
      a = e.videoSegmentTimingInfoFn,
      s = e.audioSegmentTimingInfoFn,
      o = e.id3Fn,
      u = e.captionsFn,
      l = e.isEndOfTimeline,
      c = e.endedTimelineFn,
      d = e.dataFn,
      h = e.doneFn,
      p = e.onTransmuxerLog,
      e = (i.map && i.map.tracks) || {},
      f = Boolean(e.audio && e.video),
      m = r.bind(null, i, "audio", "start"),
      g = r.bind(null, i, "audio", "end"),
      y = r.bind(null, i, "video", "start"),
      v = r.bind(null, i, "video", "end");
    Ru({
      action: "probeTs",
      transmuxer: i.transmuxer,
      data: t,
      baseStartTime: i.baseStartTime,
      callback: function (e) {
        i.bytes = t = e.data;
        e = e.result;
        e &&
          (n(i, { hasAudio: e.hasAudio, hasVideo: e.hasVideo, isMuxed: f }),
          (n = null),
          e.hasAudio && !f && m(e.audioStart),
          e.hasVideo && y(e.videoStart),
          (y = m = null)),
          Ou({
            bytes: t,
            transmuxer: i.transmuxer,
            audioAppendStart: i.audioAppendStart,
            gopsToAlignWith: i.gopsToAlignWith,
            remux: f,
            onData: function (e) {
              (e.type = "combined" === e.type ? "video" : e.type), d(i, e);
            },
            onTrackInfo: function (e) {
              n && (f && (e.isMuxed = !0), n(i, e));
            },
            onAudioTimingInfo: function (e) {
              m && "undefined" != typeof e.start && (m(e.start), (m = null)),
                g && "undefined" != typeof e.end && g(e.end);
            },
            onVideoTimingInfo: function (e) {
              y && "undefined" != typeof e.start && (y(e.start), (y = null)),
                v && "undefined" != typeof e.end && v(e.end);
            },
            onVideoSegmentTimingInfo: function (e) {
              a(e);
            },
            onAudioSegmentTimingInfo: function (e) {
              s(e);
            },
            onId3: function (e, t) {
              o(i, e, t);
            },
            onCaptions: function (e) {
              u(i, [e]);
            },
            isEndOfTimeline: l,
            onEndedTimeline: function () {
              c();
            },
            onTransmuxerLog: p,
            onDone: function (e) {
              h &&
                ((e.type = "combined" === e.type ? "video" : e.type),
                h(null, i, e));
            },
          });
      },
    });
  }
  function Hu(e) {
    var i = e.segment,
      n = e.bytes,
      t = e.trackInfoFn,
      r = e.timingInfoFn,
      a = e.videoSegmentTimingInfoFn,
      s = e.audioSegmentTimingInfoFn,
      o = e.id3Fn,
      u = e.captionsFn,
      l = e.isEndOfTimeline,
      c = e.endedTimelineFn,
      d = e.dataFn,
      h = e.doneFn,
      p = e.onTransmuxerLog,
      f = new Uint8Array(n);
    if (0 < Js(f, ["moof"]).length) {
      i.isFmp4 = !0;
      var m = i.map.tracks,
        g = { isFmp4: !0, hasVideo: !!m.video, hasAudio: !!m.audio };
      m.audio &&
        m.audio.codec &&
        "enca" !== m.audio.codec &&
        (g.audioCodec = m.audio.codec),
        m.video &&
          m.video.codec &&
          "encv" !== m.video.codec &&
          (g.videoCodec = m.video.codec),
        m.video && m.audio && (g.isMuxed = !0),
        t(i, g);
      var y = function (e) {
        d(i, { data: f, type: g.hasAudio && !g.isMuxed ? "audio" : "video" }),
          e && e.length && u(i, e),
          h(null, i, {});
      };
      Ru({
        action: "probeMp4StartTime",
        timescales: i.map.timescales,
        data: f,
        transmuxer: i.transmuxer,
        callback: function (e) {
          var t = e.data,
            e = e.startTime;
          (n = t.buffer),
            (i.bytes = f = t),
            g.hasAudio && !g.isMuxed && r(i, "audio", "start", e),
            g.hasVideo && r(i, "video", "start", e),
            m.video && t.byteLength && i.transmuxer
              ? Ru({
                  action: "pushMp4Captions",
                  endAction: "mp4Captions",
                  transmuxer: i.transmuxer,
                  data: f,
                  timescales: i.map.timescales,
                  trackIds: [m.video.id],
                  callback: function (e) {
                    (n = e.data.buffer),
                      (i.bytes = f = e.data),
                      e.logs.forEach(function (e) {
                        p(tr.mergeOptions(e, { stream: "mp4CaptionParser" }));
                      }),
                      y(e.captions);
                  },
                })
              : y();
        },
      });
    } else if (i.transmuxer) {
      if (
        ("undefined" == typeof i.container && (i.container = Lo(f)),
        "ts" !== i.container && "aac" !== i.container)
      )
        return t(i, { hasAudio: !1, hasVideo: !1 }), h(null, i, {}), 0;
      ju({
        segment: i,
        bytes: n,
        trackInfoFn: t,
        timingInfoFn: r,
        videoSegmentTimingInfoFn: a,
        audioSegmentTimingInfoFn: s,
        id3Fn: o,
        captionsFn: u,
        isEndOfTimeline: l,
        endedTimelineFn: c,
        dataFn: d,
        doneFn: h,
        onTransmuxerLog: p,
      });
    } else h(null, i, {});
  }
  function qu(e, i) {
    var n = e.id,
      t = e.key,
      r = e.encryptedBytes,
      a = e.decryptionWorker,
      e = function e(t) {
        t.data.source === n &&
          (a.removeEventListener("message", e),
          (t = t.data.decrypted),
          i(new Uint8Array(t.bytes, t.byteOffset, t.byteLength)));
      };
    a.addEventListener("message", e),
      (e = t.bytes.slice
        ? t.bytes.slice()
        : new Uint32Array(Array.prototype.slice.call(t.bytes))),
      a.postMessage(_u({ source: n, encrypted: r, key: e, iv: t.iv }), [
        r.buffer,
        e.buffer,
      ]);
  }
  function Vu(e) {
    var i = e.activeXhrs,
      m = e.decryptionWorker,
      g = e.trackInfoFn,
      y = e.timingInfoFn,
      v = e.videoSegmentTimingInfoFn,
      _ = e.audioSegmentTimingInfoFn,
      b = e.id3Fn,
      T = e.captionsFn,
      S = e.isEndOfTimeline,
      w = e.endedTimelineFn,
      E = e.dataFn,
      k = e.doneFn,
      C = e.onTransmuxerLog,
      n = 0,
      r = !1;
    return function (e, f) {
      if (!r) {
        if (e) return (r = !0), Mu(i), k(e, f);
        if ((n += 1) === i.length) {
          var t = function () {
            if (f.encryptedBytes)
              return (
                (t = (e = {
                  decryptionWorker: m,
                  segment: f,
                  trackInfoFn: g,
                  timingInfoFn: y,
                  videoSegmentTimingInfoFn: v,
                  audioSegmentTimingInfoFn: _,
                  id3Fn: b,
                  captionsFn: T,
                  isEndOfTimeline: S,
                  endedTimelineFn: w,
                  dataFn: E,
                  doneFn: k,
                  onTransmuxerLog: C,
                }).decryptionWorker),
                (i = e.segment),
                (n = e.trackInfoFn),
                (r = e.timingInfoFn),
                (a = e.videoSegmentTimingInfoFn),
                (s = e.audioSegmentTimingInfoFn),
                (o = e.id3Fn),
                (u = e.captionsFn),
                (l = e.isEndOfTimeline),
                (c = e.endedTimelineFn),
                (d = e.dataFn),
                (h = e.doneFn),
                (p = e.onTransmuxerLog),
                void qu(
                  {
                    id: i.requestId,
                    key: i.key,
                    encryptedBytes: i.encryptedBytes,
                    decryptionWorker: t,
                  },
                  function (e) {
                    (i.bytes = e),
                      Hu({
                        segment: i,
                        bytes: i.bytes,
                        trackInfoFn: n,
                        timingInfoFn: r,
                        videoSegmentTimingInfoFn: a,
                        audioSegmentTimingInfoFn: s,
                        id3Fn: o,
                        captionsFn: u,
                        isEndOfTimeline: l,
                        endedTimelineFn: c,
                        dataFn: d,
                        doneFn: h,
                        onTransmuxerLog: p,
                      });
                  }
                )
              );
            var e, t, i, n, r, a, s, o, u, l, c, d, h, p;
            Hu({
              segment: f,
              bytes: f.bytes,
              trackInfoFn: g,
              timingInfoFn: y,
              videoSegmentTimingInfoFn: v,
              audioSegmentTimingInfoFn: _,
              id3Fn: b,
              captionsFn: T,
              isEndOfTimeline: S,
              endedTimelineFn: w,
              dataFn: E,
              doneFn: k,
              onTransmuxerLog: C,
            });
          };
          if (
            ((f.endOfAllRequests = Date.now()),
            f.map && f.map.encryptedBytes && !f.map.bytes)
          )
            return qu(
              {
                decryptionWorker: m,
                id: f.requestId + "-init",
                encryptedBytes: f.map.encryptedBytes,
                key: f.map.key,
              },
              function (e) {
                (f.map.bytes = e),
                  Bu(f, function (e) {
                    return e ? (Mu(i), k(e, f)) : void t();
                  });
              }
            );
          t();
        }
      }
    };
  }
  function Wu(e) {
    var n = e.segment,
      r = e.progressFn;
    return (
      e.trackInfoFn,
      e.timingInfoFn,
      e.videoSegmentTimingInfoFn,
      e.audioSegmentTimingInfoFn,
      e.id3Fn,
      e.captionsFn,
      e.isEndOfTimeline,
      e.endedTimelineFn,
      e.dataFn,
      function (e) {
        var t,
          i = e.target;
        if (!i.aborted)
          return (
            (n.stats = tr.mergeOptions(
              n.stats,
              ((i = (t = e).target),
              ((i = {
                bandwidth: 1 / 0,
                bytesReceived: 0,
                roundTripTime: Date.now() - i.requestTime || 0,
              }).bytesReceived = t.loaded),
              (i.bandwidth = Math.floor(
                (i.bytesReceived / i.roundTripTime) * 8 * 1e3
              )),
              i)
            )),
            !n.stats.firstBytesReceivedAt &&
              n.stats.bytesReceived &&
              (n.stats.firstBytesReceivedAt = Date.now()),
            r(e, n)
          );
      }
    );
  }
  function Gu(e) {
    var t,
      i,
      n,
      r = e.xhr,
      a = e.xhrOptions,
      s = e.decryptionWorker,
      o = e.segment,
      u = e.abortFn,
      l = e.progressFn,
      c = e.trackInfoFn,
      d = e.timingInfoFn,
      h = e.videoSegmentTimingInfoFn,
      p = e.audioSegmentTimingInfoFn,
      f = e.id3Fn,
      m = e.captionsFn,
      g = e.isEndOfTimeline,
      y = e.endedTimelineFn,
      v = e.dataFn,
      _ = e.doneFn,
      e = e.onTransmuxerLog,
      b = [],
      _ = Vu({
        activeXhrs: b,
        decryptionWorker: s,
        trackInfoFn: c,
        timingInfoFn: d,
        videoSegmentTimingInfoFn: h,
        audioSegmentTimingInfoFn: p,
        id3Fn: f,
        captionsFn: m,
        isEndOfTimeline: g,
        endedTimelineFn: y,
        dataFn: v,
        doneFn: _,
        onTransmuxerLog: e,
      });
    o.key &&
      !o.key.bytes &&
      ((e = [o.key]),
      o.map &&
        !o.map.bytes &&
        o.map.key &&
        o.map.key.resolvedUri === o.key.resolvedUri &&
        e.push(o.map.key),
      (e = r(
        tr.mergeOptions(a, {
          uri: o.key.resolvedUri,
          responseType: "arraybuffer",
        }),
        Uu(o, e, _)
      )),
      b.push(e)),
      o.map &&
        !o.map.bytes &&
        (!o.map.key ||
          (o.key && o.key.resolvedUri === o.map.key.resolvedUri) ||
          ((t = r(
            tr.mergeOptions(a, {
              uri: o.map.key.resolvedUri,
              responseType: "arraybuffer",
            }),
            Uu(o, [o.map.key], _)
          )),
          b.push(t)),
        (t = r(
          tr.mergeOptions(a, {
            uri: o.map.resolvedUri,
            responseType: "arraybuffer",
            headers: gu(o.map),
          }),
          ((i = (t = { segment: o, finishProcessingFn: _ }).segment),
          (n = t.finishProcessingFn),
          function (e, t) {
            e = Nu(e, t);
            if (e) return n(e, i);
            e = new Uint8Array(t.response);
            if (i.map.key) return (i.map.encryptedBytes = e), n(null, i);
            (i.map.bytes = e),
              Bu(i, function (e) {
                return e
                  ? ((e.xhr = t), (e.status = t.status), n(e, i))
                  : void n(null, i);
              });
          })
        )),
        b.push(t)),
      (a = tr.mergeOptions(a, {
        uri: (o.part && o.part.resolvedUri) || o.resolvedUri,
        responseType: "arraybuffer",
        headers: gu(o),
      })),
      (a = r(
        a,
        Fu({ segment: o, finishProcessingFn: _, responseType: a.responseType })
      )).addEventListener(
        "progress",
        Wu({
          segment: o,
          progressFn: l,
          trackInfoFn: c,
          timingInfoFn: d,
          videoSegmentTimingInfoFn: h,
          audioSegmentTimingInfoFn: p,
          id3Fn: f,
          captionsFn: m,
          isEndOfTimeline: g,
          endedTimelineFn: y,
          dataFn: v,
        })
      ),
      b.push(a);
    var T = {};
    return (
      b.forEach(function (e) {
        var t, i;
        e.addEventListener(
          "loadend",
          ((t = (e = { loadendState: T, abortFn: u }).loadendState),
          (i = e.abortFn),
          function (e) {
            e.target.aborted &&
              i &&
              !t.calledAbortFn &&
              (i(), (t.calledAbortFn = !0));
          })
        );
      }),
      function () {
        return Mu(b);
      }
    );
  }
  function zu(e, t) {
    return (
      (t = t.attributes || {}),
      e &&
        e.mediaGroups &&
        e.mediaGroups.AUDIO &&
        t.AUDIO &&
        e.mediaGroups.AUDIO[t.AUDIO]
    );
  }
  function Xu(e) {
    var n = {};
    return (
      e.forEach(function (e) {
        var t = e.mediaType,
          i = e.type,
          e = e.details;
        (n[t] = n[t] || []), n[t].push(hr("" + i + e));
      }),
      Object.keys(n).forEach(function (e) {
        return 1 < n[e].length
          ? (Pl(
              "multiple " +
                e +
                " codecs found as attributes: " +
                n[e].join(", ") +
                ". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."
            ),
            void (n[e] = null))
          : void (n[e] = n[e][0]);
      }),
      n
    );
  }
  function Ku(e) {
    var t = 0;
    return e.audio && t++, e.video && t++, t;
  }
  function Yu(e, t) {
    var i,
      n = t.attributes || {},
      r = Xu(
        (function (e) {
          e = e.attributes || {};
          if (e.CODECS) return pr(e.CODECS);
        })(t) || []
      );
    return (
      zu(e, t) &&
        !r.audio &&
        !(function (e, t) {
          if (!zu(e, t)) return !0;
          var i,
            t = t.attributes || {},
            n = e.mediaGroups.AUDIO[t.AUDIO];
          for (i in n) if (!n[i].uri && !n[i].playlists) return !0;
          return !1;
        })(e, t) &&
        (i = Xu(
          (function (e, t) {
            if (!e.mediaGroups.AUDIO || !t) return null;
            var i,
              n = e.mediaGroups.AUDIO[t];
            if (!n) return null;
            for (i in n) {
              var r = n[i];
              if (r.default && r.playlists)
                return pr(r.playlists[0].attributes.CODECS);
            }
            return null;
          })(e, n.AUDIO) || []
        )).audio &&
        (r.audio = i.audio),
      r
    );
  }
  function Qu(e) {
    if (e && e.playlist) {
      var t = e.playlist;
      return JSON.stringify({
        id: t.id,
        bandwidth: e.bandwidth,
        width: e.width,
        height: e.height,
        codecs: (t.attributes && t.attributes.CODECS) || "",
      });
    }
  }
  function $u(e, t) {
    return (e = e && window.getComputedStyle(e)) ? e[t] : "";
  }
  function Ju(e, n) {
    var r = e.slice();
    e.sort(function (e, t) {
      var i = n(e, t);
      return 0 === i ? r.indexOf(e) - r.indexOf(t) : i;
    });
  }
  function Zu(e, t) {
    var i, n;
    return (
      (i =
        (i = e.attributes.BANDWIDTH ? e.attributes.BANDWIDTH : i) ||
        window.Number.MAX_VALUE) -
      (n =
        (n = t.attributes.BANDWIDTH ? t.attributes.BANDWIDTH : n) ||
        window.Number.MAX_VALUE)
    );
  }
  function el(e, t, i, n, r, a) {
    if (e) {
      var s = {
          bandwidth: t,
          width: i,
          height: n,
          limitRenditionByPlayerDimensions: r,
        },
        o = e.playlists;
      fl.isAudioOnly(e) &&
        ((o = a.getAudioTrackPlaylists_()), (s.audioOnly = !0));
      var u = o.map(function (e) {
        var t =
            e.attributes &&
            e.attributes.RESOLUTION &&
            e.attributes.RESOLUTION.width,
          i =
            e.attributes &&
            e.attributes.RESOLUTION &&
            e.attributes.RESOLUTION.height,
          n = e.attributes && e.attributes.BANDWIDTH;
        return {
          bandwidth: n || window.Number.MAX_VALUE,
          width: t,
          height: i,
          playlist: e,
        };
      });
      Ju(u, function (e, t) {
        return e.bandwidth - t.bandwidth;
      });
      var l = (u = u.filter(function (e) {
          return !fl.isIncompatible(e.playlist);
        })).filter(function (e) {
          return fl.isEnabled(e.playlist);
        }),
        e = (l = !l.length
          ? u.filter(function (e) {
              return !fl.isDisabled(e.playlist);
            })
          : l).filter(function (e) {
          return e.bandwidth * Sl.BANDWIDTH_VARIANCE < t;
        }),
        c = e[e.length - 1],
        o = e.filter(function (e) {
          return e.bandwidth === c.bandwidth;
        })[0];
      if (!1 === r) {
        var d = o || l[0] || u[0];
        if (d && d.playlist) {
          r = o ? "bandwidthBestRep" : "sortedPlaylistReps";
          return (
            l[0] && (r = "enabledPlaylistReps"),
            Ll("choosing " + Qu(d) + " using " + r + " with options", s),
            d.playlist
          );
        }
        return Ll("could not choose a playlist with options", s), null;
      }
      d = e.filter(function (e) {
        return e.width && e.height;
      });
      Ju(d, function (e, t) {
        return e.width - t.width;
      });
      var h,
        p,
        f,
        e = d.filter(function (e) {
          return e.width === i && e.height === n;
        }),
        c = e[e.length - 1],
        e = e.filter(function (e) {
          return e.bandwidth === c.bandwidth;
        })[0];
      e ||
        ((p = (h = d.filter(function (e) {
          return e.width > i || e.height > n;
        })).filter(function (e) {
          return e.width === h[0].width && e.height === h[0].height;
        })),
        (c = p[p.length - 1]),
        (p = p.filter(function (e) {
          return e.bandwidth === c.bandwidth;
        })[0])),
        a.experimentalLeastPixelDiffSelector &&
          ((m = d.map(function (e) {
            return (
              (e.pixelDiff = Math.abs(e.width - i) + Math.abs(e.height - n)), e
            );
          })),
          Ju(m, function (e, t) {
            return e.pixelDiff === t.pixelDiff
              ? t.bandwidth - e.bandwidth
              : e.pixelDiff - t.pixelDiff;
          }),
          (f = m[0]));
      var m = f || p || e || o || l[0] || u[0];
      if (m && m.playlist) {
        u = "sortedPlaylistReps";
        return (
          f
            ? (u = "leastPixelDiffRep")
            : p
            ? (u = "resolutionPlusOneRep")
            : e
            ? (u = "resolutionBestRep")
            : o
            ? (u = "bandwidthBestRep")
            : l[0] && (u = "enabledPlaylistReps"),
          Ll("choosing " + Qu(m) + " using " + u + " with options", s),
          m.playlist
        );
      }
      return Ll("could not choose a playlist with options", s), null;
    }
  }
  function tl(e) {
    var t = e.inbandTextTracks,
      i = e.metadataArray,
      r = e.timestampOffset,
      n = e.videoDuration;
    if (i) {
      var a = window.WebKitDataCue || window.VTTCue,
        s = t.metadataTrack_;
      if (
        s &&
        (i.forEach(function (e) {
          var n = e.cueTime + r;
          !("number" != typeof n || window.isNaN(n) || n < 0) &&
            n < 1 / 0 &&
            e.frames.forEach(function (e) {
              var t,
                i = new a(n, n, e.value || e.url || e.data || "");
              (i.frame = e),
                (i.value = e),
                (t = i),
                Object.defineProperties(t.frame, {
                  id: {
                    get: function () {
                      return (
                        tr.log.warn(
                          "cue.frame.id is deprecated. Use cue.value.key instead."
                        ),
                        t.value.key
                      );
                    },
                  },
                  value: {
                    get: function () {
                      return (
                        tr.log.warn(
                          "cue.frame.value is deprecated. Use cue.value.data instead."
                        ),
                        t.value.data
                      );
                    },
                  },
                  privateData: {
                    get: function () {
                      return (
                        tr.log.warn(
                          "cue.frame.privateData is deprecated. Use cue.value.data instead."
                        ),
                        t.value.data
                      );
                    },
                  },
                }),
                s.addCue(i);
            });
        }),
        s.cues && s.cues.length)
      ) {
        for (var o = s.cues, u = [], l = 0; l < o.length; l++)
          o[l] && u.push(o[l]);
        var c = u.reduce(function (e, t) {
            var i = e[t.startTime] || [];
            return i.push(t), (e[t.startTime] = i), e;
          }, {}),
          d = Object.keys(c).sort(function (e, t) {
            return Number(e) - Number(t);
          });
        d.forEach(function (e, t) {
          var e = c[e],
            i = Number(d[t + 1]) || n;
          e.forEach(function (e) {
            e.endTime = i;
          });
        });
      }
    }
  }
  function il(e, t, i) {
    var n, r;
    if (i && i.cues)
      for (n = i.cues.length; n--; )
        (r = i.cues[n]).startTime >= e && r.endTime <= t && i.removeCue(r);
  }
  function nl(e) {
    return "number" == typeof e && isFinite(e);
  }
  function rl(e) {
    var t = e.startOfSegment,
      i = e.duration,
      n = e.segment,
      r = e.part,
      a = e.playlist,
      s = a.mediaSequence,
      o = a.id,
      u = a.segments,
      l = e.mediaIndex,
      c = e.partIndex,
      d = e.timeline,
      h = (void 0 === u ? [] : u).length - 1,
      p = "mediaIndex/partIndex increment";
    return (
      e.getMediaInfoForTime
        ? (p = "getMediaInfoForTime (" + e.getMediaInfoForTime + ")")
        : e.isSyncRequest && (p = "getSyncSegmentCandidate (isSyncRequest)"),
      e.independent && (p += " with independent " + e.independent),
      (a = "number" == typeof c),
      (u = e.segment.uri ? "segment" : "pre-segment"),
      (e = a ? Wo({ preloadSegment: n }) - 1 : 0),
      u +
        " [" +
        (s + l) +
        "/" +
        (s + h) +
        "]" +
        (a ? " part [" + c + "/" + e + "]" : "") +
        " segment start/end [" +
        n.start +
        " => " +
        n.end +
        "]" +
        (a ? " part start/end [" + r.start + " => " + r.end + "]" : "") +
        " startOfSegment [" +
        t +
        "] duration [" +
        i +
        "] timeline [" +
        d +
        "] selected by [" +
        p +
        "] playlist [" +
        o +
        "]"
    );
  }
  function al(e) {
    return e + "TimingInfo";
  }
  function sl(e) {
    var t = e.timelineChangeController,
      i = e.currentTimeline,
      n = e.segmentTimeline,
      r = e.loaderType,
      e = e.audioDisabled;
    if (i !== n) {
      if ("audio" === r) {
        i = t.lastTimelineChange({ type: "main" });
        return !i || i.to !== n;
      }
      if ("main" === r && e) {
        t = t.pendingTimelineChange({ type: "audio" });
        return t && t.to === n ? !1 : !0;
      }
    }
  }
  function ol(e) {
    var t = e.segmentDuration,
      e = e.maxDuration;
    return !!t && Math.round(t) > e + hl;
  }
  function ul(e, t) {
    if ("hls" !== t) return null;
    var n,
      r,
      i =
        ((n = {
          audioTimingInfo: e.audioTimingInfo,
          videoTimingInfo: e.videoTimingInfo,
        }),
        (r = 0),
        ["video", "audio"].forEach(function (e) {
          var t,
            i = n[e + "TimingInfo"];
          i &&
            ((e = i.start),
            (i = i.end),
            "bigint" == typeof e || "bigint" == typeof i
              ? (t = window.BigInt(i) - window.BigInt(e))
              : "number" == typeof e && "number" == typeof i && (t = i - e),
            "undefined" != typeof t && r < t && (r = t));
        }),
        (r =
          "bigint" == typeof r && r < Number.MAX_SAFE_INTEGER ? Number(r) : r));
    if (!i) return null;
    var a = e.playlist.targetDuration,
      s = ol({ segmentDuration: i, maxDuration: 2 * a }),
      t = ol({ segmentDuration: i, maxDuration: a }),
      a =
        "Segment with index " +
        e.mediaIndex +
        " from playlist " +
        e.playlist.id +
        " has a duration of " +
        i +
        " when the reported duration is " +
        e.duration +
        " and the target duration is " +
        a +
        ". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";
    return s || t ? { severity: s ? "warn" : "info", message: a } : null;
  }
  var ll = Ao,
    cl = 9e4,
    dl = ir,
    hl = 1 / 30,
    pl = tr.createTimeRange,
    fl = {
      liveEdgeDelay: Go,
      duration: Xo,
      seekable: function (e, t, i) {
        var n = t || 0,
          i = Yo(e, t, !0, i);
        return null === i ? pl() : pl(n, i);
      },
      getMediaInfoForTime: function (e) {
        for (
          var t = e.playlist,
            i = e.currentTime,
            n = e.startingSegmentIndex,
            r = e.startingPartIndex,
            a = e.startTime,
            s = e.experimentalExactManifestTimings,
            o = i - a,
            u = qo(t),
            l = 0,
            c = 0;
          c < u.length;
          c++
        ) {
          var d = u[c];
          if (
            n === d.segmentIndex &&
            ("number" != typeof r ||
              "number" != typeof d.partIndex ||
              r === d.partIndex)
          ) {
            l = c;
            break;
          }
        }
        if (o < 0) {
          if (0 < l)
            for (var h = l - 1; 0 <= h; h--) {
              var p = u[h];
              if (((o += p.duration), s)) {
                if (o < 0) continue;
              } else if (o + hl <= 0) continue;
              return {
                partIndex: p.partIndex,
                segmentIndex: p.segmentIndex,
                startTime:
                  a -
                  Ko({
                    defaultDuration: t.targetDuration,
                    durationList: u,
                    startIndex: l,
                    endIndex: h,
                  }),
              };
            }
          return {
            partIndex: (u[0] && u[0].partIndex) || null,
            segmentIndex: (u[0] && u[0].segmentIndex) || 0,
            startTime: i,
          };
        }
        if (l < 0) {
          for (var f = l; f < 0; f++)
            if ((o -= t.targetDuration) < 0)
              return {
                partIndex: (u[0] && u[0].partIndex) || null,
                segmentIndex: (u[0] && u[0].segmentIndex) || 0,
                startTime: i,
              };
          l = 0;
        }
        for (var m = l; m < u.length; m++) {
          var g = u[m];
          if (((o -= g.duration), s)) {
            if (0 < o) continue;
          } else if (0 <= o - hl) continue;
          return {
            partIndex: g.partIndex,
            segmentIndex: g.segmentIndex,
            startTime:
              a +
              Ko({
                defaultDuration: t.targetDuration,
                durationList: u,
                startIndex: l,
                endIndex: m,
              }),
          };
        }
        return {
          segmentIndex: u[u.length - 1].segmentIndex,
          partIndex: u[u.length - 1].partIndex,
          startTime: i,
        };
      },
      isEnabled: Jo,
      isDisabled: function (e) {
        return e.disabled;
      },
      isBlacklisted: Qo,
      isIncompatible: $o,
      playlistEnd: Yo,
      isAes: function (e) {
        for (var t = 0; t < e.segments.length; t++)
          if (e.segments[t].key) return !0;
        return !1;
      },
      hasAttribute: Zo,
      estimateSegmentRequestTime: function (e, t, i, n) {
        return Zo("BANDWIDTH", i)
          ? (e * i.attributes.BANDWIDTH - 8 * (n = void 0 === n ? 0 : n)) / t
          : NaN;
      },
      isLowestEnabledRendition: eu,
      isAudioOnly: nu,
      playlistMatch: tu,
      segmentDurationWithParts: Ho,
    },
    ml = tr.log,
    gl = tr.mergeOptions,
    W = tr.EventTarget,
    yl = (function (a) {
      function e(e, t, i) {
        var n;
        if ((void 0 === i && (i = {}), (n = a.call(this) || this), !e))
          throw new Error("A non-empty playlist URL or object is required");
        n.logger_ = Oo("PlaylistLoader");
        var r = i.withCredentials,
          r = void 0 !== r && r,
          i = i.handleManifestRedirects,
          i = void 0 !== i && i;
        (n.src = e),
          (n.vhs_ = t),
          (n.withCredentials = r),
          (n.handleManifestRedirects = i);
        t = t.options_;
        return (
          (n.customTagParsers = (t && t.customTagParsers) || []),
          (n.customTagMappers = (t && t.customTagMappers) || []),
          (n.experimentalLLHLS = (t && t.experimentalLLHLS) || !1),
          tr.browser.IE_VERSION && (n.experimentalLLHLS = !1),
          (n.state = "HAVE_NOTHING"),
          (n.handleMediaupdatetimeout_ = n.handleMediaupdatetimeout_.bind(
            ft(n)
          )),
          n.on("mediaupdatetimeout", n.handleMediaupdatetimeout_),
          n
        );
      }
      mt(e, a);
      var t = e.prototype;
      return (
        (t.handleMediaupdatetimeout_ = function () {
          var e,
            t,
            i = this;
          "HAVE_METADATA" === this.state &&
            ((e = this.media()),
            (t = dl(this.master.uri, e.uri)),
            this.experimentalLLHLS &&
              (t = (function (e, t) {
                if (t.endList || !t.serverControl) return e;
                var i,
                  n,
                  r,
                  a,
                  s = {};
                return (
                  t.serverControl.canBlockReload &&
                    ((r = t.preloadSegment),
                    (i = t.mediaSequence + t.segments.length),
                    r &&
                      ((n = r.parts || []),
                      -1 < (r = Wo(t) - 1) &&
                        r != n.length - 1 &&
                        (s._HLS_part = r),
                      (-1 < r || n.length) && i--),
                    (s._HLS_msn = i)),
                  t.serverControl &&
                    t.serverControl.canSkipUntil &&
                    (s._HLS_skip = t.serverControl.canSkipDateranges
                      ? "v2"
                      : "YES"),
                  Object.keys(s).length &&
                    ((a = new window.URL(e)),
                    ["_HLS_skip", "_HLS_msn", "_HLS_part"].forEach(function (
                      e
                    ) {
                      s.hasOwnProperty(e) && a.searchParams.set(e, s[e]);
                    }),
                    (e = a.toString())),
                  e
                );
              })(t, e)),
            (this.state = "HAVE_CURRENT_METADATA"),
            (this.request = this.vhs_.xhr(
              { uri: t, withCredentials: this.withCredentials },
              function (e, t) {
                if (i.request)
                  return e
                    ? i.playlistRequestError(
                        i.request,
                        i.media(),
                        "HAVE_METADATA"
                      )
                    : void i.haveMetadata({
                        playlistString: i.request.responseText,
                        url: i.media().uri,
                        id: i.media().id,
                      });
              }
            )));
        }),
        (t.playlistRequestError = function (e, t, i) {
          var n = t.uri,
            t = t.id;
          (this.request = null),
            i && (this.state = i),
            (this.error = {
              playlist: this.master.playlists[t],
              status: e.status,
              message: "HLS playlist request error at URL: " + n + ".",
              responseText: e.responseText,
              code: 500 <= e.status ? 4 : 2,
            }),
            this.trigger("error");
        }),
        (t.parseManifest_ = function (e) {
          var t = this,
            i = e.url;
          return (function (e) {
            var t = e.onwarn,
              i = e.oninfo,
              n = e.manifestString,
              r = e.customTagParsers,
              a = void 0 === r ? [] : r,
              r = e.customTagMappers,
              r = void 0 === r ? [] : r,
              e = e.experimentalLLHLS,
              s = new Sr();
            t && s.on("warn", t),
              i && s.on("info", i),
              a.forEach(function (e) {
                return s.addParser(e);
              }),
              r.forEach(function (e) {
                return s.addTagMapper(e);
              }),
              s.push(n),
              s.end();
            var o = s.manifest;
            e ||
              ([
                "preloadSegment",
                "skip",
                "serverControl",
                "renditionReports",
                "partInf",
                "partTargetDuration",
              ].forEach(function (e) {
                o.hasOwnProperty(e) && delete o[e];
              }),
              o.segments &&
                o.segments.forEach(function (t) {
                  ["parts", "preloadHints"].forEach(function (e) {
                    t.hasOwnProperty(e) && delete t[e];
                  });
                })),
              o.targetDuration ||
                ((u = 10),
                o.segments &&
                  o.segments.length &&
                  (u = o.segments.reduce(function (e, t) {
                    return Math.max(e, t.duration);
                  }, 0)),
                t && t("manifest has no targetDuration defaulting to " + u),
                (o.targetDuration = u));
            var u = Vo(o);
            return (
              u.length &&
                !o.partTargetDuration &&
                ((u = u.reduce(function (e, t) {
                  return Math.max(e, t.duration);
                }, 0)),
                t &&
                  (t("manifest has no partTargetDuration defaulting to " + u),
                  ml.error(
                    "LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed."
                  )),
                (o.partTargetDuration = u)),
              o
            );
          })({
            onwarn: function (e) {
              e = e.message;
              return t.logger_("m3u8-parser warn for " + i + ": " + e);
            },
            oninfo: function (e) {
              e = e.message;
              return t.logger_("m3u8-parser info for " + i + ": " + e);
            },
            manifestString: e.manifestString,
            customTagParsers: this.customTagParsers,
            customTagMappers: this.customTagMappers,
            experimentalLLHLS: this.experimentalLLHLS,
          });
        }),
        (t.haveMetadata = function (e) {
          var t = e.playlistString,
            i = e.playlistObject,
            n = e.url,
            e = e.id;
          (this.request = null), (this.state = "HAVE_METADATA");
          t = i || this.parseManifest_({ url: n, manifestString: t });
          (t.lastRequest = Date.now()), su({ playlist: t, uri: n, id: e });
          n = hu(this.master, t);
          (this.targetDuration = t.partTargetDuration || t.targetDuration),
            (this.pendingMedia_ = null),
            n
              ? ((this.master = n), (this.media_ = this.master.playlists[e]))
              : this.trigger("playlistunchanged"),
            this.updateMediaUpdateTimeout_(pu(this.media(), !!n)),
            this.trigger("loadedplaylist");
        }),
        (t.dispose = function () {
          this.trigger("dispose"),
            this.stopRequest(),
            window.clearTimeout(this.mediaUpdateTimeout),
            window.clearTimeout(this.finalRenditionTimeout),
            this.off();
        }),
        (t.stopRequest = function () {
          var e;
          this.request &&
            ((e = this.request),
            (this.request = null),
            (e.onreadystatechange = null),
            e.abort());
        }),
        (t.media = function (i, e) {
          var n = this;
          if (!i) return this.media_;
          if ("HAVE_NOTHING" === this.state)
            throw new Error("Cannot switch media playlist from " + this.state);
          if ("string" == typeof i) {
            if (!this.master.playlists[i])
              throw new Error("Unknown playlist URI: " + i);
            i = this.master.playlists[i];
          }
          if ((window.clearTimeout(this.finalRenditionTimeout), e)) {
            var t =
              ((i.partTargetDuration || i.targetDuration) / 2) * 1e3 || 5e3;
            this.finalRenditionTimeout = window.setTimeout(
              this.media.bind(this, i, !1),
              t
            );
          } else {
            var r = this.state,
              e = !this.media_ || i.id !== this.media_.id,
              t = this.master.playlists[i.id];
            if ((t && t.endList) || (i.endList && i.segments.length))
              return (
                this.request &&
                  ((this.request.onreadystatechange = null),
                  this.request.abort(),
                  (this.request = null)),
                (this.state = "HAVE_METADATA"),
                (this.media_ = i),
                void (
                  e &&
                  (this.trigger("mediachanging"),
                  "HAVE_MASTER" === r
                    ? this.trigger("loadedmetadata")
                    : this.trigger("mediachange"))
                )
              );
            if ((this.updateMediaUpdateTimeout_(pu(i, !0)), e)) {
              if (((this.state = "SWITCHING_MEDIA"), this.request)) {
                if (i.resolvedUri === this.request.url) return;
                (this.request.onreadystatechange = null),
                  this.request.abort(),
                  (this.request = null);
              }
              this.media_ && this.trigger("mediachanging"),
                (this.pendingMedia_ = i),
                (this.request = this.vhs_.xhr(
                  { uri: i.resolvedUri, withCredentials: this.withCredentials },
                  function (e, t) {
                    if (n.request) {
                      if (
                        ((i.lastRequest = Date.now()),
                        (i.resolvedUri = Do(
                          n.handleManifestRedirects,
                          i.resolvedUri,
                          t
                        )),
                        e)
                      )
                        return n.playlistRequestError(n.request, i, r);
                      n.haveMetadata({
                        playlistString: t.responseText,
                        url: i.uri,
                        id: i.id,
                      }),
                        "HAVE_MASTER" === r
                          ? n.trigger("loadedmetadata")
                          : n.trigger("mediachange");
                    }
                  }
                ));
            }
          }
        }),
        (t.pause = function () {
          this.mediaUpdateTimeout &&
            (window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null)),
            this.stopRequest(),
            "HAVE_NOTHING" === this.state && (this.started = !1),
            "SWITCHING_MEDIA" === this.state
              ? this.media_
                ? (this.state = "HAVE_METADATA")
                : (this.state = "HAVE_MASTER")
              : "HAVE_CURRENT_METADATA" === this.state &&
                (this.state = "HAVE_METADATA");
        }),
        (t.load = function (e) {
          var t = this;
          this.mediaUpdateTimeout &&
            (window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null));
          var i = this.media();
          e
            ? ((e = i
                ? ((i.partTargetDuration || i.targetDuration) / 2) * 1e3
                : 5e3),
              (this.mediaUpdateTimeout = window.setTimeout(function () {
                (t.mediaUpdateTimeout = null), t.load();
              }, e)))
            : this.started
            ? i && !i.endList
              ? this.trigger("mediaupdatetimeout")
              : this.trigger("loadedplaylist")
            : this.start();
        }),
        (t.updateMediaUpdateTimeout_ = function (e) {
          var t = this;
          this.mediaUpdateTimeout &&
            (window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null)),
            this.media() &&
              !this.media().endList &&
              (this.mediaUpdateTimeout = window.setTimeout(function () {
                (t.mediaUpdateTimeout = null),
                  t.trigger("mediaupdatetimeout"),
                  t.updateMediaUpdateTimeout_(e);
              }, e));
        }),
        (t.start = function () {
          var i = this;
          if (((this.started = !0), "object" == typeof this.src))
            return (
              this.src.uri || (this.src.uri = window.location.href),
              (this.src.resolvedUri = this.src.uri),
              void setTimeout(function () {
                i.setupInitialPlaylist(i.src);
              }, 0)
            );
          this.request = this.vhs_.xhr(
            { uri: this.src, withCredentials: this.withCredentials },
            function (e, t) {
              if (i.request) {
                if (((i.request = null), e))
                  return (
                    (i.error = {
                      status: t.status,
                      message:
                        "HLS playlist request error at URL: " + i.src + ".",
                      responseText: t.responseText,
                      code: 2,
                    }),
                    "HAVE_NOTHING" === i.state && (i.started = !1),
                    i.trigger("error")
                  );
                i.src = Do(i.handleManifestRedirects, i.src, t);
                t = i.parseManifest_({
                  manifestString: t.responseText,
                  url: i.src,
                });
                i.setupInitialPlaylist(t);
              }
            }
          );
        }),
        (t.srcUri = function () {
          return "string" == typeof this.src ? this.src : this.src.uri;
        }),
        (t.setupInitialPlaylist = function (e) {
          if (((this.state = "HAVE_MASTER"), e.playlists))
            return (
              (this.master = e),
              ou(this.master, this.srcUri()),
              e.playlists.forEach(function (t) {
                (t.segments = cu(t)),
                  t.segments.forEach(function (e) {
                    lu(e, t.resolvedUri);
                  });
              }),
              this.trigger("loadedplaylist"),
              void (this.request || this.media(this.master.playlists[0]))
            );
          var t,
            i,
            n,
            r = this.srcUri() || window.location.href;
          (this.master =
            ((i = ru(0, (t = r))),
            ((n = {
              mediaGroups: {
                AUDIO: {},
                VIDEO: {},
                "CLOSED-CAPTIONS": {},
                SUBTITLES: {},
              },
              uri: window.location.href,
              resolvedUri: window.location.href,
              playlists: [{ uri: t, id: i, resolvedUri: t, attributes: {} }],
            }).playlists[i] = n.playlists[0]),
            (n.playlists[t] = n.playlists[0]),
            n)),
            this.haveMetadata({
              playlistObject: e,
              url: r,
              id: this.master.playlists[0].id,
            }),
            this.trigger("loadedmetadata");
        }),
        e
      );
    })(W),
    vl = tr.xhr,
    _l = tr.mergeOptions,
    zt = Object.freeze({
      __proto__: null,
      createTransferableMessage: _u,
      initSegmentId: bu,
      segmentKeyId: Tu,
      hexDump: Su,
      tagDump: function (e) {
        e = e.bytes;
        return Su(e);
      },
      textRanges: function (e) {
        for (var t, i, n = "", r = 0; r < e.length; r++)
          n += ((i = r), (t = e).start(i) + "-" + t.end(i) + " ");
        return n;
      },
    }),
    ar = tr.EventTarget,
    bl = tr.mergeOptions,
    Tl = (function (a) {
      function e(e, t, i, n) {
        var r;
        void 0 === i && (i = {}),
          ((r = a.call(this) || this).masterPlaylistLoader_ = n || ft(r)),
          n || (r.isMaster_ = !0);
        (n = i.withCredentials),
          (n = void 0 !== n && n),
          (i = i.handleManifestRedirects),
          (i = void 0 !== i && i);
        if (
          ((r.vhs_ = t),
          (r.withCredentials = n),
          (r.handleManifestRedirects = i),
          !e)
        )
          throw new Error("A non-empty playlist URL or object is required");
        return (
          r.on("minimumUpdatePeriod", function () {
            r.refreshXml_();
          }),
          r.on("mediaupdatetimeout", function () {
            r.refreshMedia_(r.media().id);
          }),
          (r.state = "HAVE_NOTHING"),
          (r.loadedPlaylists_ = {}),
          (r.logger_ = Oo("DashPlaylistLoader")),
          r.isMaster_
            ? ((r.masterPlaylistLoader_.srcUrl = e),
              (r.masterPlaylistLoader_.sidxMapping_ = {}))
            : (r.childPlaylist_ = e),
          r
        );
      }
      mt(e, a);
      var t = e.prototype;
      return (
        (t.requestErrored_ = function (e, t, i) {
          return (
            !this.request ||
            ((this.request = null),
            e
              ? ((this.error =
                  "object" != typeof e || e instanceof Error
                    ? {
                        status: t.status,
                        message: "DASH request error at URL: " + t.uri,
                        response: t.response,
                        code: 2,
                      }
                    : e),
                i && (this.state = i),
                this.trigger("error"),
                !0)
              : void 0)
          );
        }),
        (t.addSidxSegments_ = function (a, n, r) {
          var s,
            o,
            u = this,
            l = a.sidx && bs(a.sidx);
          a.sidx && l && !this.masterPlaylistLoader_.sidxMapping_[l]
            ? ((s = Do(this.handleManifestRedirects, a.sidx.resolvedUri)),
              (o = function (e, t) {
                if (!u.requestErrored_(e, t, n)) {
                  var i,
                    e = u.masterPlaylistLoader_.sidxMapping_;
                  try {
                    i = _o(zs(t.response).subarray(8));
                  } catch (e) {
                    return void u.requestErrored_(e, t, n);
                  }
                  return (
                    (e[l] = { sidxInfo: a.sidx, sidx: i }),
                    ms(a, i, a.sidx.resolvedUri),
                    r(!0)
                  );
                }
              }),
              (this.request = Cu(s, this.vhs_.xhr, function (e, t, i, n) {
                if (e) return o(e, t);
                if (!i || "mp4" !== i)
                  return o(
                    {
                      status: t.status,
                      message:
                        "Unsupported " +
                        (i || "unknown") +
                        " container type for sidx segment at URL: " +
                        s,
                      response: "",
                      playlist: a,
                      internal: !0,
                      blacklistDuration: 1 / 0,
                      code: 2,
                    },
                    t
                  );
                var r = a.sidx.byterange,
                  i = r.offset,
                  r = r.length;
                if (n.length >= r + i)
                  return o(e, {
                    response: n.subarray(i, i + r),
                    status: t.status,
                    uri: t.uri,
                  });
                u.request = u.vhs_.xhr(
                  {
                    uri: s,
                    responseType: "arraybuffer",
                    headers: gu({ byterange: a.sidx.byterange }),
                  },
                  o
                );
              })))
            : (this.mediaRequest_ = window.setTimeout(function () {
                return r(!1);
              }, 0));
        }),
        (t.dispose = function () {
          this.trigger("dispose"),
            this.stopRequest(),
            (this.loadedPlaylists_ = {}),
            window.clearTimeout(this.minimumUpdatePeriodTimeout_),
            window.clearTimeout(this.mediaRequest_),
            window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null),
            (this.mediaRequest_ = null),
            (this.minimumUpdatePeriodTimeout_ = null),
            this.masterPlaylistLoader_.createMupOnMedia_ &&
              (this.off(
                "loadedmetadata",
                this.masterPlaylistLoader_.createMupOnMedia_
              ),
              (this.masterPlaylistLoader_.createMupOnMedia_ = null)),
            this.off();
        }),
        (t.hasPendingRequest = function () {
          return this.request || this.mediaRequest_;
        }),
        (t.stopRequest = function () {
          var e;
          this.request &&
            ((e = this.request),
            (this.request = null),
            (e.onreadystatechange = null),
            e.abort());
        }),
        (t.media = function (t) {
          var i = this;
          if (!t) return this.media_;
          if ("HAVE_NOTHING" === this.state)
            throw new Error("Cannot switch media playlist from " + this.state);
          var n = this.state;
          if ("string" == typeof t) {
            if (!this.masterPlaylistLoader_.master.playlists[t])
              throw new Error("Unknown playlist URI: " + t);
            t = this.masterPlaylistLoader_.master.playlists[t];
          }
          var e = !this.media_ || t.id !== this.media_.id;
          if (
            e &&
            this.loadedPlaylists_[t.id] &&
            this.loadedPlaylists_[t.id].endList
          )
            return (
              (this.state = "HAVE_METADATA"),
              (this.media_ = t),
              void (
                e &&
                (this.trigger("mediachanging"), this.trigger("mediachange"))
              )
            );
          e &&
            (this.media_ && this.trigger("mediachanging"),
            this.addSidxSegments_(t, n, function (e) {
              i.haveMetadata({ startingState: n, playlist: t });
            }));
        }),
        (t.haveMetadata = function (e) {
          var t = e.startingState,
            e = e.playlist;
          (this.state = "HAVE_METADATA"),
            (this.loadedPlaylists_[e.id] = e),
            (this.mediaRequest_ = null),
            this.refreshMedia_(e.id),
            "HAVE_MASTER" === t
              ? this.trigger("loadedmetadata")
              : this.trigger("mediachange");
        }),
        (t.pause = function () {
          this.masterPlaylistLoader_.createMupOnMedia_ &&
            (this.off(
              "loadedmetadata",
              this.masterPlaylistLoader_.createMupOnMedia_
            ),
            (this.masterPlaylistLoader_.createMupOnMedia_ = null)),
            this.stopRequest(),
            window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null),
            this.isMaster_ &&
              (window.clearTimeout(
                this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_
              ),
              (this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_ = null)),
            "HAVE_NOTHING" === this.state && (this.started = !1);
        }),
        (t.load = function (e) {
          var t = this;
          window.clearTimeout(this.mediaUpdateTimeout),
            (this.mediaUpdateTimeout = null);
          var i = this.media();
          e
            ? ((e = i ? (i.targetDuration / 2) * 1e3 : 5e3),
              (this.mediaUpdateTimeout = window.setTimeout(function () {
                return t.load();
              }, e)))
            : this.started
            ? i && !i.endList
              ? (this.isMaster_ &&
                  !this.minimumUpdatePeriodTimeout_ &&
                  (this.trigger("minimumUpdatePeriod"),
                  this.updateMinimumUpdatePeriodTimeout_()),
                this.trigger("mediaupdatetimeout"))
              : this.trigger("loadedplaylist")
            : this.start();
        }),
        (t.start = function () {
          var i = this;
          (this.started = !0),
            this.isMaster_
              ? this.requestMaster_(function (e, t) {
                  i.haveMaster_(),
                    i.hasPendingRequest() ||
                      i.media_ ||
                      i.media(i.masterPlaylistLoader_.master.playlists[0]);
                })
              : (this.mediaRequest_ = window.setTimeout(function () {
                  return i.haveMaster_();
                }, 0));
        }),
        (t.requestMaster_ = function (n) {
          var r = this;
          this.request = this.vhs_.xhr(
            {
              uri: this.masterPlaylistLoader_.srcUrl,
              withCredentials: this.withCredentials,
            },
            function (e, t) {
              if (!r.requestErrored_(e, t)) {
                var i = t.responseText !== r.masterPlaylistLoader_.masterXml_;
                return (
                  (r.masterPlaylistLoader_.masterXml_ = t.responseText),
                  t.responseHeaders && t.responseHeaders.date
                    ? (r.masterLoaded_ = Date.parse(t.responseHeaders.date))
                    : (r.masterLoaded_ = Date.now()),
                  (r.masterPlaylistLoader_.srcUrl = Do(
                    r.handleManifestRedirects,
                    r.masterPlaylistLoader_.srcUrl,
                    t
                  )),
                  i
                    ? (r.handleMaster_(),
                      void r.syncClientServerClock_(function () {
                        return n(t, i);
                      }))
                    : n(t, i)
                );
              }
              "HAVE_NOTHING" === r.state && (r.started = !1);
            }
          );
        }),
        (t.syncClientServerClock_ = function (i) {
          var n = this,
            r = Gs(this.masterPlaylistLoader_.masterXml_);
          return null === r
            ? ((this.masterPlaylistLoader_.clientOffset_ =
                this.masterLoaded_ - Date.now()),
              i())
            : "DIRECT" === r.method
            ? ((this.masterPlaylistLoader_.clientOffset_ =
                r.value - Date.now()),
              i())
            : void (this.request = this.vhs_.xhr(
                {
                  uri: dl(this.masterPlaylistLoader_.srcUrl, r.value),
                  method: r.method,
                  withCredentials: this.withCredentials,
                },
                function (e, t) {
                  if (n.request) {
                    if (e)
                      return (
                        (n.masterPlaylistLoader_.clientOffset_ =
                          n.masterLoaded_ - Date.now()),
                        i()
                      );
                    t =
                      "HEAD" === r.method
                        ? t.responseHeaders && t.responseHeaders.date
                          ? Date.parse(t.responseHeaders.date)
                          : n.masterLoaded_
                        : Date.parse(t.responseText);
                    (n.masterPlaylistLoader_.clientOffset_ = t - Date.now()),
                      i();
                  }
                }
              ));
        }),
        (t.haveMaster_ = function () {
          (this.state = "HAVE_MASTER"),
            this.isMaster_
              ? this.trigger("loadedplaylist")
              : this.media_ || this.media(this.childPlaylist_);
        }),
        (t.handleMaster_ = function () {
          this.mediaRequest_ = null;
          var e,
            t,
            i,
            n,
            r = this.masterPlaylistLoader_.master,
            t =
              ((a = {
                masterXml: this.masterPlaylistLoader_.masterXml_,
                srcUrl: this.masterPlaylistLoader_.srcUrl,
                clientOffset: this.masterPlaylistLoader_.clientOffset_,
                sidxMapping: this.masterPlaylistLoader_.sidxMapping_,
                previousManifest: r,
              }),
              (e = a.masterXml),
              (t = a.srcUrl),
              (i = a.clientOffset),
              (n = a.sidxMapping),
              (a = a.previousManifest),
              (a = Ws(e, {
                manifestUri: t,
                clientOffset: i,
                sidxMapping: n,
                previousManifest: a,
              })),
              ou(a, t),
              a);
          r &&
            (t = (function (e, t, i) {
              for (
                var a = !0,
                  s = bl(e, {
                    duration: t.duration,
                    minimumUpdatePeriod: t.minimumUpdatePeriod,
                    timelineStarts: t.timelineStarts,
                  }),
                  n = 0;
                n < t.playlists.length;
                n++
              ) {
                var r,
                  o = t.playlists[n];
                o.sidx &&
                  ((r = bs(o.sidx)),
                  i &&
                    i[r] &&
                    i[r].sidx &&
                    ms(o, i[r].sidx, o.sidx.resolvedUri));
                o = hu(s, o, Iu);
                o && ((s = o), (a = !1));
              }
              return (
                au(t, function (e, t, i, n) {
                  var r;
                  e.playlists &&
                    e.playlists.length &&
                    ((r = e.playlists[0].id),
                    (e = hu(s, e.playlists[0], Iu)) &&
                      (((s = e).mediaGroups[t][i][n].playlists[0] =
                        s.playlists[r]),
                      (a = !1)));
                }),
                (a = t.minimumUpdatePeriod === e.minimumUpdatePeriod && a)
                  ? null
                  : s
              );
            })(r, t, this.masterPlaylistLoader_.sidxMapping_)),
            (this.masterPlaylistLoader_.master = t || r);
          var a =
            this.masterPlaylistLoader_.master.locations &&
            this.masterPlaylistLoader_.master.locations[0];
          return (
            a &&
              a !== this.masterPlaylistLoader_.srcUrl &&
              (this.masterPlaylistLoader_.srcUrl = a),
            (!r || (t && t.minimumUpdatePeriod !== r.minimumUpdatePeriod)) &&
              this.updateMinimumUpdatePeriodTimeout_(),
            Boolean(t)
          );
        }),
        (t.updateMinimumUpdatePeriodTimeout_ = function () {
          var e = this.masterPlaylistLoader_;
          e.createMupOnMedia_ &&
            (e.off("loadedmetadata", e.createMupOnMedia_),
            (e.createMupOnMedia_ = null)),
            e.minimumUpdatePeriodTimeout_ &&
              (window.clearTimeout(e.minimumUpdatePeriodTimeout_),
              (e.minimumUpdatePeriodTimeout_ = null));
          var t = e.master && e.master.minimumUpdatePeriod;
          0 === t &&
            (e.media()
              ? (t = 1e3 * e.media().targetDuration)
              : ((e.createMupOnMedia_ = e.updateMinimumUpdatePeriodTimeout_),
                e.one("loadedmetadata", e.createMupOnMedia_))),
            "number" != typeof t || t <= 0
              ? t < 0 &&
                this.logger_(
                  "found invalid minimumUpdatePeriod of " +
                    t +
                    ", not setting a timeout"
                )
              : this.createMUPTimeout_(t);
        }),
        (t.createMUPTimeout_ = function (e) {
          var t = this.masterPlaylistLoader_;
          t.minimumUpdatePeriodTimeout_ = window.setTimeout(function () {
            (t.minimumUpdatePeriodTimeout_ = null),
              t.trigger("minimumUpdatePeriod"),
              t.createMUPTimeout_(e);
          }, e);
        }),
        (t.refreshXml_ = function () {
          var i = this;
          this.requestMaster_(function (e, t) {
            var r, a;
            t &&
              (i.media_ &&
                (i.media_ =
                  i.masterPlaylistLoader_.master.playlists[i.media_.id]),
              (i.masterPlaylistLoader_.sidxMapping_ =
                ((t = i.masterPlaylistLoader_.master),
                (r = i.masterPlaylistLoader_.sidxMapping_),
                (a = xu(t.playlists, r)),
                au(t, function (e, t, i, n) {
                  e.playlists &&
                    e.playlists.length &&
                    ((e = e.playlists), (a = bl(a, xu(e, r))));
                }),
                a)),
              i.addSidxSegments_(i.media(), i.state, function (e) {
                i.refreshMedia_(i.media().id);
              }));
          });
        }),
        (t.refreshMedia_ = function (e) {
          var t = this;
          if (!e) throw new Error("refreshMedia_ must take a media id");
          this.media_ && this.isMaster_ && this.handleMaster_();
          var i = this.masterPlaylistLoader_.master.playlists,
            n = !this.media_ || this.media_ !== i[e];
          n ? (this.media_ = i[e]) : this.trigger("playlistunchanged"),
            this.mediaUpdateTimeout ||
              (function e() {
                t.media().endList ||
                  (t.mediaUpdateTimeout = window.setTimeout(function () {
                    t.trigger("mediaupdatetimeout"), e();
                  }, pu(t.media(), Boolean(n))));
              })(),
            this.trigger("loadedplaylist");
        }),
        e
      );
    })(ar),
    Sl = {
      GOAL_BUFFER_LENGTH: 30,
      MAX_GOAL_BUFFER_LENGTH: 60,
      BACK_BUFFER_LENGTH: 30,
      GOAL_BUFFER_LENGTH_RATE: 1,
      INITIAL_BANDWIDTH: 4194304,
      BANDWIDTH_VARIANCE: 1.2,
      BUFFER_LOW_WATER_LINE: 0,
      MAX_BUFFER_LOW_WATER_LINE: 30,
      EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE: 16,
      BUFFER_LOW_WATER_LINE_RATE: 1,
      BUFFER_HIGH_WATER_LINE: 30,
    },
    x = function (n) {
      return function () {
        var e = (function (t) {
            try {
              return URL.createObjectURL(
                new Blob([t], { type: "application/javascript" })
              );
            } catch (e) {
              var i = new BlobBuilder();
              return i.append(t), URL.createObjectURL(i.getBlob());
            }
          })(n),
          t = Au(new Worker(e));
        t.objURL = e;
        var i = t.terminate;
        return (
          (t.on = t.addEventListener),
          (t.off = t.removeEventListener),
          (t.terminate = function () {
            return URL.revokeObjectURL(e), i.call(this);
          }),
          t
        );
      };
    },
    U = function (e) {
      return (
        "var browserWorkerPolyFill = " +
        Au.toString() +
        ";\nbrowserWorkerPolyFill(self);\n" +
        e
      );
    },
    W = function (e) {
      return e
        .toString()
        .replace(/^function.+?{/, "")
        .slice(0, -1);
    },
    wl = x(
      U(
        W(function () {
          var e = function () {
            this.init = function () {
              var a = {};
              (this.on = function (e, t) {
                a[e] || (a[e] = []), (a[e] = a[e].concat(t));
              }),
                (this.off = function (e, t) {
                  return (
                    !!a[e] &&
                    ((t = a[e].indexOf(t)),
                    (a[e] = a[e].slice()),
                    a[e].splice(t, 1),
                    -1 < t)
                  );
                }),
                (this.trigger = function (e) {
                  var t,
                    i,
                    n,
                    r = a[e];
                  if (r)
                    if (2 === arguments.length)
                      for (i = r.length, t = 0; t < i; ++t)
                        r[t].call(this, arguments[1]);
                    else {
                      for (
                        n = [], t = arguments.length, t = 1;
                        t < arguments.length;
                        ++t
                      )
                        n.push(arguments[t]);
                      for (i = r.length, t = 0; t < i; ++t) r[t].apply(this, n);
                    }
                }),
                (this.dispose = function () {
                  a = {};
                });
            };
          };
          (e.prototype.pipe = function (t) {
            return (
              this.on("data", function (e) {
                t.push(e);
              }),
              this.on("done", function (e) {
                t.flush(e);
              }),
              this.on("partialdone", function (e) {
                t.partialFlush(e);
              }),
              this.on("endedtimeline", function (e) {
                t.endTimeline(e);
              }),
              this.on("reset", function (e) {
                t.reset(e);
              }),
              t
            );
          }),
            (e.prototype.push = function (e) {
              this.trigger("data", e);
            }),
            (e.prototype.flush = function (e) {
              this.trigger("done", e);
            }),
            (e.prototype.partialFlush = function (e) {
              this.trigger("partialdone", e);
            }),
            (e.prototype.endTimeline = function (e) {
              this.trigger("endedtimeline", e);
            }),
            (e.prototype.reset = function (e) {
              this.trigger("reset", e);
            });
          var u,
            t,
            i,
            n,
            r,
            a,
            s,
            o,
            l,
            c,
            d,
            h,
            p,
            f,
            m,
            g,
            y,
            v,
            _,
            b,
            T,
            S,
            w,
            E,
            k,
            C,
            I,
            x,
            A,
            P,
            L,
            D,
            O,
            R,
            M,
            N,
            U,
            B,
            F,
            j = e,
            H = Math.pow(2, 32),
            q = {
              getUint64: function (e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return t.getBigUint64
                  ? (e = t.getBigUint64(0)) < Number.MAX_SAFE_INTEGER
                    ? Number(e)
                    : e
                  : t.getUint32(0) * H + t.getUint32(4);
              },
              MAX_UINT32: H,
            },
            V = q.MAX_UINT32;
          !(function () {
            if (
              ((T = {
                avc1: [],
                avcC: [],
                btrt: [],
                dinf: [],
                dref: [],
                esds: [],
                ftyp: [],
                hdlr: [],
                mdat: [],
                mdhd: [],
                mdia: [],
                mfhd: [],
                minf: [],
                moof: [],
                moov: [],
                mp4a: [],
                mvex: [],
                mvhd: [],
                pasp: [],
                sdtp: [],
                smhd: [],
                stbl: [],
                stco: [],
                stsc: [],
                stsd: [],
                stsz: [],
                stts: [],
                styp: [],
                tfdt: [],
                tfhd: [],
                traf: [],
                trak: [],
                trun: [],
                trex: [],
                tkhd: [],
                vmhd: [],
              }),
              "undefined" != typeof Uint8Array)
            ) {
              for (var e in T)
                T.hasOwnProperty(e) &&
                  (T[e] = [
                    e.charCodeAt(0),
                    e.charCodeAt(1),
                    e.charCodeAt(2),
                    e.charCodeAt(3),
                  ]);
              (S = new Uint8Array([
                "i".charCodeAt(0),
                "s".charCodeAt(0),
                "o".charCodeAt(0),
                "m".charCodeAt(0),
              ])),
                (E = new Uint8Array([
                  "a".charCodeAt(0),
                  "v".charCodeAt(0),
                  "c".charCodeAt(0),
                  "1".charCodeAt(0),
                ])),
                (w = new Uint8Array([0, 0, 0, 1])),
                (k = new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0,
                  0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100,
                  108, 101, 114, 0,
                ])),
                (C = new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0,
                  0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100,
                  108, 101, 114, 0,
                ])),
                (I = { video: k, audio: C }),
                (P = new Uint8Array([
                  0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0,
                  0, 1,
                ])),
                (A = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0])),
                (L = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0])),
                (D = L),
                (O = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])),
                (R = L),
                (x = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]));
            }
          })(),
            (u = function (e) {
              for (var t, i = [], n = 0, r = 1; r < arguments.length; r++)
                i.push(arguments[r]);
              for (r = i.length; r--; ) n += i[r].byteLength;
              for (
                t = new Uint8Array(n + 8),
                  new DataView(t.buffer, t.byteOffset, t.byteLength).setUint32(
                    0,
                    t.byteLength
                  ),
                  t.set(e, 4),
                  r = 0,
                  n = 8;
                r < i.length;
                r++
              )
                t.set(i[r], n), (n += i[r].byteLength);
              return t;
            }),
            (t = function () {
              return u(T.dinf, u(T.dref, P));
            }),
            (i = function (e) {
              return u(
                T.esds,
                new Uint8Array([
                  0,
                  0,
                  0,
                  0,
                  3,
                  25,
                  0,
                  0,
                  0,
                  4,
                  17,
                  64,
                  21,
                  0,
                  6,
                  0,
                  0,
                  0,
                  218,
                  192,
                  0,
                  0,
                  218,
                  192,
                  5,
                  2,
                  (e.audioobjecttype << 3) | (e.samplingfrequencyindex >>> 1),
                  (e.samplingfrequencyindex << 7) | (e.channelcount << 3),
                  6,
                  1,
                  2,
                ])
              );
            }),
            (f = function (e) {
              return u(T.hdlr, I[e]);
            }),
            (p = function (e) {
              var t = new Uint8Array([
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                2,
                0,
                0,
                0,
                3,
                0,
                1,
                95,
                144,
                (e.duration >>> 24) & 255,
                (e.duration >>> 16) & 255,
                (e.duration >>> 8) & 255,
                255 & e.duration,
                85,
                196,
                0,
                0,
              ]);
              return (
                e.samplerate &&
                  ((t[12] = (e.samplerate >>> 24) & 255),
                  (t[13] = (e.samplerate >>> 16) & 255),
                  (t[14] = (e.samplerate >>> 8) & 255),
                  (t[15] = 255 & e.samplerate)),
                u(T.mdhd, t)
              );
            }),
            (h = function (e) {
              return u(T.mdia, p(e), f(e.type), a(e));
            }),
            (r = function (e) {
              return u(
                T.mfhd,
                new Uint8Array([
                  0,
                  0,
                  0,
                  0,
                  (4278190080 & e) >> 24,
                  (16711680 & e) >> 16,
                  (65280 & e) >> 8,
                  255 & e,
                ])
              );
            }),
            (a = function (e) {
              return u(
                T.minf,
                "video" === e.type ? u(T.vmhd, x) : u(T.smhd, A),
                t(),
                g(e)
              );
            }),
            (We = function (e, t) {
              for (var i = [], n = t.length; n--; ) i[n] = v(t[n]);
              return u.apply(null, [T.moof, r(e)].concat(i));
            }),
            (s = function (e) {
              for (var t = e.length, i = []; t--; ) i[t] = c(e[t]);
              return u.apply(
                null,
                [T.moov, l(4294967295)].concat(i).concat(o(e))
              );
            }),
            (o = function (e) {
              for (var t = e.length, i = []; t--; ) i[t] = _(e[t]);
              return u.apply(null, [T.mvex].concat(i));
            }),
            (l = function (e) {
              e = new Uint8Array([
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                2,
                0,
                1,
                95,
                144,
                (4278190080 & e) >> 24,
                (16711680 & e) >> 16,
                (65280 & e) >> 8,
                255 & e,
                0,
                1,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                64,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                255,
                255,
                255,
                255,
              ]);
              return u(T.mvhd, e);
            }),
            (m = function (e) {
              for (
                var t,
                  i = e.samples || [],
                  n = new Uint8Array(4 + i.length),
                  r = 0;
                r < i.length;
                r++
              )
                (t = i[r].flags),
                  (n[r + 4] =
                    (t.dependsOn << 4) |
                    (t.isDependedOn << 2) |
                    t.hasRedundancy);
              return u(T.sdtp, n);
            }),
            (g = function (e) {
              return u(
                T.stbl,
                y(e),
                u(T.stts, R),
                u(T.stsc, D),
                u(T.stsz, O),
                u(T.stco, L)
              );
            }),
            (y = function (e) {
              return u(
                T.stsd,
                new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]),
                ("video" === e.type ? M : N)(e)
              );
            }),
            (M = function (e) {
              for (
                var t,
                  i,
                  n = e.sps || [],
                  r = e.pps || [],
                  a = [],
                  s = [],
                  o = 0;
                o < n.length;
                o++
              )
                a.push((65280 & n[o].byteLength) >>> 8),
                  a.push(255 & n[o].byteLength),
                  (a = a.concat(Array.prototype.slice.call(n[o])));
              for (o = 0; o < r.length; o++)
                s.push((65280 & r[o].byteLength) >>> 8),
                  s.push(255 & r[o].byteLength),
                  (s = s.concat(Array.prototype.slice.call(r[o])));
              return (
                (t = [
                  T.avc1,
                  new Uint8Array([
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    (65280 & e.width) >> 8,
                    255 & e.width,
                    (65280 & e.height) >> 8,
                    255 & e.height,
                    0,
                    72,
                    0,
                    0,
                    0,
                    72,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    1,
                    19,
                    118,
                    105,
                    100,
                    101,
                    111,
                    106,
                    115,
                    45,
                    99,
                    111,
                    110,
                    116,
                    114,
                    105,
                    98,
                    45,
                    104,
                    108,
                    115,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    24,
                    17,
                    17,
                  ]),
                  u(
                    T.avcC,
                    new Uint8Array(
                      [
                        1,
                        e.profileIdc,
                        e.profileCompatibility,
                        e.levelIdc,
                        255,
                      ].concat([n.length], a, [r.length], s)
                    )
                  ),
                  u(
                    T.btrt,
                    new Uint8Array([
                      0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192,
                    ])
                  ),
                ]),
                e.sarRatio &&
                  ((i = e.sarRatio[0]),
                  (e = e.sarRatio[1]),
                  t.push(
                    u(
                      T.pasp,
                      new Uint8Array([
                        (4278190080 & i) >> 24,
                        (16711680 & i) >> 16,
                        (65280 & i) >> 8,
                        255 & i,
                        (4278190080 & e) >> 24,
                        (16711680 & e) >> 16,
                        (65280 & e) >> 8,
                        255 & e,
                      ])
                    )
                  )),
                u.apply(null, t)
              );
            }),
            (N = function (e) {
              return u(
                T.mp4a,
                new Uint8Array([
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  (65280 & e.channelcount) >> 8,
                  255 & e.channelcount,
                  (65280 & e.samplesize) >> 8,
                  255 & e.samplesize,
                  0,
                  0,
                  0,
                  0,
                  (65280 & e.samplerate) >> 8,
                  255 & e.samplerate,
                  0,
                  0,
                ]),
                i(e)
              );
            }),
            (d = function (e) {
              e = new Uint8Array([
                0,
                0,
                0,
                7,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                (4278190080 & e.id) >> 24,
                (16711680 & e.id) >> 16,
                (65280 & e.id) >> 8,
                255 & e.id,
                0,
                0,
                0,
                0,
                (4278190080 & e.duration) >> 24,
                (16711680 & e.duration) >> 16,
                (65280 & e.duration) >> 8,
                255 & e.duration,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                64,
                0,
                0,
                0,
                (65280 & e.width) >> 8,
                255 & e.width,
                0,
                0,
                (65280 & e.height) >> 8,
                255 & e.height,
                0,
                0,
              ]);
              return u(T.tkhd, e);
            }),
            (v = function (e) {
              var t,
                i = u(
                  T.tfhd,
                  new Uint8Array([
                    0,
                    0,
                    0,
                    58,
                    (4278190080 & e.id) >> 24,
                    (16711680 & e.id) >> 16,
                    (65280 & e.id) >> 8,
                    255 & e.id,
                    0,
                    0,
                    0,
                    1,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                  ])
                ),
                n = Math.floor(e.baseMediaDecodeTime / V),
                r = Math.floor(e.baseMediaDecodeTime % V),
                n = u(
                  T.tfdt,
                  new Uint8Array([
                    1,
                    0,
                    0,
                    0,
                    (n >>> 24) & 255,
                    (n >>> 16) & 255,
                    (n >>> 8) & 255,
                    255 & n,
                    (r >>> 24) & 255,
                    (r >>> 16) & 255,
                    (r >>> 8) & 255,
                    255 & r,
                  ])
                );
              return "audio" === e.type
                ? ((t = b(e, 92)), u(T.traf, i, n, t))
                : ((r = m(e)),
                  (t = b(e, r.length + 92)),
                  u(T.traf, i, n, t, r));
            }),
            (c = function (e) {
              return (
                (e.duration = e.duration || 4294967295), u(T.trak, d(e), h(e))
              );
            }),
            (_ = function (e) {
              var t = new Uint8Array([
                0,
                0,
                0,
                0,
                (4278190080 & e.id) >> 24,
                (16711680 & e.id) >> 16,
                (65280 & e.id) >> 8,
                255 & e.id,
                0,
                0,
                0,
                1,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                0,
                1,
              ]);
              return "video" !== e.type && (t[t.length - 1] = 0), u(T.trex, t);
            }),
            (U = function (e, t) {
              var i = 0,
                n = 0,
                r = 0,
                a = 0;
              return (
                e.length &&
                  (void 0 !== e[0].duration && (i = 1),
                  void 0 !== e[0].size && (n = 2),
                  void 0 !== e[0].flags && (r = 4),
                  void 0 !== e[0].compositionTimeOffset && (a = 8)),
                [
                  0,
                  0,
                  i | n | r | a,
                  1,
                  (4278190080 & e.length) >>> 24,
                  (16711680 & e.length) >>> 16,
                  (65280 & e.length) >>> 8,
                  255 & e.length,
                  (4278190080 & t) >>> 24,
                  (16711680 & t) >>> 16,
                  (65280 & t) >>> 8,
                  255 & t,
                ]
              );
            }),
            (B = function (e, t) {
              var i,
                n,
                r,
                a,
                s = e.samples || [];
              for (
                t += 20 + 16 * s.length,
                  t = U(s, t),
                  (n = new Uint8Array(t.length + 16 * s.length)).set(t),
                  i = t.length,
                  a = 0;
                a < s.length;
                a++
              )
                (r = s[a]),
                  (n[i++] = (4278190080 & r.duration) >>> 24),
                  (n[i++] = (16711680 & r.duration) >>> 16),
                  (n[i++] = (65280 & r.duration) >>> 8),
                  (n[i++] = 255 & r.duration),
                  (n[i++] = (4278190080 & r.size) >>> 24),
                  (n[i++] = (16711680 & r.size) >>> 16),
                  (n[i++] = (65280 & r.size) >>> 8),
                  (n[i++] = 255 & r.size),
                  (n[i++] = (r.flags.isLeading << 2) | r.flags.dependsOn),
                  (n[i++] =
                    (r.flags.isDependedOn << 6) |
                    (r.flags.hasRedundancy << 4) |
                    (r.flags.paddingValue << 1) |
                    r.flags.isNonSyncSample),
                  (n[i++] = 61440 & r.flags.degradationPriority),
                  (n[i++] = 15 & r.flags.degradationPriority),
                  (n[i++] = (4278190080 & r.compositionTimeOffset) >>> 24),
                  (n[i++] = (16711680 & r.compositionTimeOffset) >>> 16),
                  (n[i++] = (65280 & r.compositionTimeOffset) >>> 8),
                  (n[i++] = 255 & r.compositionTimeOffset);
              return u(T.trun, n);
            }),
            (F = function (e, t) {
              var i,
                n,
                r,
                a,
                s = e.samples || [];
              for (
                t += 20 + 8 * s.length,
                  t = U(s, t),
                  (i = new Uint8Array(t.length + 8 * s.length)).set(t),
                  n = t.length,
                  a = 0;
                a < s.length;
                a++
              )
                (r = s[a]),
                  (i[n++] = (4278190080 & r.duration) >>> 24),
                  (i[n++] = (16711680 & r.duration) >>> 16),
                  (i[n++] = (65280 & r.duration) >>> 8),
                  (i[n++] = 255 & r.duration),
                  (i[n++] = (4278190080 & r.size) >>> 24),
                  (i[n++] = (16711680 & r.size) >>> 16),
                  (i[n++] = (65280 & r.size) >>> 8),
                  (i[n++] = 255 & r.size);
              return u(T.trun, i);
            }),
            (b = function (e, t) {
              return ("audio" === e.type ? F : B)(e, t);
            });
          n = function () {
            return u(T.ftyp, S, w, S, E);
          };
          function W(e, t) {
            var i = {
              size: 0,
              flags: {
                isLeading: 0,
                dependsOn: 1,
                isDependedOn: 0,
                hasRedundancy: 0,
                degradationPriority: 0,
                isNonSyncSample: 1,
              },
            };
            return (
              (i.dataOffset = t),
              (i.compositionTimeOffset = e.pts - e.dts),
              (i.duration = e.duration),
              (i.size = 4 * e.length),
              (i.size += e.byteLength),
              e.keyFrame &&
                ((i.flags.dependsOn = 2), (i.flags.isNonSyncSample = 0)),
              i
            );
          }
          function G(e) {
            for (var t = []; e--; ) t.push(0);
            return t;
          }
          function z() {
            var e, i;
            return (
              X ||
                ((e = {
                  96e3: [ie, [227, 64], G(154), [56]],
                  88200: [ie, [231], G(170), [56]],
                  64e3: [ie, [248, 192], G(240), [56]],
                  48e3: [ie, [255, 192], G(268), [55, 148, 128], G(54), [112]],
                  44100: [ie, [255, 192], G(268), [55, 163, 128], G(84), [112]],
                  32e3: [ie, [255, 192], G(268), [55, 234], G(226), [112]],
                  24e3: [
                    ie,
                    [255, 192],
                    G(268),
                    [55, 255, 128],
                    G(268),
                    [111, 112],
                    G(126),
                    [224],
                  ],
                  16e3: [
                    ie,
                    [255, 192],
                    G(268),
                    [55, 255, 128],
                    G(268),
                    [111, 255],
                    G(269),
                    [223, 108],
                    G(195),
                    [1, 192],
                  ],
                  12e3: [
                    ne,
                    G(268),
                    [3, 127, 248],
                    G(268),
                    [6, 255, 240],
                    G(268),
                    [13, 255, 224],
                    G(268),
                    [27, 253, 128],
                    G(259),
                    [56],
                  ],
                  11025: [
                    ne,
                    G(268),
                    [3, 127, 248],
                    G(268),
                    [6, 255, 240],
                    G(268),
                    [13, 255, 224],
                    G(268),
                    [27, 255, 192],
                    G(268),
                    [55, 175, 128],
                    G(108),
                    [112],
                  ],
                  8e3: [ne, G(268), [3, 121, 16], G(47), [7]],
                }),
                (i = e),
                (X = Object.keys(i).reduce(function (e, t) {
                  return (
                    (e[t] = new Uint8Array(
                      i[t].reduce(function (e, t) {
                        return e.concat(t);
                      }, [])
                    )),
                    e
                  );
                }, {}))),
              X
            );
          }
          var X,
            K = function (e) {
              return u(T.mdat, e);
            },
            Y = We,
            Q = function (e) {
              var t = n(),
                i = s(e),
                e = new Uint8Array(t.byteLength + i.byteLength);
              return e.set(t), e.set(i, t.byteLength), e;
            },
            $ = function (e) {
              var t,
                i,
                n = [],
                r = [];
              for (
                r.byteLength = 0,
                  r.nalCount = 0,
                  r.duration = 0,
                  t = n.byteLength = 0;
                t < e.length;
                t++
              )
                "access_unit_delimiter_rbsp" === (i = e[t]).nalUnitType
                  ? (n.length &&
                      ((n.duration = i.dts - n.dts),
                      (r.byteLength += n.byteLength),
                      (r.nalCount += n.length),
                      (r.duration += n.duration),
                      r.push(n)),
                    ((n = [i]).byteLength = i.data.byteLength),
                    (n.pts = i.pts),
                    (n.dts = i.dts))
                  : ("slice_layer_without_partitioning_rbsp_idr" ===
                      i.nalUnitType && (n.keyFrame = !0),
                    (n.duration = i.dts - n.dts),
                    (n.byteLength += i.data.byteLength),
                    n.push(i));
              return (
                r.length &&
                  (!n.duration || n.duration <= 0) &&
                  (n.duration = r[r.length - 1].duration),
                (r.byteLength += n.byteLength),
                (r.nalCount += n.length),
                (r.duration += n.duration),
                r.push(n),
                r
              );
            },
            J = function (e) {
              var t,
                i,
                n = [],
                r = [];
              for (
                n.byteLength = 0,
                  n.nalCount = 0,
                  n.duration = 0,
                  n.pts = e[0].pts,
                  n.dts = e[0].dts,
                  r.byteLength = 0,
                  r.nalCount = 0,
                  r.duration = 0,
                  r.pts = e[0].pts,
                  r.dts = e[0].dts,
                  t = 0;
                t < e.length;
                t++
              )
                (i = e[t]).keyFrame
                  ? (n.length &&
                      (r.push(n),
                      (r.byteLength += n.byteLength),
                      (r.nalCount += n.nalCount),
                      (r.duration += n.duration)),
                    ((n = [i]).nalCount = i.length),
                    (n.byteLength = i.byteLength),
                    (n.pts = i.pts),
                    (n.dts = i.dts),
                    (n.duration = i.duration))
                  : ((n.duration += i.duration),
                    (n.nalCount += i.length),
                    (n.byteLength += i.byteLength),
                    n.push(i));
              return (
                r.length &&
                  n.duration <= 0 &&
                  (n.duration = r[r.length - 1].duration),
                (r.byteLength += n.byteLength),
                (r.nalCount += n.nalCount),
                (r.duration += n.duration),
                r.push(n),
                r
              );
            },
            Z = function (e) {
              var t;
              return (
                !e[0][0].keyFrame &&
                  1 < e.length &&
                  ((t = e.shift()),
                  (e.byteLength -= t.byteLength),
                  (e.nalCount -= t.nalCount),
                  (e[0][0].dts = t.dts),
                  (e[0][0].pts = t.pts),
                  (e[0][0].duration += t.duration)),
                e
              );
            },
            ee = function (e, t) {
              for (var i, n, r, a = t || 0, s = [], o = 0; o < e.length; o++)
                for (n = e[o], i = 0; i < n.length; i++)
                  (r = n[i]), (a += (r = W(r, a)).size), s.push(r);
              return s;
            },
            te = function (e) {
              for (
                var t,
                  i,
                  n,
                  r,
                  a,
                  s = 0,
                  o = e.byteLength,
                  u = e.nalCount,
                  l = new Uint8Array(o + 4 * u),
                  c = new DataView(l.buffer),
                  d = 0;
                d < e.length;
                d++
              )
                for (n = e[d], t = 0; t < n.length; t++)
                  for (r = n[t], i = 0; i < r.length; i++)
                    (a = r[i]),
                      c.setUint32(s, a.data.byteLength),
                      l.set(a.data, (s += 4)),
                      (s += a.data.byteLength);
              return l;
            },
            ie = [33, 16, 5, 32, 164, 27],
            ne = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252],
            re = function (e) {
              return 9e4 * e;
            },
            ae = function (e, t) {
              return e * t;
            },
            se = function (e) {
              return e / 9e4;
            },
            oe = function (e, t) {
              return e / t;
            },
            ue = 9e4,
            le = re,
            ce = se,
            de = function (e, t) {
              return re(oe(e, t));
            },
            he = function (e, t) {
              return ae(se(e), t);
            },
            pe = function (e, t, i) {
              return se(i ? e : e - t);
            },
            fe = function (e, t, i, n) {
              var r,
                a,
                s,
                o,
                u,
                l,
                c = 0,
                d = 0;
              if (
                t.length &&
                ((r = de(e.baseMediaDecodeTime, e.samplerate)),
                (a = Math.ceil(ue / (e.samplerate / 1024))),
                i &&
                  n &&
                  ((s = r - Math.max(i, n)), (d = (c = Math.floor(s / a)) * a)),
                !(c < 1 || ue / 2 < d))
              ) {
                for (
                  o = (o = z()[e.samplerate]) || t[0].data, u = 0;
                  u < c;
                  u++
                )
                  (l = t[0]),
                    t.splice(0, 0, { data: o, dts: l.dts - a, pts: l.pts - a });
                return (
                  (e.baseMediaDecodeTime -= Math.floor(he(d, e.samplerate))), d
                );
              }
            },
            me = function (e, t, i) {
              return t.minSegmentDts >= i
                ? e
                : ((t.minSegmentDts = 1 / 0),
                  e.filter(function (e) {
                    return (
                      e.dts >= i &&
                      ((t.minSegmentDts = Math.min(t.minSegmentDts, e.dts)),
                      (t.minSegmentPts = t.minSegmentDts),
                      !0)
                    );
                  }));
            },
            ge = function (e) {
              for (var t, i = [], n = 0; n < e.length; n++)
                (t = e[n]), i.push({ size: t.data.byteLength, duration: 1024 });
              return i;
            },
            ye = function (e) {
              for (
                var t,
                  i = 0,
                  n = new Uint8Array(
                    (function (e) {
                      for (var t = 0, i = 0; i < e.length; i++)
                        t += e[i].data.byteLength;
                      return t;
                    })(e)
                  ),
                  r = 0;
                r < e.length;
                r++
              )
                (t = e[r]), n.set(t.data, i), (i += t.data.byteLength);
              return n;
            },
            ve = ue,
            _e = function (e) {
              delete e.minSegmentDts,
                delete e.maxSegmentDts,
                delete e.minSegmentPts,
                delete e.maxSegmentPts;
            },
            be = function (e, t) {
              var i = e.minSegmentDts;
              return (
                t || (i -= e.timelineStartInfo.dts),
                (t = e.timelineStartInfo.baseMediaDecodeTime),
                (t += i),
                (t = Math.max(0, t)),
                "audio" === e.type &&
                  ((t *= e.samplerate / ve), (t = Math.floor(t))),
                t
              );
            },
            Te = function (e, t) {
              "number" == typeof t.pts &&
                (void 0 === e.timelineStartInfo.pts &&
                  (e.timelineStartInfo.pts = t.pts),
                void 0 === e.minSegmentPts
                  ? (e.minSegmentPts = t.pts)
                  : (e.minSegmentPts = Math.min(e.minSegmentPts, t.pts)),
                void 0 === e.maxSegmentPts
                  ? (e.maxSegmentPts = t.pts)
                  : (e.maxSegmentPts = Math.max(e.maxSegmentPts, t.pts))),
                "number" == typeof t.dts &&
                  (void 0 === e.timelineStartInfo.dts &&
                    (e.timelineStartInfo.dts = t.dts),
                  void 0 === e.minSegmentDts
                    ? (e.minSegmentDts = t.dts)
                    : (e.minSegmentDts = Math.min(e.minSegmentDts, t.dts)),
                  void 0 === e.maxSegmentDts
                    ? (e.maxSegmentDts = t.dts)
                    : (e.maxSegmentDts = Math.max(e.maxSegmentDts, t.dts)));
            },
            Se = function (e) {
              for (
                var t = 0,
                  i = { payloadType: -1, payloadSize: 0 },
                  n = 0,
                  r = 0;
                t < e.byteLength && 128 !== e[t];

              ) {
                for (; 255 === e[t]; ) (n += 255), t++;
                for (n += e[t++]; 255 === e[t]; ) (r += 255), t++;
                if (((r += e[t++]), !i.payload && 4 === n)) {
                  if (
                    "GA94" ===
                    String.fromCharCode(e[t + 3], e[t + 4], e[t + 5], e[t + 6])
                  ) {
                    (i.payloadType = n),
                      (i.payloadSize = r),
                      (i.payload = e.subarray(t, t + r));
                    break;
                  }
                  i.payload = void 0;
                }
                (t += r), (r = n = 0);
              }
              return i;
            },
            we = function (e) {
              return 181 !== e.payload[0] ||
                49 != ((e.payload[1] << 8) | e.payload[2]) ||
                "GA94" !==
                  String.fromCharCode(
                    e.payload[3],
                    e.payload[4],
                    e.payload[5],
                    e.payload[6]
                  ) ||
                3 !== e.payload[7]
                ? null
                : e.payload.subarray(8, e.payload.length - 1);
            },
            Ee = function (e, t) {
              var i,
                n,
                r,
                a,
                s = [];
              if (!(64 & t[0])) return s;
              for (n = 31 & t[0], i = 0; i < n; i++)
                (a = { type: 3 & t[2 + (r = 3 * i)], pts: e }),
                  4 & t[2 + r] &&
                    ((a.ccData = (t[3 + r] << 8) | t[4 + r]), s.push(a));
              return s;
            },
            ke = function (e) {
              for (var t = e.byteLength, i = [], n = 1; n < t - 2; )
                0 === e[n] && 0 === e[n + 1] && 3 === e[n + 2]
                  ? (i.push(n + 2), (n += 2))
                  : n++;
              if (0 === i.length) return e;
              for (
                var r = t - i.length, a = new Uint8Array(r), s = 0, n = 0;
                n < r;
                s++, n++
              )
                s === i[0] && (s++, i.shift()), (a[n] = e[s]);
              return a;
            },
            Ce = 4,
            Ie = function e(t) {
              (t = t || {}),
                e.prototype.init.call(this),
                (this.parse708captions_ =
                  "boolean" != typeof t.parse708captions || t.parse708captions),
                (this.captionPackets_ = []),
                (this.ccStreams_ = [
                  new Ue(0, 0),
                  new Ue(0, 1),
                  new Ue(1, 0),
                  new Ue(1, 1),
                ]),
                this.parse708captions_ &&
                  (this.cc708Stream_ = new De({
                    captionServices: t.captionServices,
                  })),
                this.reset(),
                this.ccStreams_.forEach(function (e) {
                  e.on("data", this.trigger.bind(this, "data")),
                    e.on("partialdone", this.trigger.bind(this, "partialdone")),
                    e.on("done", this.trigger.bind(this, "done"));
                }, this),
                this.parse708captions_ &&
                  (this.cc708Stream_.on(
                    "data",
                    this.trigger.bind(this, "data")
                  ),
                  this.cc708Stream_.on(
                    "partialdone",
                    this.trigger.bind(this, "partialdone")
                  ),
                  this.cc708Stream_.on(
                    "done",
                    this.trigger.bind(this, "done")
                  ));
            };
          ((Ie.prototype = new j()).push = function (e) {
            var t, i;
            if (
              "sei_rbsp" === e.nalUnitType &&
              (t = Se(e.escapedRBSP)).payload &&
              t.payloadType === Ce &&
              (i = we(t))
            )
              if (e.dts < this.latestDts_) this.ignoreNextEqualDts_ = !0;
              else {
                if (e.dts === this.latestDts_ && this.ignoreNextEqualDts_)
                  return (
                    this.numSameDts_--,
                    void (this.numSameDts_ || (this.ignoreNextEqualDts_ = !1))
                  );
                (i = Ee(e.pts, i)),
                  (this.captionPackets_ = this.captionPackets_.concat(i)),
                  this.latestDts_ !== e.dts && (this.numSameDts_ = 0),
                  this.numSameDts_++,
                  (this.latestDts_ = e.dts);
              }
          }),
            (Ie.prototype.flushCCStreams = function (t) {
              this.ccStreams_.forEach(function (e) {
                return "flush" === t ? e.flush() : e.partialFlush();
              }, this);
            }),
            (Ie.prototype.flushStream = function (e) {
              this.captionPackets_.length &&
                (this.captionPackets_.forEach(function (e, t) {
                  e.presortIndex = t;
                }),
                this.captionPackets_.sort(function (e, t) {
                  return e.pts === t.pts
                    ? e.presortIndex - t.presortIndex
                    : e.pts - t.pts;
                }),
                this.captionPackets_.forEach(function (e) {
                  e.type < 2
                    ? this.dispatchCea608Packet(e)
                    : this.dispatchCea708Packet(e);
                }, this),
                (this.captionPackets_.length = 0)),
                this.flushCCStreams(e);
            }),
            (Ie.prototype.flush = function () {
              return this.flushStream("flush");
            }),
            (Ie.prototype.partialFlush = function () {
              return this.flushStream("partialFlush");
            }),
            (Ie.prototype.reset = function () {
              (this.latestDts_ = null),
                (this.ignoreNextEqualDts_ = !1),
                (this.numSameDts_ = 0),
                (this.activeCea608Channel_ = [null, null]),
                this.ccStreams_.forEach(function (e) {
                  e.reset();
                });
            }),
            (Ie.prototype.dispatchCea608Packet = function (e) {
              this.setsTextOrXDSActive(e)
                ? (this.activeCea608Channel_[e.type] = null)
                : this.setsChannel1Active(e)
                ? (this.activeCea608Channel_[e.type] = 0)
                : this.setsChannel2Active(e) &&
                  (this.activeCea608Channel_[e.type] = 1),
                null !== this.activeCea608Channel_[e.type] &&
                  this.ccStreams_[
                    (e.type << 1) + this.activeCea608Channel_[e.type]
                  ].push(e);
            }),
            (Ie.prototype.setsChannel1Active = function (e) {
              return 4096 == (30720 & e.ccData);
            }),
            (Ie.prototype.setsChannel2Active = function (e) {
              return 6144 == (30720 & e.ccData);
            }),
            (Ie.prototype.setsTextOrXDSActive = function (e) {
              return (
                256 == (28928 & e.ccData) ||
                4138 == (30974 & e.ccData) ||
                6186 == (30974 & e.ccData)
              );
            }),
            (Ie.prototype.dispatchCea708Packet = function (e) {
              this.parse708captions_ && this.cc708Stream_.push(e);
            });
          function xe(e) {
            return (32 <= e && e <= 127) || (160 <= e && e <= 255);
          }
          function Ae(e) {
            (this.windowNum = e), this.reset();
          }
          var Pe = {
            127: 9834,
            4128: 32,
            4129: 160,
            4133: 8230,
            4138: 352,
            4140: 338,
            4144: 9608,
            4145: 8216,
            4146: 8217,
            4147: 8220,
            4148: 8221,
            4149: 8226,
            4153: 8482,
            4154: 353,
            4156: 339,
            4157: 8480,
            4159: 376,
            4214: 8539,
            4215: 8540,
            4216: 8541,
            4217: 8542,
            4218: 9168,
            4219: 9124,
            4220: 9123,
            4221: 9135,
            4222: 9126,
            4223: 9121,
            4256: 12600,
          };
          (Ae.prototype.reset = function () {
            this.clearText(),
              (this.pendingNewLine = !1),
              (this.winAttr = {}),
              (this.penAttr = {}),
              (this.penLoc = {}),
              (this.penColor = {}),
              (this.visible = 0),
              (this.rowLock = 0),
              (this.columnLock = 0),
              (this.priority = 0),
              (this.relativePositioning = 0),
              (this.anchorVertical = 0),
              (this.anchorHorizontal = 0),
              (this.anchorPoint = 0),
              (this.rowCount = 1),
              (this.virtualRowCount = this.rowCount + 1),
              (this.columnCount = 41),
              (this.windowStyle = 0),
              (this.penStyle = 0);
          }),
            (Ae.prototype.getText = function () {
              return this.rows.join("\n");
            }),
            (Ae.prototype.clearText = function () {
              (this.rows = [""]), (this.rowIdx = 0);
            }),
            (Ae.prototype.newLine = function (e) {
              for (
                this.rows.length >= this.virtualRowCount &&
                  "function" == typeof this.beforeRowOverflow &&
                  this.beforeRowOverflow(e),
                  0 < this.rows.length && (this.rows.push(""), this.rowIdx++);
                this.rows.length > this.virtualRowCount;

              )
                this.rows.shift(), this.rowIdx--;
            }),
            (Ae.prototype.isEmpty = function () {
              return (
                0 === this.rows.length ||
                (1 === this.rows.length && "" === this.rows[0])
              );
            }),
            (Ae.prototype.addText = function (e) {
              this.rows[this.rowIdx] += e;
            }),
            (Ae.prototype.backspace = function () {
              var e;
              this.isEmpty() ||
                ((e = this.rows[this.rowIdx]),
                (this.rows[this.rowIdx] = e.substr(0, e.length - 1)));
            });
          function Le(e, t, i) {
            (this.serviceNum = e),
              (this.text = ""),
              (this.currentWindow = new Ae(-1)),
              (this.windows = []),
              (this.stream = i),
              "string" == typeof t && this.createTextDecoder(t);
          }
          (Le.prototype.init = function (e, t) {
            this.startPts = e;
            for (var i = 0; i < 8; i++)
              (this.windows[i] = new Ae(i)),
                "function" == typeof t &&
                  (this.windows[i].beforeRowOverflow = t);
          }),
            (Le.prototype.setCurrentWindow = function (e) {
              this.currentWindow = this.windows[e];
            }),
            (Le.prototype.createTextDecoder = function (t) {
              if ("undefined" == typeof TextDecoder)
                this.stream.trigger("log", {
                  level: "warn",
                  message:
                    "The `encoding` option is unsupported without TextDecoder support",
                });
              else
                try {
                  this.textDecoder_ = new TextDecoder(t);
                } catch (e) {
                  this.stream.trigger("log", {
                    level: "warn",
                    message:
                      "TextDecoder could not be created with " +
                      t +
                      " encoding. " +
                      e,
                  });
                }
            });
          var De = function e(t) {
            (t = t || {}), e.prototype.init.call(this);
            var i,
              n = this,
              r = t.captionServices || {},
              a = {};
            Object.keys(r).forEach(function (e) {
              (i = r[e]), /^SERVICE/.test(e) && (a[e] = i.encoding);
            }),
              (this.serviceEncodings = a),
              (this.current708Packet = null),
              (this.services = {}),
              (this.push = function (e) {
                (3 === e.type || null === n.current708Packet) &&
                  n.new708Packet(),
                  n.add708Bytes(e);
              });
          };
          (De.prototype = new j()),
            (De.prototype.new708Packet = function () {
              null !== this.current708Packet && this.push708Packet(),
                (this.current708Packet = { data: [], ptsVals: [] });
            }),
            (De.prototype.add708Bytes = function (e) {
              var t = e.ccData,
                i = t >>> 8,
                t = 255 & t;
              this.current708Packet.ptsVals.push(e.pts),
                this.current708Packet.data.push(i),
                this.current708Packet.data.push(t);
            }),
            (De.prototype.push708Packet = function () {
              var e,
                t = this.current708Packet,
                i = t.data,
                n = null,
                r = 0,
                a = i[r++];
              for (t.seq = a >> 6, t.sizeCode = 63 & a; r < i.length; r++)
                (e = 31 & (a = i[r++])),
                  7 === (n = a >> 5) && 0 < e && (n = i[r++]),
                  this.pushServiceBlock(n, r, e),
                  0 < e && (r += e - 1);
            }),
            (De.prototype.pushServiceBlock = function (e, t, i) {
              for (
                var n,
                  r = t,
                  a = this.current708Packet.data,
                  s = (s = this.services[e]) || this.initService(e, r);
                r < t + i && r < a.length;
                r++
              )
                (n = a[r]),
                  xe(n)
                    ? (r = this.handleText(r, s))
                    : 24 === n
                    ? (r = this.multiByteCharacter(r, s))
                    : 16 === n
                    ? (r = this.extendedCommands(r, s))
                    : 128 <= n && n <= 135
                    ? (r = this.setCurrentWindow(r, s))
                    : 152 <= n && n <= 159
                    ? (r = this.defineWindow(r, s))
                    : 136 === n
                    ? (r = this.clearWindows(r, s))
                    : 140 === n
                    ? (r = this.deleteWindows(r, s))
                    : 137 === n
                    ? (r = this.displayWindows(r, s))
                    : 138 === n
                    ? (r = this.hideWindows(r, s))
                    : 139 === n
                    ? (r = this.toggleWindows(r, s))
                    : 151 === n
                    ? (r = this.setWindowAttributes(r, s))
                    : 144 === n
                    ? (r = this.setPenAttributes(r, s))
                    : 145 === n
                    ? (r = this.setPenColor(r, s))
                    : 146 === n
                    ? (r = this.setPenLocation(r, s))
                    : 143 === n
                    ? (s = this.reset(r, s))
                    : 8 === n
                    ? s.currentWindow.backspace()
                    : 12 === n
                    ? s.currentWindow.clearText()
                    : 13 === n
                    ? (s.currentWindow.pendingNewLine = !0)
                    : 14 === n
                    ? s.currentWindow.clearText()
                    : 141 === n && r++;
            }),
            (De.prototype.extendedCommands = function (e, t) {
              var i = this.current708Packet.data[++e];
              return (e = xe(i)
                ? this.handleText(e, t, { isExtended: !0 })
                : e);
            }),
            (De.prototype.getPts = function (e) {
              return this.current708Packet.ptsVals[Math.floor(e / 2)];
            }),
            (De.prototype.initService = function (t, e) {
              var i,
                n = "SERVICE" + t,
                r = this;
              return (
                n in this.serviceEncodings && (i = this.serviceEncodings[n]),
                (this.services[t] = new Le(t, i, r)),
                this.services[t].init(this.getPts(e), function (e) {
                  r.flushDisplayed(e, r.services[t]);
                }),
                this.services[t]
              );
            }),
            (De.prototype.handleText = function (e, t, i) {
              var n,
                r = i && i.isExtended,
                a = i && i.isMultiByte,
                s = this.current708Packet.data,
                o = r ? 4096 : 0,
                u = s[e],
                i = s[e + 1],
                s = t.currentWindow,
                l =
                  t.textDecoder_ && !r
                    ? (a ? ((n = [u, i]), e++) : (n = [u]),
                      t.textDecoder_.decode(new Uint8Array(n)))
                    : ((l = Pe[(u = o | u)] || u),
                      4096 & u && u === l ? "" : String.fromCharCode(l));
              return (
                s.pendingNewLine && !s.isEmpty() && s.newLine(this.getPts(e)),
                (s.pendingNewLine = !1),
                s.addText(l),
                e
              );
            }),
            (De.prototype.multiByteCharacter = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e + 1],
                i = i[e + 2];
              return (e =
                xe(n) && xe(i)
                  ? this.handleText(++e, t, { isMultiByte: !0 })
                  : e);
            }),
            (De.prototype.setCurrentWindow = function (e, t) {
              var i = this.current708Packet.data[e];
              return t.setCurrentWindow(7 & i), e;
            }),
            (De.prototype.defineWindow = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e];
              t.setCurrentWindow(7 & n);
              (t = t.currentWindow), (n = i[++e]);
              return (
                (t.visible = (32 & n) >> 5),
                (t.rowLock = (16 & n) >> 4),
                (t.columnLock = (8 & n) >> 3),
                (t.priority = 7 & n),
                (n = i[++e]),
                (t.relativePositioning = (128 & n) >> 7),
                (t.anchorVertical = 127 & n),
                (n = i[++e]),
                (t.anchorHorizontal = n),
                (n = i[++e]),
                (t.anchorPoint = (240 & n) >> 4),
                (t.rowCount = 15 & n),
                (n = i[++e]),
                (t.columnCount = 63 & n),
                (n = i[++e]),
                (t.windowStyle = (56 & n) >> 3),
                (t.penStyle = 7 & n),
                (t.virtualRowCount = t.rowCount + 1),
                e
              );
            }),
            (De.prototype.setWindowAttributes = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e],
                t = t.currentWindow.winAttr,
                n = i[++e];
              return (
                (t.fillOpacity = (192 & n) >> 6),
                (t.fillRed = (48 & n) >> 4),
                (t.fillGreen = (12 & n) >> 2),
                (t.fillBlue = 3 & n),
                (n = i[++e]),
                (t.borderType = (192 & n) >> 6),
                (t.borderRed = (48 & n) >> 4),
                (t.borderGreen = (12 & n) >> 2),
                (t.borderBlue = 3 & n),
                (n = i[++e]),
                (t.borderType += (128 & n) >> 5),
                (t.wordWrap = (64 & n) >> 6),
                (t.printDirection = (48 & n) >> 4),
                (t.scrollDirection = (12 & n) >> 2),
                (t.justify = 3 & n),
                (n = i[++e]),
                (t.effectSpeed = (240 & n) >> 4),
                (t.effectDirection = (12 & n) >> 2),
                (t.displayEffect = 3 & n),
                e
              );
            }),
            (De.prototype.flushDisplayed = function (e, t) {
              for (var i = [], n = 0; n < 8; n++)
                t.windows[n].visible &&
                  !t.windows[n].isEmpty() &&
                  i.push(t.windows[n].getText());
              (t.endPts = e),
                (t.text = i.join("\n\n")),
                this.pushCaption(t),
                (t.startPts = e);
            }),
            (De.prototype.pushCaption = function (e) {
              "" !== e.text &&
                (this.trigger("data", {
                  startPts: e.startPts,
                  endPts: e.endPts,
                  text: e.text,
                  stream: "cc708_" + e.serviceNum,
                }),
                (e.text = ""),
                (e.startPts = e.endPts));
            }),
            (De.prototype.displayWindows = function (e, t) {
              var i = this.current708Packet.data[++e],
                n = this.getPts(e);
              this.flushDisplayed(n, t);
              for (var r = 0; r < 8; r++)
                i & (1 << r) && (t.windows[r].visible = 1);
              return e;
            }),
            (De.prototype.hideWindows = function (e, t) {
              var i = this.current708Packet.data[++e],
                n = this.getPts(e);
              this.flushDisplayed(n, t);
              for (var r = 0; r < 8; r++)
                i & (1 << r) && (t.windows[r].visible = 0);
              return e;
            }),
            (De.prototype.toggleWindows = function (e, t) {
              var i = this.current708Packet.data[++e],
                n = this.getPts(e);
              this.flushDisplayed(n, t);
              for (var r = 0; r < 8; r++)
                i & (1 << r) && (t.windows[r].visible ^= 1);
              return e;
            }),
            (De.prototype.clearWindows = function (e, t) {
              var i = this.current708Packet.data[++e],
                n = this.getPts(e);
              this.flushDisplayed(n, t);
              for (var r = 0; r < 8; r++)
                i & (1 << r) && t.windows[r].clearText();
              return e;
            }),
            (De.prototype.deleteWindows = function (e, t) {
              var i = this.current708Packet.data[++e],
                n = this.getPts(e);
              this.flushDisplayed(n, t);
              for (var r = 0; r < 8; r++) i & (1 << r) && t.windows[r].reset();
              return e;
            }),
            (De.prototype.setPenAttributes = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e],
                t = t.currentWindow.penAttr,
                n = i[++e];
              return (
                (t.textTag = (240 & n) >> 4),
                (t.offset = (12 & n) >> 2),
                (t.penSize = 3 & n),
                (n = i[++e]),
                (t.italics = (128 & n) >> 7),
                (t.underline = (64 & n) >> 6),
                (t.edgeType = (56 & n) >> 3),
                (t.fontStyle = 7 & n),
                e
              );
            }),
            (De.prototype.setPenColor = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e],
                t = t.currentWindow.penColor,
                n = i[++e];
              return (
                (t.fgOpacity = (192 & n) >> 6),
                (t.fgRed = (48 & n) >> 4),
                (t.fgGreen = (12 & n) >> 2),
                (t.fgBlue = 3 & n),
                (n = i[++e]),
                (t.bgOpacity = (192 & n) >> 6),
                (t.bgRed = (48 & n) >> 4),
                (t.bgGreen = (12 & n) >> 2),
                (t.bgBlue = 3 & n),
                (n = i[++e]),
                (t.edgeRed = (48 & n) >> 4),
                (t.edgeGreen = (12 & n) >> 2),
                (t.edgeBlue = 3 & n),
                e
              );
            }),
            (De.prototype.setPenLocation = function (e, t) {
              var i = this.current708Packet.data,
                n = i[e],
                r = t.currentWindow.penLoc;
              return (
                (t.currentWindow.pendingNewLine = !0),
                (n = i[++e]),
                (r.row = 15 & n),
                (n = i[++e]),
                (r.column = 63 & n),
                e
              );
            }),
            (De.prototype.reset = function (e, t) {
              var i = this.getPts(e);
              return (
                this.flushDisplayed(i, t), this.initService(t.serviceNum, e)
              );
            });
          function Oe(e) {
            return null === e ? "" : ((e = Me[e] || e), String.fromCharCode(e));
          }
          function Re() {
            for (var e = [], t = 15; t--; ) e.push("");
            return e;
          }
          var Me = {
              42: 225,
              92: 233,
              94: 237,
              95: 243,
              96: 250,
              123: 231,
              124: 247,
              125: 209,
              126: 241,
              127: 9608,
              304: 174,
              305: 176,
              306: 189,
              307: 191,
              308: 8482,
              309: 162,
              310: 163,
              311: 9834,
              312: 224,
              313: 160,
              314: 232,
              315: 226,
              316: 234,
              317: 238,
              318: 244,
              319: 251,
              544: 193,
              545: 201,
              546: 211,
              547: 218,
              548: 220,
              549: 252,
              550: 8216,
              551: 161,
              552: 42,
              553: 39,
              554: 8212,
              555: 169,
              556: 8480,
              557: 8226,
              558: 8220,
              559: 8221,
              560: 192,
              561: 194,
              562: 199,
              563: 200,
              564: 202,
              565: 203,
              566: 235,
              567: 206,
              568: 207,
              569: 239,
              570: 212,
              571: 217,
              572: 249,
              573: 219,
              574: 171,
              575: 187,
              800: 195,
              801: 227,
              802: 205,
              803: 204,
              804: 236,
              805: 210,
              806: 242,
              807: 213,
              808: 245,
              809: 123,
              810: 125,
              811: 92,
              812: 94,
              813: 95,
              814: 124,
              815: 126,
              816: 196,
              817: 228,
              818: 214,
              819: 246,
              820: 223,
              821: 165,
              822: 164,
              823: 9474,
              824: 197,
              825: 229,
              826: 216,
              827: 248,
              828: 9484,
              829: 9488,
              830: 9492,
              831: 9496,
            },
            Ne = [
              4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096,
              4864, 4896, 5120, 5152,
            ],
            Ue = function e(t, i) {
              e.prototype.init.call(this),
                (this.field_ = t || 0),
                (this.dataChannel_ = i || 0),
                (this.name_ =
                  "CC" + (1 + ((this.field_ << 1) | this.dataChannel_))),
                this.setConstants(),
                this.reset(),
                (this.push = function (e) {
                  var t,
                    i,
                    n,
                    r,
                    a = 32639 & e.ccData;
                  a !== this.lastControlCode_
                    ? (4096 == (61440 & a)
                        ? (this.lastControlCode_ = a)
                        : a !== this.PADDING_ && (this.lastControlCode_ = null),
                      (t = a >>> 8),
                      (i = 255 & a),
                      a === this.PADDING_ ||
                        (a === this.RESUME_CAPTION_LOADING_
                          ? (this.mode_ = "popOn")
                          : a === this.END_OF_CAPTION_
                          ? ((this.mode_ = "popOn"),
                            this.clearFormatting(e.pts),
                            this.flushDisplayed(e.pts),
                            (r = this.displayed_),
                            (this.displayed_ = this.nonDisplayed_),
                            (this.nonDisplayed_ = r),
                            (this.startPts_ = e.pts))
                          : a === this.ROLL_UP_2_ROWS_
                          ? ((this.rollUpRows_ = 2), this.setRollUp(e.pts))
                          : a === this.ROLL_UP_3_ROWS_
                          ? ((this.rollUpRows_ = 3), this.setRollUp(e.pts))
                          : a === this.ROLL_UP_4_ROWS_
                          ? ((this.rollUpRows_ = 4), this.setRollUp(e.pts))
                          : a === this.CARRIAGE_RETURN_
                          ? (this.clearFormatting(e.pts),
                            this.flushDisplayed(e.pts),
                            this.shiftRowsUp_(),
                            (this.startPts_ = e.pts))
                          : a === this.BACKSPACE_
                          ? "popOn" === this.mode_
                            ? (this.nonDisplayed_[this.row_] =
                                this.nonDisplayed_[this.row_].slice(0, -1))
                            : (this.displayed_[this.row_] = this.displayed_[
                                this.row_
                              ].slice(0, -1))
                          : a === this.ERASE_DISPLAYED_MEMORY_
                          ? (this.flushDisplayed(e.pts),
                            (this.displayed_ = Re()))
                          : a === this.ERASE_NON_DISPLAYED_MEMORY_
                          ? (this.nonDisplayed_ = Re())
                          : a === this.RESUME_DIRECT_CAPTIONING_
                          ? ("paintOn" !== this.mode_ &&
                              (this.flushDisplayed(e.pts),
                              (this.displayed_ = Re())),
                            (this.mode_ = "paintOn"),
                            (this.startPts_ = e.pts))
                          : this.isSpecialCharacter(t, i)
                          ? ((n = Oe((t = (3 & t) << 8) | i)),
                            this[this.mode_](e.pts, n),
                            this.column_++)
                          : this.isExtCharacter(t, i)
                          ? ("popOn" === this.mode_
                              ? (this.nonDisplayed_[this.row_] =
                                  this.nonDisplayed_[this.row_].slice(0, -1))
                              : (this.displayed_[this.row_] = this.displayed_[
                                  this.row_
                                ].slice(0, -1)),
                            (n = Oe((t = (3 & t) << 8) | i)),
                            this[this.mode_](e.pts, n),
                            this.column_++)
                          : this.isMidRowCode(t, i)
                          ? (this.clearFormatting(e.pts),
                            this[this.mode_](e.pts, " "),
                            this.column_++,
                            14 == (14 & i) && this.addFormatting(e.pts, ["i"]),
                            1 == (1 & i) && this.addFormatting(e.pts, ["u"]))
                          : this.isOffsetControlCode(t, i)
                          ? (this.column_ += 3 & i)
                          : this.isPAC(t, i)
                          ? ((r = Ne.indexOf(7968 & a)),
                            "rollUp" === this.mode_ &&
                              (r - this.rollUpRows_ + 1 < 0 &&
                                (r = this.rollUpRows_ - 1),
                              this.setRollUp(e.pts, r)),
                            r !== this.row_ &&
                              (this.clearFormatting(e.pts), (this.row_ = r)),
                            1 & i &&
                              -1 === this.formatting_.indexOf("u") &&
                              this.addFormatting(e.pts, ["u"]),
                            16 == (16 & a) &&
                              (this.column_ = 4 * ((14 & a) >> 1)),
                            this.isColorPAC(i) &&
                              14 == (14 & i) &&
                              this.addFormatting(e.pts, ["i"]))
                          : this.isNormalChar(t) &&
                            (0 === i && (i = null),
                            (n = Oe(t)),
                            (n += Oe(i)),
                            this[this.mode_](e.pts, n),
                            (this.column_ += n.length))))
                    : (this.lastControlCode_ = null);
                });
            };
          (Ue.prototype = new j()),
            (Ue.prototype.flushDisplayed = function (e) {
              var t = this.displayed_
                .map(function (e, t) {
                  try {
                    return e.trim();
                  } catch (e) {
                    return (
                      this.trigger("log", {
                        level: "warn",
                        message:
                          "Skipping a malformed 608 caption at index " +
                          t +
                          ".",
                      }),
                      ""
                    );
                  }
                }, this)
                .join("\n")
                .replace(/^\n+|\n+$/g, "");
              t.length &&
                this.trigger("data", {
                  startPts: this.startPts_,
                  endPts: e,
                  text: t,
                  stream: this.name_,
                });
            }),
            (Ue.prototype.reset = function () {
              (this.mode_ = "popOn"),
                (this.topRow_ = 0),
                (this.startPts_ = 0),
                (this.displayed_ = Re()),
                (this.nonDisplayed_ = Re()),
                (this.lastControlCode_ = null),
                (this.column_ = 0),
                (this.row_ = 14),
                (this.rollUpRows_ = 2),
                (this.formatting_ = []);
            }),
            (Ue.prototype.setConstants = function () {
              0 === this.dataChannel_
                ? ((this.BASE_ = 16),
                  (this.EXT_ = 17),
                  (this.CONTROL_ = (20 | this.field_) << 8),
                  (this.OFFSET_ = 23))
                : 1 === this.dataChannel_ &&
                  ((this.BASE_ = 24),
                  (this.EXT_ = 25),
                  (this.CONTROL_ = (28 | this.field_) << 8),
                  (this.OFFSET_ = 31)),
                (this.PADDING_ = 0),
                (this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_),
                (this.END_OF_CAPTION_ = 47 | this.CONTROL_),
                (this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_),
                (this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_),
                (this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_),
                (this.CARRIAGE_RETURN_ = 45 | this.CONTROL_),
                (this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_),
                (this.BACKSPACE_ = 33 | this.CONTROL_),
                (this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_),
                (this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_);
            }),
            (Ue.prototype.isSpecialCharacter = function (e, t) {
              return e === this.EXT_ && 48 <= t && t <= 63;
            }),
            (Ue.prototype.isExtCharacter = function (e, t) {
              return (
                (e === this.EXT_ + 1 || e === this.EXT_ + 2) &&
                32 <= t &&
                t <= 63
              );
            }),
            (Ue.prototype.isMidRowCode = function (e, t) {
              return e === this.EXT_ && 32 <= t && t <= 47;
            }),
            (Ue.prototype.isOffsetControlCode = function (e, t) {
              return e === this.OFFSET_ && 33 <= t && t <= 35;
            }),
            (Ue.prototype.isPAC = function (e, t) {
              return (
                e >= this.BASE_ && e < this.BASE_ + 8 && 64 <= t && t <= 127
              );
            }),
            (Ue.prototype.isColorPAC = function (e) {
              return (64 <= e && e <= 79) || (96 <= e && e <= 127);
            }),
            (Ue.prototype.isNormalChar = function (e) {
              return 32 <= e && e <= 127;
            }),
            (Ue.prototype.setRollUp = function (e, t) {
              if (
                ("rollUp" !== this.mode_ &&
                  ((this.row_ = 14),
                  (this.mode_ = "rollUp"),
                  this.flushDisplayed(e),
                  (this.nonDisplayed_ = Re()),
                  (this.displayed_ = Re())),
                void 0 !== t && t !== this.row_)
              )
                for (var i = 0; i < this.rollUpRows_; i++)
                  (this.displayed_[t - i] = this.displayed_[this.row_ - i]),
                    (this.displayed_[this.row_ - i] = "");
              void 0 === t && (t = this.row_),
                (this.topRow_ = t - this.rollUpRows_ + 1);
            }),
            (Ue.prototype.addFormatting = function (e, t) {
              this.formatting_ = this.formatting_.concat(t);
              t = t.reduce(function (e, t) {
                return e + "<" + t + ">";
              }, "");
              this[this.mode_](e, t);
            }),
            (Ue.prototype.clearFormatting = function (e) {
              var t;
              this.formatting_.length &&
                ((t = this.formatting_.reverse().reduce(function (e, t) {
                  return e + "</" + t + ">";
                }, "")),
                (this.formatting_ = []),
                this[this.mode_](e, t));
            }),
            (Ue.prototype.popOn = function (e, t) {
              var i = this.nonDisplayed_[this.row_];
              this.nonDisplayed_[this.row_] = i += t;
            }),
            (Ue.prototype.rollUp = function (e, t) {
              var i = this.displayed_[this.row_];
              this.displayed_[this.row_] = i += t;
            }),
            (Ue.prototype.shiftRowsUp_ = function () {
              for (var e = 0; e < this.topRow_; e++) this.displayed_[e] = "";
              for (e = this.row_ + 1; e < 15; e++) this.displayed_[e] = "";
              for (e = this.topRow_; e < this.row_; e++)
                this.displayed_[e] = this.displayed_[e + 1];
              this.displayed_[this.row_] = "";
            }),
            (Ue.prototype.paintOn = function (e, t) {
              var i = this.displayed_[this.row_];
              this.displayed_[this.row_] = i += t;
            });
          function Be(e, t) {
            var i = 1;
            for (t < e && (i = -1); 4294967296 < Math.abs(t - e); )
              e += 8589934592 * i;
            return e;
          }
          var Fe = { CaptionStream: Ie, Cea608Stream: Ue, Cea708Stream: De },
            je = {
              H264_STREAM_TYPE: 27,
              ADTS_STREAM_TYPE: 15,
              METADATA_STREAM_TYPE: 21,
            },
            e = function e(t) {
              var i, n;
              e.prototype.init.call(this),
                (this.type_ = t || "shared"),
                (this.push = function (e) {
                  ("shared" !== this.type_ && e.type !== this.type_) ||
                    (void 0 === n && (n = e.dts),
                    (e.dts = Be(e.dts, n)),
                    (e.pts = Be(e.pts, n)),
                    (i = e.dts),
                    this.trigger("data", e));
                }),
                (this.flush = function () {
                  (n = i), this.trigger("done");
                }),
                (this.endTimeline = function () {
                  this.flush(), this.trigger("endedtimeline");
                }),
                (this.discontinuity = function () {
                  i = n = void 0;
                }),
                (this.reset = function () {
                  this.discontinuity(), this.trigger("reset");
                });
            };
          e.prototype = new j();
          function He(e, t, i) {
            for (var n = "", r = t; r < i; r++)
              n += "%" + ("00" + e[r].toString(16)).slice(-2);
            return n;
          }
          function qe(e, t, i) {
            return decodeURIComponent(He(e, t, i));
          }
          function Ve(e) {
            return (e[0] << 21) | (e[1] << 14) | (e[2] << 7) | e[3];
          }
          var We = e,
            Ie = Be,
            Ge = {
              TXXX: function (e) {
                var t;
                if (3 === e.data[0]) {
                  for (t = 1; t < e.data.length; t++)
                    if (0 === e.data[t]) {
                      (e.description = qe(e.data, 1, t)),
                        (e.value = qe(e.data, t + 1, e.data.length).replace(
                          /\0*$/,
                          ""
                        ));
                      break;
                    }
                  e.data = e.value;
                }
              },
              WXXX: function (e) {
                var t;
                if (3 === e.data[0])
                  for (t = 1; t < e.data.length; t++)
                    if (0 === e.data[t]) {
                      (e.description = qe(e.data, 1, t)),
                        (e.url = qe(e.data, t + 1, e.data.length));
                      break;
                    }
              },
              PRIV: function (e) {
                for (var t, i = 0; i < e.data.length; i++)
                  if (0 === e.data[i]) {
                    e.owner = ((t = e.data), unescape(He(t, 0, i)));
                    break;
                  }
                (e.privateData = e.data.subarray(i + 1)),
                  (e.data = e.privateData);
              },
            },
            ze = function (e) {
              var t,
                i = { descriptor: e && e.descriptor },
                u = 0,
                l = [],
                c = 0;
              if (
                (ze.prototype.init.call(this),
                (this.dispatchType = je.METADATA_STREAM_TYPE.toString(16)),
                i.descriptor)
              )
                for (t = 0; t < i.descriptor.length; t++)
                  this.dispatchType += (
                    "00" + i.descriptor[t].toString(16)
                  ).slice(-2);
              this.push = function (e) {
                var t, i, n, r, a, s, o;
                if ("timed-metadata" === e.type)
                  if (
                    (e.dataAlignmentIndicator && ((c = 0), (l.length = 0)),
                    0 === l.length &&
                      (e.data.length < 10 ||
                        e.data[0] !== "I".charCodeAt(0) ||
                        e.data[1] !== "D".charCodeAt(0) ||
                        e.data[2] !== "3".charCodeAt(0)))
                  )
                    this.trigger("log", {
                      level: "warn",
                      message: "Skipping unrecognized metadata packet",
                    });
                  else if (
                    (l.push(e),
                    (c += e.data.byteLength),
                    1 === l.length &&
                      ((u = Ve(e.data.subarray(6, 10))), (u += 10)),
                    !(c < u))
                  ) {
                    for (
                      t = {
                        data: new Uint8Array(u),
                        frames: [],
                        pts: l[0].pts,
                        dts: l[0].dts,
                      },
                        r = 0;
                      r < u;

                    )
                      t.data.set(l[0].data.subarray(0, u - r), r),
                        (r += l[0].data.byteLength),
                        (c -= l[0].data.byteLength),
                        l.shift();
                    (i = 10),
                      64 & t.data[5] &&
                        ((i += 4),
                        (i += Ve(t.data.subarray(10, 14))),
                        (u -= Ve(t.data.subarray(16, 20))));
                    do {
                      if ((n = Ve(t.data.subarray(i + 4, i + 8))) < 1)
                        return void this.trigger("log", {
                          level: "warn",
                          message:
                            "Malformed ID3 frame encountered. Skipping metadata parsing.",
                        });
                    } while (
                      (((o = {
                        id: String.fromCharCode(
                          t.data[i],
                          t.data[i + 1],
                          t.data[i + 2],
                          t.data[i + 3]
                        ),
                        data: t.data.subarray(i + 10, i + n + 10),
                      }).key = o.id),
                      Ge[o.id] &&
                        (Ge[o.id](o),
                        "com.apple.streaming.transportStreamTimestamp" ===
                          o.owner &&
                          ((s =
                            ((1 & (a = o.data)[3]) << 30) |
                            (a[4] << 22) |
                            (a[5] << 14) |
                            (a[6] << 6) |
                            (a[7] >>> 2)),
                          (s *= 4),
                          (s += 3 & a[7]),
                          (o.timeStamp = s),
                          void 0 === t.pts &&
                            void 0 === t.dts &&
                            ((t.pts = o.timeStamp), (t.dts = o.timeStamp)),
                          this.trigger("timestamp", o))),
                      t.frames.push(o),
                      (i += 10),
                      (i += n) < u)
                    );
                    this.trigger("data", t);
                  }
              };
            };
          ze.prototype = new j();
          var Xe,
            Ke,
            e = ze,
            We = We,
            Ye = function () {
              var r = new Uint8Array(188),
                a = 0;
              Ye.prototype.init.call(this),
                (this.push = function (e) {
                  var t,
                    i = 0,
                    n = 188;
                  for (
                    a
                      ? ((t = new Uint8Array(e.byteLength + a)).set(
                          r.subarray(0, a)
                        ),
                        t.set(e, a),
                        (a = 0))
                      : (t = e);
                    n < t.byteLength;

                  )
                    71 !== t[i] || 71 !== t[n]
                      ? (i++, n++)
                      : (this.trigger("data", t.subarray(i, n)),
                        (i += 188),
                        (n += 188));
                  i < t.byteLength &&
                    (r.set(t.subarray(i), 0), (a = t.byteLength - i));
                }),
                (this.flush = function () {
                  188 === a &&
                    71 === r[0] &&
                    (this.trigger("data", r), (a = 0)),
                    this.trigger("done");
                }),
                (this.endTimeline = function () {
                  this.flush(), this.trigger("endedtimeline");
                }),
                (this.reset = function () {
                  (a = 0), this.trigger("reset");
                });
            };
          (Ye.prototype = new j()),
            ((Xe = function () {
              var n, r, a, s;
              Xe.prototype.init.call(this),
                ((s = this).packetsWaitingForPmt = []),
                (this.programMapTable = void 0),
                (n = function (e, t) {
                  var i = 0;
                  t.payloadUnitStartIndicator && (i += e[i] + 1),
                    ("pat" === t.type ? r : a)(e.subarray(i), t);
                }),
                (r = function (e, t) {
                  (t.section_number = e[7]),
                    (t.last_section_number = e[8]),
                    (s.pmtPid = ((31 & e[10]) << 8) | e[11]),
                    (t.pmtPid = s.pmtPid);
                }),
                (a = function (e, t) {
                  var i, n;
                  if (1 & e[5]) {
                    for (
                      s.programMapTable = {
                        video: null,
                        audio: null,
                        "timed-metadata": {},
                      },
                        i = 3 + (((15 & e[1]) << 8) | e[2]) - 4,
                        n = 12 + (((15 & e[10]) << 8) | e[11]);
                      n < i;

                    ) {
                      var r = e[n],
                        a = ((31 & e[n + 1]) << 8) | e[n + 2];
                      r === je.H264_STREAM_TYPE &&
                      null === s.programMapTable.video
                        ? (s.programMapTable.video = a)
                        : r === je.ADTS_STREAM_TYPE &&
                          null === s.programMapTable.audio
                        ? (s.programMapTable.audio = a)
                        : r === je.METADATA_STREAM_TYPE &&
                          (s.programMapTable["timed-metadata"][a] = r),
                        (n += 5 + (((15 & e[n + 3]) << 8) | e[n + 4]));
                    }
                    t.programMapTable = s.programMapTable;
                  }
                }),
                (this.push = function (e) {
                  var t = {},
                    i = 4;
                  if (
                    ((t.payloadUnitStartIndicator = !!(64 & e[1])),
                    (t.pid = 31 & e[1]),
                    (t.pid <<= 8),
                    (t.pid |= e[2]),
                    1 < (48 & e[3]) >>> 4 && (i += e[i] + 1),
                    0 === t.pid)
                  )
                    (t.type = "pat"),
                      n(e.subarray(i), t),
                      this.trigger("data", t);
                  else if (t.pid === this.pmtPid)
                    for (
                      t.type = "pmt",
                        n(e.subarray(i), t),
                        this.trigger("data", t);
                      this.packetsWaitingForPmt.length;

                    )
                      this.processPes_.apply(
                        this,
                        this.packetsWaitingForPmt.shift()
                      );
                  else
                    void 0 === this.programMapTable
                      ? this.packetsWaitingForPmt.push([e, i, t])
                      : this.processPes_(e, i, t);
                }),
                (this.processPes_ = function (e, t, i) {
                  i.pid === this.programMapTable.video
                    ? (i.streamType = je.H264_STREAM_TYPE)
                    : i.pid === this.programMapTable.audio
                    ? (i.streamType = je.ADTS_STREAM_TYPE)
                    : (i.streamType =
                        this.programMapTable["timed-metadata"][i.pid]),
                    (i.type = "pes"),
                    (i.data = e.subarray(t)),
                    this.trigger("data", i);
                });
            }).prototype = new j()),
            (Xe.STREAM_TYPES = { h264: 27, adts: 15 }),
            ((Ke = function () {
              function n(e, t, i) {
                var n,
                  r,
                  a,
                  s,
                  o = new Uint8Array(e.size),
                  u = { type: t },
                  l = 0,
                  c = 0;
                if (e.data.length && !(e.size < 9)) {
                  for (u.trackId = e.data[0].pid, l = 0; l < e.data.length; l++)
                    (n = e.data[l]), o.set(n.data, c), (c += n.data.byteLength);
                  (a = u),
                    (s = ((r = o)[0] << 16) | (r[1] << 8) | r[2]),
                    (a.data = new Uint8Array()),
                    1 == s &&
                      ((a.packetLength = 6 + ((r[4] << 8) | r[5])),
                      (a.dataAlignmentIndicator = 0 != (4 & r[6])),
                      192 & (s = r[7]) &&
                        ((a.pts =
                          ((14 & r[9]) << 27) |
                          ((255 & r[10]) << 20) |
                          ((254 & r[11]) << 12) |
                          ((255 & r[12]) << 5) |
                          ((254 & r[13]) >>> 3)),
                        (a.pts *= 4),
                        (a.pts += (6 & r[13]) >>> 1),
                        (a.dts = a.pts),
                        64 & s &&
                          ((a.dts =
                            ((14 & r[14]) << 27) |
                            ((255 & r[15]) << 20) |
                            ((254 & r[16]) << 12) |
                            ((255 & r[17]) << 5) |
                            ((254 & r[18]) >>> 3)),
                          (a.dts *= 4),
                          (a.dts += (6 & r[18]) >>> 1))),
                      (a.data = r.subarray(9 + r[8]))),
                    (t = "video" === t || u.packetLength <= e.size),
                    (i || t) && ((e.size = 0), (e.data.length = 0)),
                    t && d.trigger("data", u);
                }
              }
              var t,
                d = this,
                r = !1,
                a = { data: [], size: 0 },
                s = { data: [], size: 0 },
                o = { data: [], size: 0 };
              Ke.prototype.init.call(this),
                (this.push = function (i) {
                  ({
                    pat: function () {},
                    pes: function () {
                      var e, t;
                      switch (i.streamType) {
                        case je.H264_STREAM_TYPE:
                          (e = a), (t = "video");
                          break;
                        case je.ADTS_STREAM_TYPE:
                          (e = s), (t = "audio");
                          break;
                        case je.METADATA_STREAM_TYPE:
                          (e = o), (t = "timed-metadata");
                          break;
                        default:
                          return;
                      }
                      i.payloadUnitStartIndicator && n(e, t, !0),
                        e.data.push(i),
                        (e.size += i.data.byteLength);
                    },
                    pmt: function () {
                      var e = { type: "metadata", tracks: [] };
                      null !== (t = i.programMapTable).video &&
                        e.tracks.push({
                          timelineStartInfo: { baseMediaDecodeTime: 0 },
                          id: +t.video,
                          codec: "avc",
                          type: "video",
                        }),
                        null !== t.audio &&
                          e.tracks.push({
                            timelineStartInfo: { baseMediaDecodeTime: 0 },
                            id: +t.audio,
                            codec: "adts",
                            type: "audio",
                          }),
                        (r = !0),
                        d.trigger("data", e);
                    },
                  }[i.type]());
                }),
                (this.reset = function () {
                  (a.size = 0),
                    (a.data.length = 0),
                    (s.size = 0),
                    (s.data.length = 0),
                    this.trigger("reset");
                }),
                (this.flushStreams_ = function () {
                  n(a, "video"), n(s, "audio"), n(o, "timed-metadata");
                }),
                (this.flush = function () {
                  var e;
                  !r &&
                    t &&
                    ((e = { type: "metadata", tracks: [] }),
                    null !== t.video &&
                      e.tracks.push({
                        timelineStartInfo: { baseMediaDecodeTime: 0 },
                        id: +t.video,
                        codec: "avc",
                        type: "video",
                      }),
                    null !== t.audio &&
                      e.tracks.push({
                        timelineStartInfo: { baseMediaDecodeTime: 0 },
                        id: +t.audio,
                        codec: "adts",
                        type: "audio",
                      }),
                    d.trigger("data", e)),
                    (r = !1),
                    this.flushStreams_(),
                    this.trigger("done");
                });
            }).prototype = new j());
          var Qe,
            $e = {
              PAT_PID: 0,
              MP2T_PACKET_LENGTH: 188,
              TransportPacketStream: Ye,
              TransportParseStream: Xe,
              ElementaryStream: Ke,
              TimestampRolloverStream: We,
              CaptionStream: Fe.CaptionStream,
              Cea608Stream: Fe.Cea608Stream,
              Cea708Stream: Fe.Cea708Stream,
              MetadataStream: e,
            };
          for (Qe in je) je.hasOwnProperty(Qe) && ($e[Qe] = je[Qe]);
          var Je = $e,
            Ze = ue,
            et = [
              96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3,
              11025, 8e3, 7350,
            ],
            tt = function (u) {
              var l,
                c = 0;
              tt.prototype.init.call(this),
                (this.skipWarn_ = function (e, t) {
                  this.trigger("log", {
                    level: "warn",
                    message:
                      "adts skiping bytes " +
                      e +
                      " to " +
                      t +
                      " in frame " +
                      c +
                      " outside syncword",
                  });
                }),
                (this.push = function (e) {
                  var t,
                    i,
                    n,
                    r,
                    a,
                    s,
                    o = 0;
                  if ((u || (c = 0), "audio" === e.type)) {
                    for (
                      l && l.length
                        ? ((n = l),
                          (l = new Uint8Array(
                            n.byteLength + e.data.byteLength
                          )).set(n),
                          l.set(e.data, n.byteLength))
                        : (l = e.data);
                      o + 7 < l.length;

                    )
                      if (255 === l[o] && 240 == (246 & l[o + 1])) {
                        if (
                          ("number" == typeof s &&
                            (this.skipWarn_(s, o), (s = null)),
                          (i = 2 * (1 & ~l[o + 1])),
                          (t =
                            ((3 & l[o + 3]) << 11) |
                            (l[o + 4] << 3) |
                            ((224 & l[o + 5]) >> 5)),
                          (a =
                            ((r = 1024 * (1 + (3 & l[o + 6]))) * Ze) /
                            et[(60 & l[o + 2]) >>> 2]),
                          l.byteLength - o < t)
                        )
                          break;
                        this.trigger("data", {
                          pts: e.pts + c * a,
                          dts: e.dts + c * a,
                          sampleCount: r,
                          audioobjecttype: 1 + ((l[o + 2] >>> 6) & 3),
                          channelcount:
                            ((1 & l[o + 2]) << 2) | ((192 & l[o + 3]) >>> 6),
                          samplerate: et[(60 & l[o + 2]) >>> 2],
                          samplingfrequencyindex: (60 & l[o + 2]) >>> 2,
                          samplesize: 16,
                          data: l.subarray(o + 7 + i, o + t),
                        }),
                          c++,
                          (o += t);
                      } else "number" != typeof s && (s = o), o++;
                    "number" == typeof s && (this.skipWarn_(s, o), (s = null)),
                      (l = l.subarray(o));
                  }
                }),
                (this.flush = function () {
                  (c = 0), this.trigger("done");
                }),
                (this.reset = function () {
                  (l = void 0), this.trigger("reset");
                }),
                (this.endTimeline = function () {
                  (l = void 0), this.trigger("endedtimeline");
                });
            };
          tt.prototype = new j();
          var it,
            nt,
            rt = tt,
            at = function (n) {
              var r = n.byteLength,
                a = 0,
                s = 0;
              (this.length = function () {
                return 8 * r;
              }),
                (this.bitsAvailable = function () {
                  return 8 * r + s;
                }),
                (this.loadWord = function () {
                  var e = n.byteLength - r,
                    t = new Uint8Array(4),
                    i = Math.min(4, r);
                  if (0 === i) throw new Error("no bytes available");
                  t.set(n.subarray(e, e + i)),
                    (a = new DataView(t.buffer).getUint32(0)),
                    (s = 8 * i),
                    (r -= i);
                }),
                (this.skipBits = function (e) {
                  var t;
                  e < s ||
                    ((e -= s),
                    (e -= 8 * (t = Math.floor(e / 8))),
                    (r -= t),
                    this.loadWord()),
                    (a <<= e),
                    (s -= e);
                }),
                (this.readBits = function (e) {
                  var t = Math.min(s, e),
                    i = a >>> (32 - t);
                  return (
                    0 < (s -= t) ? (a <<= t) : 0 < r && this.loadWord(),
                    0 < (t = e - t) ? (i << t) | this.readBits(t) : i
                  );
                }),
                (this.skipLeadingZeros = function () {
                  for (var e = 0; e < s; ++e)
                    if (0 != (a & (2147483648 >>> e)))
                      return (a <<= e), (s -= e), e;
                  return this.loadWord(), e + this.skipLeadingZeros();
                }),
                (this.skipUnsignedExpGolomb = function () {
                  this.skipBits(1 + this.skipLeadingZeros());
                }),
                (this.skipExpGolomb = function () {
                  this.skipBits(1 + this.skipLeadingZeros());
                }),
                (this.readUnsignedExpGolomb = function () {
                  var e = this.skipLeadingZeros();
                  return this.readBits(e + 1) - 1;
                }),
                (this.readExpGolomb = function () {
                  var e = this.readUnsignedExpGolomb();
                  return 1 & e ? (1 + e) >>> 1 : -1 * (e >>> 1);
                }),
                (this.readBoolean = function () {
                  return 1 === this.readBits(1);
                }),
                (this.readUnsignedByte = function () {
                  return this.readBits(8);
                }),
                this.loadWord();
            },
            st = function () {
              var n,
                r,
                a = 0;
              st.prototype.init.call(this),
                (this.push = function (e) {
                  for (
                    var t,
                      i = (r = r
                        ? ((t = new Uint8Array(
                            r.byteLength + e.data.byteLength
                          )).set(r),
                          t.set(e.data, r.byteLength),
                          t)
                        : e.data).byteLength;
                    a < i - 3;
                    a++
                  )
                    if (1 === r[a + 2]) {
                      n = a + 5;
                      break;
                    }
                  for (; n < i; )
                    switch (r[n]) {
                      case 0:
                        if (0 !== r[n - 1]) {
                          n += 2;
                          break;
                        }
                        if (0 !== r[n - 2]) {
                          n++;
                          break;
                        }
                        for (
                          a + 3 !== n - 2 &&
                          this.trigger("data", r.subarray(a + 3, n - 2));
                          1 !== r[++n] && n < i;

                        );
                        (a = n - 2), (n += 3);
                        break;
                      case 1:
                        if (0 !== r[n - 1] || 0 !== r[n - 2]) {
                          n += 3;
                          break;
                        }
                        this.trigger("data", r.subarray(a + 3, n - 2)),
                          (a = n - 2),
                          (n += 3);
                        break;
                      default:
                        n += 3;
                    }
                  (r = r.subarray(a)), (n -= a), (a = 0);
                }),
                (this.reset = function () {
                  (r = null), (a = 0), this.trigger("reset");
                }),
                (this.flush = function () {
                  r &&
                    3 < r.byteLength &&
                    this.trigger("data", r.subarray(a + 3)),
                    (r = null),
                    (a = 0),
                    this.trigger("done");
                }),
                (this.endTimeline = function () {
                  this.flush(), this.trigger("endedtimeline");
                });
            };
          (st.prototype = new j()),
            (nt = {
              100: !0,
              110: !0,
              122: !0,
              244: !0,
              44: !0,
              83: !0,
              86: !0,
              118: !0,
              128: !0,
              138: !0,
              139: !0,
              134: !0,
            }),
            ((it = function () {
              var i,
                n,
                r,
                a,
                s,
                o,
                m,
                t = new st();
              it.prototype.init.call(this),
                ((i = this).push = function (e) {
                  "video" === e.type &&
                    ((n = e.trackId), (r = e.pts), (a = e.dts), t.push(e));
                }),
                t.on("data", function (e) {
                  var t = {
                    trackId: n,
                    pts: r,
                    dts: a,
                    data: e,
                    nalUnitTypeCode: 31 & e[0],
                  };
                  switch (t.nalUnitTypeCode) {
                    case 5:
                      t.nalUnitType =
                        "slice_layer_without_partitioning_rbsp_idr";
                      break;
                    case 6:
                      (t.nalUnitType = "sei_rbsp"),
                        (t.escapedRBSP = s(e.subarray(1)));
                      break;
                    case 7:
                      (t.nalUnitType = "seq_parameter_set_rbsp"),
                        (t.escapedRBSP = s(e.subarray(1))),
                        (t.config = o(t.escapedRBSP));
                      break;
                    case 8:
                      t.nalUnitType = "pic_parameter_set_rbsp";
                      break;
                    case 9:
                      t.nalUnitType = "access_unit_delimiter_rbsp";
                  }
                  i.trigger("data", t);
                }),
                t.on("done", function () {
                  i.trigger("done");
                }),
                t.on("partialdone", function () {
                  i.trigger("partialdone");
                }),
                t.on("reset", function () {
                  i.trigger("reset");
                }),
                t.on("endedtimeline", function () {
                  i.trigger("endedtimeline");
                }),
                (this.flush = function () {
                  t.flush();
                }),
                (this.partialFlush = function () {
                  t.partialFlush();
                }),
                (this.reset = function () {
                  t.reset();
                }),
                (this.endTimeline = function () {
                  t.endTimeline();
                }),
                (m = function (e, t) {
                  for (var i = 8, n = 8, r = 0; r < e; r++)
                    i =
                      0 ===
                      (n = 0 !== n ? (i + t.readExpGolomb() + 256) % 256 : n)
                        ? i
                        : n;
                }),
                (s = function (e) {
                  for (var t = e.byteLength, i = [], n = 1; n < t - 2; )
                    0 === e[n] && 0 === e[n + 1] && 3 === e[n + 2]
                      ? (i.push(n + 2), (n += 2))
                      : n++;
                  if (0 === i.length) return e;
                  for (
                    var r = t - i.length, a = new Uint8Array(r), s = 0, n = 0;
                    n < r;
                    s++, n++
                  )
                    s === i[0] && (s++, i.shift()), (a[n] = e[s]);
                  return a;
                }),
                (o = function (e) {
                  var t,
                    i,
                    n,
                    r,
                    a,
                    s = 0,
                    o = 0,
                    u = 0,
                    l = 0,
                    c = [1, 1],
                    d = new at(e),
                    h = d.readUnsignedByte(),
                    p = d.readUnsignedByte(),
                    f = d.readUnsignedByte();
                  if (
                    (d.skipUnsignedExpGolomb(),
                    nt[h] &&
                      (3 === (i = d.readUnsignedExpGolomb()) && d.skipBits(1),
                      d.skipUnsignedExpGolomb(),
                      d.skipUnsignedExpGolomb(),
                      d.skipBits(1),
                      d.readBoolean()))
                  )
                    for (r = 3 !== i ? 8 : 12, a = 0; a < r; a++)
                      d.readBoolean() && m(a < 6 ? 16 : 64, d);
                  if (
                    (d.skipUnsignedExpGolomb(),
                    0 === (n = d.readUnsignedExpGolomb()))
                  )
                    d.readUnsignedExpGolomb();
                  else if (1 === n)
                    for (
                      d.skipBits(1),
                        d.skipExpGolomb(),
                        d.skipExpGolomb(),
                        t = d.readUnsignedExpGolomb(),
                        a = 0;
                      a < t;
                      a++
                    )
                      d.skipExpGolomb();
                  if (
                    (d.skipUnsignedExpGolomb(),
                    d.skipBits(1),
                    (e = d.readUnsignedExpGolomb()),
                    (i = d.readUnsignedExpGolomb()),
                    0 === (n = d.readBits(1)) && d.skipBits(1),
                    d.skipBits(1),
                    d.readBoolean() &&
                      ((s = d.readUnsignedExpGolomb()),
                      (o = d.readUnsignedExpGolomb()),
                      (u = d.readUnsignedExpGolomb()),
                      (l = d.readUnsignedExpGolomb())),
                    d.readBoolean() && d.readBoolean())
                  ) {
                    switch (d.readUnsignedByte()) {
                      case 1:
                        c = [1, 1];
                        break;
                      case 2:
                        c = [12, 11];
                        break;
                      case 3:
                        c = [10, 11];
                        break;
                      case 4:
                        c = [16, 11];
                        break;
                      case 5:
                        c = [40, 33];
                        break;
                      case 6:
                        c = [24, 11];
                        break;
                      case 7:
                        c = [20, 11];
                        break;
                      case 8:
                        c = [32, 11];
                        break;
                      case 9:
                        c = [80, 33];
                        break;
                      case 10:
                        c = [18, 11];
                        break;
                      case 11:
                        c = [15, 11];
                        break;
                      case 12:
                        c = [64, 33];
                        break;
                      case 13:
                        c = [160, 99];
                        break;
                      case 14:
                        c = [4, 3];
                        break;
                      case 15:
                        c = [3, 2];
                        break;
                      case 16:
                        c = [2, 1];
                        break;
                      case 255:
                        c = [
                          (d.readUnsignedByte() << 8) | d.readUnsignedByte(),
                          (d.readUnsignedByte() << 8) | d.readUnsignedByte(),
                        ];
                    }
                    c && (c[0], c[1]);
                  }
                  return {
                    profileIdc: h,
                    levelIdc: f,
                    profileCompatibility: p,
                    width: 16 * (e + 1) - 2 * s - 2 * o,
                    height: (2 - n) * (i + 1) * 16 - 2 * u - 2 * l,
                    sarRatio: c,
                  };
                });
            }).prototype = new j());
          function ot(e, t) {
            var i =
              0 <=
              (i =
                (e[t + 6] << 21) |
                (e[t + 7] << 14) |
                (e[t + 8] << 7) |
                e[t + 9])
                ? i
                : 0;
            return (16 & e[t + 5]) >> 4 ? i + 20 : i + 10;
          }
          function ut(e, t) {
            return e.length - t < 10 ||
              e[t] !== "I".charCodeAt(0) ||
              e[t + 1] !== "D".charCodeAt(0) ||
              e[t + 2] !== "3".charCodeAt(0)
              ? t
              : ut(e, (t += ot(e, t)));
          }
          function lt(e) {
            return (e[0] << 21) | (e[1] << 14) | (e[2] << 7) | e[3];
          }
          var e = { H264Stream: it, NalByteStream: st },
            ct = [
              96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3,
              11025, 8e3, 7350,
            ],
            dt = {
              isLikelyAacData: function (e) {
                var t = ut(e, 0);
                return (
                  e.length >= t + 2 &&
                  255 == (255 & e[t]) &&
                  240 == (240 & e[t + 1]) &&
                  16 == (22 & e[t + 1])
                );
              },
              parseId3TagSize: ot,
              parseAdtsSize: function (e, t) {
                var i = (224 & e[t + 5]) >> 5,
                  n = e[t + 4] << 3;
                return (6144 & e[t + 3]) | n | i;
              },
              parseType: function (e, t) {
                return e[t] === "I".charCodeAt(0) &&
                  e[t + 1] === "D".charCodeAt(0) &&
                  e[t + 2] === "3".charCodeAt(0)
                  ? "timed-metadata"
                  : !0 & e[t] && 240 == (240 & e[t + 1])
                  ? "audio"
                  : null;
              },
              parseSampleRate: function (e) {
                for (var t = 0; t + 5 < e.length; ) {
                  if (255 === e[t] && 240 == (246 & e[t + 1]))
                    return ct[(60 & e[t + 2]) >>> 2];
                  t++;
                }
                return null;
              },
              parseAacTimestamp: function (e) {
                var t,
                  i = 10;
                64 & e[5] && ((i += 4), (i += lt(e.subarray(10, 14))));
                do {
                  if ((t = lt(e.subarray(i + 4, i + 8))) < 1) return null;
                  if (
                    "PRIV" ===
                    String.fromCharCode(e[i], e[i + 1], e[i + 2], e[i + 3])
                  )
                    for (
                      var n = e.subarray(i + 10, i + t + 10), r = 0;
                      r < n.byteLength;
                      r++
                    )
                      if (0 === n[r]) {
                        if (
                          "com.apple.streaming.transportStreamTimestamp" !==
                          unescape(
                            (function (e, t, i) {
                              for (var n = "", r = t; r < i; r++)
                                n += "%" + ("00" + e[r].toString(16)).slice(-2);
                              return n;
                            })(n, 0, r)
                          )
                        )
                          break;
                        var a = n.subarray(r + 1),
                          s =
                            ((1 & a[3]) << 30) |
                            (a[4] << 22) |
                            (a[5] << 14) |
                            (a[6] << 6) |
                            (a[7] >>> 2);
                        return (s *= 4), (s += 3 & a[7]);
                      }
                } while (((i += 10), (i += t) < e.byteLength));
                return null;
              },
            },
            ht = function () {
              var a = new Uint8Array(),
                s = 0;
              ht.prototype.init.call(this),
                (this.setTimestamp = function (e) {
                  s = e;
                }),
                (this.push = function (e) {
                  var t,
                    i,
                    n = 0,
                    r = 0;
                  for (
                    a.length
                      ? ((i = a.length),
                        (a = new Uint8Array(e.byteLength + i)).set(
                          a.subarray(0, i)
                        ),
                        a.set(e, i))
                      : (a = e);
                    3 <= a.length - r;

                  )
                    if (
                      a[r] !== "I".charCodeAt(0) ||
                      a[r + 1] !== "D".charCodeAt(0) ||
                      a[r + 2] !== "3".charCodeAt(0)
                    )
                      if (255 != (255 & a[r]) || 240 != (240 & a[r + 1])) r++;
                      else {
                        if (a.length - r < 7) break;
                        if (r + (n = dt.parseAdtsSize(a, r)) > a.length) break;
                        (t = {
                          type: "audio",
                          data: a.subarray(r, r + n),
                          pts: s,
                          dts: s,
                        }),
                          this.trigger("data", t),
                          (r += n);
                      }
                    else {
                      if (a.length - r < 10) break;
                      if (r + (n = dt.parseId3TagSize(a, r)) > a.length) break;
                      (t = {
                        type: "timed-metadata",
                        data: a.subarray(r, r + n),
                      }),
                        this.trigger("data", t),
                        (r += n);
                    }
                  (e = a.length - r),
                    (a = 0 < e ? a.subarray(r) : new Uint8Array());
                }),
                (this.reset = function () {
                  (a = new Uint8Array()), this.trigger("reset");
                }),
                (this.endTimeline = function () {
                  (a = new Uint8Array()), this.trigger("endedtimeline");
                });
            };
          ht.prototype = new j();
          function pt(e, t) {
            (t.stream = e), this.trigger("log", t);
          }
          function ft(e, t) {
            for (var i = Object.keys(t), n = 0; n < i.length; n++) {
              var r = i[n];
              "headOfPipeline" !== r &&
                t[r].on &&
                t[r].on("log", pt.bind(e, r));
            }
          }
          function mt(e, t) {
            var i;
            if (e.length === t.length) {
              for (i = 0; i < e.length; i++) if (e[i] !== t[i]) return;
              return 1;
            }
          }
          function gt(e, t, i, n, r, a) {
            return {
              start: { dts: e, pts: e + (i - t) },
              end: { dts: e + (n - t), pts: e + (r - i) },
              prependedContentDuration: a,
              baseMediaDecodeTime: e,
            };
          }
          var yt,
            vt,
            _t,
            bt = ht,
            Tt = [
              "audioobjecttype",
              "channelcount",
              "samplerate",
              "samplingfrequencyindex",
              "samplesize",
            ],
            St = [
              "width",
              "height",
              "profileIdc",
              "levelIdc",
              "profileCompatibility",
              "sarRatio",
            ],
            wt = e.H264Stream,
            Et = dt.isLikelyAacData,
            kt = ue,
            Ct = function (a, s) {
              var o = [],
                u = 0,
                l = 0,
                c = 1 / 0,
                d = (s = s || {}).firstSequenceNumber || 0;
              Ct.prototype.init.call(this),
                (this.push = function (t) {
                  Te(a, t),
                    a &&
                      Tt.forEach(function (e) {
                        a[e] = t[e];
                      }),
                    o.push(t);
                }),
                (this.setEarliestDts = function (e) {
                  u = e;
                }),
                (this.setVideoBaseMediaDecodeTime = function (e) {
                  c = e;
                }),
                (this.setAudioAppendStart = function (e) {
                  l = e;
                }),
                (this.flush = function () {
                  var e, t, i, n, r;
                  0 !== o.length &&
                    ((e = me(o, a, u)),
                    (a.baseMediaDecodeTime = be(a, s.keepOriginalTimestamps)),
                    (r = fe(a, e, l, c)),
                    (a.samples = ge(e)),
                    (t = K(ye(e))),
                    (o = []),
                    (n = Y(d, [a])),
                    (i = new Uint8Array(n.byteLength + t.byteLength)),
                    d++,
                    i.set(n),
                    i.set(t, n.byteLength),
                    _e(a),
                    (n = Math.ceil((1024 * kt) / a.samplerate)),
                    e.length &&
                      ((n = e.length * n),
                      this.trigger(
                        "segmentTimingInfo",
                        gt(
                          de(a.baseMediaDecodeTime, a.samplerate),
                          e[0].dts,
                          e[0].pts,
                          e[0].dts + n,
                          e[0].pts + n,
                          r || 0
                        )
                      ),
                      this.trigger("timingInfo", {
                        start: e[0].pts,
                        end: e[0].pts + n,
                      })),
                    this.trigger("data", { track: a, boxes: i })),
                    this.trigger("done", "AudioSegmentStream");
                }),
                (this.reset = function () {
                  _e(a), (o = []), this.trigger("reset");
                });
            };
          (Ct.prototype = new j()),
            ((yt = function (s, a) {
              var t,
                i,
                o = [],
                l = [],
                u = (a = a || {}).firstSequenceNumber || 0;
              yt.prototype.init.call(this),
                delete s.minPTS,
                (this.gopCache_ = []),
                (this.push = function (e) {
                  Te(s, e),
                    "seq_parameter_set_rbsp" !== e.nalUnitType ||
                      t ||
                      ((t = e.config),
                      (s.sps = [e.data]),
                      St.forEach(function (e) {
                        s[e] = t[e];
                      }, this)),
                    "pic_parameter_set_rbsp" !== e.nalUnitType ||
                      i ||
                      ((i = e.data), (s.pps = [e.data])),
                    o.push(e);
                }),
                (this.flush = function () {
                  for (
                    var e, t, i, n = 0;
                    o.length &&
                    "access_unit_delimiter_rbsp" !== o[0].nalUnitType;

                  )
                    o.shift();
                  if (0 === o.length)
                    return (
                      this.resetStream_(),
                      void this.trigger("done", "VideoSegmentStream")
                    );
                  if (
                    ((e = $(o)),
                    (t = J(e))[0][0].keyFrame ||
                      ((i = this.getGopForFusion_(o[0], s))
                        ? ((n = i.duration),
                          t.unshift(i),
                          (t.byteLength += i.byteLength),
                          (t.nalCount += i.nalCount),
                          (t.pts = i.pts),
                          (t.dts = i.dts),
                          (t.duration += i.duration))
                        : (t = Z(t))),
                    l.length)
                  ) {
                    var r = a.alignGopsAtEnd
                      ? this.alignGopsAtEnd_(t)
                      : this.alignGopsAtStart_(t);
                    if (!r)
                      return (
                        this.gopCache_.unshift({
                          gop: t.pop(),
                          pps: s.pps,
                          sps: s.sps,
                        }),
                        (this.gopCache_.length = Math.min(
                          6,
                          this.gopCache_.length
                        )),
                        (o = []),
                        this.resetStream_(),
                        void this.trigger("done", "VideoSegmentStream")
                      );
                    _e(s), (t = r);
                  }
                  Te(s, t),
                    (s.samples = ee(t)),
                    (e = K(te(t))),
                    (s.baseMediaDecodeTime = be(s, a.keepOriginalTimestamps)),
                    this.trigger(
                      "processedGopsInfo",
                      t.map(function (e) {
                        return {
                          pts: e.pts,
                          dts: e.dts,
                          byteLength: e.byteLength,
                        };
                      })
                    ),
                    (i = t[0]),
                    (r = t[t.length - 1]),
                    this.trigger(
                      "segmentTimingInfo",
                      gt(
                        s.baseMediaDecodeTime,
                        i.dts,
                        i.pts,
                        r.dts + r.duration,
                        r.pts + r.duration,
                        n
                      )
                    ),
                    this.trigger("timingInfo", {
                      start: t[0].pts,
                      end: t[t.length - 1].pts + t[t.length - 1].duration,
                    }),
                    this.gopCache_.unshift({
                      gop: t.pop(),
                      pps: s.pps,
                      sps: s.sps,
                    }),
                    (this.gopCache_.length = Math.min(
                      6,
                      this.gopCache_.length
                    )),
                    (o = []),
                    this.trigger("baseMediaDecodeTime", s.baseMediaDecodeTime),
                    this.trigger("timelineStartInfo", s.timelineStartInfo),
                    (n = Y(u, [s])),
                    (t = new Uint8Array(n.byteLength + e.byteLength)),
                    u++,
                    t.set(n),
                    t.set(e, n.byteLength),
                    this.trigger("data", { track: s, boxes: t }),
                    this.resetStream_(),
                    this.trigger("done", "VideoSegmentStream");
                }),
                (this.reset = function () {
                  this.resetStream_(),
                    (o = []),
                    (this.gopCache_.length = 0),
                    (l.length = 0),
                    this.trigger("reset");
                }),
                (this.resetStream_ = function () {
                  _e(s), (i = t = void 0);
                }),
                (this.getGopForFusion_ = function (e) {
                  for (
                    var t, i, n, r = 1 / 0, a = 0;
                    a < this.gopCache_.length;
                    a++
                  )
                    (i = (n = this.gopCache_[a]).gop),
                      s.pps &&
                        mt(s.pps[0], n.pps[0]) &&
                        s.sps &&
                        mt(s.sps[0], n.sps[0]) &&
                        (i.dts < s.timelineStartInfo.dts ||
                          (-1e4 <= (i = e.dts - i.dts - i.duration) &&
                            i <= 45e3 &&
                            (!t || i < r) &&
                            ((t = n), (r = i))));
                  return t ? t.gop : null;
                }),
                (this.alignGopsAtStart_ = function (e) {
                  for (
                    var t,
                      i,
                      n,
                      r,
                      a = e.byteLength,
                      s = e.nalCount,
                      o = e.duration,
                      u = (t = 0);
                    u < l.length &&
                    t < e.length &&
                    ((i = l[u]), (n = e[t]), i.pts !== n.pts);

                  )
                    n.pts > i.pts
                      ? u++
                      : (t++,
                        (a -= n.byteLength),
                        (s -= n.nalCount),
                        (o -= n.duration));
                  return 0 === t
                    ? e
                    : t === e.length
                    ? null
                    : (((r = e.slice(t)).byteLength = a),
                      (r.duration = o),
                      (r.nalCount = s),
                      (r.pts = r[0].pts),
                      (r.dts = r[0].dts),
                      r);
                }),
                (this.alignGopsAtEnd_ = function (e) {
                  for (
                    var t,
                      i,
                      n = l.length - 1,
                      r = e.length - 1,
                      a = null,
                      s = !1;
                    0 <= n && 0 <= r;

                  ) {
                    if (((t = l[n]), (i = e[r]), t.pts === i.pts)) {
                      s = !0;
                      break;
                    }
                    t.pts > i.pts ? n-- : (n === l.length - 1 && (a = r), r--);
                  }
                  if (!s && null === a) return null;
                  if (0 === (u = s ? r : a)) return e;
                  var o = e.slice(u),
                    u = o.reduce(
                      function (e, t) {
                        return (
                          (e.byteLength += t.byteLength),
                          (e.duration += t.duration),
                          (e.nalCount += t.nalCount),
                          e
                        );
                      },
                      { byteLength: 0, duration: 0, nalCount: 0 }
                    );
                  return (
                    (o.byteLength = u.byteLength),
                    (o.duration = u.duration),
                    (o.nalCount = u.nalCount),
                    (o.pts = o[0].pts),
                    (o.dts = o[0].dts),
                    o
                  );
                }),
                (this.alignGopsWith = function (e) {
                  l = e;
                });
            }).prototype = new j()),
            ((_t = function (e, t) {
              (this.numberOfTracks = 0),
                (this.metadataStream = t),
                "undefined" != typeof (e = e || {}).remux
                  ? (this.remuxTracks = !!e.remux)
                  : (this.remuxTracks = !0),
                "boolean" == typeof e.keepOriginalTimestamps
                  ? (this.keepOriginalTimestamps = e.keepOriginalTimestamps)
                  : (this.keepOriginalTimestamps = !1),
                (this.pendingTracks = []),
                (this.videoTrack = null),
                (this.pendingBoxes = []),
                (this.pendingCaptions = []),
                (this.pendingMetadata = []),
                (this.pendingBytes = 0),
                (this.emittedTracks = 0),
                _t.prototype.init.call(this),
                (this.push = function (e) {
                  return e.text
                    ? this.pendingCaptions.push(e)
                    : e.frames
                    ? this.pendingMetadata.push(e)
                    : (this.pendingTracks.push(e.track),
                      (this.pendingBytes += e.boxes.byteLength),
                      "video" === e.track.type &&
                        ((this.videoTrack = e.track),
                        this.pendingBoxes.push(e.boxes)),
                      void (
                        "audio" === e.track.type &&
                        ((this.audioTrack = e.track),
                        this.pendingBoxes.unshift(e.boxes))
                      ));
                });
            }).prototype = new j()),
            (_t.prototype.flush = function (e) {
              var t,
                i,
                n,
                r = 0,
                a = {
                  captions: [],
                  captionStreams: {},
                  metadata: [],
                  info: {},
                },
                s = 0;
              if (this.pendingTracks.length < this.numberOfTracks) {
                if ("VideoSegmentStream" !== e && "AudioSegmentStream" !== e)
                  return;
                if (this.remuxTracks) return;
                if (0 === this.pendingTracks.length)
                  return (
                    this.emittedTracks++,
                    void (
                      this.emittedTracks >= this.numberOfTracks &&
                      (this.trigger("done"), (this.emittedTracks = 0))
                    )
                  );
              }
              if (
                (this.videoTrack
                  ? ((s = this.videoTrack.timelineStartInfo.pts),
                    St.forEach(function (e) {
                      a.info[e] = this.videoTrack[e];
                    }, this))
                  : this.audioTrack &&
                    ((s = this.audioTrack.timelineStartInfo.pts),
                    Tt.forEach(function (e) {
                      a.info[e] = this.audioTrack[e];
                    }, this)),
                this.videoTrack || this.audioTrack)
              ) {
                for (
                  1 === this.pendingTracks.length
                    ? (a.type = this.pendingTracks[0].type)
                    : (a.type = "combined"),
                    this.emittedTracks += this.pendingTracks.length,
                    e = Q(this.pendingTracks),
                    a.initSegment = new Uint8Array(e.byteLength),
                    a.initSegment.set(e),
                    a.data = new Uint8Array(this.pendingBytes),
                    n = 0;
                  n < this.pendingBoxes.length;
                  n++
                )
                  a.data.set(this.pendingBoxes[n], r),
                    (r += this.pendingBoxes[n].byteLength);
                for (n = 0; n < this.pendingCaptions.length; n++)
                  ((t = this.pendingCaptions[n]).startTime = pe(
                    t.startPts,
                    s,
                    this.keepOriginalTimestamps
                  )),
                    (t.endTime = pe(t.endPts, s, this.keepOriginalTimestamps)),
                    (a.captionStreams[t.stream] = !0),
                    a.captions.push(t);
                for (n = 0; n < this.pendingMetadata.length; n++)
                  ((i = this.pendingMetadata[n]).cueTime = pe(
                    i.pts,
                    s,
                    this.keepOriginalTimestamps
                  )),
                    a.metadata.push(i);
                for (
                  a.metadata.dispatchType = this.metadataStream.dispatchType,
                    this.pendingTracks.length = 0,
                    this.videoTrack = null,
                    this.pendingBoxes.length = 0,
                    this.pendingCaptions.length = 0,
                    this.pendingBytes = 0,
                    this.pendingMetadata.length = 0,
                    this.trigger("data", a),
                    n = 0;
                  n < a.captions.length;
                  n++
                )
                  (t = a.captions[n]), this.trigger("caption", t);
                for (n = 0; n < a.metadata.length; n++)
                  (i = a.metadata[n]), this.trigger("id3Frame", i);
              }
              this.emittedTracks >= this.numberOfTracks &&
                (this.trigger("done"), (this.emittedTracks = 0));
            }),
            (_t.prototype.setRemux = function (e) {
              this.remuxTracks = e;
            }),
            ((vt = function (n) {
              var r,
                a,
                s = this,
                i = !0;
              vt.prototype.init.call(this),
                (this.baseMediaDecodeTime =
                  (n = n || {}).baseMediaDecodeTime || 0),
                (this.transmuxPipeline_ = {}),
                (this.setupAacPipeline = function () {
                  var t = {};
                  ((this.transmuxPipeline_ = t).type = "aac"),
                    (t.metadataStream = new Je.MetadataStream()),
                    (t.aacStream = new bt()),
                    (t.audioTimestampRolloverStream =
                      new Je.TimestampRolloverStream("audio")),
                    (t.timedMetadataTimestampRolloverStream =
                      new Je.TimestampRolloverStream("timed-metadata")),
                    (t.adtsStream = new rt()),
                    (t.coalesceStream = new _t(n, t.metadataStream)),
                    (t.headOfPipeline = t.aacStream),
                    t.aacStream
                      .pipe(t.audioTimestampRolloverStream)
                      .pipe(t.adtsStream),
                    t.aacStream
                      .pipe(t.timedMetadataTimestampRolloverStream)
                      .pipe(t.metadataStream)
                      .pipe(t.coalesceStream),
                    t.metadataStream.on("timestamp", function (e) {
                      t.aacStream.setTimestamp(e.timeStamp);
                    }),
                    t.aacStream.on("data", function (e) {
                      ("timed-metadata" !== e.type && "audio" !== e.type) ||
                        t.audioSegmentStream ||
                        ((a = a || {
                          timelineStartInfo: {
                            baseMediaDecodeTime: s.baseMediaDecodeTime,
                          },
                          codec: "adts",
                          type: "audio",
                        }),
                        t.coalesceStream.numberOfTracks++,
                        (t.audioSegmentStream = new Ct(a, n)),
                        t.audioSegmentStream.on(
                          "log",
                          s.getLogTrigger_("audioSegmentStream")
                        ),
                        t.audioSegmentStream.on(
                          "timingInfo",
                          s.trigger.bind(s, "audioTimingInfo")
                        ),
                        t.adtsStream
                          .pipe(t.audioSegmentStream)
                          .pipe(t.coalesceStream),
                        s.trigger("trackinfo", {
                          hasAudio: !!a,
                          hasVideo: !!r,
                        }));
                    }),
                    t.coalesceStream.on(
                      "data",
                      this.trigger.bind(this, "data")
                    ),
                    t.coalesceStream.on(
                      "done",
                      this.trigger.bind(this, "done")
                    ),
                    ft(this, t);
                }),
                (this.setupTsPipeline = function () {
                  var i = {};
                  ((this.transmuxPipeline_ = i).type = "ts"),
                    (i.metadataStream = new Je.MetadataStream()),
                    (i.packetStream = new Je.TransportPacketStream()),
                    (i.parseStream = new Je.TransportParseStream()),
                    (i.elementaryStream = new Je.ElementaryStream()),
                    (i.timestampRolloverStream =
                      new Je.TimestampRolloverStream()),
                    (i.adtsStream = new rt()),
                    (i.h264Stream = new wt()),
                    (i.captionStream = new Je.CaptionStream(n)),
                    (i.coalesceStream = new _t(n, i.metadataStream)),
                    (i.headOfPipeline = i.packetStream),
                    i.packetStream
                      .pipe(i.parseStream)
                      .pipe(i.elementaryStream)
                      .pipe(i.timestampRolloverStream),
                    i.timestampRolloverStream.pipe(i.h264Stream),
                    i.timestampRolloverStream.pipe(i.adtsStream),
                    i.timestampRolloverStream
                      .pipe(i.metadataStream)
                      .pipe(i.coalesceStream),
                    i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),
                    i.elementaryStream.on("data", function (e) {
                      var t;
                      if ("metadata" === e.type) {
                        for (t = e.tracks.length; t--; )
                          r || "video" !== e.tracks[t].type
                            ? a ||
                              "audio" !== e.tracks[t].type ||
                              ((a =
                                e.tracks[
                                  t
                                ]).timelineStartInfo.baseMediaDecodeTime =
                                s.baseMediaDecodeTime)
                            : ((r =
                                e.tracks[
                                  t
                                ]).timelineStartInfo.baseMediaDecodeTime =
                                s.baseMediaDecodeTime);
                        r &&
                          !i.videoSegmentStream &&
                          (i.coalesceStream.numberOfTracks++,
                          (i.videoSegmentStream = new yt(r, n)),
                          i.videoSegmentStream.on(
                            "log",
                            s.getLogTrigger_("videoSegmentStream")
                          ),
                          i.videoSegmentStream.on(
                            "timelineStartInfo",
                            function (e) {
                              a &&
                                !n.keepOriginalTimestamps &&
                                ((a.timelineStartInfo = e),
                                i.audioSegmentStream.setEarliestDts(
                                  e.dts - s.baseMediaDecodeTime
                                ));
                            }
                          ),
                          i.videoSegmentStream.on(
                            "processedGopsInfo",
                            s.trigger.bind(s, "gopInfo")
                          ),
                          i.videoSegmentStream.on(
                            "segmentTimingInfo",
                            s.trigger.bind(s, "videoSegmentTimingInfo")
                          ),
                          i.videoSegmentStream.on(
                            "baseMediaDecodeTime",
                            function (e) {
                              a &&
                                i.audioSegmentStream.setVideoBaseMediaDecodeTime(
                                  e
                                );
                            }
                          ),
                          i.videoSegmentStream.on(
                            "timingInfo",
                            s.trigger.bind(s, "videoTimingInfo")
                          ),
                          i.h264Stream
                            .pipe(i.videoSegmentStream)
                            .pipe(i.coalesceStream)),
                          a &&
                            !i.audioSegmentStream &&
                            (i.coalesceStream.numberOfTracks++,
                            (i.audioSegmentStream = new Ct(a, n)),
                            i.audioSegmentStream.on(
                              "log",
                              s.getLogTrigger_("audioSegmentStream")
                            ),
                            i.audioSegmentStream.on(
                              "timingInfo",
                              s.trigger.bind(s, "audioTimingInfo")
                            ),
                            i.audioSegmentStream.on(
                              "segmentTimingInfo",
                              s.trigger.bind(s, "audioSegmentTimingInfo")
                            ),
                            i.adtsStream
                              .pipe(i.audioSegmentStream)
                              .pipe(i.coalesceStream)),
                          s.trigger("trackinfo", {
                            hasAudio: !!a,
                            hasVideo: !!r,
                          });
                      }
                    }),
                    i.coalesceStream.on(
                      "data",
                      this.trigger.bind(this, "data")
                    ),
                    i.coalesceStream.on("id3Frame", function (e) {
                      (e.dispatchType = i.metadataStream.dispatchType),
                        s.trigger("id3Frame", e);
                    }),
                    i.coalesceStream.on(
                      "caption",
                      this.trigger.bind(this, "caption")
                    ),
                    i.coalesceStream.on(
                      "done",
                      this.trigger.bind(this, "done")
                    ),
                    ft(this, i);
                }),
                (this.setBaseMediaDecodeTime = function (e) {
                  var t = this.transmuxPipeline_;
                  n.keepOriginalTimestamps || (this.baseMediaDecodeTime = e),
                    a &&
                      ((a.timelineStartInfo.dts = void 0),
                      (a.timelineStartInfo.pts = void 0),
                      _e(a),
                      t.audioTimestampRolloverStream &&
                        t.audioTimestampRolloverStream.discontinuity()),
                    r &&
                      (t.videoSegmentStream &&
                        (t.videoSegmentStream.gopCache_ = []),
                      (r.timelineStartInfo.dts = void 0),
                      (r.timelineStartInfo.pts = void 0),
                      _e(r),
                      t.captionStream.reset()),
                    t.timestampRolloverStream &&
                      t.timestampRolloverStream.discontinuity();
                }),
                (this.setAudioAppendStart = function (e) {
                  a &&
                    this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(
                      e
                    );
                }),
                (this.setRemux = function (e) {
                  var t = this.transmuxPipeline_;
                  (n.remux = e),
                    t && t.coalesceStream && t.coalesceStream.setRemux(e);
                }),
                (this.alignGopsWith = function (e) {
                  r &&
                    this.transmuxPipeline_.videoSegmentStream &&
                    this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e);
                }),
                (this.getLogTrigger_ = function (t) {
                  var i = this;
                  return function (e) {
                    (e.stream = t), i.trigger("log", e);
                  };
                }),
                (this.push = function (e) {
                  var t;
                  i &&
                    ((t = Et(e)) && "aac" !== this.transmuxPipeline_.type
                      ? this.setupAacPipeline()
                      : t ||
                        "ts" === this.transmuxPipeline_.type ||
                        this.setupTsPipeline(),
                    (i = !1)),
                    this.transmuxPipeline_.headOfPipeline.push(e);
                }),
                (this.flush = function () {
                  (i = !0), this.transmuxPipeline_.headOfPipeline.flush();
                }),
                (this.endTimeline = function () {
                  this.transmuxPipeline_.headOfPipeline.endTimeline();
                }),
                (this.reset = function () {
                  this.transmuxPipeline_.headOfPipeline &&
                    this.transmuxPipeline_.headOfPipeline.reset();
                }),
                (this.resetCaptions = function () {
                  this.transmuxPipeline_.captionStream &&
                    this.transmuxPipeline_.captionStream.reset();
                });
            }).prototype = new j());
          function It(e, c) {
            var i = Mt(e, ["moof", "traf"]),
              e = Mt(e, ["mdat"]),
              d = {},
              n = [];
            return (
              e.forEach(function (e, t) {
                t = i[t];
                n.push({ mdat: e, traf: t });
              }),
              n.forEach(function (e) {
                var t,
                  i,
                  n,
                  r,
                  a,
                  s = e.mdat,
                  o = e.traf,
                  u = Mt(o, ["tfhd"]),
                  l = Ht(u[0]),
                  e = l.trackId,
                  u = Mt(o, ["tfdt"]),
                  u = 0 < u.length ? Bt(u[0]).baseMediaDecodeTime : 0,
                  o = Mt(o, ["trun"]);
                c === e &&
                  0 < o.length &&
                  ((o = o),
                  (t = u),
                  (i = (l = l).defaultSampleDuration || 0),
                  (n = l.defaultSampleSize || 0),
                  (r = l.trackId),
                  (a = []),
                  o.forEach(function (e) {
                    e = jt(e).samples;
                    e.forEach(function (e) {
                      void 0 === e.duration && (e.duration = i),
                        void 0 === e.size && (e.size = n),
                        (e.trackId = r),
                        (e.dts = t),
                        void 0 === e.compositionTimeOffset &&
                          (e.compositionTimeOffset = 0),
                        "bigint" == typeof t
                          ? ((e.pts = t + qt.BigInt(e.compositionTimeOffset)),
                            (t += qt.BigInt(e.duration)))
                          : ((e.pts = t + e.compositionTimeOffset),
                            (t += e.duration));
                    }),
                      (a = a.concat(e));
                  }),
                  (s = (function (e, t, i) {
                    for (
                      var n,
                        r,
                        a = new DataView(e.buffer, e.byteOffset, e.byteLength),
                        s = { logs: [], seiNals: [] },
                        o = 0;
                      o + 4 < e.length;
                      o += n
                    )
                      if (((n = a.getUint32(o)), (o += 4), !(n <= 0)))
                        switch (31 & e[o]) {
                          case 6:
                            var u = e.subarray(o + 1, o + 1 + n),
                              l = (function (e, t) {
                                for (var i = e, n = 0; n < t.length; n++) {
                                  var r = t[n];
                                  if (i < r.size) return r;
                                  i -= r.size;
                                }
                                return null;
                              })(o, t),
                              u = {
                                nalUnitType: "sei_rbsp",
                                size: n,
                                data: u,
                                escapedRBSP: Vt(u),
                                trackId: i,
                              };
                            if (l) (u.pts = l.pts), (u.dts = l.dts), (r = l);
                            else {
                              if (!r) {
                                s.logs.push({
                                  level: "warn",
                                  message:
                                    "We've encountered a nal unit without data at " +
                                    o +
                                    " for trackId " +
                                    i +
                                    ". See mux.js#223.",
                                });
                                break;
                              }
                              (u.pts = r.pts), (u.dts = r.dts);
                            }
                            s.seiNals.push(u);
                        }
                    return s;
                  })(s, a, e)),
                  d[e] || (d[e] = { seiNals: [], logs: [] }),
                  (d[e].seiNals = d[e].seiNals.concat(s.seiNals)),
                  (d[e].logs = d[e].logs.concat(s.logs)));
              }),
              d
            );
          }
          function xt(e) {
            var t = 31 & e[1];
            return (t <<= 8), (t |= e[2]);
          }
          function At(e) {
            return !!(64 & e[1]);
          }
          function Pt(e) {
            var t = 0;
            return 1 < (48 & e[3]) >>> 4 && (t += e[4] + 1), t;
          }
          function Lt(e) {
            switch (e) {
              case 5:
                return "slice_layer_without_partitioning_rbsp_idr";
              case 6:
                return "sei_rbsp";
              case 7:
                return "seq_parameter_set_rbsp";
              case 8:
                return "pic_parameter_set_rbsp";
              case 9:
                return "access_unit_delimiter_rbsp";
              default:
                return null;
            }
          }
          var Dt = {
              Transmuxer: vt,
              VideoSegmentStream: yt,
              AudioSegmentStream: Ct,
              AUDIO_PROPERTIES: Tt,
              VIDEO_PROPERTIES: St,
              generateSegmentTimingInfo: gt,
            },
            e = function (e) {
              return e >>> 0;
            },
            Ot = function (e) {
              var t = "";
              return (
                (t += String.fromCharCode(e[0])),
                (t += String.fromCharCode(e[1])),
                (t += String.fromCharCode(e[2])),
                (t += String.fromCharCode(e[3]))
              );
            },
            Rt = e,
            Mt = function e(t, i) {
              var n,
                r,
                a,
                s = [];
              if (!i.length) return null;
              for (n = 0; n < t.byteLength; )
                (r = Rt(
                  (t[n] << 24) | (t[n + 1] << 16) | (t[n + 2] << 8) | t[n + 3]
                )),
                  (a = Ot(t.subarray(n + 4, n + 8))),
                  (r = 1 < r ? n + r : t.byteLength),
                  a === i[0] &&
                    (1 === i.length
                      ? s.push(t.subarray(n + 8, r))
                      : (a = e(t.subarray(n + 8, r), i.slice(1))).length &&
                        (s = s.concat(a))),
                  (n = r);
              return s;
            },
            Nt = e,
            Ut = q.getUint64,
            Bt = function (e) {
              var t = {
                version: e[0],
                flags: new Uint8Array(e.subarray(1, 4)),
              };
              return (
                1 === t.version
                  ? (t.baseMediaDecodeTime = Ut(e.subarray(4)))
                  : (t.baseMediaDecodeTime = Nt(
                      (e[4] << 24) | (e[5] << 16) | (e[6] << 8) | e[7]
                    )),
                t
              );
            },
            Ft = function (e) {
              return {
                isLeading: (12 & e[0]) >>> 2,
                dependsOn: 3 & e[0],
                isDependedOn: (192 & e[1]) >>> 6,
                hasRedundancy: (48 & e[1]) >>> 4,
                paddingValue: (14 & e[1]) >>> 1,
                isNonSyncSample: 1 & e[1],
                degradationPriority: (e[2] << 8) | e[3],
              };
            },
            jt = function (e) {
              var t,
                i = {
                  version: e[0],
                  flags: new Uint8Array(e.subarray(1, 4)),
                  samples: [],
                },
                n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                r = 1 & i.flags[2],
                a = 4 & i.flags[2],
                s = 1 & i.flags[1],
                o = 2 & i.flags[1],
                u = 4 & i.flags[1],
                l = 8 & i.flags[1],
                c = n.getUint32(4),
                d = 8;
              for (
                r && ((i.dataOffset = n.getInt32(d)), (d += 4)),
                  a &&
                    c &&
                    ((t = { flags: Ft(e.subarray(d, d + 4)) }),
                    (d += 4),
                    s && ((t.duration = n.getUint32(d)), (d += 4)),
                    o && ((t.size = n.getUint32(d)), (d += 4)),
                    l &&
                      (1 === i.version
                        ? (t.compositionTimeOffset = n.getInt32(d))
                        : (t.compositionTimeOffset = n.getUint32(d)),
                      (d += 4)),
                    i.samples.push(t),
                    c--);
                c--;

              )
                (t = {}),
                  s && ((t.duration = n.getUint32(d)), (d += 4)),
                  o && ((t.size = n.getUint32(d)), (d += 4)),
                  u && ((t.flags = Ft(e.subarray(d, d + 4))), (d += 4)),
                  l &&
                    (1 === i.version
                      ? (t.compositionTimeOffset = n.getInt32(d))
                      : (t.compositionTimeOffset = n.getUint32(d)),
                    (d += 4)),
                  i.samples.push(t);
              return i;
            },
            Ht = function (e) {
              var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                i = {
                  version: e[0],
                  flags: new Uint8Array(e.subarray(1, 4)),
                  trackId: t.getUint32(4),
                },
                n = 1 & i.flags[2],
                r = 2 & i.flags[2],
                a = 8 & i.flags[2],
                s = 16 & i.flags[2],
                o = 32 & i.flags[2],
                u = 65536 & i.flags[0],
                l = 131072 & i.flags[0],
                e = 8;
              return (
                n && ((e += 4), (i.baseDataOffset = t.getUint32(12)), (e += 4)),
                r && ((i.sampleDescriptionIndex = t.getUint32(e)), (e += 4)),
                a && ((i.defaultSampleDuration = t.getUint32(e)), (e += 4)),
                s && ((i.defaultSampleSize = t.getUint32(e)), (e += 4)),
                o && (i.defaultSampleFlags = t.getUint32(e)),
                u && (i.durationIsEmpty = !0),
                !n && l && (i.baseDataOffsetIsMoof = !0),
                i
              );
            },
            j =
              "undefined" != typeof globalThis
                ? globalThis
                : "undefined" != typeof window
                ? window
                : "undefined" != typeof global
                ? global
                : "undefined" != typeof self
                ? self
                : {},
            j =
              "undefined" != typeof window
                ? window
                : "undefined" != typeof j
                ? j
                : "undefined" != typeof self
                ? self
                : {},
            qt = j,
            Vt = ke,
            Wt = Fe.CaptionStream,
            Gt = function () {
              var t,
                r,
                a,
                s,
                o,
                i,
                n = !1;
              (this.isInitialized = function () {
                return n;
              }),
                (this.init = function (e) {
                  (t = new Wt()),
                    (n = !0),
                    (i = !!e && e.isPartial),
                    t.on("data", function (e) {
                      (e.startTime = e.startPts / s),
                        (e.endTime = e.endPts / s),
                        o.captions.push(e),
                        (o.captionStreams[e.stream] = !0);
                    }),
                    t.on("log", function (e) {
                      o.logs.push(e);
                    });
                }),
                (this.isNewInit = function (e, t) {
                  return (
                    !(
                      (e && 0 === e.length) ||
                      (t && "object" == typeof t && 0 === Object.keys(t).length)
                    ) &&
                    (a !== e[0] || s !== t[a])
                  );
                }),
                (this.parse = function (e, t, i) {
                  if (!this.isInitialized()) return null;
                  if (!t || !i) return null;
                  if (this.isNewInit(t, i)) (a = t[0]), (s = i[a]);
                  else if (null === a || !s) return r.push(e), null;
                  for (; 0 < r.length; ) {
                    var n = r.shift();
                    this.parse(n, t, i);
                  }
                  return (
                    (e = (function (e, t, i) {
                      if (null === t) return null;
                      t = It(e, t)[t] || {};
                      return { seiNals: t.seiNals, logs: t.logs, timescale: i };
                    })(e, a, s)) &&
                      e.logs &&
                      (o.logs = o.logs.concat(e.logs)),
                    null !== e && e.seiNals
                      ? (this.pushNals(e.seiNals), this.flushStream(), o)
                      : o.logs.length
                      ? { logs: o.logs, captions: [], captionStreams: [] }
                      : null
                  );
                }),
                (this.pushNals = function (e) {
                  if (!this.isInitialized() || !e || 0 === e.length)
                    return null;
                  e.forEach(function (e) {
                    t.push(e);
                  });
                }),
                (this.flushStream = function () {
                  if (!this.isInitialized()) return null;
                  i ? t.partialFlush() : t.flush();
                }),
                (this.clearParsedCaptions = function () {
                  (o.captions = []), (o.captionStreams = {}), (o.logs = []);
                }),
                (this.resetCaptionStream = function () {
                  if (!this.isInitialized()) return null;
                  t.reset();
                }),
                (this.clearAllCaptions = function () {
                  this.clearParsedCaptions(), this.resetCaptionStream();
                }),
                (this.reset = function () {
                  (r = []),
                    (s = a = null),
                    o
                      ? this.clearParsedCaptions()
                      : (o = { captions: [], captionStreams: {}, logs: [] }),
                    this.resetCaptionStream();
                }),
                this.reset();
            },
            zt = e,
            Xt = function (e) {
              return ("00" + e.toString(16)).slice(-2);
            },
            Kt = q.getUint64,
            j = function (e) {
              return Mt(e, ["moov", "trak"]).reduce(function (e, t) {
                var i,
                  n,
                  r = Mt(t, ["tkhd"])[0];
                return r
                  ? ((i = r[0]),
                    (r = zt(
                      (r[(n = 0 === i ? 12 : 20)] << 24) |
                        (r[1 + n] << 16) |
                        (r[2 + n] << 8) |
                        r[3 + n]
                    )),
                    (t = Mt(t, ["mdia", "mdhd"])[0])
                      ? ((i = t[0]),
                        (e[r] = zt(
                          (t[(n = 0 === i ? 12 : 20)] << 24) |
                            (t[1 + n] << 16) |
                            (t[2 + n] << 8) |
                            t[3 + n]
                        )),
                        e)
                      : null)
                  : null;
              }, {});
            },
            ke = function (a, e) {
              e = Mt(e, ["moof", "traf"]).reduce(function (e, t) {
                var i,
                  n = Mt(t, ["tfhd"])[0],
                  r = zt((n[4] << 24) | (n[5] << 16) | (n[6] << 8) | n[7]),
                  n = a[r] || 9e4,
                  r = Mt(t, ["tfdt"])[0],
                  t = new DataView(r.buffer, r.byteOffset, r.byteLength),
                  t = 1 === r[0] ? Kt(r.subarray(4, 12)) : t.getUint32(4);
                return (
                  "bigint" == typeof t
                    ? (i = t / qt.BigInt(n))
                    : "number" != typeof t || isNaN(t) || (i = t / n),
                  (e =
                    (i = i < Number.MAX_SAFE_INTEGER ? Number(i) : i) < e
                      ? i
                      : e)
                );
              }, 1 / 0);
              return "bigint" == typeof e || isFinite(e) ? e : 0;
            },
            e = function (e) {
              var e = Mt(e, ["moov", "trak"]),
                n = [];
              return (
                e.forEach(function (e) {
                  var t = Mt(e, ["mdia", "hdlr"]),
                    i = Mt(e, ["tkhd"]);
                  t.forEach(function (e, t) {
                    (e = Ot(e.subarray(8, 12))), (t = i[t]);
                    "vide" === e &&
                      ((t =
                        0 ===
                        (t = new DataView(
                          t.buffer,
                          t.byteOffset,
                          t.byteLength
                        )).getUint8(0)
                          ? t.getUint32(12)
                          : t.getUint32(20)),
                      n.push(t));
                  });
                }),
                n
              );
            },
            Yt = function (e) {
              var t = 0 === e[0] ? 12 : 20;
              return zt(
                (e[t] << 24) | (e[1 + t] << 16) | (e[2 + t] << 8) | e[3 + t]
              );
            },
            q = function (e) {
              var e = Mt(e, ["moov", "trak"]),
                s = [];
              return (
                e.forEach(function (e) {
                  var t = {},
                    i = Mt(e, ["tkhd"])[0];
                  i &&
                    ((i = (n = new DataView(
                      i.buffer,
                      i.byteOffset,
                      i.byteLength
                    )).getUint8(0)),
                    (t.id = 0 === i ? n.getUint32(12) : n.getUint32(20)));
                  var n = Mt(e, ["mdia", "hdlr"])[0];
                  n &&
                    ((a = Ot(n.subarray(8, 12))),
                    (t.type =
                      "vide" === a ? "video" : "soun" === a ? "audio" : a));
                  var r,
                    a = Mt(e, ["mdia", "minf", "stbl", "stsd"])[0];
                  a &&
                    ((a = a.subarray(8)),
                    (t.codec = Ot(a.subarray(4, 8))),
                    (a = Mt(a, [t.codec])[0]) &&
                      (/^[asm]vc[1-9]$/i.test(t.codec)
                        ? ((r = a.subarray(78)),
                          "avcC" === Ot(r.subarray(4, 8)) && 11 < r.length
                            ? ((t.codec += "."),
                              (t.codec += Xt(r[9])),
                              (t.codec += Xt(r[10])),
                              (t.codec += Xt(r[11])))
                            : (t.codec = "avc1.4d400d"))
                        : /^mp4[a,v]$/i.test(t.codec)
                        ? ((r = a.subarray(28)),
                          "esds" === Ot(r.subarray(4, 8)) &&
                          20 < r.length &&
                          0 !== r[19]
                            ? ((t.codec += "." + Xt(r[19])),
                              (t.codec +=
                                "." + Xt((r[20] >>> 2) & 63).replace(/^0/, "")))
                            : (t.codec = "mp4a.40.2"))
                        : (t.codec = t.codec.toLowerCase())));
                  e = Mt(e, ["mdia", "mdhd"])[0];
                  e && (t.timescale = Yt(e)), s.push(t);
                }),
                s
              );
            },
            Qt = ke,
            $t = q,
            Jt = Ie,
            Zt = {};
          (Zt.ts = {
            parseType: function (e, t) {
              e = xt(e);
              return 0 === e ? "pat" : e === t ? "pmt" : t ? "pes" : null;
            },
            parsePat: function (e) {
              var t = At(e),
                i = 4 + Pt(e);
              return t && (i += e[i] + 1), ((31 & e[i + 10]) << 8) | e[i + 11];
            },
            parsePmt: function (e) {
              var t = {},
                i = At(e),
                n = 4 + Pt(e);
              if ((i && (n += e[n] + 1), 1 & e[n + 5])) {
                for (
                  var r = 3 + (((15 & e[n + 1]) << 8) | e[n + 2]) - 4,
                    a = 12 + (((15 & e[n + 10]) << 8) | e[n + 11]);
                  a < r;

                ) {
                  var s = n + a;
                  (t[((31 & e[s + 1]) << 8) | e[s + 2]] = e[s]),
                    (a += 5 + (((15 & e[s + 3]) << 8) | e[s + 4]));
                }
                return t;
              }
            },
            parsePayloadUnitStartIndicator: At,
            parsePesType: function (e, t) {
              switch (t[xt(e)]) {
                case je.H264_STREAM_TYPE:
                  return "video";
                case je.ADTS_STREAM_TYPE:
                  return "audio";
                case je.METADATA_STREAM_TYPE:
                  return "timed-metadata";
                default:
                  return null;
              }
            },
            parsePesTime: function (e) {
              if (!At(e)) return null;
              var t = 4 + Pt(e);
              if (t >= e.byteLength) return null;
              var i = null,
                n = e[t + 7];
              return (
                192 & n &&
                  (((i = {}).pts =
                    ((14 & e[t + 9]) << 27) |
                    ((255 & e[t + 10]) << 20) |
                    ((254 & e[t + 11]) << 12) |
                    ((255 & e[t + 12]) << 5) |
                    ((254 & e[t + 13]) >>> 3)),
                  (i.pts *= 4),
                  (i.pts += (6 & e[t + 13]) >>> 1),
                  (i.dts = i.pts),
                  64 & n &&
                    ((i.dts =
                      ((14 & e[t + 14]) << 27) |
                      ((255 & e[t + 15]) << 20) |
                      ((254 & e[t + 16]) << 12) |
                      ((255 & e[t + 17]) << 5) |
                      ((254 & e[t + 18]) >>> 3)),
                    (i.dts *= 4),
                    (i.dts += (6 & e[t + 18]) >>> 1))),
                i
              );
            },
            videoPacketContainsKeyFrame: function (e) {
              for (
                var t = 4 + Pt(e), i = e.subarray(t), n = 0, r = 0, a = !1;
                r < i.byteLength - 3;
                r++
              )
                if (1 === i[r + 2]) {
                  n = r + 5;
                  break;
                }
              for (; n < i.byteLength; )
                switch (i[n]) {
                  case 0:
                    if (0 !== i[n - 1]) {
                      n += 2;
                      break;
                    }
                    if (0 !== i[n - 2]) {
                      n++;
                      break;
                    }
                    for (
                      r + 3 !== n - 2 &&
                      "slice_layer_without_partitioning_rbsp_idr" ===
                        Lt(31 & i[r + 3]) &&
                      (a = !0);
                      1 !== i[++n] && n < i.length;

                    );
                    (r = n - 2), (n += 3);
                    break;
                  case 1:
                    if (0 !== i[n - 1] || 0 !== i[n - 2]) {
                      n += 3;
                      break;
                    }
                    "slice_layer_without_partitioning_rbsp_idr" ===
                      Lt(31 & i[r + 3]) && (a = !0),
                      (r = n - 2),
                      (n += 3);
                    break;
                  default:
                    n += 3;
                }
              return (
                (i = i.subarray(r)),
                (n -= r),
                (r = 0),
                (a =
                  i &&
                  3 < i.byteLength &&
                  "slice_layer_without_partitioning_rbsp_idr" ===
                    Lt(31 & i[r + 3])
                    ? !0
                    : a)
              );
            },
          }),
            (Zt.aac = dt);
          function ei(e, t, i) {
            for (var n, r, a, s, o = 0, u = 188, l = !1; u <= e.byteLength; )
              if (71 !== e[o] || (71 !== e[u] && u !== e.byteLength)) o++, u++;
              else {
                if (
                  ((n = e.subarray(o, u)),
                  "pes" === Zt.ts.parseType(n, t.pid) &&
                    ((r = Zt.ts.parsePesType(n, t.table)),
                    (a = Zt.ts.parsePayloadUnitStartIndicator(n)),
                    "audio" === r &&
                      a &&
                      (s = Zt.ts.parsePesTime(n)) &&
                      ((s.type = "audio"), i.audio.push(s), (l = !0))),
                  l)
                )
                  break;
                (o += 188), (u += 188);
              }
            for (o = (u = e.byteLength) - 188, l = !1; 0 <= o; )
              if (71 !== e[o] || (71 !== e[u] && u !== e.byteLength)) o--, u--;
              else {
                if (
                  ((n = e.subarray(o, u)),
                  "pes" === Zt.ts.parseType(n, t.pid) &&
                    ((r = Zt.ts.parsePesType(n, t.table)),
                    (a = Zt.ts.parsePayloadUnitStartIndicator(n)),
                    "audio" === r &&
                      a &&
                      (s = Zt.ts.parsePesTime(n)) &&
                      ((s.type = "audio"), i.audio.push(s), (l = !0))),
                  l)
                )
                  break;
                (o -= 188), (u -= 188);
              }
          }
          function ti(e) {
            var t,
              i = { pid: null, table: null },
              n = {};
            for (t in (!(function (e, t) {
              for (var i, n = 0, r = 188; r < e.byteLength; )
                if (71 !== e[n] || 71 !== e[r]) n++, r++;
                else {
                  switch (((i = e.subarray(n, r)), Zt.ts.parseType(i, t.pid))) {
                    case "pat":
                      t.pid = Zt.ts.parsePat(i);
                      break;
                    case "pmt":
                      var a = Zt.ts.parsePmt(i);
                      (t.table = t.table || {}),
                        Object.keys(a).forEach(function (e) {
                          t.table[e] = a[e];
                        });
                  }
                  (n += 188), (r += 188);
                }
            })(e, i),
            i.table))
              if (i.table.hasOwnProperty(t))
                switch (i.table[t]) {
                  case je.H264_STREAM_TYPE:
                    (n.video = []),
                      (function (e, t, i) {
                        for (
                          var n,
                            r,
                            a,
                            s,
                            o,
                            u,
                            l,
                            c,
                            d = 0,
                            h = 188,
                            p = !1,
                            f = { data: [], size: 0 };
                          h < e.byteLength;

                        )
                          if (71 !== e[d] || 71 !== e[h]) d++, h++;
                          else {
                            if (
                              ((n = e.subarray(d, h)),
                              "pes" === Zt.ts.parseType(n, t.pid))
                            )
                              if (
                                ((r = Zt.ts.parsePesType(n, t.table)),
                                (a = Zt.ts.parsePayloadUnitStartIndicator(n)),
                                "video" === r &&
                                  (a &&
                                    !p &&
                                    (s = Zt.ts.parsePesTime(n)) &&
                                    ((s.type = "video"),
                                    i.video.push(s),
                                    (p = !0)),
                                  !i.firstKeyFrame))
                              ) {
                                if (a && 0 !== f.size) {
                                  for (
                                    o = new Uint8Array(f.size), u = 0;
                                    f.data.length;

                                  )
                                    (l = f.data.shift()),
                                      o.set(l, u),
                                      (u += l.byteLength);
                                  !Zt.ts.videoPacketContainsKeyFrame(o) ||
                                    ((c = Zt.ts.parsePesTime(o)) &&
                                      ((i.firstKeyFrame = c),
                                      (i.firstKeyFrame.type = "video"))),
                                    (f.size = 0);
                                }
                                f.data.push(n), (f.size += n.byteLength);
                              }
                            if (p && i.firstKeyFrame) break;
                            (d += 188), (h += 188);
                          }
                        for (d = (h = e.byteLength) - 188, p = !1; 0 <= d; )
                          if (71 !== e[d] || 71 !== e[h]) d--, h--;
                          else {
                            if (
                              ((n = e.subarray(d, h)),
                              "pes" === Zt.ts.parseType(n, t.pid) &&
                                ((r = Zt.ts.parsePesType(n, t.table)),
                                (a = Zt.ts.parsePayloadUnitStartIndicator(n)),
                                "video" === r &&
                                  a &&
                                  (s = Zt.ts.parsePesTime(n)) &&
                                  ((s.type = "video"),
                                  i.video.push(s),
                                  (p = !0))),
                              p)
                            )
                              break;
                            (d -= 188), (h -= 188);
                          }
                      })(e, i, n),
                      0 === n.video.length && delete n.video;
                    break;
                  case je.ADTS_STREAM_TYPE:
                    (n.audio = []),
                      ei(e, i, n),
                      0 === n.audio.length && delete n.audio;
                }
            return n;
          }
          var ii = ue,
            ni = function (e, t) {
              var i,
                n,
                r = (
                  Zt.aac.isLikelyAacData(e)
                    ? function (e) {
                        for (
                          var t,
                            i = !1,
                            n = 0,
                            r = null,
                            a = null,
                            s = 0,
                            o = 0;
                          3 <= e.length - o;

                        ) {
                          switch (Zt.aac.parseType(e, o)) {
                            case "timed-metadata":
                              if (e.length - o < 10) {
                                i = !0;
                                break;
                              }
                              if (
                                (s = Zt.aac.parseId3TagSize(e, o)) > e.length
                              ) {
                                i = !0;
                                break;
                              }
                              null === a &&
                                ((t = e.subarray(o, o + s)),
                                (a = Zt.aac.parseAacTimestamp(t))),
                                (o += s);
                              break;
                            case "audio":
                              if (e.length - o < 7) {
                                i = !0;
                                break;
                              }
                              if ((s = Zt.aac.parseAdtsSize(e, o)) > e.length) {
                                i = !0;
                                break;
                              }
                              null === r &&
                                ((t = e.subarray(o, o + s)),
                                (r = Zt.aac.parseSampleRate(t))),
                                n++,
                                (o += s);
                              break;
                            default:
                              o++;
                          }
                          if (i) return null;
                        }
                        if (null === r || null === a) return null;
                        var u = ii / r;
                        return {
                          audio: [
                            { type: "audio", dts: a, pts: a },
                            {
                              type: "audio",
                              dts: a + 1024 * n * u,
                              pts: a + 1024 * n * u,
                            },
                          ],
                        };
                      }
                    : ti
                )(e);
              return r && (r.audio || r.video)
                ? ((e = t),
                  (t = r).audio &&
                    t.audio.length &&
                    (("undefined" != typeof (i = e) && !isNaN(i)) ||
                      (i = t.audio[0].dts),
                    t.audio.forEach(function (e) {
                      (e.dts = Jt(e.dts, i)),
                        (e.pts = Jt(e.pts, i)),
                        (e.dtsTime = e.dts / ii),
                        (e.ptsTime = e.pts / ii);
                    })),
                  t.video &&
                    t.video.length &&
                    (("undefined" != typeof (n = e) && !isNaN(n)) ||
                      (n = t.video[0].dts),
                    t.video.forEach(function (e) {
                      (e.dts = Jt(e.dts, n)),
                        (e.pts = Jt(e.pts, n)),
                        (e.dtsTime = e.dts / ii),
                        (e.ptsTime = e.pts / ii);
                    }),
                    t.firstKeyFrame &&
                      (((t = t.firstKeyFrame).dts = Jt(t.dts, n)),
                      (t.pts = Jt(t.pts, n)),
                      (t.dtsTime = t.dts / ii),
                      (t.ptsTime = t.pts / ii))),
                  r)
                : null;
            },
            ri = (function () {
              function e(e, t) {
                (this.options = t || {}), (this.self = e), this.init();
              }
              var t = e.prototype;
              return (
                (t.init = function () {
                  var i, e;
                  this.transmuxer && this.transmuxer.dispose(),
                    (this.transmuxer = new Dt.Transmuxer(this.options)),
                    (i = this.self),
                    (e = this.transmuxer).on("data", function (e) {
                      var t = e.initSegment;
                      e.initSegment = {
                        data: t.buffer,
                        byteOffset: t.byteOffset,
                        byteLength: t.byteLength,
                      };
                      t = e.data;
                      (e.data = t.buffer),
                        i.postMessage(
                          {
                            action: "data",
                            segment: e,
                            byteOffset: t.byteOffset,
                            byteLength: t.byteLength,
                          },
                          [e.data]
                        );
                    }),
                    e.on("done", function (e) {
                      i.postMessage({ action: "done" });
                    }),
                    e.on("gopInfo", function (e) {
                      i.postMessage({ action: "gopInfo", gopInfo: e });
                    }),
                    e.on("videoSegmentTimingInfo", function (e) {
                      var t = {
                        start: {
                          decode: ce(e.start.dts),
                          presentation: ce(e.start.pts),
                        },
                        end: {
                          decode: ce(e.end.dts),
                          presentation: ce(e.end.pts),
                        },
                        baseMediaDecodeTime: ce(e.baseMediaDecodeTime),
                      };
                      e.prependedContentDuration &&
                        (t.prependedContentDuration = ce(
                          e.prependedContentDuration
                        )),
                        i.postMessage({
                          action: "videoSegmentTimingInfo",
                          videoSegmentTimingInfo: t,
                        });
                    }),
                    e.on("audioSegmentTimingInfo", function (e) {
                      var t = {
                        start: {
                          decode: ce(e.start.dts),
                          presentation: ce(e.start.pts),
                        },
                        end: {
                          decode: ce(e.end.dts),
                          presentation: ce(e.end.pts),
                        },
                        baseMediaDecodeTime: ce(e.baseMediaDecodeTime),
                      };
                      e.prependedContentDuration &&
                        (t.prependedContentDuration = ce(
                          e.prependedContentDuration
                        )),
                        i.postMessage({
                          action: "audioSegmentTimingInfo",
                          audioSegmentTimingInfo: t,
                        });
                    }),
                    e.on("id3Frame", function (e) {
                      i.postMessage({ action: "id3Frame", id3Frame: e });
                    }),
                    e.on("caption", function (e) {
                      i.postMessage({ action: "caption", caption: e });
                    }),
                    e.on("trackinfo", function (e) {
                      i.postMessage({ action: "trackinfo", trackInfo: e });
                    }),
                    e.on("audioTimingInfo", function (e) {
                      i.postMessage({
                        action: "audioTimingInfo",
                        audioTimingInfo: { start: ce(e.start), end: ce(e.end) },
                      });
                    }),
                    e.on("videoTimingInfo", function (e) {
                      i.postMessage({
                        action: "videoTimingInfo",
                        videoTimingInfo: { start: ce(e.start), end: ce(e.end) },
                      });
                    }),
                    e.on("log", function (e) {
                      i.postMessage({ action: "log", log: e });
                    });
                }),
                (t.pushMp4Captions = function (e) {
                  this.captionParser ||
                    ((this.captionParser = new Gt()),
                    this.captionParser.init());
                  var t = new Uint8Array(e.data, e.byteOffset, e.byteLength),
                    e = this.captionParser.parse(t, e.trackIds, e.timescales);
                  this.self.postMessage(
                    {
                      action: "mp4Captions",
                      captions: (e && e.captions) || [],
                      logs: (e && e.logs) || [],
                      data: t.buffer,
                    },
                    [t.buffer]
                  );
                }),
                (t.probeMp4StartTime = function (e) {
                  var t = e.timescales,
                    e = e.data,
                    t = Qt(t, e);
                  this.self.postMessage(
                    { action: "probeMp4StartTime", startTime: t, data: e },
                    [e.buffer]
                  );
                }),
                (t.probeMp4Tracks = function (e) {
                  var t = e.data,
                    e = $t(t);
                  this.self.postMessage(
                    { action: "probeMp4Tracks", tracks: e, data: t },
                    [t.buffer]
                  );
                }),
                (t.probeTs = function (e) {
                  var t = e.data,
                    i = e.baseStartTime,
                    e = "number" != typeof i || isNaN(i) ? void 0 : i * ue,
                    i = ni(t, e),
                    e = null;
                  i &&
                    ((e = {
                      hasVideo: (i.video && 2 === i.video.length) || !1,
                      hasAudio: (i.audio && 2 === i.audio.length) || !1,
                    }).hasVideo && (e.videoStart = i.video[0].ptsTime),
                    e.hasAudio && (e.audioStart = i.audio[0].ptsTime)),
                    this.self.postMessage(
                      { action: "probeTs", result: e, data: t },
                      [t.buffer]
                    );
                }),
                (t.clearAllMp4Captions = function () {
                  this.captionParser && this.captionParser.clearAllCaptions();
                }),
                (t.clearParsedMp4Captions = function () {
                  this.captionParser &&
                    this.captionParser.clearParsedCaptions();
                }),
                (t.push = function (e) {
                  e = new Uint8Array(e.data, e.byteOffset, e.byteLength);
                  this.transmuxer.push(e);
                }),
                (t.reset = function () {
                  this.transmuxer.reset();
                }),
                (t.setTimestampOffset = function (e) {
                  e = e.timestampOffset || 0;
                  this.transmuxer.setBaseMediaDecodeTime(Math.round(le(e)));
                }),
                (t.setAudioAppendStart = function (e) {
                  this.transmuxer.setAudioAppendStart(
                    Math.ceil(le(e.appendStart))
                  );
                }),
                (t.setRemux = function (e) {
                  this.transmuxer.setRemux(e.remux);
                }),
                (t.flush = function (e) {
                  this.transmuxer.flush(),
                    self.postMessage({ action: "done", type: "transmuxed" });
                }),
                (t.endTimeline = function () {
                  this.transmuxer.endTimeline(),
                    self.postMessage({
                      action: "endedtimeline",
                      type: "transmuxed",
                    });
                }),
                (t.alignGopsWith = function (e) {
                  this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice());
                }),
                e
              );
            })();
          self.onmessage = function (e) {
            "init" === e.data.action && e.data.options
              ? (this.messageHandlers = new ri(self, e.data.options))
              : (this.messageHandlers || (this.messageHandlers = new ri(self)),
                e.data &&
                  e.data.action &&
                  "init" !== e.data.action &&
                  this.messageHandlers[e.data.action] &&
                  this.messageHandlers[e.data.action](e.data));
          };
        })
      )
    ),
    El = function (e) {
      (e.currentTransmux = null),
        e.transmuxQueue.length &&
          ((e.currentTransmux = e.transmuxQueue.shift()),
          "function" == typeof e.currentTransmux
            ? e.currentTransmux()
            : Pu(e.currentTransmux));
    },
    kl = function (e) {
      Du("reset", e);
    },
    Cl = function (e) {
      var t = new wl();
      (t.currentTransmux = null), (t.transmuxQueue = []);
      var i = t.terminate;
      return (
        (t.terminate = function () {
          return (
            (t.currentTransmux = null), (t.transmuxQueue.length = 0), i.call(t)
          );
        }),
        t.postMessage({ action: "init", options: e }),
        t
      );
    },
    Il = 2,
    xl = -101,
    Al = -102,
    Pl = Oo("CodecUtils"),
    Ll = Oo("PlaylistSelector"),
    ar = function () {
      var e = (this.useDevicePixelRatio && window.devicePixelRatio) || 1;
      return el(
        this.playlists.master,
        this.systemBandwidth,
        parseInt($u(this.tech_.el(), "width"), 10) * e,
        parseInt($u(this.tech_.el(), "height"), 10) * e,
        this.limitRenditionByPlayerDimensions,
        this.masterPlaylistController_
      );
    },
    Dl = (function (n) {
      function e(e, t) {
        var i = n.call(this) || this;
        if (!e) throw new TypeError("Initialization settings are required");
        if ("function" != typeof e.currentTime)
          throw new TypeError("No currentTime getter specified");
        if (!e.mediaSource) throw new TypeError("No MediaSource specified");
        return (
          (i.bandwidth = e.bandwidth),
          (i.throughput = { rate: 0, count: 0 }),
          (i.roundTrip = NaN),
          i.resetStats_(),
          (i.mediaIndex = null),
          (i.partIndex = null),
          (i.hasPlayed_ = e.hasPlayed),
          (i.currentTime_ = e.currentTime),
          (i.seekable_ = e.seekable),
          (i.seeking_ = e.seeking),
          (i.duration_ = e.duration),
          (i.mediaSource_ = e.mediaSource),
          (i.vhs_ = e.vhs),
          (i.loaderType_ = e.loaderType),
          (i.currentMediaInfo_ = void 0),
          (i.startingMediaInfo_ = void 0),
          (i.segmentMetadataTrack_ = e.segmentMetadataTrack),
          (i.goalBufferLength_ = e.goalBufferLength),
          (i.sourceType_ = e.sourceType),
          (i.sourceUpdater_ = e.sourceUpdater),
          (i.inbandTextTracks_ = e.inbandTextTracks),
          (i.state_ = "INIT"),
          (i.timelineChangeController_ = e.timelineChangeController),
          (i.shouldSaveSegmentTimingInfo_ = !0),
          (i.parse708captions_ = e.parse708captions),
          (i.captionServices_ = e.captionServices),
          (i.experimentalExactManifestTimings =
            e.experimentalExactManifestTimings),
          (i.checkBufferTimeout_ = null),
          (i.error_ = void 0),
          (i.currentTimeline_ = -1),
          (i.pendingSegment_ = null),
          (i.xhrOptions_ = null),
          (i.pendingSegments_ = []),
          (i.audioDisabled_ = !1),
          (i.isPendingTimestampOffset_ = !1),
          (i.gopBuffer_ = []),
          (i.timeMapping_ = 0),
          (i.safeAppend_ = 11 <= tr.browser.IE_VERSION),
          (i.appendInitSegment_ = { audio: !0, video: !0 }),
          (i.playlistOfLastInitSegment_ = { audio: null, video: null }),
          (i.callQueue_ = []),
          (i.loadQueue_ = []),
          (i.metadataQueue_ = { id3: [], caption: [] }),
          (i.waitingOnRemove_ = !1),
          (i.quotaExceededErrorRetryTimeout_ = null),
          (i.activeInitSegmentId_ = null),
          (i.initSegments_ = {}),
          (i.cacheEncryptionKeys_ = e.cacheEncryptionKeys),
          (i.keyCache_ = {}),
          (i.decrypter_ = e.decrypter),
          (i.syncController_ = e.syncController),
          (i.syncPoint_ = { segmentIndex: 0, time: 0 }),
          (i.transmuxer_ = i.createTransmuxer_()),
          (i.triggerSyncInfoUpdate_ = function () {
            return i.trigger("syncinfoupdate");
          }),
          i.syncController_.on("syncinfoupdate", i.triggerSyncInfoUpdate_),
          i.mediaSource_.addEventListener("sourceopen", function () {
            i.isEndOfStream_() || (i.ended_ = !1);
          }),
          (i.fetchAtBuffer_ = !1),
          (i.logger_ = Oo("SegmentLoader[" + i.loaderType_ + "]")),
          Object.defineProperty(ft(i), "state", {
            get: function () {
              return this.state_;
            },
            set: function (e) {
              e !== this.state_ &&
                (this.logger_(this.state_ + " -> " + e),
                (this.state_ = e),
                this.trigger("statechange"));
            },
          }),
          i.sourceUpdater_.on("ready", function () {
            i.hasEnoughInfoToAppend_() && i.processCallQueue_();
          }),
          "main" === i.loaderType_ &&
            i.timelineChangeController_.on(
              "pendingtimelinechange",
              function () {
                i.hasEnoughInfoToAppend_() && i.processCallQueue_();
              }
            ),
          "audio" === i.loaderType_ &&
            i.timelineChangeController_.on("timelinechange", function () {
              i.hasEnoughInfoToLoad_() && i.processLoadQueue_(),
                i.hasEnoughInfoToAppend_() && i.processCallQueue_();
            }),
          i
        );
      }
      mt(e, n);
      var t = e.prototype;
      return (
        (t.createTransmuxer_ = function () {
          return Cl({
            remux: !1,
            alignGopsAtEnd: this.safeAppend_,
            keepOriginalTimestamps: !0,
            parse708captions: this.parse708captions_,
            captionServices: this.captionServices_,
          });
        }),
        (t.resetStats_ = function () {
          (this.mediaBytesTransferred = 0),
            (this.mediaRequests = 0),
            (this.mediaRequestsAborted = 0),
            (this.mediaRequestsTimedout = 0),
            (this.mediaRequestsErrored = 0),
            (this.mediaTransferDuration = 0),
            (this.mediaSecondsLoaded = 0),
            (this.mediaAppends = 0);
        }),
        (t.dispose = function () {
          this.trigger("dispose"),
            (this.state = "DISPOSED"),
            this.pause(),
            this.abort_(),
            this.transmuxer_ && this.transmuxer_.terminate(),
            this.resetStats_(),
            this.checkBufferTimeout_ &&
              window.clearTimeout(this.checkBufferTimeout_),
            this.syncController_ &&
              this.triggerSyncInfoUpdate_ &&
              this.syncController_.off(
                "syncinfoupdate",
                this.triggerSyncInfoUpdate_
              ),
            this.off();
        }),
        (t.setAudio = function (e) {
          (this.audioDisabled_ = !e),
            e
              ? (this.appendInitSegment_.audio = !0)
              : this.sourceUpdater_.removeAudio(0, this.duration_());
        }),
        (t.abort = function () {
          "WAITING" === this.state
            ? (this.abort_(),
              (this.state = "READY"),
              this.paused() || this.monitorBuffer_())
            : this.pendingSegment_ && (this.pendingSegment_ = null);
        }),
        (t.abort_ = function () {
          this.pendingSegment_ &&
            this.pendingSegment_.abortRequests &&
            this.pendingSegment_.abortRequests(),
            (this.pendingSegment_ = null),
            (this.callQueue_ = []),
            (this.loadQueue_ = []),
            (this.metadataQueue_.id3 = []),
            (this.metadataQueue_.caption = []),
            this.timelineChangeController_.clearPendingTimelineChange(
              this.loaderType_
            ),
            (this.waitingOnRemove_ = !1),
            window.clearTimeout(this.quotaExceededErrorRetryTimeout_),
            (this.quotaExceededErrorRetryTimeout_ = null);
        }),
        (t.checkForAbort_ = function (e) {
          return "APPENDING" !== this.state || this.pendingSegment_
            ? !this.pendingSegment_ || this.pendingSegment_.requestId !== e
            : ((this.state = "READY"), !0);
        }),
        (t.error = function (e) {
          return (
            "undefined" != typeof e &&
              (this.logger_("error occurred:", e), (this.error_ = e)),
            (this.pendingSegment_ = null),
            this.error_
          );
        }),
        (t.endOfStream = function () {
          (this.ended_ = !0),
            this.transmuxer_ && kl(this.transmuxer_),
            (this.gopBuffer_.length = 0),
            this.pause(),
            this.trigger("ended");
        }),
        (t.buffered_ = function () {
          var e = this.getMediaInfo_();
          if (!this.sourceUpdater_ || !e) return tr.createTimeRanges();
          if ("main" === this.loaderType_) {
            var t = e.hasAudio,
              i = e.hasVideo,
              e = e.isMuxed;
            if (i && t && !this.audioDisabled_ && !e)
              return this.sourceUpdater_.buffered();
            if (i) return this.sourceUpdater_.videoBuffered();
          }
          return this.sourceUpdater_.audioBuffered();
        }),
        (t.initSegmentForMap = function (e, t) {
          if ((void 0 === t && (t = !1), !e)) return null;
          var i = bu(e),
            n = this.initSegments_[i];
          return (
            t &&
              !n &&
              e.bytes &&
              (this.initSegments_[i] = n =
                {
                  resolvedUri: e.resolvedUri,
                  byterange: e.byterange,
                  bytes: e.bytes,
                  tracks: e.tracks,
                  timescales: e.timescales,
                }),
            n || e
          );
        }),
        (t.segmentKey = function (e, t) {
          if ((void 0 === t && (t = !1), !e)) return null;
          var i = Tu(e),
            n = this.keyCache_[i];
          this.cacheEncryptionKeys_ &&
            t &&
            !n &&
            e.bytes &&
            (this.keyCache_[i] = n =
              { resolvedUri: e.resolvedUri, bytes: e.bytes });
          e = { resolvedUri: (n || e).resolvedUri };
          return n && (e.bytes = n.bytes), e;
        }),
        (t.couldBeginLoading_ = function () {
          return this.playlist_ && !this.paused();
        }),
        (t.load = function () {
          if ((this.monitorBuffer_(), this.playlist_))
            return "INIT" === this.state && this.couldBeginLoading_()
              ? this.init_()
              : void (
                  !this.couldBeginLoading_() ||
                  ("READY" !== this.state && "INIT" !== this.state) ||
                  (this.state = "READY")
                );
        }),
        (t.init_ = function () {
          return (
            (this.state = "READY"),
            this.resetEverything(),
            this.monitorBuffer_()
          );
        }),
        (t.playlist = function (e, t) {
          if ((void 0 === t && (t = {}), e)) {
            var i = this.playlist_,
              n = this.pendingSegment_;
            (this.playlist_ = e),
              (this.xhrOptions_ = t),
              "INIT" === this.state &&
                ((e.syncInfo = { mediaSequence: e.mediaSequence, time: 0 }),
                "main" === this.loaderType_ &&
                  this.syncController_.setDateTimeMappingForStart(e));
            var r = null;
            if (
              (i && (i.id ? (r = i.id) : i.uri && (r = i.uri)),
              this.logger_(
                "playlist update [" + r + " => " + (e.id || e.uri) + "]"
              ),
              this.trigger("syncinfoupdate"),
              "INIT" === this.state && this.couldBeginLoading_())
            )
              return this.init_();
            if (!i || i.uri !== e.uri)
              return (
                null !== this.mediaIndex &&
                  (e.endList ? this.resyncLoader() : this.resetLoader()),
                (this.currentMediaInfo_ = void 0),
                void this.trigger("playlistupdate")
              );
            t = e.mediaSequence - i.mediaSequence;
            this.logger_("live window shift [" + t + "]"),
              null !== this.mediaIndex &&
                ((this.mediaIndex -= t),
                this.mediaIndex < 0
                  ? ((this.mediaIndex = null), (this.partIndex = null))
                  : ((r = this.playlist_.segments[this.mediaIndex]),
                    !this.partIndex ||
                      (r.parts && r.parts.length && r.parts[this.partIndex]) ||
                      ((r = this.mediaIndex),
                      this.logger_(
                        "currently processing part (index " +
                          this.partIndex +
                          ") no longer exists."
                      ),
                      this.resetLoader(),
                      (this.mediaIndex = r)))),
              n &&
                ((n.mediaIndex -= t),
                n.mediaIndex < 0
                  ? ((n.mediaIndex = null), (n.partIndex = null))
                  : (0 <= n.mediaIndex &&
                      (n.segment = e.segments[n.mediaIndex]),
                    0 <= n.partIndex &&
                      n.segment.parts &&
                      (n.part = n.segment.parts[n.partIndex]))),
              this.syncController_.saveExpiredSegmentInfo(i, e);
          }
        }),
        (t.pause = function () {
          this.checkBufferTimeout_ &&
            (window.clearTimeout(this.checkBufferTimeout_),
            (this.checkBufferTimeout_ = null));
        }),
        (t.paused = function () {
          return null === this.checkBufferTimeout_;
        }),
        (t.resetEverything = function (e) {
          (this.ended_ = !1),
            (this.appendInitSegment_ = { audio: !0, video: !0 }),
            this.resetLoader(),
            this.remove(0, 1 / 0, e),
            this.transmuxer_ &&
              (this.transmuxer_.postMessage({ action: "clearAllMp4Captions" }),
              this.transmuxer_.postMessage({ action: "reset" }));
        }),
        (t.resetLoader = function () {
          (this.fetchAtBuffer_ = !1), this.resyncLoader();
        }),
        (t.resyncLoader = function () {
          this.transmuxer_ && kl(this.transmuxer_),
            (this.mediaIndex = null),
            (this.partIndex = null),
            (this.syncPoint_ = null),
            (this.isPendingTimestampOffset_ = !1),
            (this.callQueue_ = []),
            (this.loadQueue_ = []),
            (this.metadataQueue_.id3 = []),
            (this.metadataQueue_.caption = []),
            this.abort(),
            this.transmuxer_ &&
              this.transmuxer_.postMessage({
                action: "clearParsedMp4Captions",
              });
        }),
        (t.remove = function (e, t, i, n) {
          if (
            (void 0 === i && (i = function () {}),
            void 0 === n && (n = !1),
            (t = t === 1 / 0 ? this.duration_() : t) <= e)
          )
            this.logger_(
              "skipping remove because end ${end} is <= start ${start}"
            );
          else if (this.sourceUpdater_ && this.getMediaInfo_()) {
            var r,
              a = 1,
              s = function () {
                0 === --a && i();
              };
            for (r in ((!n && this.audioDisabled_) ||
              (a++, this.sourceUpdater_.removeAudio(e, t, s)),
            (!n && "main" !== this.loaderType_) ||
              ((this.gopBuffer_ = (function (e, t, i, n) {
                for (
                  var r = Math.ceil((t - n) * cl),
                    a = Math.ceil((i - n) * cl),
                    n = e.slice(),
                    s = e.length;
                  s-- && !(e[s].pts <= a);

                );
                if (-1 === s) return n;
                for (var o = s + 1; o-- && !(e[o].pts <= r); );
                return (o = Math.max(o, 0)), n.splice(o, s - o + 1), n;
              })(this.gopBuffer_, e, t, this.timeMapping_)),
              a++,
              this.sourceUpdater_.removeVideo(e, t, s)),
            this.inbandTextTracks_))
              il(e, t, this.inbandTextTracks_[r]);
            il(e, t, this.segmentMetadataTrack_), s();
          } else
            this.logger_(
              "skipping remove because no source updater or starting media info"
            );
        }),
        (t.monitorBuffer_ = function () {
          this.checkBufferTimeout_ &&
            window.clearTimeout(this.checkBufferTimeout_),
            (this.checkBufferTimeout_ = window.setTimeout(
              this.monitorBufferTick_.bind(this),
              1
            ));
        }),
        (t.monitorBufferTick_ = function () {
          "READY" === this.state && this.fillBuffer_(),
            this.checkBufferTimeout_ &&
              window.clearTimeout(this.checkBufferTimeout_),
            (this.checkBufferTimeout_ = window.setTimeout(
              this.monitorBufferTick_.bind(this),
              500
            ));
        }),
        (t.fillBuffer_ = function () {
          var e;
          this.sourceUpdater_.updating() ||
            ((e = this.chooseNextRequest_()) &&
              ("number" == typeof e.timestampOffset &&
                ((this.isPendingTimestampOffset_ = !1),
                this.timelineChangeController_.pendingTimelineChange({
                  type: this.loaderType_,
                  from: this.currentTimeline_,
                  to: e.timeline,
                })),
              this.loadSegment_(e)));
        }),
        (t.isEndOfStream_ = function (e, t, i) {
          if (
            (void 0 === e && (e = this.mediaIndex),
            void 0 === t && (t = this.playlist_),
            void 0 === i && (i = this.partIndex),
            !t || !this.mediaSource_)
          )
            return !1;
          var n = "number" == typeof e && t.segments[e],
            e = e + 1 === t.segments.length,
            n = !n || !n.parts || i + 1 === n.parts.length;
          return t.endList && "open" === this.mediaSource_.readyState && e && n;
        }),
        (t.chooseNextRequest_ = function () {
          var e = this.buffered_(),
            t = Fo(e) || 0,
            i = jo(e, this.currentTime_()),
            n = !this.hasPlayed_() && 1 <= i,
            r = i >= this.goalBufferLength_(),
            e = this.playlist_.segments;
          if (!e.length || n || r) return null;
          this.syncPoint_ =
            this.syncPoint_ ||
            this.syncController_.getSyncPoint(
              this.playlist_,
              this.duration_(),
              this.currentTimeline_,
              this.currentTime_()
            );
          var a,
            n = {
              partIndex: null,
              mediaIndex: null,
              startOfSegment: null,
              playlist: this.playlist_,
              isSyncRequest: Boolean(!this.syncPoint_),
            };
          n.isSyncRequest
            ? (n.mediaIndex = (function (e, t, i) {
                t = t || [];
                for (var n = [], r = 0, a = 0; a < t.length; a++) {
                  var s = t[a];
                  if (e === s.timeline && (n.push(a), i < (r += s.duration)))
                    return a;
                }
                return 0 === n.length ? 0 : n[n.length - 1];
              })(this.currentTimeline_, e, t))
            : null !== this.mediaIndex
            ? ((r = e[this.mediaIndex]),
              (a = "number" == typeof this.partIndex ? this.partIndex : -1),
              (n.startOfSegment = r.end || t),
              r.parts && r.parts[a + 1]
                ? ((n.mediaIndex = this.mediaIndex), (n.partIndex = a + 1))
                : (n.mediaIndex = this.mediaIndex + 1))
            : ((a = (o = fl.getMediaInfoForTime({
                experimentalExactManifestTimings:
                  this.experimentalExactManifestTimings,
                playlist: this.playlist_,
                currentTime: this.fetchAtBuffer_ ? t : this.currentTime_(),
                startingPartIndex: this.syncPoint_.partIndex,
                startingSegmentIndex: this.syncPoint_.segmentIndex,
                startTime: this.syncPoint_.time,
              })).segmentIndex),
              (s = o.startTime),
              (o = o.partIndex),
              (n.getMediaInfoForTime = this.fetchAtBuffer_
                ? "bufferedEnd " + t
                : "currentTime " + this.currentTime_()),
              (n.mediaIndex = a),
              (n.startOfSegment = s),
              (n.partIndex = o));
          var s = e[n.mediaIndex],
            o =
              s &&
              "number" == typeof n.partIndex &&
              s.parts &&
              s.parts[n.partIndex];
          if (!s || ("number" == typeof n.partIndex && !o)) return null;
          "number" != typeof n.partIndex &&
            s.parts &&
            ((n.partIndex = 0), (o = s.parts[0])),
            i ||
              !o ||
              o.independent ||
              (0 === n.partIndex
                ? (o =
                    (i = e[n.mediaIndex - 1]).parts &&
                    i.parts.length &&
                    i.parts[i.parts.length - 1]) &&
                  o.independent &&
                  (--n.mediaIndex,
                  (n.partIndex = i.parts.length - 1),
                  (n.independent = "previous segment"))
                : s.parts[n.partIndex - 1].independent &&
                  (--n.partIndex, (n.independent = "previous part")));
          s = this.mediaSource_ && "ended" === this.mediaSource_.readyState;
          return n.mediaIndex >= e.length - 1 && s && !this.seeking_()
            ? null
            : this.generateSegmentInfo_(n);
        }),
        (t.generateSegmentInfo_ = function (e) {
          var t = e.independent,
            i = e.playlist,
            n = e.mediaIndex,
            r = e.startOfSegment,
            a = e.isSyncRequest,
            s = e.partIndex,
            o = e.forceTimestampOffset,
            u = e.getMediaInfoForTime,
            l = i.segments[n],
            e = "number" == typeof s && l.parts[s],
            t = {
              requestId: "segment-loader-" + Math.random(),
              uri: (e && e.resolvedUri) || l.resolvedUri,
              mediaIndex: n,
              partIndex: e ? s : null,
              isSyncRequest: a,
              startOfSegment: r,
              playlist: i,
              bytes: null,
              encryptedBytes: null,
              timestampOffset: null,
              timeline: l.timeline,
              duration: (e && e.duration) || l.duration,
              segment: l,
              part: e,
              byteLength: 0,
              transmuxer: this.transmuxer_,
              getMediaInfoForTime: u,
              independent: t,
            },
            o = "undefined" != typeof o ? o : this.isPendingTimestampOffset_;
          t.timestampOffset = this.timestampOffsetForSegment_({
            segmentTimeline: l.timeline,
            currentTimeline: this.currentTimeline_,
            startOfSegment: r,
            buffered: this.buffered_(),
            overrideCheck: o,
          });
          o = Fo(this.sourceUpdater_.audioBuffered());
          return (
            "number" == typeof o &&
              (t.audioAppendStart =
                o - this.sourceUpdater_.audioTimestampOffset()),
            this.sourceUpdater_.videoBuffered().length &&
              (t.gopsToAlignWith = (function (e, t, i) {
                if ("undefined" == typeof t || null === t || !e.length)
                  return [];
                for (
                  var n = Math.ceil((t - i + 3) * cl), r = 0;
                  r < e.length && !(e[r].pts > n);
                  r++
                );
                return e.slice(r);
              })(
                this.gopBuffer_,
                this.currentTime_() -
                  this.sourceUpdater_.videoTimestampOffset(),
                this.timeMapping_
              )),
            t
          );
        }),
        (t.timestampOffsetForSegment_ = function (e) {
          return (
            (i = (t = e).segmentTimeline),
            (n = t.currentTimeline),
            (r = t.startOfSegment),
            (e = t.buffered),
            t.overrideCheck || i !== n
              ? !(i < n) && e.length
                ? e.end(e.length - 1)
                : r
              : null
          );
          var t, i, n, r;
        }),
        (t.earlyAbortWhenNeeded_ = function (e) {
          var t, i, n, r, a, s, o, u, l, c, d, h, p;
          !this.vhs_.tech_.paused() &&
            this.xhrOptions_.timeout &&
            this.playlist_.attributes.BANDWIDTH &&
            (Date.now() - (e.firstBytesReceivedAt || Date.now()) < 1e3 ||
              ((t = this.currentTime_()),
              (r = e.bandwidth),
              (a = this.pendingSegment_.duration),
              (p = fl.estimateSegmentRequestTime(
                a,
                r,
                this.playlist_,
                e.bytesReceived
              )),
              (i = this.buffered_()),
              (n = t),
              void 0 === (e = this.vhs_.tech_.playbackRate()) && (e = 1),
              p <= (e = ((i.length ? i.end(i.length - 1) : 0) - n) / e - 1) ||
                ((r = {
                  master: this.vhs_.playlists.master,
                  currentTime: t,
                  bandwidth: r,
                  duration: this.duration_(),
                  segmentDuration: a,
                  timeUntilRebuffer: e,
                  currentTimeline: this.currentTimeline_,
                  syncController: this.syncController_,
                }),
                (a = r.master),
                (s = r.currentTime),
                (o = r.bandwidth),
                (u = r.duration),
                (l = r.segmentDuration),
                (c = r.timeUntilRebuffer),
                (d = r.currentTimeline),
                (h = r.syncController),
                (a = (r = (a = !(a = (r = a.playlists.filter(function (e) {
                  return !fl.isIncompatible(e);
                })).filter(fl.isEnabled)).length
                  ? r.filter(function (e) {
                      return !fl.isDisabled(e);
                    })
                  : a)
                  .filter(fl.hasAttribute.bind(null, "BANDWIDTH"))
                  .map(function (e) {
                    var t = h.getSyncPoint(e, u, d, s) ? 1 : 2;
                    return {
                      playlist: e,
                      rebufferingImpact:
                        fl.estimateSegmentRequestTime(l, o, e) * t - c,
                    };
                  })).filter(function (e) {
                  return e.rebufferingImpact <= 0;
                })),
                Ju(a, function (e, t) {
                  return Zu(t.playlist, e.playlist);
                }),
                (r = a.length
                  ? a[0]
                  : (Ju(r, function (e, t) {
                      return e.rebufferingImpact - t.rebufferingImpact;
                    }),
                    r[0] || null)) &&
                  ((p = p - e - r.rebufferingImpact),
                  !r.playlist ||
                    r.playlist.uri === this.playlist_.uri ||
                    p < (e <= hl ? 1 : 0.5) ||
                    ((this.bandwidth =
                      r.playlist.attributes.BANDWIDTH * Sl.BANDWIDTH_VARIANCE +
                      1),
                    this.trigger("earlyabort"))))));
        }),
        (t.handleAbort_ = function (e) {
          this.logger_("Aborting " + rl(e)), (this.mediaRequestsAborted += 1);
        }),
        (t.handleProgress_ = function (e, t) {
          this.earlyAbortWhenNeeded_(t.stats),
            this.checkForAbort_(t.requestId) || this.trigger("progress");
        }),
        (t.handleTrackInfo_ = function (e, t) {
          this.earlyAbortWhenNeeded_(e.stats),
            this.checkForAbort_(e.requestId) ||
              this.checkForIllegalMediaSwitch(t) ||
              ((function (e, t) {
                if ((!e && !t) || (!e && t) || (e && !t)) return !1;
                if (e === t) return !0;
                var i = Object.keys(e).sort(),
                  n = Object.keys(t).sort();
                if (i.length !== n.length) return !1;
                for (var r = 0; r < i.length; r++) {
                  var a = i[r];
                  if (a !== n[r]) return !1;
                  if (e[a] !== t[a]) return !1;
                }
                return !0;
              })(this.currentMediaInfo_, (t = t || {})) ||
                ((this.appendInitSegment_ = { audio: !0, video: !0 }),
                (this.startingMediaInfo_ = t),
                (this.currentMediaInfo_ = t),
                this.logger_("trackinfo update", t),
                this.trigger("trackinfo")),
              this.checkForAbort_(e.requestId) ||
                ((this.pendingSegment_.trackInfo = t),
                this.hasEnoughInfoToAppend_() && this.processCallQueue_()));
        }),
        (t.handleTimingInfo_ = function (e, t, i, n) {
          var r;
          this.earlyAbortWhenNeeded_(e.stats),
            this.checkForAbort_(e.requestId) ||
              (((r = this.pendingSegment_)[(e = al(t))] = r[e] || {}),
              (r[e][i] = n),
              this.logger_("timinginfo: " + t + " - " + i + " - " + n),
              this.hasEnoughInfoToAppend_() && this.processCallQueue_());
        }),
        (t.handleCaptions_ = function (e, t) {
          var g,
            y,
            v = this;
          this.earlyAbortWhenNeeded_(e.stats),
            this.checkForAbort_(e.requestId) ||
              (0 !== t.length
                ? this.pendingSegment_.hasAppendedData_
                  ? ((g =
                      null === this.sourceUpdater_.videoTimestampOffset()
                        ? this.sourceUpdater_.audioTimestampOffset()
                        : this.sourceUpdater_.videoTimestampOffset()),
                    (y = {}),
                    t.forEach(function (e) {
                      y[e.stream] = y[e.stream] || {
                        startTime: 1 / 0,
                        captions: [],
                        endTime: 0,
                      };
                      var t = y[e.stream];
                      (t.startTime = Math.min(t.startTime, e.startTime + g)),
                        (t.endTime = Math.max(t.endTime, e.endTime + g)),
                        t.captions.push(e);
                    }),
                    Object.keys(y).forEach(function (e) {
                      var t,
                        i,
                        n,
                        r,
                        a,
                        s,
                        o,
                        u,
                        l,
                        c,
                        d = y[e],
                        h = d.startTime,
                        p = d.endTime,
                        f = d.captions,
                        m = v.inbandTextTracks_;
                      v.logger_(
                        "adding cues from " + h + " -> " + p + " for " + e
                      ),
                        (t = m),
                        (i = v.vhs_.tech_),
                        t[(n = e)] ||
                          (i.trigger({ type: "usage", name: "vhs-608" }),
                          i.trigger({ type: "usage", name: "hls-608" }),
                          /^cc708_/.test((r = n)) &&
                            (r = "SERVICE" + n.split("_")[1]),
                          (o = i.textTracks().getTrackById(r))
                            ? (t[n] = o)
                            : ((s = a = n),
                              (d = !1),
                              (o = ((i.options_.vhs &&
                                i.options_.vhs.captionServices) ||
                                {})[r]) &&
                                ((a = o.label),
                                (s = o.language),
                                (d = o.default)),
                              (t[n] = i.addRemoteTextTrack(
                                {
                                  kind: "captions",
                                  id: r,
                                  default: d,
                                  label: a,
                                  language: s,
                                },
                                !1
                              ).track))),
                        il(h, p, m[e]),
                        (l = (f = {
                          captionArray: f,
                          inbandTextTracks: m,
                          timestampOffset: g,
                        }).inbandTextTracks),
                        (m = f.captionArray),
                        (c = f.timestampOffset),
                        m &&
                          ((u = window.WebKitDataCue || window.VTTCue),
                          m.forEach(function (e) {
                            var t = e.stream;
                            l[t].addCue(
                              new u(e.startTime + c, e.endTime + c, e.text)
                            );
                          }));
                    }),
                    this.transmuxer_ &&
                      this.transmuxer_.postMessage({
                        action: "clearParsedMp4Captions",
                      }))
                  : this.metadataQueue_.caption.push(
                      this.handleCaptions_.bind(this, e, t)
                    )
                : this.logger_(
                    "SegmentLoader received no captions from a caption event"
                  ));
        }),
        (t.handleId3_ = function (e, t, i) {
          var n, r, a, s;
          this.earlyAbortWhenNeeded_(e.stats),
            this.checkForAbort_(e.requestId) ||
              (this.pendingSegment_.hasAppendedData_
                ? ((n =
                    null === this.sourceUpdater_.videoTimestampOffset()
                      ? this.sourceUpdater_.audioTimestampOffset()
                      : this.sourceUpdater_.videoTimestampOffset()),
                  (r = this.inbandTextTracks_),
                  (a = i),
                  (s = this.vhs_.tech_),
                  r.metadataTrack_ ||
                    ((r.metadataTrack_ = s.addRemoteTextTrack(
                      { kind: "metadata", label: "Timed Metadata" },
                      !1
                    ).track),
                    (r.metadataTrack_.inBandMetadataTrackDispatchType = a)),
                  tl({
                    inbandTextTracks: this.inbandTextTracks_,
                    metadataArray: t,
                    timestampOffset: n,
                    videoDuration: this.duration_(),
                  }))
                : this.metadataQueue_.id3.push(
                    this.handleId3_.bind(this, e, t, i)
                  ));
        }),
        (t.processMetadataQueue_ = function () {
          this.metadataQueue_.id3.forEach(function (e) {
            return e();
          }),
            this.metadataQueue_.caption.forEach(function (e) {
              return e();
            }),
            (this.metadataQueue_.id3 = []),
            (this.metadataQueue_.caption = []);
        }),
        (t.processCallQueue_ = function () {
          var e = this.callQueue_;
          (this.callQueue_ = []),
            e.forEach(function (e) {
              return e();
            });
        }),
        (t.processLoadQueue_ = function () {
          var e = this.loadQueue_;
          (this.loadQueue_ = []),
            e.forEach(function (e) {
              return e();
            });
        }),
        (t.hasEnoughInfoToLoad_ = function () {
          if ("audio" !== this.loaderType_) return !0;
          var e = this.pendingSegment_;
          return (
            !!e &&
            (!this.getCurrentMediaInfo_() ||
              !sl({
                timelineChangeController: this.timelineChangeController_,
                currentTimeline: this.currentTimeline_,
                segmentTimeline: e.timeline,
                loaderType: this.loaderType_,
                audioDisabled: this.audioDisabled_,
              }))
          );
        }),
        (t.getCurrentMediaInfo_ = function (e) {
          return (
            ((e = void 0 === e ? this.pendingSegment_ : e) && e.trackInfo) ||
            this.currentMediaInfo_
          );
        }),
        (t.getMediaInfo_ = function (e) {
          return (
            void 0 === e && (e = this.pendingSegment_),
            this.getCurrentMediaInfo_(e) || this.startingMediaInfo_
          );
        }),
        (t.hasEnoughInfoToAppend_ = function () {
          if (!this.sourceUpdater_.ready()) return !1;
          if (this.waitingOnRemove_ || this.quotaExceededErrorRetryTimeout_)
            return !1;
          var e = this.pendingSegment_,
            t = this.getCurrentMediaInfo_();
          if (!e || !t) return !1;
          var i = t.hasAudio,
            n = t.hasVideo,
            t = t.isMuxed;
          return (
            !(n && !e.videoTimingInfo) &&
            !(i && !this.audioDisabled_ && !t && !e.audioTimingInfo) &&
            !sl({
              timelineChangeController: this.timelineChangeController_,
              currentTimeline: this.currentTimeline_,
              segmentTimeline: e.timeline,
              loaderType: this.loaderType_,
              audioDisabled: this.audioDisabled_,
            })
          );
        }),
        (t.handleData_ = function (e, t) {
          if (
            (this.earlyAbortWhenNeeded_(e.stats),
            !this.checkForAbort_(e.requestId))
          )
            if (!this.callQueue_.length && this.hasEnoughInfoToAppend_()) {
              var i,
                n = this.pendingSegment_;
              if (
                (this.setTimeMapping_(n.timeline),
                this.updateMediaSecondsLoaded_(n.part || n.segment),
                "closed" !== this.mediaSource_.readyState)
              ) {
                if (
                  (e.map &&
                    ((e.map = this.initSegmentForMap(e.map, !0)),
                    (n.segment.map = e.map)),
                  e.key && this.segmentKey(e.key, !0),
                  (n.isFmp4 = e.isFmp4),
                  (n.timingInfo = n.timingInfo || {}),
                  n.isFmp4
                    ? (this.trigger("fmp4"),
                      (n.timingInfo.start = n[al(t.type)].start))
                    : ((i = this.getCurrentMediaInfo_()),
                      (i = "main" === this.loaderType_ && i && i.hasVideo) &&
                        (r = n.videoTimingInfo.start),
                      (n.timingInfo.start = this.trueSegmentStart_({
                        currentStart: n.timingInfo.start,
                        playlist: n.playlist,
                        mediaIndex: n.mediaIndex,
                        currentVideoTimestampOffset:
                          this.sourceUpdater_.videoTimestampOffset(),
                        useVideoTimingInfo: i,
                        firstVideoFrameTimeForData: r,
                        videoTimingInfo: n.videoTimingInfo,
                        audioTimingInfo: n.audioTimingInfo,
                      }))),
                  this.updateAppendInitSegmentStatus(n, t.type),
                  this.updateSourceBufferTimestampOffset_(n),
                  n.isSyncRequest)
                ) {
                  this.updateTimingInfoEnd_(n),
                    this.syncController_.saveSegmentTimingInfo({
                      segmentInfo: n,
                      shouldSaveTimelineMapping: "main" === this.loaderType_,
                    });
                  var r = this.chooseNextRequest_();
                  if (
                    r.mediaIndex !== n.mediaIndex ||
                    r.partIndex !== n.partIndex
                  )
                    return void this.logger_(
                      "sync segment was incorrect, not appending"
                    );
                  this.logger_("sync segment was correct, appending");
                }
                (n.hasAppendedData_ = !0),
                  this.processMetadataQueue_(),
                  this.appendData_(n, t);
              }
            } else this.callQueue_.push(this.handleData_.bind(this, e, t));
        }),
        (t.updateAppendInitSegmentStatus = function (e, t) {
          "main" !== this.loaderType_ ||
            "number" != typeof e.timestampOffset ||
            e.changedTimestampOffset ||
            (this.appendInitSegment_ = { audio: !0, video: !0 }),
            this.playlistOfLastInitSegment_[t] !== e.playlist &&
              (this.appendInitSegment_[t] = !0);
        }),
        (t.getInitSegmentAndUpdateState_ = function (e) {
          var t = e.type,
            i = e.initSegment,
            n = e.map,
            r = e.playlist;
          if (n) {
            e = bu(n);
            if (this.activeInitSegmentId_ === e) return null;
            (i = this.initSegmentForMap(n, !0).bytes),
              (this.activeInitSegmentId_ = e);
          }
          return i && this.appendInitSegment_[t]
            ? ((this.playlistOfLastInitSegment_[t] = r),
              (this.appendInitSegment_[t] = !1),
              (this.activeInitSegmentId_ = null),
              i)
            : null;
        }),
        (t.handleQuotaExceededError_ = function (e, t) {
          var i = this,
            n = e.segmentInfo,
            r = e.type,
            a = e.bytes,
            s = this.sourceUpdater_.audioBuffered(),
            o = this.sourceUpdater_.videoBuffered();
          1 < s.length &&
            this.logger_(
              "On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: " +
                Bo(s).join(", ")
            ),
            1 < o.length &&
              this.logger_(
                "On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: " +
                  Bo(o).join(", ")
              );
          var u = s.length ? s.start(0) : 0,
            l = s.length ? s.end(s.length - 1) : 0,
            c = o.length ? o.start(0) : 0,
            e = o.length ? o.end(o.length - 1) : 0;
          if (l - u <= 1 && e - c <= 1)
            return (
              this.logger_(
                "On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: " +
                  a.byteLength +
                  ", audio buffer: " +
                  Bo(s).join(", ") +
                  ", video buffer: " +
                  Bo(o).join(", ") +
                  ", "
              ),
              this.error({
                message:
                  "Quota exceeded error with append of a single segment of content",
                excludeUntil: 1 / 0,
              }),
              void this.trigger("error")
            );
          (this.waitingOnRemove_ = !0),
            this.callQueue_.push(
              this.appendToSourceBuffer_.bind(this, {
                segmentInfo: n,
                type: r,
                bytes: a,
              })
            );
          a = this.currentTime_() - 1;
          this.logger_(
            "On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to " + a
          ),
            this.remove(
              0,
              a,
              function () {
                i.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),
                  (i.waitingOnRemove_ = !1),
                  (i.quotaExceededErrorRetryTimeout_ = window.setTimeout(
                    function () {
                      i.logger_(
                        "On QUOTA_EXCEEDED_ERR, re-processing call queue"
                      ),
                        (i.quotaExceededErrorRetryTimeout_ = null),
                        i.processCallQueue_();
                    },
                    1e3
                  ));
              },
              !0
            );
        }),
        (t.handleAppendError_ = function (e, t) {
          var i = e.segmentInfo,
            n = e.type,
            e = e.bytes;
          t &&
            (22 !== t.code
              ? (this.logger_("Received non QUOTA_EXCEEDED_ERR on append", t),
                this.error(
                  n +
                    " append of " +
                    e.length +
                    "b failed for segment #" +
                    i.mediaIndex +
                    " in playlist " +
                    i.playlist.id
                ),
                this.trigger("appenderror"))
              : this.handleQuotaExceededError_({
                  segmentInfo: i,
                  type: n,
                  bytes: e,
                }));
        }),
        (t.appendToSourceBuffer_ = function (e) {
          var t,
            i,
            n = e.segmentInfo,
            r = e.type,
            a = e.initSegment,
            s = e.data,
            o = e.bytes;
          o ||
            ((e = [s]),
            (s = s.byteLength),
            a && (e.unshift(a), (s += a.byteLength)),
            (i = 0),
            (e = { bytes: s, segments: e }).bytes &&
              ((t = new Uint8Array(e.bytes)),
              e.segments.forEach(function (e) {
                t.set(e, i), (i += e.byteLength);
              })),
            (o = t)),
            this.sourceUpdater_.appendBuffer(
              { segmentInfo: n, type: r, bytes: o },
              this.handleAppendError_.bind(this, {
                segmentInfo: n,
                type: r,
                bytes: o,
              })
            );
        }),
        (t.handleSegmentTimingInfo_ = function (e, t, i) {
          this.pendingSegment_ &&
            t === this.pendingSegment_.requestId &&
            ((t = this.pendingSegment_.segment)[(e = e + "TimingInfo")] ||
              (t[e] = {}),
            (t[e].transmuxerPrependedSeconds = i.prependedContentDuration || 0),
            (t[e].transmuxedPresentationStart = i.start.presentation),
            (t[e].transmuxedDecodeStart = i.start.decode),
            (t[e].transmuxedPresentationEnd = i.end.presentation),
            (t[e].transmuxedDecodeEnd = i.end.decode),
            (t[e].baseMediaDecodeTime = i.baseMediaDecodeTime));
        }),
        (t.appendData_ = function (e, t) {
          var i = t.type,
            n = t.data;
          n &&
            n.byteLength &&
            (("audio" === i && this.audioDisabled_) ||
              ((t = this.getInitSegmentAndUpdateState_({
                type: i,
                initSegment: t.initSegment,
                playlist: e.playlist,
                map: e.isFmp4 ? e.segment.map : null,
              })),
              this.appendToSourceBuffer_({
                segmentInfo: e,
                type: i,
                initSegment: t,
                data: n,
              })));
        }),
        (t.loadSegment_ = function (t) {
          var i = this;
          (this.state = "WAITING"),
            (this.pendingSegment_ = t),
            this.trimBackBuffer_(t),
            "number" == typeof t.timestampOffset &&
              this.transmuxer_ &&
              this.transmuxer_.postMessage({ action: "clearAllMp4Captions" }),
            this.hasEnoughInfoToLoad_()
              ? this.updateTransmuxerAndRequestSegment_(t)
              : this.loadQueue_.push(function () {
                  var e = g({}, t, { forceTimestampOffset: !0 });
                  g(t, i.generateSegmentInfo_(e)),
                    (i.isPendingTimestampOffset_ = !1),
                    i.updateTransmuxerAndRequestSegment_(t);
                });
        }),
        (t.updateTransmuxerAndRequestSegment_ = function (n) {
          var r = this;
          this.shouldUpdateTransmuxerTimestampOffset_(n.timestampOffset) &&
            ((this.gopBuffer_.length = 0),
            (n.gopsToAlignWith = []),
            (this.timeMapping_ = 0),
            this.transmuxer_.postMessage({ action: "reset" }),
            this.transmuxer_.postMessage({
              action: "setTimestampOffset",
              timestampOffset: n.timestampOffset,
            }));
          var e = this.createSimplifiedSegmentObj_(n),
            t = this.isEndOfStream_(n.mediaIndex, n.playlist, n.partIndex),
            i = null !== this.mediaIndex,
            a = n.timeline !== this.currentTimeline_ && 0 < n.timeline,
            a = t || (i && a);
          this.logger_("Requesting " + rl(n)),
            e.map &&
              !e.map.bytes &&
              (this.logger_("going to request init segment."),
              (this.appendInitSegment_ = { video: !0, audio: !0 })),
            (n.abortRequests = Gu({
              xhr: this.vhs_.xhr,
              xhrOptions: this.xhrOptions_,
              decryptionWorker: this.decrypter_,
              segment: e,
              abortFn: this.handleAbort_.bind(this, n),
              progressFn: this.handleProgress_.bind(this),
              trackInfoFn: this.handleTrackInfo_.bind(this),
              timingInfoFn: this.handleTimingInfo_.bind(this),
              videoSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(
                this,
                "video",
                n.requestId
              ),
              audioSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(
                this,
                "audio",
                n.requestId
              ),
              captionsFn: this.handleCaptions_.bind(this),
              isEndOfTimeline: a,
              endedTimelineFn: function () {
                r.logger_("received endedtimeline callback");
              },
              id3Fn: this.handleId3_.bind(this),
              dataFn: this.handleData_.bind(this),
              doneFn: this.segmentRequestFinished_.bind(this),
              onTransmuxerLog: function (e) {
                var t = e.message,
                  i = e.level,
                  e = e.stream;
                r.logger_(
                  rl(n) +
                    " logged from transmuxer stream " +
                    e +
                    " as a " +
                    i +
                    ": " +
                    t
                );
              },
            }));
        }),
        (t.trimBackBuffer_ = function (e) {
          var t,
            i,
            n,
            r,
            r =
              ((t = this.seekable_()),
              (i = this.currentTime_()),
              (n = this.playlist_.targetDuration || 10),
              (r = i - Sl.BACK_BUFFER_LENGTH),
              t.length && (r = Math.max(r, t.start(0))),
              Math.min(i - n, r));
          0 < r && this.remove(0, r);
        }),
        (t.createSimplifiedSegmentObj_ = function (e) {
          var t = e.segment,
            i = e.part,
            n = {
              resolvedUri: (i || t).resolvedUri,
              byterange: (i || t).byterange,
              requestId: e.requestId,
              transmuxer: e.transmuxer,
              audioAppendStart: e.audioAppendStart,
              gopsToAlignWith: e.gopsToAlignWith,
              part: e.part,
            },
            i = e.playlist.segments[e.mediaIndex - 1];
          return (
            i &&
              i.timeline === t.timeline &&
              (i.videoTimingInfo
                ? (n.baseStartTime = i.videoTimingInfo.transmuxedDecodeEnd)
                : i.audioTimingInfo &&
                  (n.baseStartTime = i.audioTimingInfo.transmuxedDecodeEnd)),
            t.key &&
              ((e =
                t.key.iv ||
                new Uint32Array([
                  0,
                  0,
                  0,
                  e.mediaIndex + e.playlist.mediaSequence,
                ])),
              (n.key = this.segmentKey(t.key)),
              (n.key.iv = e)),
            t.map && (n.map = this.initSegmentForMap(t.map)),
            n
          );
        }),
        (t.saveTransferStats_ = function (e) {
          (this.mediaRequests += 1),
            e &&
              ((this.mediaBytesTransferred += e.bytesReceived),
              (this.mediaTransferDuration += e.roundTripTime));
        }),
        (t.saveBandwidthRelatedStats_ = function (e, t) {
          (this.pendingSegment_.byteLength = t.bytesReceived),
            e < 1 / 60
              ? this.logger_(
                  "Ignoring segment's bandwidth because its duration of " +
                    e +
                    " is less than the min to record " +
                    1 / 60
                )
              : ((this.bandwidth = t.bandwidth),
                (this.roundTrip = t.roundTripTime));
        }),
        (t.handleTimeout_ = function () {
          (this.mediaRequestsTimedout += 1),
            (this.bandwidth = 1),
            (this.roundTrip = NaN),
            this.trigger("bandwidthupdate");
        }),
        (t.segmentRequestFinished_ = function (e, t, i) {
          if (this.callQueue_.length)
            this.callQueue_.push(
              this.segmentRequestFinished_.bind(this, e, t, i)
            );
          else if (
            (this.saveTransferStats_(t.stats),
            this.pendingSegment_ &&
              t.requestId === this.pendingSegment_.requestId)
          ) {
            if (e)
              return (
                (this.pendingSegment_ = null),
                (this.state = "READY"),
                e.code === Al
                  ? void 0
                  : (this.pause(),
                    e.code === xl
                      ? void this.handleTimeout_()
                      : ((this.mediaRequestsErrored += 1),
                        this.error(e),
                        void this.trigger("error")))
              );
            e = this.pendingSegment_;
            this.saveBandwidthRelatedStats_(e.duration, t.stats),
              (e.endOfAllRequests = t.endOfAllRequests),
              i.gopInfo &&
                (this.gopBuffer_ = (function (e, t, i) {
                  if (!t.length) return e;
                  if (i) return t.slice();
                  for (
                    var n = t[0].pts, r = 0;
                    r < e.length && !(e[r].pts >= n);
                    r++
                  );
                  return e.slice(0, r).concat(t);
                })(this.gopBuffer_, i.gopInfo, this.safeAppend_)),
              (this.state = "APPENDING"),
              this.trigger("appending"),
              this.waitForAppendsToComplete_(e);
          }
        }),
        (t.setTimeMapping_ = function (e) {
          e = this.syncController_.mappingForTimeline(e);
          null !== e && (this.timeMapping_ = e);
        }),
        (t.updateMediaSecondsLoaded_ = function (e) {
          "number" == typeof e.start && "number" == typeof e.end
            ? (this.mediaSecondsLoaded += e.end - e.start)
            : (this.mediaSecondsLoaded += e.duration);
        }),
        (t.shouldUpdateTransmuxerTimestampOffset_ = function (e) {
          return (
            null !== e &&
            (("main" === this.loaderType_ &&
              e !== this.sourceUpdater_.videoTimestampOffset()) ||
              (!this.audioDisabled_ &&
                e !== this.sourceUpdater_.audioTimestampOffset()))
          );
        }),
        (t.trueSegmentStart_ = function (e) {
          var t = e.currentStart,
            i = e.playlist,
            n = e.mediaIndex,
            r = e.firstVideoFrameTimeForData,
            a = e.currentVideoTimestampOffset,
            s = e.useVideoTimingInfo,
            o = e.videoTimingInfo,
            e = e.audioTimingInfo;
          if ("undefined" != typeof t) return t;
          if (!s) return e.start;
          i = i.segments[n - 1];
          return 0 !== n &&
            i &&
            "undefined" != typeof i.start &&
            i.end === r + a
            ? o.start
            : r;
        }),
        (t.waitForAppendsToComplete_ = function (e) {
          var t = this.getCurrentMediaInfo_(e);
          if (!t)
            return (
              this.error({
                message:
                  "No starting media returned, likely due to an unsupported media format.",
                blacklistDuration: 1 / 0,
              }),
              void this.trigger("error")
            );
          var i = t.hasAudio,
            n = t.hasVideo,
            t = t.isMuxed,
            n = "main" === this.loaderType_ && n,
            t = !this.audioDisabled_ && i && !t;
          if (((e.waitingOnAppends = 0), !e.hasAppendedData_))
            return (
              e.timingInfo ||
                "number" != typeof e.timestampOffset ||
                (this.isPendingTimestampOffset_ = !0),
              (e.timingInfo = { start: 0 }),
              e.waitingOnAppends++,
              this.isPendingTimestampOffset_ ||
                (this.updateSourceBufferTimestampOffset_(e),
                this.processMetadataQueue_()),
              void this.checkAppendsDone_(e)
            );
          n && e.waitingOnAppends++,
            t && e.waitingOnAppends++,
            n &&
              this.sourceUpdater_.videoQueueCallback(
                this.checkAppendsDone_.bind(this, e)
              ),
            t &&
              this.sourceUpdater_.audioQueueCallback(
                this.checkAppendsDone_.bind(this, e)
              );
        }),
        (t.checkAppendsDone_ = function (e) {
          this.checkForAbort_(e.requestId) ||
            (e.waitingOnAppends--,
            0 === e.waitingOnAppends && this.handleAppendsDone_());
        }),
        (t.checkForIllegalMediaSwitch = function (e) {
          var t,
            i,
            e =
              ((t = this.loaderType_),
              (i = this.getCurrentMediaInfo_()),
              (e = e),
              "main" === t && i && e
                ? e.hasAudio || e.hasVideo
                  ? i.hasVideo && !e.hasVideo
                    ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest."
                    : !i.hasVideo && e.hasVideo
                    ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest."
                    : null
                  : "Neither audio nor video found in segment."
                : null);
          return (
            !!e &&
            (this.error({ message: e, blacklistDuration: 1 / 0 }),
            this.trigger("error"),
            !0)
          );
        }),
        (t.updateSourceBufferTimestampOffset_ = function (e) {
          var t;
          null === e.timestampOffset ||
            "number" != typeof e.timingInfo.start ||
            e.changedTimestampOffset ||
            "main" !== this.loaderType_ ||
            ((t = !1),
            (e.timestampOffset -= e.timingInfo.start),
            (e.changedTimestampOffset = !0),
            e.timestampOffset !== this.sourceUpdater_.videoTimestampOffset() &&
              (this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),
              (t = !0)),
            e.timestampOffset !== this.sourceUpdater_.audioTimestampOffset() &&
              (this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),
              (t = !0)),
            t && this.trigger("timestampoffset"));
        }),
        (t.updateTimingInfoEnd_ = function (e) {
          e.timingInfo = e.timingInfo || {};
          var t = this.getMediaInfo_(),
            t =
              "main" === this.loaderType_ &&
              t &&
              t.hasVideo &&
              e.videoTimingInfo
                ? e.videoTimingInfo
                : e.audioTimingInfo;
          t &&
            (e.timingInfo.end =
              "number" == typeof t.end ? t.end : t.start + e.duration);
        }),
        (t.handleAppendsDone_ = function () {
          if (
            (this.pendingSegment_ && this.trigger("appendsdone"),
            !this.pendingSegment_)
          )
            return (
              (this.state = "READY"),
              void (this.paused() || this.monitorBuffer_())
            );
          var e = this.pendingSegment_;
          this.updateTimingInfoEnd_(e),
            this.shouldSaveSegmentTimingInfo_ &&
              this.syncController_.saveSegmentTimingInfo({
                segmentInfo: e,
                shouldSaveTimelineMapping: "main" === this.loaderType_,
              });
          var t = ul(e, this.sourceType_);
          if (
            (t &&
              ("warn" === t.severity
                ? tr.log.warn(t.message)
                : this.logger_(t.message)),
            this.recordThroughput_(e),
            (this.pendingSegment_ = null),
            (this.state = "READY"),
            !e.isSyncRequest ||
              (this.trigger("syncinfoupdate"), e.hasAppendedData_))
          ) {
            this.logger_("Appended " + rl(e)),
              this.addSegmentMetadataCue_(e),
              (this.fetchAtBuffer_ = !0),
              this.currentTimeline_ !== e.timeline &&
                (this.timelineChangeController_.lastTimelineChange({
                  type: this.loaderType_,
                  from: this.currentTimeline_,
                  to: e.timeline,
                }),
                "main" !== this.loaderType_ ||
                  this.audioDisabled_ ||
                  this.timelineChangeController_.lastTimelineChange({
                    type: "audio",
                    from: this.currentTimeline_,
                    to: e.timeline,
                  })),
              (this.currentTimeline_ = e.timeline),
              this.trigger("syncinfoupdate");
            var i = e.segment,
              t = e.part,
              i =
                i.end &&
                this.currentTime_() - i.end > 3 * e.playlist.targetDuration,
              t =
                t &&
                t.end &&
                this.currentTime_() - t.end > 3 * e.playlist.partTargetDuration;
            if (i || t)
              return (
                this.logger_("bad " + (i ? "segment" : "part") + " " + rl(e)),
                void this.resetEverything()
              );
            null !== this.mediaIndex && this.trigger("bandwidthupdate"),
              this.trigger("progress"),
              (this.mediaIndex = e.mediaIndex),
              (this.partIndex = e.partIndex),
              this.isEndOfStream_(e.mediaIndex, e.playlist, e.partIndex) &&
                this.endOfStream(),
              this.trigger("appended"),
              e.hasAppendedData_ && this.mediaAppends++,
              this.paused() || this.monitorBuffer_();
          } else
            this.logger_("Throwing away un-appended sync request " + rl(e));
        }),
        (t.recordThroughput_ = function (e) {
          var t, i;
          e.duration < 1 / 60
            ? this.logger_(
                "Ignoring segment's throughput because its duration of " +
                  e.duration +
                  " is less than the min to record " +
                  1 / 60
              )
            : ((t = this.throughput.rate),
              (i = Date.now() - e.endOfAllRequests + 1),
              (i = Math.floor((e.byteLength / i) * 8 * 1e3)),
              (this.throughput.rate += (i - t) / ++this.throughput.count));
        }),
        (t.addSegmentMetadataCue_ = function (e) {
          var t, i, n, r;
          this.segmentMetadataTrack_ &&
            ((i = (t = e.segment).start),
            (r = t.end),
            nl(i) &&
              nl(r) &&
              (il(i, r, this.segmentMetadataTrack_),
              (n = window.WebKitDataCue || window.VTTCue),
              (e = {
                custom: t.custom,
                dateTimeObject: t.dateTimeObject,
                dateTimeString: t.dateTimeString,
                bandwidth: e.playlist.attributes.BANDWIDTH,
                resolution: e.playlist.attributes.RESOLUTION,
                codecs: e.playlist.attributes.CODECS,
                byteLength: e.byteLength,
                uri: e.uri,
                timeline: e.timeline,
                playlist: e.playlist.id,
                start: i,
                end: r,
              }),
              ((r = new n(i, r, JSON.stringify(e))).value = e),
              this.segmentMetadataTrack_.addCue(r)));
        }),
        e
      );
    })(tr.EventTarget);
  function Ol() {}
  function Rl(e) {
    return "string" != typeof e
      ? e
      : e.replace(/./, function (e) {
          return e.toUpperCase();
        });
  }
  function Ml(e, t) {
    var i = t[e + "Buffer"];
    return (i && i.updating) || t.queuePending[e];
  }
  function Nl(e, t) {
    if (0 !== t.queue.length) {
      var i = 0,
        n = t.queue[i];
      if ("mediaSource" !== n.type) {
        if (
          "mediaSource" !== e &&
          t.ready() &&
          "closed" !== t.mediaSource.readyState &&
          !Ml(e, t)
        ) {
          if (n.type !== e) {
            if (
              null ===
              (i = (function (e, t) {
                for (var i = 0; i < t.length; i++) {
                  var n = t[i];
                  if ("mediaSource" === n.type) return null;
                  if (n.type === e) return i;
                }
                return null;
              })(e, t.queue))
            )
              return;
            n = t.queue[i];
          }
          t.queue.splice(i, 1),
            (t.queuePending[e] = n).action(e, t),
            n.doneFn || ((t.queuePending[e] = null), Nl(e, t));
        }
      } else
        t.updating() ||
          "closed" === t.mediaSource.readyState ||
          (t.queue.shift(),
          n.action(t),
          n.doneFn && n.doneFn(),
          Nl("audio", t),
          Nl("video", t));
    }
  }
  function Ul(e, t) {
    var i = t[e + "Buffer"],
      n = Rl(e);
    i &&
      (i.removeEventListener("updateend", t["on" + n + "UpdateEnd_"]),
      i.removeEventListener("error", t["on" + n + "Error_"]),
      (t.codecs[e] = null),
      (t[e + "Buffer"] = null));
  }
  function Bl(e, t) {
    return e && t && -1 !== Array.prototype.indexOf.call(e.sourceBuffers, t);
  }
  function Fl(e) {
    var t = e.type,
      i = e.sourceUpdater,
      n = e.action,
      r = e.doneFn,
      e = e.name;
    i.queue.push({ type: t, action: n, doneFn: r, name: e }), Nl(t, i);
  }
  function jl(i, n) {
    return function (e) {
      var t;
      n.queuePending[i] &&
        ((t = n.queuePending[i].doneFn),
        (n.queuePending[i] = null),
        t && t(n[i + "Error_"])),
        Nl(i, n);
    };
  }
  function Hl(e) {
    return decodeURIComponent(escape(String.fromCharCode.apply(null, e)));
  }
  function ql(e, t) {
    e.abort(),
      e.pause(),
      t &&
        t.activePlaylistLoader &&
        (t.activePlaylistLoader.pause(), (t.activePlaylistLoader = null));
  }
  function Vl(e, t) {
    (t.activePlaylistLoader = e).load();
  }
  function Wl(e, t) {
    for (var i = 0; i < e.length; i++) {
      if (tu(t, e[i])) return !0;
      if (e[i].playlists && Wl(e[i].playlists, t)) return !0;
    }
    return !1;
  }
  function Gl(a) {
    ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function (e) {
      mc[e](e, a);
    });
    var e,
      s = a.mediaTypes,
      t = a.masterPlaylistLoader,
      i = a.tech,
      n = a.vhs,
      r = a.segmentLoaders,
      o = r.AUDIO,
      u = r.main;
    function l() {
      s.AUDIO.onTrackChanged(),
        i.trigger({ type: "usage", name: "vhs-audio-change" }),
        i.trigger({ type: "usage", name: "hls-audio-change" });
    }
    for (e in (["AUDIO", "SUBTITLES"].forEach(function (e) {
      var u, l, o, c, t, i, d, h, n, r;
      (s[e].activeGroup =
        ((u = e),
        (l = a),
        function (t) {
          var e = l.masterPlaylistLoader,
            i = l.mediaTypes[u].groups,
            n = e.media();
          if (!n) return null;
          var r = null;
          n.attributes[u] && (r = i[n.attributes[u]]);
          var a = Object.keys(i);
          if (!r)
            if ("AUDIO" === u && 1 < a.length && nu(l.master))
              for (var s = 0; s < a.length; s++) {
                var o = i[a[s]];
                if (Wl(o, n)) {
                  r = o;
                  break;
                }
              }
            else i.main ? (r = i.main) : 1 === a.length && (r = i[a[0]]);
          return "undefined" == typeof t
            ? r
            : (null !== t &&
                r &&
                r.filter(function (e) {
                  return e.id === t.id;
                })[0]) ||
                null;
        })),
        (s[e].activeTrack = gc[e](e, a)),
        (s[e].onGroupChanged =
          ((o = e),
          (c = a),
          function () {
            var e = c.segmentLoaders,
              t = e[o],
              i = e.main,
              n = c.mediaTypes[o],
              r = n.activeTrack(),
              a = n.getActiveGroup(),
              s = n.activePlaylistLoader,
              e = n.lastGroup_;
            (a && e && a.id === e.id) ||
              ((n.lastGroup_ = a),
              (n.lastTrack_ = r),
              ql(t, n),
              a &&
                !a.isMasterPlaylist &&
                (a.playlistLoader
                  ? (t.resyncLoader(), Vl(a.playlistLoader, n))
                  : s && i.resetEverything()));
          })),
        (s[e].onGroupChanging =
          ((t = e),
          (i = a),
          function () {
            var e = i.segmentLoaders[t];
            (i.mediaTypes[t].lastGroup_ = null), e.abort(), e.pause();
          })),
        (s[e].onTrackChanged =
          ((d = e),
          (h = a),
          function () {
            var e = h.masterPlaylistLoader,
              t = h.segmentLoaders,
              i = t[d],
              n = t.main,
              r = h.mediaTypes[d],
              a = r.activeTrack(),
              s = r.getActiveGroup(),
              o = r.activePlaylistLoader,
              u = r.lastTrack_;
            if (
              (!u || !a || u.id !== a.id) &&
              ((r.lastGroup_ = s), (r.lastTrack_ = a), ql(i, r), s)
            ) {
              if (s.isMasterPlaylist) {
                if (!a || !u || a.id === u.id) return;
                var l = h.vhs.masterPlaylistController_,
                  t = l.selectPlaylist();
                return l.media() === t
                  ? void 0
                  : (r.logger_(
                      "track change. Switching master audio from " +
                        u.id +
                        " to " +
                        a.id
                    ),
                    e.pause(),
                    n.resetEverything(),
                    void l.fastQualityChange_(t));
              }
              if ("AUDIO" === d) {
                if (!s.playlistLoader)
                  return n.setAudio(!0), void n.resetEverything();
                i.setAudio(!0), n.setAudio(!1);
              }
              o !== s.playlistLoader &&
                (i.track && i.track(a), i.resetEverything()),
                Vl(s.playlistLoader, r);
            }
          })),
        (s[e].getActiveGroup =
          ((n = e),
          (r = a.mediaTypes),
          function () {
            var e = r[n].activeTrack();
            return e ? r[n].activeGroup(e) : null;
          }));
    }),
    (r = s.AUDIO.activeGroup()) &&
      ((r = (
        r.filter(function (e) {
          return e.default;
        })[0] || r[0]
      ).id),
      (s.AUDIO.tracks[r].enabled = !0),
      s.AUDIO.onGroupChanged(),
      s.AUDIO.onTrackChanged(),
      s.AUDIO.getActiveGroup().playlistLoader
        ? (u.setAudio(!1), o.setAudio(!0))
        : u.setAudio(!0)),
    t.on("mediachange", function () {
      ["AUDIO", "SUBTITLES"].forEach(function (e) {
        return s[e].onGroupChanged();
      });
    }),
    t.on("mediachanging", function () {
      ["AUDIO", "SUBTITLES"].forEach(function (e) {
        return s[e].onGroupChanging();
      });
    }),
    i.audioTracks().addEventListener("change", l),
    i.remoteTextTracks().addEventListener("change", s.SUBTITLES.onTrackChanged),
    n.on("dispose", function () {
      i.audioTracks().removeEventListener("change", l),
        i
          .remoteTextTracks()
          .removeEventListener("change", s.SUBTITLES.onTrackChanged);
    }),
    i.clearTracks("audio"),
    s.AUDIO.tracks))
      i.audioTracks().addTrack(s.AUDIO.tracks[e]);
  }
  function zl(e, t, i) {
    var n,
      r,
      a,
      s,
      o = e.masterPlaylistController_,
      u =
        o[
          (e.options_.smoothQualityChange ? "smooth" : "fast") +
            "QualityChange_"
        ].bind(o);
    t.attributes &&
      ((n = t.attributes.RESOLUTION),
      (this.width = n && n.width),
      (this.height = n && n.height),
      (this.bandwidth = t.attributes.BANDWIDTH)),
      (this.codecs = Yu(o.master(), t)),
      (this.playlist = t),
      (this.id = i),
      (this.enabled =
        ((r = e.playlists),
        (a = t.id),
        (s = u),
        function (e) {
          var t = r.master.playlists[a],
            i = $o(t),
            n = Jo(t);
          return "undefined" == typeof e
            ? n
            : (e ? delete t.disabled : (t.disabled = !0),
              e === n ||
                i ||
                (s(),
                e
                  ? r.trigger("renditionenabled")
                  : r.trigger("renditiondisabled")),
              e);
        }));
  }
  function Xl(t, e) {
    var i = 0,
      n = 0,
      r = tr.mergeOptions(Tc, e);
    function a() {
      n && t.currentTime(n);
    }
    function s(e) {
      null != e &&
        ((n = (t.duration() !== 1 / 0 && t.currentTime()) || 0),
        t.one("loadedmetadata", a),
        t.src(e),
        t.trigger({ type: "usage", name: "vhs-error-reload" }),
        t.trigger({ type: "usage", name: "hls-error-reload" }),
        t.play());
    }
    function o() {
      return Date.now() - i < 1e3 * r.errorInterval
        ? (t.trigger({ type: "usage", name: "vhs-error-reload-canceled" }),
          void t.trigger({ type: "usage", name: "hls-error-reload-canceled" }))
        : r.getSource && "function" == typeof r.getSource
        ? ((i = Date.now()), r.getSource.call(t, s))
        : void tr.log.error(
            "ERROR: reloadSourceOnError - The option getSource must be a function!"
          );
    }
    function u() {
      t.off("loadedmetadata", a), t.off("error", o), t.off("dispose", u);
    }
    t.ready(function () {
      t.trigger({ type: "usage", name: "vhs-error-reload-initialized" }),
        t.trigger({ type: "usage", name: "hls-error-reload-initialized" });
    }),
      t.on("error", o),
      t.on("dispose", u),
      (t.reloadSourceOnError = function (e) {
        u(), Xl(t, e);
      });
  }
  var Kl,
    Yl = ["video", "audio"],
    Ql = function (n, r, a) {
      return function (t, i) {
        var e = i[t + "Buffer"];
        if (Bl(i.mediaSource, e)) {
          i.logger_(
            "Appending segment " +
              r.mediaIndex +
              "'s " +
              n.length +
              " bytes to " +
              t +
              "Buffer"
          );
          try {
            e.appendBuffer(n);
          } catch (e) {
            i.logger_(
              "Error with code " +
                e.code +
                " " +
                (22 === e.code ? "(QUOTA_EXCEEDED_ERR) " : "") +
                "when appending segment " +
                r.mediaIndex +
                " to " +
                t +
                "Buffer"
            ),
              (i.queuePending[t] = null),
              a(e);
          }
        }
      };
    },
    $l = function (n, r) {
      return function (t, i) {
        var e = i[t + "Buffer"];
        if (Bl(i.mediaSource, e)) {
          i.logger_("Removing " + n + " to " + r + " from " + t + "Buffer");
          try {
            e.remove(n, r);
          } catch (e) {
            i.logger_(
              "Remove " + n + " to " + r + " from " + t + "Buffer failed"
            );
          }
        }
      };
    },
    Jl = function (n) {
      return function (e, t) {
        var i = t[e + "Buffer"];
        Bl(t.mediaSource, i) &&
          (t.logger_("Setting " + e + "timestampOffset to " + n),
          (i.timestampOffset = n));
      };
    },
    Zl = function (i) {
      return function (e, t) {
        i();
      };
    },
    ec = function (t) {
      return function (e) {
        if ("open" === e.mediaSource.readyState) {
          e.logger_("Calling mediaSource endOfStream(" + (t || "") + ")");
          try {
            e.mediaSource.endOfStream(t);
          } catch (e) {
            tr.log.warn("Failed to call media source endOfStream", e);
          }
        }
      };
    },
    tc = function (t) {
      return function (e) {
        e.logger_("Setting mediaSource duration to " + t);
        try {
          e.mediaSource.duration = t;
        } catch (e) {
          tr.log.warn("Failed to set media source duration", e);
        }
      };
    },
    ic = function () {
      return function (t, e) {
        if ("open" === e.mediaSource.readyState) {
          var i = e[t + "Buffer"];
          if (Bl(e.mediaSource, i)) {
            e.logger_("calling abort on " + t + "Buffer");
            try {
              i.abort();
            } catch (e) {
              tr.log.warn("Failed to abort on " + t + "Buffer", e);
            }
          }
        }
      };
    },
    nc = function (n, r) {
      return function (e) {
        var t = Rl(n),
          i = mr(r);
        e.logger_("Adding " + n + "Buffer with codec " + r + " to mediaSource");
        i = e.mediaSource.addSourceBuffer(i);
        i.addEventListener("updateend", e["on" + t + "UpdateEnd_"]),
          i.addEventListener("error", e["on" + t + "Error_"]),
          (e.codecs[n] = r),
          (e[n + "Buffer"] = i);
      };
    },
    rc = function (i) {
      return function (e) {
        var t = e[i + "Buffer"];
        if ((Ul(i, e), Bl(e.mediaSource, t))) {
          e.logger_(
            "Removing " +
              i +
              "Buffer with codec " +
              e.codecs[i] +
              " from mediaSource"
          );
          try {
            e.mediaSource.removeSourceBuffer(t);
          } catch (e) {
            tr.log.warn("Failed to removeSourceBuffer " + i + "Buffer", e);
          }
        }
      };
    },
    ac = function (r) {
      return function (e, t) {
        var i = t[e + "Buffer"],
          n = mr(r);
        Bl(t.mediaSource, i) &&
          t.codecs[e] !== r &&
          (t.logger_(
            "changing " + e + "Buffer codec from " + t.codecs[e] + " to " + r
          ),
          i.changeType(n),
          (t.codecs[e] = r));
      };
    },
    sc = (function (i) {
      function e(e) {
        var t = i.call(this) || this;
        return (
          (t.mediaSource = e),
          (t.sourceopenListener_ = function () {
            return Nl("mediaSource", ft(t));
          }),
          t.mediaSource.addEventListener("sourceopen", t.sourceopenListener_),
          (t.logger_ = Oo("SourceUpdater")),
          (t.audioTimestampOffset_ = 0),
          (t.videoTimestampOffset_ = 0),
          (t.queue = []),
          (t.queuePending = { audio: null, video: null }),
          (t.delayedAudioAppendQueue_ = []),
          (t.videoAppendQueued_ = !1),
          (t.codecs = {}),
          (t.onVideoUpdateEnd_ = jl("video", ft(t))),
          (t.onAudioUpdateEnd_ = jl("audio", ft(t))),
          (t.onVideoError_ = function (e) {
            t.videoError_ = e;
          }),
          (t.onAudioError_ = function (e) {
            t.audioError_ = e;
          }),
          (t.createdSourceBuffers_ = !1),
          (t.initializedEme_ = !1),
          (t.triggeredReady_ = !1),
          t
        );
      }
      mt(e, i);
      var t = e.prototype;
      return (
        (t.initializedEme = function () {
          (this.initializedEme_ = !0), this.triggerReady();
        }),
        (t.hasCreatedSourceBuffers = function () {
          return this.createdSourceBuffers_;
        }),
        (t.hasInitializedAnyEme = function () {
          return this.initializedEme_;
        }),
        (t.ready = function () {
          return this.hasCreatedSourceBuffers() && this.hasInitializedAnyEme();
        }),
        (t.createSourceBuffers = function (e) {
          this.hasCreatedSourceBuffers() ||
            (this.addOrChangeSourceBuffers(e),
            (this.createdSourceBuffers_ = !0),
            this.trigger("createdsourcebuffers"),
            this.triggerReady());
        }),
        (t.triggerReady = function () {
          this.ready() &&
            !this.triggeredReady_ &&
            ((this.triggeredReady_ = !0), this.trigger("ready"));
        }),
        (t.addSourceBuffer = function (e, t) {
          Fl({
            type: "mediaSource",
            sourceUpdater: this,
            action: nc(e, t),
            name: "addSourceBuffer",
          });
        }),
        (t.abort = function (e) {
          Fl({ type: e, sourceUpdater: this, action: ic(e), name: "abort" });
        }),
        (t.removeSourceBuffer = function (e) {
          this.canRemoveSourceBuffer()
            ? Fl({
                type: "mediaSource",
                sourceUpdater: this,
                action: rc(e),
                name: "removeSourceBuffer",
              })
            : tr.log.error("removeSourceBuffer is not supported!");
        }),
        (t.canRemoveSourceBuffer = function () {
          return (
            !tr.browser.IE_VERSION &&
            !tr.browser.IS_FIREFOX &&
            window.MediaSource &&
            window.MediaSource.prototype &&
            "function" == typeof window.MediaSource.prototype.removeSourceBuffer
          );
        }),
        (e.canChangeType = function () {
          return (
            window.SourceBuffer &&
            window.SourceBuffer.prototype &&
            "function" == typeof window.SourceBuffer.prototype.changeType
          );
        }),
        (t.canChangeType = function () {
          return this.constructor.canChangeType();
        }),
        (t.changeType = function (e, t) {
          this.canChangeType()
            ? Fl({
                type: e,
                sourceUpdater: this,
                action: ac(t),
                name: "changeType",
              })
            : tr.log.error("changeType is not supported!");
        }),
        (t.addOrChangeSourceBuffers = function (i) {
          var n = this;
          if (!i || "object" != typeof i || 0 === Object.keys(i).length)
            throw new Error(
              "Cannot addOrChangeSourceBuffers to undefined codecs"
            );
          Object.keys(i).forEach(function (e) {
            var t = i[e];
            if (!n.hasCreatedSourceBuffers()) return n.addSourceBuffer(e, t);
            n.canChangeType() && n.changeType(e, t);
          });
        }),
        (t.appendBuffer = function (e, t) {
          var i = this,
            n = e.segmentInfo,
            r = e.type,
            a = e.bytes;
          if (
            ((this.processedAppend_ = !0),
            "audio" === r && this.videoBuffer && !this.videoAppendQueued_)
          )
            return (
              this.delayedAudioAppendQueue_.push([e, t]),
              void this.logger_(
                "delayed audio append of " + a.length + " until video append"
              )
            );
          Fl({
            type: r,
            sourceUpdater: this,
            action: Ql(a, n || { mediaIndex: -1 }, t),
            doneFn: t,
            name: "appendBuffer",
          }),
            "video" === r &&
              ((this.videoAppendQueued_ = !0),
              this.delayedAudioAppendQueue_.length &&
                ((r = this.delayedAudioAppendQueue_.slice()),
                this.logger_(
                  "queuing delayed audio " + r.length + " appendBuffers"
                ),
                (this.delayedAudioAppendQueue_.length = 0),
                r.forEach(function (e) {
                  i.appendBuffer.apply(i, e);
                })));
        }),
        (t.audioBuffered = function () {
          return (
            (Bl(this.mediaSource, this.audioBuffer) &&
              this.audioBuffer.buffered) ||
            tr.createTimeRange()
          );
        }),
        (t.videoBuffered = function () {
          return (
            (Bl(this.mediaSource, this.videoBuffer) &&
              this.videoBuffer.buffered) ||
            tr.createTimeRange()
          );
        }),
        (t.buffered = function () {
          var e = Bl(this.mediaSource, this.videoBuffer)
              ? this.videoBuffer
              : null,
            t = Bl(this.mediaSource, this.audioBuffer)
              ? this.audioBuffer
              : null;
          return t && !e
            ? this.audioBuffered()
            : e && !t
            ? this.videoBuffered()
            : (function (e, t) {
                var i = null,
                  n = null,
                  r = 0,
                  a = [],
                  s = [];
                if (!(e && e.length && t && t.length))
                  return tr.createTimeRange();
                for (var o = e.length; o--; )
                  a.push({ time: e.start(o), type: "start" }),
                    a.push({ time: e.end(o), type: "end" });
                for (o = t.length; o--; )
                  a.push({ time: t.start(o), type: "start" }),
                    a.push({ time: t.end(o), type: "end" });
                for (
                  a.sort(function (e, t) {
                    return e.time - t.time;
                  }),
                    o = 0;
                  o < a.length;
                  o++
                )
                  "start" === a[o].type
                    ? 2 === ++r && (i = a[o].time)
                    : "end" === a[o].type && 1 === --r && (n = a[o].time),
                    null !== i &&
                      null !== n &&
                      (s.push([i, n]), (n = i = null));
                return tr.createTimeRanges(s);
              })(this.audioBuffered(), this.videoBuffered());
        }),
        (t.setDuration = function (e, t) {
          void 0 === t && (t = Ol),
            Fl({
              type: "mediaSource",
              sourceUpdater: this,
              action: tc(e),
              name: "duration",
              doneFn: t,
            });
        }),
        (t.endOfStream = function (e, t) {
          void 0 === t && (t = Ol),
            Fl({
              type: "mediaSource",
              sourceUpdater: this,
              action: ec(
                (e =
                  "string" != typeof (e = void 0 === e ? null : e) ? void 0 : e)
              ),
              name: "endOfStream",
              doneFn: t,
            });
        }),
        (t.removeAudio = function (e, t, i) {
          void 0 === i && (i = Ol),
            this.audioBuffered().length && 0 !== this.audioBuffered().end(0)
              ? Fl({
                  type: "audio",
                  sourceUpdater: this,
                  action: $l(e, t),
                  doneFn: i,
                  name: "remove",
                })
              : i();
        }),
        (t.removeVideo = function (e, t, i) {
          void 0 === i && (i = Ol),
            this.videoBuffered().length && 0 !== this.videoBuffered().end(0)
              ? Fl({
                  type: "video",
                  sourceUpdater: this,
                  action: $l(e, t),
                  doneFn: i,
                  name: "remove",
                })
              : i();
        }),
        (t.updating = function () {
          return !(!Ml("audio", this) && !Ml("video", this));
        }),
        (t.audioTimestampOffset = function (e) {
          return (
            "undefined" != typeof e &&
              this.audioBuffer &&
              this.audioTimestampOffset_ !== e &&
              (Fl({
                type: "audio",
                sourceUpdater: this,
                action: Jl(e),
                name: "timestampOffset",
              }),
              (this.audioTimestampOffset_ = e)),
            this.audioTimestampOffset_
          );
        }),
        (t.videoTimestampOffset = function (e) {
          return (
            "undefined" != typeof e &&
              this.videoBuffer &&
              this.videoTimestampOffset !== e &&
              (Fl({
                type: "video",
                sourceUpdater: this,
                action: Jl(e),
                name: "timestampOffset",
              }),
              (this.videoTimestampOffset_ = e)),
            this.videoTimestampOffset_
          );
        }),
        (t.audioQueueCallback = function (e) {
          this.audioBuffer &&
            Fl({
              type: "audio",
              sourceUpdater: this,
              action: Zl(e),
              name: "callback",
            });
        }),
        (t.videoQueueCallback = function (e) {
          this.videoBuffer &&
            Fl({
              type: "video",
              sourceUpdater: this,
              action: Zl(e),
              name: "callback",
            });
        }),
        (t.dispose = function () {
          var t = this;
          this.trigger("dispose"),
            Yl.forEach(function (e) {
              t.abort(e),
                t.canRemoveSourceBuffer()
                  ? t.removeSourceBuffer(e)
                  : t[e + "QueueCallback"](function () {
                      return Ul(e, t);
                    });
            }),
            (this.videoAppendQueued_ = !1),
            (this.delayedAudioAppendQueue_.length = 0),
            this.sourceopenListener_ &&
              this.mediaSource.removeEventListener(
                "sourceopen",
                this.sourceopenListener_
              ),
            this.off();
        }),
        e
      );
    })(tr.EventTarget),
    oc = new Uint8Array(
      "\n\n".split("").map(function (e) {
        return e.charCodeAt(0);
      })
    ),
    uc = (function (i) {
      function e(e, t) {
        return (
          ((t =
            i.call(this, e, (t = void 0 === t ? {} : t)) || this).mediaSource_ =
            null),
          (t.subtitlesTrack_ = null),
          (t.loaderType_ = "subtitle"),
          (t.featuresNativeTextTracks_ = e.featuresNativeTextTracks),
          (t.shouldSaveSegmentTimingInfo_ = !1),
          t
        );
      }
      mt(e, i);
      var t = e.prototype;
      return (
        (t.createTransmuxer_ = function () {
          return null;
        }),
        (t.buffered_ = function () {
          if (
            !this.subtitlesTrack_ ||
            !this.subtitlesTrack_.cues ||
            !this.subtitlesTrack_.cues.length
          )
            return tr.createTimeRanges();
          var e = this.subtitlesTrack_.cues,
            t = e[0].startTime,
            e = e[e.length - 1].startTime;
          return tr.createTimeRanges([[t, e]]);
        }),
        (t.initSegmentForMap = function (e, t) {
          if ((void 0 === t && (t = !1), !e)) return null;
          var i = bu(e),
            n = this.initSegments_[i];
          return (
            t &&
              !n &&
              e.bytes &&
              ((t = oc.byteLength + e.bytes.byteLength),
              (t = new Uint8Array(t)).set(e.bytes),
              t.set(oc, e.bytes.byteLength),
              (this.initSegments_[i] = n =
                {
                  resolvedUri: e.resolvedUri,
                  byterange: e.byterange,
                  bytes: t,
                })),
            n || e
          );
        }),
        (t.couldBeginLoading_ = function () {
          return this.playlist_ && this.subtitlesTrack_ && !this.paused();
        }),
        (t.init_ = function () {
          return (
            (this.state = "READY"),
            this.resetEverything(),
            this.monitorBuffer_()
          );
        }),
        (t.track = function (e) {
          return (
            "undefined" == typeof e ||
              ((this.subtitlesTrack_ = e),
              "INIT" === this.state &&
                this.couldBeginLoading_() &&
                this.init_()),
            this.subtitlesTrack_
          );
        }),
        (t.remove = function (e, t) {
          il(e, t, this.subtitlesTrack_);
        }),
        (t.fillBuffer_ = function () {
          var e = this,
            t = this.chooseNextRequest_();
          if (t) {
            if (
              null ===
              this.syncController_.timestampOffsetForTimeline(t.timeline)
            )
              return (
                this.syncController_.one("timestampoffset", function () {
                  (e.state = "READY"), e.paused() || e.monitorBuffer_();
                }),
                void (this.state = "WAITING_ON_TIMELINE")
              );
            this.loadSegment_(t);
          }
        }),
        (t.timestampOffsetForSegment_ = function () {
          return null;
        }),
        (t.chooseNextRequest_ = function () {
          return this.skipEmptySegments_(
            i.prototype.chooseNextRequest_.call(this)
          );
        }),
        (t.skipEmptySegments_ = function (e) {
          for (; e && e.segment.empty; ) {
            if (e.mediaIndex + 1 >= e.playlist.segments.length) {
              e = null;
              break;
            }
            e = this.generateSegmentInfo_({
              playlist: e.playlist,
              mediaIndex: e.mediaIndex + 1,
              startOfSegment: e.startOfSegment + e.duration,
              isSyncRequest: e.isSyncRequest,
            });
          }
          return e;
        }),
        (t.stopForError = function (e) {
          this.error(e),
            (this.state = "READY"),
            this.pause(),
            this.trigger("error");
        }),
        (t.segmentRequestFinished_ = function (e, t, i) {
          var n = this;
          if (this.subtitlesTrack_) {
            if ((this.saveTransferStats_(t.stats), !this.pendingSegment_))
              return (
                (this.state = "READY"), void (this.mediaRequestsAborted += 1)
              );
            if (e)
              return (
                e.code === xl && this.handleTimeout_(),
                e.code === Al
                  ? (this.mediaRequestsAborted += 1)
                  : (this.mediaRequestsErrored += 1),
                void this.stopForError(e)
              );
            var r = this.pendingSegment_;
            this.saveBandwidthRelatedStats_(r.duration, t.stats),
              (this.state = "APPENDING"),
              this.trigger("appending");
            var a = r.segment;
            if (
              (a.map && (a.map.bytes = t.map.bytes),
              (r.bytes = t.bytes),
              "function" != typeof window.WebVTT &&
                this.subtitlesTrack_ &&
                this.subtitlesTrack_.tech_)
            ) {
              var s = function () {
                  n.subtitlesTrack_.tech_.off("vttjsloaded", o),
                    n.stopForError({ message: "Error loading vtt.js" });
                },
                o = function () {
                  n.subtitlesTrack_.tech_.off("vttjserror", s),
                    n.segmentRequestFinished_(e, t, i);
                };
              return (
                (this.state = "WAITING_ON_VTTJS"),
                this.subtitlesTrack_.tech_.one("vttjsloaded", o),
                void this.subtitlesTrack_.tech_.one("vttjserror", s)
              );
            }
            a.requested = !0;
            try {
              this.parseVTTCues_(r);
            } catch (e) {
              return void this.stopForError({ message: e.message });
            }
            if (
              (this.updateTimeMapping_(
                r,
                this.syncController_.timelines[r.timeline],
                this.playlist_
              ),
              r.cues.length
                ? (r.timingInfo = {
                    start: r.cues[0].startTime,
                    end: r.cues[r.cues.length - 1].endTime,
                  })
                : (r.timingInfo = {
                    start: r.startOfSegment,
                    end: r.startOfSegment + r.duration,
                  }),
              r.isSyncRequest)
            )
              return (
                this.trigger("syncinfoupdate"),
                (this.pendingSegment_ = null),
                void (this.state = "READY")
              );
            (r.byteLength = r.bytes.byteLength),
              (this.mediaSecondsLoaded += a.duration),
              r.cues.forEach(function (e) {
                n.subtitlesTrack_.addCue(
                  n.featuresNativeTextTracks_
                    ? new window.VTTCue(e.startTime, e.endTime, e.text)
                    : e
                );
              }),
              (function (t) {
                var e = t.cues;
                if (e)
                  for (var i = 0; i < e.length; i++) {
                    for (var n = [], r = 0, a = 0; a < e.length; a++)
                      e[i].startTime === e[a].startTime &&
                        e[i].endTime === e[a].endTime &&
                        e[i].text === e[a].text &&
                        1 < ++r &&
                        n.push(e[a]);
                    n.length &&
                      n.forEach(function (e) {
                        return t.removeCue(e);
                      });
                  }
              })(this.subtitlesTrack_),
              this.handleAppendsDone_();
          } else this.state = "READY";
        }),
        (t.handleData_ = function () {}),
        (t.updateTimingInfoEnd_ = function () {}),
        (t.parseVTTCues_ = function (t) {
          var e = !1;
          "function" == typeof window.TextDecoder
            ? (i = new window.TextDecoder("utf8"))
            : ((i = window.WebVTT.StringDecoder()), (e = !0));
          var i = new window.WebVTT.Parser(window, window.vttjs, i);
          (t.cues = []),
            (t.timestampmap = { MPEGTS: 0, LOCAL: 0 }),
            (i.oncue = t.cues.push.bind(t.cues)),
            (i.ontimestampmap = function (e) {
              t.timestampmap = e;
            }),
            (i.onparsingerror = function (e) {
              tr.log.warn("Error encountered when parsing cues: " + e.message);
            }),
            t.segment.map &&
              ((n = t.segment.map.bytes), e && (n = Hl(n)), i.parse(n));
          var n = t.bytes;
          e && (n = Hl(n)), i.parse(n), i.flush();
        }),
        (t.updateTimeMapping_ = function (e, t, i) {
          var n,
            r,
            a = e.segment;
          t &&
            (e.cues.length
              ? ((r = e.timestampmap),
                (n = r.MPEGTS / cl - r.LOCAL + t.mapping),
                e.cues.forEach(function (e) {
                  (e.startTime += n), (e.endTime += n);
                }),
                i.syncInfo ||
                  ((r = e.cues[0].startTime),
                  (t = e.cues[e.cues.length - 1].startTime),
                  (i.syncInfo = {
                    mediaSequence: i.mediaSequence + e.mediaIndex,
                    time: Math.min(r, t - a.duration),
                  })))
              : (a.empty = !0));
        }),
        e
      );
    })(Dl),
    lc = [
      {
        name: "VOD",
        run: function (e, t, i, n, r) {
          if (i === 1 / 0) return null;
          return { time: 0, segmentIndex: 0, partIndex: null };
        },
      },
      {
        name: "ProgramDateTime",
        run: function (e, t, i, n, r) {
          if (!Object.keys(e.timelineToDatetimeMappings).length) return null;
          var a = null,
            s = null,
            o = qo(t);
          r = r || 0;
          for (var u = 0; u < o.length; u++) {
            var l = o[t.endList || 0 === r ? u : o.length - (u + 1)],
              c = l.segment,
              d = e.timelineToDatetimeMappings[c.timeline];
            if (d && c.dateTimeObject) {
              var h = c.dateTimeObject.getTime() / 1e3 + d;
              if (c.parts && "number" == typeof l.partIndex)
                for (var p = 0; p < l.partIndex; p++) h += c.parts[p].duration;
              d = Math.abs(r - h);
              if (null !== s && (0 === d || s < d)) break;
              (s = d),
                (a = {
                  time: h,
                  segmentIndex: l.segmentIndex,
                  partIndex: l.partIndex,
                });
            }
          }
          return a;
        },
      },
      {
        name: "Segment",
        run: function (e, t, i, n, r) {
          var a = null,
            s = null;
          r = r || 0;
          for (var o = qo(t), u = 0; u < o.length; u++) {
            var l = o[t.endList || 0 === r ? u : o.length - (u + 1)],
              c = l.segment,
              d = (l.part && l.part.start) || (c && c.start);
            if (c.timeline === n && "undefined" != typeof d) {
              c = Math.abs(r - d);
              if (null !== s && s < c) break;
              (!a || null === s || c <= s) &&
                ((s = c),
                (a = {
                  time: d,
                  segmentIndex: l.segmentIndex,
                  partIndex: l.partIndex,
                }));
            }
          }
          return a;
        },
      },
      {
        name: "Discontinuity",
        run: function (e, t, i, n, r) {
          var a = null;
          if (
            ((r = r || 0),
            t.discontinuityStarts && t.discontinuityStarts.length)
          )
            for (var s = null, o = 0; o < t.discontinuityStarts.length; o++) {
              var u = t.discontinuityStarts[o],
                l = t.discontinuitySequence + o + 1,
                c = e.discontinuities[l];
              if (c) {
                l = Math.abs(r - c.time);
                if (null !== s && s < l) break;
                (!a || null === s || l <= s) &&
                  ((s = l),
                  (a = { time: c.time, segmentIndex: u, partIndex: null }));
              }
            }
          return a;
        },
      },
      {
        name: "Playlist",
        run: function (e, t, i, n, r) {
          return t.syncInfo
            ? {
                time: t.syncInfo.time,
                segmentIndex: t.syncInfo.mediaSequence - t.mediaSequence,
                partIndex: null,
              }
            : null;
        },
      },
    ],
    cc = (function (i) {
      function e(e) {
        var t = i.call(this) || this;
        return (
          (t.timelines = []),
          (t.discontinuities = []),
          (t.timelineToDatetimeMappings = {}),
          (t.logger_ = Oo("SyncController")),
          t
        );
      }
      mt(e, i);
      var t = e.prototype;
      return (
        (t.getSyncPoint = function (e, t, i, n) {
          i = this.runStrategies_(e, t, i, n);
          return i.length
            ? this.selectSyncPoint_(i, { key: "time", value: n })
            : null;
        }),
        (t.getExpiredTime = function (e, t) {
          if (!e || !e.segments) return null;
          t = this.runStrategies_(e, t, e.discontinuitySequence, 0);
          if (!t.length) return null;
          t = this.selectSyncPoint_(t, { key: "segmentIndex", value: 0 });
          return (
            0 < t.segmentIndex && (t.time *= -1),
            Math.abs(
              t.time +
                Ko({
                  defaultDuration: e.targetDuration,
                  durationList: e.segments,
                  startIndex: t.segmentIndex,
                  endIndex: 0,
                })
            )
          );
        }),
        (t.runStrategies_ = function (e, t, i, n) {
          for (var r = [], a = 0; a < lc.length; a++) {
            var s = lc[a],
              o = s.run(this, e, t, i, n);
            o &&
              ((o.strategy = s.name),
              r.push({ strategy: s.name, syncPoint: o }));
          }
          return r;
        }),
        (t.selectSyncPoint_ = function (e, t) {
          for (
            var i = e[0].syncPoint,
              n = Math.abs(e[0].syncPoint[t.key] - t.value),
              r = e[0].strategy,
              a = 1;
            a < e.length;
            a++
          ) {
            var s = Math.abs(e[a].syncPoint[t.key] - t.value);
            s < n && ((n = s), (i = e[a].syncPoint), (r = e[a].strategy));
          }
          return (
            this.logger_(
              "syncPoint for [" +
                t.key +
                ": " +
                t.value +
                "] chosen with strategy [" +
                r +
                "]: [time:" +
                i.time +
                ", segmentIndex:" +
                i.segmentIndex +
                ("number" == typeof i.partIndex
                  ? ",partIndex:" + i.partIndex
                  : "") +
                "]"
            ),
            i
          );
        }),
        (t.saveExpiredSegmentInfo = function (e, t) {
          var i = t.mediaSequence - e.mediaSequence;
          if (86400 < i)
            tr.log.warn(
              "Not saving expired segment info. Media sequence gap " +
                i +
                " is too large."
            );
          else
            for (var n = i - 1; 0 <= n; n--) {
              var r = e.segments[n];
              if (r && "undefined" != typeof r.start) {
                (t.syncInfo = {
                  mediaSequence: e.mediaSequence + n,
                  time: r.start,
                }),
                  this.logger_(
                    "playlist refresh sync: [time:" +
                      t.syncInfo.time +
                      ", mediaSequence: " +
                      t.syncInfo.mediaSequence +
                      "]"
                  ),
                  this.trigger("syncinfoupdate");
                break;
              }
            }
        }),
        (t.setDateTimeMappingForStart = function (e) {
          var t;
          (this.timelineToDatetimeMappings = {}),
            e.segments &&
              e.segments.length &&
              e.segments[0].dateTimeObject &&
              ((e = (t = e.segments[0]).dateTimeObject.getTime() / 1e3),
              (this.timelineToDatetimeMappings[t.timeline] = -e));
        }),
        (t.saveSegmentTimingInfo = function (e) {
          var t = e.segmentInfo,
            i = e.shouldSaveTimelineMapping,
            n = this.calculateSegmentTimeMapping_(t, t.timingInfo, i),
            e = t.segment;
          n &&
            (this.saveDiscontinuitySyncInfo_(t),
            t.playlist.syncInfo ||
              (t.playlist.syncInfo = {
                mediaSequence: t.playlist.mediaSequence + t.mediaIndex,
                time: e.start,
              }));
          t = e.dateTimeObject;
          e.discontinuity &&
            i &&
            t &&
            (this.timelineToDatetimeMappings[e.timeline] = -t.getTime() / 1e3);
        }),
        (t.timestampOffsetForTimeline = function (e) {
          return "undefined" == typeof this.timelines[e]
            ? null
            : this.timelines[e].time;
        }),
        (t.mappingForTimeline = function (e) {
          return "undefined" == typeof this.timelines[e]
            ? null
            : this.timelines[e].mapping;
        }),
        (t.calculateSegmentTimeMapping_ = function (e, t, i) {
          var n,
            r,
            a = e.segment,
            s = e.part,
            o = this.timelines[e.timeline];
          if ("number" == typeof e.timestampOffset)
            (o = {
              time: e.startOfSegment,
              mapping: e.startOfSegment - t.start,
            }),
              i &&
                ((this.timelines[e.timeline] = o),
                this.trigger("timestampoffset"),
                this.logger_(
                  "time mapping for timeline " +
                    e.timeline +
                    ": [time: " +
                    o.time +
                    "] [mapping: " +
                    o.mapping +
                    "]"
                )),
              (n = e.startOfSegment),
              (r = t.end + o.mapping);
          else {
            if (!o) return !1;
            (n = t.start + o.mapping), (r = t.end + o.mapping);
          }
          return (
            s && ((s.start = n), (s.end = r)),
            (!a.start || n < a.start) && (a.start = n),
            (a.end = r),
            !0
          );
        }),
        (t.saveDiscontinuitySyncInfo_ = function (e) {
          var t = e.playlist,
            i = e.segment;
          if (i.discontinuity)
            this.discontinuities[i.timeline] = { time: i.start, accuracy: 0 };
          else if (t.discontinuityStarts && t.discontinuityStarts.length)
            for (var n = 0; n < t.discontinuityStarts.length; n++) {
              var r,
                a = t.discontinuityStarts[n],
                s = t.discontinuitySequence + n + 1,
                o = a - e.mediaIndex,
                u = Math.abs(o);
              (!this.discontinuities[s] ||
                this.discontinuities[s].accuracy > u) &&
                ((r = void 0),
                (r =
                  o < 0
                    ? i.start -
                      Ko({
                        defaultDuration: t.targetDuration,
                        durationList: t.segments,
                        startIndex: e.mediaIndex,
                        endIndex: a,
                      })
                    : i.end +
                      Ko({
                        defaultDuration: t.targetDuration,
                        durationList: t.segments,
                        startIndex: e.mediaIndex + 1,
                        endIndex: a,
                      })),
                (this.discontinuities[s] = { time: r, accuracy: u }));
            }
        }),
        (t.dispose = function () {
          this.trigger("dispose"), this.off();
        }),
        e
      );
    })(tr.EventTarget),
    dc = (function (t) {
      function e() {
        var e = t.call(this) || this;
        return (
          (e.pendingTimelineChanges_ = {}), (e.lastTimelineChanges_ = {}), e
        );
      }
      mt(e, t);
      var i = e.prototype;
      return (
        (i.clearPendingTimelineChange = function (e) {
          (this.pendingTimelineChanges_[e] = null),
            this.trigger("pendingtimelinechange");
        }),
        (i.pendingTimelineChange = function (e) {
          var t = e.type,
            i = e.from,
            e = e.to;
          return (
            "number" == typeof i &&
              "number" == typeof e &&
              ((this.pendingTimelineChanges_[t] = { type: t, from: i, to: e }),
              this.trigger("pendingtimelinechange")),
            this.pendingTimelineChanges_[t]
          );
        }),
        (i.lastTimelineChange = function (e) {
          var t = e.type,
            i = e.from,
            e = e.to;
          return (
            "number" == typeof i &&
              "number" == typeof e &&
              ((this.lastTimelineChanges_[t] = { type: t, from: i, to: e }),
              delete this.pendingTimelineChanges_[t],
              this.trigger("timelinechange")),
            this.lastTimelineChanges_[t]
          );
        }),
        (i.dispose = function () {
          this.trigger("dispose"),
            (this.pendingTimelineChanges_ = {}),
            (this.lastTimelineChanges_ = {}),
            this.off();
        }),
        e
      );
    })(tr.EventTarget),
    hc = x(
      U(
        W(function () {
          function e(e, t, i) {
            return (
              e(
                (i = {
                  path: t,
                  exports: {},
                  require: function (e, t) {
                    return (function () {
                      throw new Error(
                        "Dynamic requires are not currently supported by @rollup/plugin-commonjs"
                      );
                    })(null == t && i.path);
                  },
                }),
                i.exports
              ),
              i.exports
            );
          }
          var t = e(function (e) {
              function n(e, t) {
                for (var i = 0; i < t.length; i++) {
                  var n = t[i];
                  (n.enumerable = n.enumerable || !1),
                    (n.configurable = !0),
                    "value" in n && (n.writable = !0),
                    Object.defineProperty(e, n.key, n);
                }
              }
              (e.exports = function (e, t, i) {
                return t && n(e.prototype, t), i && n(e, i), e;
              }),
                (e.exports.default = e.exports),
                (e.exports.__esModule = !0);
            }),
            i = e(function (i) {
              function n(e, t) {
                return (
                  (i.exports = n =
                    Object.setPrototypeOf ||
                    function (e, t) {
                      return (e.__proto__ = t), e;
                    }),
                  (i.exports.default = i.exports),
                  (i.exports.__esModule = !0),
                  n(e, t)
                );
              }
              (i.exports = n),
                (i.exports.default = i.exports),
                (i.exports.__esModule = !0);
            }),
            n = e(function (e) {
              (e.exports = function (e, t) {
                (e.prototype = Object.create(t.prototype)),
                  (e.prototype.constructor = e),
                  i(e, t);
              }),
                (e.exports.default = e.exports),
                (e.exports.__esModule = !0);
            }),
            r = (function () {
              function e() {
                this.listeners = {};
              }
              var t = e.prototype;
              return (
                (t.on = function (e, t) {
                  this.listeners[e] || (this.listeners[e] = []),
                    this.listeners[e].push(t);
                }),
                (t.off = function (e, t) {
                  if (!this.listeners[e]) return !1;
                  t = this.listeners[e].indexOf(t);
                  return (
                    (this.listeners[e] = this.listeners[e].slice(0)),
                    this.listeners[e].splice(t, 1),
                    -1 < t
                  );
                }),
                (t.trigger = function (e) {
                  var t = this.listeners[e];
                  if (t)
                    if (2 === arguments.length)
                      for (var i = t.length, n = 0; n < i; ++n)
                        t[n].call(this, arguments[1]);
                    else
                      for (
                        var r = Array.prototype.slice.call(arguments, 1),
                          a = t.length,
                          s = 0;
                        s < a;
                        ++s
                      )
                        t[s].apply(this, r);
                }),
                (t.dispose = function () {
                  this.listeners = {};
                }),
                (t.pipe = function (t) {
                  this.on("data", function (e) {
                    t.push(e);
                  });
                }),
                e
              );
            })();
          /*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */
          var c = null,
            m = (function () {
              function e(e) {
                var t, i, n;
                (c =
                  c ||
                  (function () {
                    for (
                      var e,
                        t,
                        i,
                        n,
                        r,
                        a,
                        s,
                        o = [
                          [[], [], [], [], []],
                          [[], [], [], [], []],
                        ],
                        u = o[0],
                        l = o[1],
                        c = u[4],
                        d = l[4],
                        h = [],
                        p = [],
                        f = 0;
                      f < 256;
                      f++
                    )
                      p[(h[f] = (f << 1) ^ (283 * (f >> 7))) ^ f] = f;
                    for (e = t = 0; !c[e]; e ^= i || 1, t = p[t] || 1)
                      for (
                        s =
                          (16843009 *
                            h[
                              (n =
                                h[
                                  (i =
                                    h[
                                      (d[
                                        (c[e] = r =
                                          ((r =
                                            t ^
                                            (t << 1) ^
                                            (t << 2) ^
                                            (t << 3) ^
                                            (t << 4)) >>
                                            8) ^
                                          (255 & r) ^
                                          99)
                                      ] = e)
                                    ])
                                ])
                            ]) ^
                          (65537 * n) ^
                          (257 * i) ^
                          (16843008 * e),
                          a = (257 * h[r]) ^ (16843008 * r),
                          f = 0;
                        f < 4;
                        f++
                      )
                        (u[f][e] = a = (a << 24) ^ (a >>> 8)),
                          (l[f][r] = s = (s << 24) ^ (s >>> 8));
                    for (f = 0; f < 5; f++)
                      (u[f] = u[f].slice(0)), (l[f] = l[f].slice(0));
                    return o;
                  })()),
                  (this._tables = [
                    [
                      c[0][0].slice(),
                      c[0][1].slice(),
                      c[0][2].slice(),
                      c[0][3].slice(),
                      c[0][4].slice(),
                    ],
                    [
                      c[1][0].slice(),
                      c[1][1].slice(),
                      c[1][2].slice(),
                      c[1][3].slice(),
                      c[1][4].slice(),
                    ],
                  ]);
                var r = this._tables[0][4],
                  a = this._tables[1],
                  s = e.length,
                  o = 1;
                if (4 !== s && 6 !== s && 8 !== s)
                  throw new Error("Invalid aes key size");
                var u = e.slice(0),
                  l = [];
                for (this._key = [u, l], t = s; t < 4 * s + 28; t++)
                  (n = u[t - 1]),
                    (t % s == 0 || (8 === s && t % s == 4)) &&
                      ((n =
                        (r[n >>> 24] << 24) ^
                        (r[(n >> 16) & 255] << 16) ^
                        (r[(n >> 8) & 255] << 8) ^
                        r[255 & n]),
                      t % s == 0 &&
                        ((n = (n << 8) ^ (n >>> 24) ^ (o << 24)),
                        (o = (o << 1) ^ (283 * (o >> 7))))),
                    (u[t] = u[t - s] ^ n);
                for (i = 0; t; i++, t--)
                  (n = u[3 & i ? t : t - 4]),
                    (l[i] =
                      t <= 4 || i < 4
                        ? n
                        : a[0][r[n >>> 24]] ^
                          a[1][r[(n >> 16) & 255]] ^
                          a[2][r[(n >> 8) & 255]] ^
                          a[3][r[255 & n]]);
              }
              return (
                (e.prototype.decrypt = function (e, t, i, n, r, a) {
                  for (
                    var s,
                      o,
                      u,
                      l = this._key[1],
                      c = e ^ l[0],
                      d = n ^ l[1],
                      h = i ^ l[2],
                      p = t ^ l[3],
                      f = l.length / 4 - 2,
                      m = 4,
                      t = this._tables[1],
                      g = t[0],
                      y = t[1],
                      v = t[2],
                      _ = t[3],
                      b = t[4],
                      T = 0;
                    T < f;
                    T++
                  )
                    (s =
                      g[c >>> 24] ^
                      y[(d >> 16) & 255] ^
                      v[(h >> 8) & 255] ^
                      _[255 & p] ^
                      l[m]),
                      (o =
                        g[d >>> 24] ^
                        y[(h >> 16) & 255] ^
                        v[(p >> 8) & 255] ^
                        _[255 & c] ^
                        l[m + 1]),
                      (u =
                        g[h >>> 24] ^
                        y[(p >> 16) & 255] ^
                        v[(c >> 8) & 255] ^
                        _[255 & d] ^
                        l[m + 2]),
                      (p =
                        g[p >>> 24] ^
                        y[(c >> 16) & 255] ^
                        v[(d >> 8) & 255] ^
                        _[255 & h] ^
                        l[m + 3]),
                      (m += 4),
                      (c = s),
                      (d = o),
                      (h = u);
                  for (T = 0; T < 4; T++)
                    (r[(3 & -T) + a] =
                      (b[c >>> 24] << 24) ^
                      (b[(d >> 16) & 255] << 16) ^
                      (b[(h >> 8) & 255] << 8) ^
                      b[255 & p] ^
                      l[m++]),
                      (s = c),
                      (c = d),
                      (d = h),
                      (h = p),
                      (p = s);
                }),
                e
              );
            })(),
            l = (function (t) {
              function e() {
                var e = t.call(this, r) || this;
                return (e.jobs = []), (e.delay = 1), (e.timeout_ = null), e;
              }
              n(e, t);
              var i = e.prototype;
              return (
                (i.processJob_ = function () {
                  this.jobs.shift()(),
                    this.jobs.length
                      ? (this.timeout_ = setTimeout(
                          this.processJob_.bind(this),
                          this.delay
                        ))
                      : (this.timeout_ = null);
                }),
                (i.push = function (e) {
                  this.jobs.push(e),
                    this.timeout_ ||
                      (this.timeout_ = setTimeout(
                        this.processJob_.bind(this),
                        this.delay
                      ));
                }),
                e
              );
            })(r),
            g = function (e) {
              return (
                (e << 24) |
                ((65280 & e) << 8) |
                ((16711680 & e) >> 8) |
                (e >>> 24)
              );
            },
            a = (function () {
              function u(e, t, i, n) {
                var r = u.STEP,
                  a = new Int32Array(e.buffer),
                  s = new Uint8Array(e.byteLength),
                  o = 0;
                for (
                  this.asyncStream_ = new l(),
                    this.asyncStream_.push(
                      this.decryptChunk_(a.subarray(o, o + r), t, i, s)
                    ),
                    o = r;
                  o < a.length;
                  o += r
                )
                  (i = new Uint32Array([
                    g(a[o - 4]),
                    g(a[o - 3]),
                    g(a[o - 2]),
                    g(a[o - 1]),
                  ])),
                    this.asyncStream_.push(
                      this.decryptChunk_(a.subarray(o, o + r), t, i, s)
                    );
                this.asyncStream_.push(function () {
                  /*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
                  var e;
                  n(
                    null,
                    (e = s).subarray(0, e.byteLength - e[e.byteLength - 1])
                  );
                });
              }
              return (
                (u.prototype.decryptChunk_ = function (t, i, n, r) {
                  return function () {
                    var e = (function (e, t, i) {
                      for (
                        var n,
                          r,
                          a,
                          s,
                          o = new Int32Array(
                            e.buffer,
                            e.byteOffset,
                            e.byteLength >> 2
                          ),
                          u = new m(Array.prototype.slice.call(t)),
                          e = new Uint8Array(e.byteLength),
                          l = new Int32Array(e.buffer),
                          c = i[0],
                          d = i[1],
                          h = i[2],
                          p = i[3],
                          f = 0;
                        f < o.length;
                        f += 4
                      )
                        (n = g(o[f])),
                          (r = g(o[f + 1])),
                          (a = g(o[f + 2])),
                          (s = g(o[f + 3])),
                          u.decrypt(n, r, a, s, l, f),
                          (l[f] = g(l[f] ^ c)),
                          (l[f + 1] = g(l[f + 1] ^ d)),
                          (l[f + 2] = g(l[f + 2] ^ h)),
                          (l[f + 3] = g(l[f + 3] ^ p)),
                          (c = n),
                          (d = r),
                          (h = a),
                          (p = s);
                      return e;
                    })(t, i, n);
                    r.set(e, t.byteOffset);
                  };
                }),
                t(u, null, [
                  {
                    key: "STEP",
                    get: function () {
                      return 32e3;
                    },
                  },
                ]),
                u
              );
            })();
          self.onmessage = function (e) {
            var r = e.data,
              t = new Uint8Array(
                r.encrypted.bytes,
                r.encrypted.byteOffset,
                r.encrypted.byteLength
              ),
              i = new Uint32Array(
                r.key.bytes,
                r.key.byteOffset,
                r.key.byteLength / 4
              ),
              e = new Uint32Array(
                r.iv.bytes,
                r.iv.byteOffset,
                r.iv.byteLength / 4
              );
            new a(t, i, e, function (e, t) {
              var i, n;
              self.postMessage(
                ((i = { source: r.source, decrypted: t }),
                (n = {}),
                Object.keys(i).forEach(function (e) {
                  var t = i[e];
                  ArrayBuffer.isView(t)
                    ? (n[e] = {
                        bytes: t.buffer,
                        byteOffset: t.byteOffset,
                        byteLength: t.byteLength,
                      })
                    : (n[e] = t);
                }),
                n),
                [t.buffer]
              );
            });
          };
        })
      )
    ),
    pc = {
      AUDIO: function (s, o) {
        return function () {
          var e = o.segmentLoaders[s],
            t = o.mediaTypes[s],
            i = o.blacklistCurrentPlaylist;
          ql(e, t);
          var n = t.activeTrack(),
            e = t.activeGroup(),
            e = (
              e.filter(function (e) {
                return e.default;
              })[0] || e[0]
            ).id,
            r = t.tracks[e];
          if (n !== r) {
            for (var a in (tr.log.warn(
              "Problem encountered loading the alternate audio track.Switching back to default."
            ),
            t.tracks))
              t.tracks[a].enabled = t.tracks[a] === r;
            t.onTrackChanged();
          } else
            i({
              message: "Problem encountered loading the default audio track.",
            });
        };
      },
      SUBTITLES: function (i, n) {
        return function () {
          var e = n.segmentLoaders[i],
            t = n.mediaTypes[i];
          tr.log.warn(
            "Problem encountered loading the subtitle track.Disabling subtitle track."
          ),
            ql(e, t);
          e = t.activeTrack();
          e && (e.mode = "disabled"), t.onTrackChanged();
        };
      },
    },
    fc = {
      AUDIO: function (e, t, i) {
        var n, r, a;
        t &&
          ((n = i.tech),
          (r = i.requestOptions),
          (a = i.segmentLoaders[e]),
          t.on("loadedmetadata", function () {
            var e = t.media();
            a.playlist(e, r),
              (!n.paused() || (e.endList && "none" !== n.preload())) &&
                a.load();
          }),
          t.on("loadedplaylist", function () {
            a.playlist(t.media(), r), n.paused() || a.load();
          }),
          t.on("error", pc[e](e, i)));
      },
      SUBTITLES: function (e, t, i) {
        var n = i.tech,
          r = i.requestOptions,
          a = i.segmentLoaders[e],
          s = i.mediaTypes[e];
        t.on("loadedmetadata", function () {
          var e = t.media();
          a.playlist(e, r),
            a.track(s.activeTrack()),
            (!n.paused() || (e.endList && "none" !== n.preload())) && a.load();
        }),
          t.on("loadedplaylist", function () {
            a.playlist(t.media(), r), n.paused() || a.load();
          }),
          t.on("error", pc[e](e, i));
      },
    },
    mc = {
      AUDIO: function (e, t) {
        var i,
          n,
          r = t.vhs,
          a = t.sourceType,
          s = t.segmentLoaders[e],
          o = t.requestOptions,
          u = t.master.mediaGroups,
          l = t.mediaTypes[e],
          c = l.groups,
          d = l.tracks,
          h = l.logger_,
          p = t.masterPlaylistLoader,
          f = nu(p.master);
        for (i in ((u[e] && 0 !== Object.keys(u[e]).length) ||
          ((u[e] = { main: { default: { default: !0 } } }),
          f && (u[e].main.default.playlists = p.master.playlists)),
        u[e]))
          for (var m in (c[i] || (c[i] = []), u[e][i])) {
            var g = u[e][i][m],
              y = void 0,
              y = f
                ? (h(
                    "AUDIO group '" +
                      i +
                      "' label '" +
                      m +
                      "' is a master playlist"
                  ),
                  (g.isMasterPlaylist = !0),
                  null)
                : "vhs-json" === a && g.playlists
                ? new yl(g.playlists[0], r, o)
                : g.resolvedUri
                ? new yl(g.resolvedUri, r, o)
                : g.playlists && "dash" === a
                ? new Tl(g.playlists[0], r, o, p)
                : null,
              g = tr.mergeOptions({ id: m, playlistLoader: y }, g);
            fc[e](e, g.playlistLoader, t),
              c[i].push(g),
              "undefined" == typeof d[m] &&
                ((g = new tr.AudioTrack({
                  id: m,
                  kind:
                    ((n = void 0),
                    (n = (y = g).default ? "main" : "alternative"),
                    (n =
                      y.characteristics &&
                      0 <=
                        y.characteristics.indexOf(
                          "public.accessibility.describes-video"
                        )
                        ? "main-desc"
                        : n)),
                  enabled: !1,
                  language: g.language,
                  default: g.default,
                  label: m,
                })),
                (d[m] = g));
          }
        s.on("error", pc[e](e, t));
      },
      SUBTITLES: function (e, t) {
        var i,
          n = t.tech,
          r = t.vhs,
          a = t.sourceType,
          s = t.segmentLoaders[e],
          o = t.requestOptions,
          u = t.master.mediaGroups,
          l = t.mediaTypes[e],
          c = l.groups,
          d = l.tracks,
          h = t.masterPlaylistLoader;
        for (i in u[e])
          for (var p in (c[i] || (c[i] = []), u[e][i]))
            if (!u[e][i][p].forced) {
              var f = u[e][i][p],
                m = void 0;
              if ("hls" === a) m = new yl(f.resolvedUri, r, o);
              else if ("dash" === a) {
                if (
                  !f.playlists.filter(function (e) {
                    return e.excludeUntil !== 1 / 0;
                  }).length
                )
                  return;
                m = new Tl(f.playlists[0], r, o, h);
              } else
                "vhs-json" === a &&
                  (m = new yl(
                    f.playlists ? f.playlists[0] : f.resolvedUri,
                    r,
                    o
                  ));
              (f = tr.mergeOptions({ id: p, playlistLoader: m }, f)),
                fc[e](e, f.playlistLoader, t),
                c[i].push(f),
                "undefined" == typeof d[p] &&
                  ((f = n.addRemoteTextTrack(
                    {
                      id: p,
                      kind: "subtitles",
                      default: f.default && f.autoselect,
                      language: f.language,
                      label: p,
                    },
                    !1
                  ).track),
                  (d[p] = f));
            }
        s.on("error", pc[e](e, t));
      },
      "CLOSED-CAPTIONS": function (e, t) {
        var i,
          n = t.tech,
          r = t.master.mediaGroups,
          t = t.mediaTypes[e],
          a = t.groups,
          s = t.tracks;
        for (i in r[e])
          for (var o in (a[i] || (a[i] = []), r[e][i])) {
            var u,
              l,
              c = r[e][i][o];
            /^(?:CC|SERVICE)/.test(c.instreamId) &&
              (void 0 ===
                (l = (u =
                  (n.options_.vhs && n.options_.vhs.captionServices) || {})[
                  (l = {
                    label: o,
                    language: c.language,
                    instreamId: c.instreamId,
                    default: c.default && c.autoselect,
                  }).instreamId
                ]
                  ? tr.mergeOptions(l, u[l.instreamId])
                  : l).default && delete l.default,
              a[i].push(tr.mergeOptions({ id: o }, c)),
              "undefined" == typeof s[o] &&
                ((l = n.addRemoteTextTrack(
                  {
                    id: l.instreamId,
                    kind: "captions",
                    default: l.default,
                    language: l.language,
                    label: l.label,
                  },
                  !1
                ).track),
                (s[o] = l)));
          }
      },
    },
    gc = {
      AUDIO: function (i, n) {
        return function () {
          var e,
            t = n.mediaTypes[i].tracks;
          for (e in t) if (t[e].enabled) return t[e];
          return null;
        };
      },
      SUBTITLES: function (i, n) {
        return function () {
          var e,
            t = n.mediaTypes[i].tracks;
          for (e in t)
            if ("showing" === t[e].mode || "hidden" === t[e].mode) return t[e];
          return null;
        };
      },
    },
    yc = [
      "mediaRequests",
      "mediaRequestsAborted",
      "mediaRequestsTimedout",
      "mediaRequestsErrored",
      "mediaTransferDuration",
      "mediaBytesTransferred",
      "mediaAppends",
    ],
    vc = (function (v) {
      function e(e) {
        var t = v.call(this) || this,
          i = e.src,
          n = e.handleManifestRedirects,
          r = e.withCredentials,
          a = e.tech,
          s = e.bandwidth,
          o = e.externVhs,
          u = e.useCueTags,
          l = e.blacklistDuration,
          c = e.enableLowInitialPlaylist,
          d = e.sourceType,
          h = e.cacheEncryptionKeys,
          p = e.experimentalBufferBasedABR,
          f = e.experimentalLeastPixelDiffSelector,
          m = e.captionServices;
        if (!i)
          throw new Error(
            "A non-empty playlist URL or JSON manifest string is required"
          );
        var g,
          y = e.maxPlaylistRetries;
        (null !== y && "undefined" != typeof y) || (y = 1 / 0),
          (Kl = o),
          (t.experimentalBufferBasedABR = Boolean(p)),
          (t.experimentalLeastPixelDiffSelector = Boolean(f)),
          (t.withCredentials = r),
          (t.tech_ = a),
          (t.vhs_ = a.vhs),
          (t.sourceType_ = d),
          (t.useCueTags_ = u),
          (t.blacklistDuration = l),
          (t.maxPlaylistRetries = y),
          (t.enableLowInitialPlaylist = c),
          t.useCueTags_ &&
            ((t.cueTagsTrack_ = t.tech_.addTextTrack("metadata", "ad-cues")),
            (t.cueTagsTrack_.inBandMetadataTrackDispatchType = "")),
          (t.requestOptions_ = {
            withCredentials: r,
            handleManifestRedirects: n,
            maxPlaylistRetries: y,
            timeout: null,
          }),
          t.on("error", t.pauseLoading),
          (t.mediaTypes_ =
            ((g = {}),
            ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function (e) {
              g[e] = {
                groups: {},
                tracks: {},
                activePlaylistLoader: null,
                activeGroup: Ol,
                activeTrack: Ol,
                getActiveGroup: Ol,
                onGroupChanged: Ol,
                onTrackChanged: Ol,
                lastTrack_: null,
                logger_: Oo("MediaGroups[" + e + "]"),
              };
            }),
            g)),
          (t.mediaSource = new window.MediaSource()),
          (t.handleDurationChange_ = t.handleDurationChange_.bind(ft(t))),
          (t.handleSourceOpen_ = t.handleSourceOpen_.bind(ft(t))),
          (t.handleSourceEnded_ = t.handleSourceEnded_.bind(ft(t))),
          t.mediaSource.addEventListener(
            "durationchange",
            t.handleDurationChange_
          ),
          t.mediaSource.addEventListener("sourceopen", t.handleSourceOpen_),
          t.mediaSource.addEventListener("sourceended", t.handleSourceEnded_),
          (t.seekable_ = tr.createTimeRanges()),
          (t.hasPlayed_ = !1),
          (t.syncController_ = new cc(e)),
          (t.segmentMetadataTrack_ = a.addRemoteTextTrack(
            { kind: "metadata", label: "segment-metadata" },
            !1
          ).track),
          (t.decrypter_ = new hc()),
          (t.sourceUpdater_ = new sc(t.mediaSource)),
          (t.inbandTextTracks_ = {}),
          (t.timelineChangeController_ = new dc());
        h = {
          vhs: t.vhs_,
          parse708captions: e.parse708captions,
          captionServices: m,
          mediaSource: t.mediaSource,
          currentTime: t.tech_.currentTime.bind(t.tech_),
          seekable: function () {
            return t.seekable();
          },
          seeking: function () {
            return t.tech_.seeking();
          },
          duration: function () {
            return t.duration();
          },
          hasPlayed: function () {
            return t.hasPlayed_;
          },
          goalBufferLength: function () {
            return t.goalBufferLength();
          },
          bandwidth: s,
          syncController: t.syncController_,
          decrypter: t.decrypter_,
          sourceType: t.sourceType_,
          inbandTextTracks: t.inbandTextTracks_,
          cacheEncryptionKeys: h,
          sourceUpdater: t.sourceUpdater_,
          timelineChangeController: t.timelineChangeController_,
          experimentalExactManifestTimings: e.experimentalExactManifestTimings,
        };
        (t.masterPlaylistLoader_ = new ("dash" === t.sourceType_ ? Tl : yl)(
          i,
          t.vhs_,
          t.requestOptions_
        )),
          t.setupMasterPlaylistLoaderListeners_(),
          (t.mainSegmentLoader_ = new Dl(
            tr.mergeOptions(h, {
              segmentMetadataTrack: t.segmentMetadataTrack_,
              loaderType: "main",
            }),
            e
          )),
          (t.audioSegmentLoader_ = new Dl(
            tr.mergeOptions(h, { loaderType: "audio" }),
            e
          )),
          (t.subtitleSegmentLoader_ = new uc(
            tr.mergeOptions(h, {
              loaderType: "vtt",
              featuresNativeTextTracks: t.tech_.featuresNativeTextTracks,
            }),
            e
          )),
          t.setupSegmentLoaderListeners_(),
          t.experimentalBufferBasedABR &&
            (t.masterPlaylistLoader_.one("loadedplaylist", function () {
              return t.startABRTimer_();
            }),
            t.tech_.on("pause", function () {
              return t.stopABRTimer_();
            }),
            t.tech_.on("play", function () {
              return t.startABRTimer_();
            })),
          yc.forEach(function (e) {
            t[e + "_"] = function (e) {
              return this.audioSegmentLoader_[e] + this.mainSegmentLoader_[e];
            }.bind(ft(t), e);
          }),
          (t.logger_ = Oo("MPC")),
          (t.triggeredFmp4Usage = !1),
          "none" === t.tech_.preload()
            ? ((t.loadOnPlay_ = function () {
                (t.loadOnPlay_ = null), t.masterPlaylistLoader_.load();
              }),
              t.tech_.one("play", t.loadOnPlay_))
            : t.masterPlaylistLoader_.load(),
          (t.timeToLoadedData__ = -1),
          (t.mainAppendsToLoadedData__ = -1),
          (t.audioAppendsToLoadedData__ = -1);
        e = "none" === t.tech_.preload() ? "play" : "loadstart";
        return (
          t.tech_.one(e, function () {
            var e = Date.now();
            t.tech_.one("loadeddata", function () {
              (t.timeToLoadedData__ = Date.now() - e),
                (t.mainAppendsToLoadedData__ =
                  t.mainSegmentLoader_.mediaAppends),
                (t.audioAppendsToLoadedData__ =
                  t.audioSegmentLoader_.mediaAppends);
            });
          }),
          t
        );
      }
      mt(e, v);
      var t = e.prototype;
      return (
        (t.mainAppendsToLoadedData_ = function () {
          return this.mainAppendsToLoadedData__;
        }),
        (t.audioAppendsToLoadedData_ = function () {
          return this.audioAppendsToLoadedData__;
        }),
        (t.appendsToLoadedData_ = function () {
          var e = this.mainAppendsToLoadedData_(),
            t = this.audioAppendsToLoadedData_();
          return -1 === e || -1 === t ? -1 : e + t;
        }),
        (t.timeToLoadedData_ = function () {
          return this.timeToLoadedData__;
        }),
        (t.checkABR_ = function () {
          var e = this.selectPlaylist();
          e && this.shouldSwitchToMedia_(e) && this.switchMedia_(e, "abr");
        }),
        (t.switchMedia_ = function (e, t, i) {
          var n = this.media(),
            r = n && (n.id || n.uri),
            n = e.id || e.uri;
          r &&
            r !== n &&
            (this.logger_("switch media " + r + " -> " + n + " from " + t),
            this.tech_.trigger({
              type: "usage",
              name: "vhs-rendition-change-" + t,
            })),
            this.masterPlaylistLoader_.media(e, i);
        }),
        (t.startABRTimer_ = function () {
          var e = this;
          this.stopABRTimer_(),
            (this.abrTimer_ = window.setInterval(function () {
              return e.checkABR_();
            }, 250));
        }),
        (t.stopABRTimer_ = function () {
          (this.tech_.scrubbing && this.tech_.scrubbing()) ||
            (window.clearInterval(this.abrTimer_), (this.abrTimer_ = null));
        }),
        (t.getAudioTrackPlaylists_ = function () {
          var e = this.master(),
            t = (e && e.playlists) || [];
          if (!e || !e.mediaGroups || !e.mediaGroups.AUDIO) return t;
          var i,
            n = e.mediaGroups.AUDIO,
            r = Object.keys(n);
          if (Object.keys(this.mediaTypes_.AUDIO.groups).length)
            i = this.mediaTypes_.AUDIO.activeTrack();
          else {
            var a,
              s = n.main || (r.length && n[r[0]]);
            for (a in s)
              if (s[a].default) {
                i = { label: a };
                break;
              }
          }
          if (!i) return t;
          var o,
            u = [];
          for (o in n)
            if (n[o][i.label]) {
              var l = n[o][i.label];
              if (l.playlists && l.playlists.length)
                u.push.apply(u, l.playlists);
              else if (l.uri) u.push(l);
              else if (e.playlists.length)
                for (var c = 0; c < e.playlists.length; c++) {
                  var d = e.playlists[c];
                  d.attributes &&
                    d.attributes.AUDIO &&
                    d.attributes.AUDIO === o &&
                    u.push(d);
                }
            }
          return u.length ? u : t;
        }),
        (t.setupMasterPlaylistLoaderListeners_ = function () {
          var i = this;
          this.masterPlaylistLoader_.on("loadedmetadata", function () {
            var e = i.masterPlaylistLoader_.media(),
              t = 1.5 * e.targetDuration * 1e3;
            eu(i.masterPlaylistLoader_.master, i.masterPlaylistLoader_.media())
              ? (i.requestOptions_.timeout = 0)
              : (i.requestOptions_.timeout = t),
              e.endList &&
                "none" !== i.tech_.preload() &&
                (i.mainSegmentLoader_.playlist(e, i.requestOptions_),
                i.mainSegmentLoader_.load()),
              Gl({
                sourceType: i.sourceType_,
                segmentLoaders: {
                  AUDIO: i.audioSegmentLoader_,
                  SUBTITLES: i.subtitleSegmentLoader_,
                  main: i.mainSegmentLoader_,
                },
                tech: i.tech_,
                requestOptions: i.requestOptions_,
                masterPlaylistLoader: i.masterPlaylistLoader_,
                vhs: i.vhs_,
                master: i.master(),
                mediaTypes: i.mediaTypes_,
                blacklistCurrentPlaylist: i.blacklistCurrentPlaylist.bind(i),
              }),
              i.triggerPresenceUsage_(i.master(), e),
              i.setupFirstPlay(),
              !i.mediaTypes_.AUDIO.activePlaylistLoader ||
              i.mediaTypes_.AUDIO.activePlaylistLoader.media()
                ? i.trigger("selectedinitialmedia")
                : i.mediaTypes_.AUDIO.activePlaylistLoader.one(
                    "loadedmetadata",
                    function () {
                      i.trigger("selectedinitialmedia");
                    }
                  );
          }),
            this.masterPlaylistLoader_.on("loadedplaylist", function () {
              i.loadOnPlay_ && i.tech_.off("play", i.loadOnPlay_);
              var e,
                t = i.masterPlaylistLoader_.media();
              if (!t) {
                if (
                  (i.excludeUnsupportedVariants_(),
                  !(e =
                    (e = i.enableLowInitialPlaylist
                      ? i.selectInitialPlaylist()
                      : e) || i.selectPlaylist()) || !i.shouldSwitchToMedia_(e))
                )
                  return;
                if (
                  ((i.initialMedia_ = e),
                  i.switchMedia_(i.initialMedia_, "initial"),
                  !("vhs-json" === i.sourceType_ && i.initialMedia_.segments))
                )
                  return;
                t = i.initialMedia_;
              }
              i.handleUpdatedMediaPlaylist(t);
            }),
            this.masterPlaylistLoader_.on("error", function () {
              i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error);
            }),
            this.masterPlaylistLoader_.on("mediachanging", function () {
              i.mainSegmentLoader_.abort(), i.mainSegmentLoader_.pause();
            }),
            this.masterPlaylistLoader_.on("mediachange", function () {
              var e = i.masterPlaylistLoader_.media(),
                t = 1.5 * e.targetDuration * 1e3;
              eu(
                i.masterPlaylistLoader_.master,
                i.masterPlaylistLoader_.media()
              )
                ? (i.requestOptions_.timeout = 0)
                : (i.requestOptions_.timeout = t),
                i.mainSegmentLoader_.playlist(e, i.requestOptions_),
                i.mainSegmentLoader_.load(),
                i.tech_.trigger({ type: "mediachange", bubbles: !0 });
            }),
            this.masterPlaylistLoader_.on("playlistunchanged", function () {
              var e = i.masterPlaylistLoader_.media();
              "playlist-unchanged" !== e.lastExcludeReason_ &&
                i.stuckAtPlaylistEnd_(e) &&
                (i.blacklistCurrentPlaylist({
                  message: "Playlist no longer updating.",
                  reason: "playlist-unchanged",
                }),
                i.tech_.trigger("playliststuck"));
            }),
            this.masterPlaylistLoader_.on("renditiondisabled", function () {
              i.tech_.trigger({
                type: "usage",
                name: "vhs-rendition-disabled",
              }),
                i.tech_.trigger({
                  type: "usage",
                  name: "hls-rendition-disabled",
                });
            }),
            this.masterPlaylistLoader_.on("renditionenabled", function () {
              i.tech_.trigger({ type: "usage", name: "vhs-rendition-enabled" }),
                i.tech_.trigger({
                  type: "usage",
                  name: "hls-rendition-enabled",
                });
            });
        }),
        (t.handleUpdatedMediaPlaylist = function (e) {
          this.useCueTags_ && this.updateAdCues_(e),
            this.mainSegmentLoader_.playlist(e, this.requestOptions_),
            this.updateDuration(!e.endList),
            this.tech_.paused() ||
              (this.mainSegmentLoader_.load(),
              this.audioSegmentLoader_ && this.audioSegmentLoader_.load());
        }),
        (t.triggerPresenceUsage_ = function (e, t) {
          var i,
            n = e.mediaGroups || {},
            r = !0,
            e = Object.keys(n.AUDIO);
          for (i in n.AUDIO)
            for (var a in n.AUDIO[i]) n.AUDIO[i][a].uri || (r = !1);
          r &&
            (this.tech_.trigger({ type: "usage", name: "vhs-demuxed" }),
            this.tech_.trigger({ type: "usage", name: "hls-demuxed" })),
            Object.keys(n.SUBTITLES).length &&
              (this.tech_.trigger({ type: "usage", name: "vhs-webvtt" }),
              this.tech_.trigger({ type: "usage", name: "hls-webvtt" })),
            Kl.Playlist.isAes(t) &&
              (this.tech_.trigger({ type: "usage", name: "vhs-aes" }),
              this.tech_.trigger({ type: "usage", name: "hls-aes" })),
            e.length &&
              1 < Object.keys(n.AUDIO[e[0]]).length &&
              (this.tech_.trigger({
                type: "usage",
                name: "vhs-alternate-audio",
              }),
              this.tech_.trigger({
                type: "usage",
                name: "hls-alternate-audio",
              })),
            this.useCueTags_ &&
              (this.tech_.trigger({
                type: "usage",
                name: "vhs-playlist-cue-tags",
              }),
              this.tech_.trigger({
                type: "usage",
                name: "hls-playlist-cue-tags",
              }));
        }),
        (t.shouldSwitchToMedia_ = function (e) {
          var t =
              this.masterPlaylistLoader_.media() ||
              this.masterPlaylistLoader_.pendingMedia_,
            i = this.tech_.currentTime(),
            n = this.bufferLowWaterLine(),
            r = this.bufferHighWaterLine();
          return (function (e) {
            var t = e.currentPlaylist,
              i = e.buffered,
              n = e.currentTime,
              r = e.nextPlaylist,
              a = e.bufferLowWaterLine,
              s = e.bufferHighWaterLine,
              o = e.duration,
              u = e.experimentalBufferBasedABR,
              l = e.log;
            if (!r)
              return (
                tr.log.warn(
                  "We received no playlist to switch to. Please check your stream."
                ),
                !1
              );
            var c =
              "allowing switch " + ((t && t.id) || "null") + " -> " + r.id;
            if (!t) return l(c + " as current playlist is not set"), !0;
            if (r.id === t.id) return !1;
            e = Boolean(Mo(i, n).length);
            if (!t.endList)
              return e || "number" != typeof t.partTargetDuration
                ? (l(c + " as current playlist is live"), !0)
                : (l(
                    "not " +
                      c +
                      " as current playlist is live llhls, but currentTime isn't in buffered."
                  ),
                  !1);
            (i = jo(i, n)),
              (n = u
                ? Sl.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE
                : Sl.MAX_BUFFER_LOW_WATER_LINE);
            if (o < n)
              return (
                l(
                  c +
                    " as duration < max low water line (" +
                    o +
                    " < " +
                    n +
                    ")"
                ),
                !0
              );
            (n = r.attributes.BANDWIDTH), (r = t.attributes.BANDWIDTH);
            if (n < r && (!u || i < s)) {
              t =
                c +
                " as next bandwidth < current bandwidth (" +
                n +
                " < " +
                r +
                ")";
              return (
                u &&
                  (t +=
                    " and forwardBuffer < bufferHighWaterLine (" +
                    i +
                    " < " +
                    s +
                    ")"),
                l(t),
                !0
              );
            }
            if ((!u || r < n) && a <= i) {
              a =
                c +
                " as forwardBuffer >= bufferLowWaterLine (" +
                i +
                " >= " +
                a +
                ")";
              return (
                u &&
                  (a +=
                    " and next bandwidth > current bandwidth (" +
                    n +
                    " > " +
                    r +
                    ")"),
                l(a),
                !0
              );
            }
            return l("not " + c + " as no switching criteria met"), !1;
          })({
            buffered: this.tech_.buffered(),
            currentTime: i,
            currentPlaylist: t,
            nextPlaylist: e,
            bufferLowWaterLine: n,
            bufferHighWaterLine: r,
            duration: this.duration(),
            experimentalBufferBasedABR: this.experimentalBufferBasedABR,
            log: this.logger_,
          });
        }),
        (t.setupSegmentLoaderListeners_ = function () {
          var t = this;
          this.experimentalBufferBasedABR ||
            (this.mainSegmentLoader_.on("bandwidthupdate", function () {
              var e = t.selectPlaylist();
              t.shouldSwitchToMedia_(e) && t.switchMedia_(e, "bandwidthupdate"),
                t.tech_.trigger("bandwidthupdate");
            }),
            this.mainSegmentLoader_.on("progress", function () {
              t.trigger("progress");
            })),
            this.mainSegmentLoader_.on("error", function () {
              t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error());
            }),
            this.mainSegmentLoader_.on("appenderror", function () {
              (t.error = t.mainSegmentLoader_.error_), t.trigger("error");
            }),
            this.mainSegmentLoader_.on("syncinfoupdate", function () {
              t.onSyncInfoUpdate_();
            }),
            this.mainSegmentLoader_.on("timestampoffset", function () {
              t.tech_.trigger({ type: "usage", name: "vhs-timestamp-offset" }),
                t.tech_.trigger({
                  type: "usage",
                  name: "hls-timestamp-offset",
                });
            }),
            this.audioSegmentLoader_.on("syncinfoupdate", function () {
              t.onSyncInfoUpdate_();
            }),
            this.audioSegmentLoader_.on("appenderror", function () {
              (t.error = t.audioSegmentLoader_.error_), t.trigger("error");
            }),
            this.mainSegmentLoader_.on("ended", function () {
              t.logger_("main segment loader ended"), t.onEndOfStream();
            }),
            this.mainSegmentLoader_.on("earlyabort", function (e) {
              t.experimentalBufferBasedABR ||
                (t.delegateLoaders_("all", ["abort"]),
                t.blacklistCurrentPlaylist(
                  {
                    message:
                      "Aborted early because there isn't enough bandwidth to complete the request without rebuffering.",
                  },
                  120
                ));
            });
          function e() {
            if (!t.sourceUpdater_.hasCreatedSourceBuffers())
              return t.tryToCreateSourceBuffers_();
            var e = t.getCodecsOrExclude_();
            e && t.sourceUpdater_.addOrChangeSourceBuffers(e);
          }
          this.mainSegmentLoader_.on("trackinfo", e),
            this.audioSegmentLoader_.on("trackinfo", e),
            this.mainSegmentLoader_.on("fmp4", function () {
              t.triggeredFmp4Usage ||
                (t.tech_.trigger({ type: "usage", name: "vhs-fmp4" }),
                t.tech_.trigger({ type: "usage", name: "hls-fmp4" }),
                (t.triggeredFmp4Usage = !0));
            }),
            this.audioSegmentLoader_.on("fmp4", function () {
              t.triggeredFmp4Usage ||
                (t.tech_.trigger({ type: "usage", name: "vhs-fmp4" }),
                t.tech_.trigger({ type: "usage", name: "hls-fmp4" }),
                (t.triggeredFmp4Usage = !0));
            }),
            this.audioSegmentLoader_.on("ended", function () {
              t.logger_("audioSegmentLoader ended"), t.onEndOfStream();
            });
        }),
        (t.mediaSecondsLoaded_ = function () {
          return Math.max(
            this.audioSegmentLoader_.mediaSecondsLoaded +
              this.mainSegmentLoader_.mediaSecondsLoaded
          );
        }),
        (t.load = function () {
          this.mainSegmentLoader_.load(),
            this.mediaTypes_.AUDIO.activePlaylistLoader &&
              this.audioSegmentLoader_.load(),
            this.mediaTypes_.SUBTITLES.activePlaylistLoader &&
              this.subtitleSegmentLoader_.load();
        }),
        (t.smoothQualityChange_ = function (e) {
          void 0 === e && (e = this.selectPlaylist()),
            this.fastQualityChange_(e);
        }),
        (t.fastQualityChange_ = function (e) {
          var t = this;
          (e = void 0 === e ? this.selectPlaylist() : e) !==
          this.masterPlaylistLoader_.media()
            ? (this.switchMedia_(e, "fast-quality"),
              this.mainSegmentLoader_.resetEverything(function () {
                tr.browser.IE_VERSION || tr.browser.IS_EDGE
                  ? t.tech_.setCurrentTime(t.tech_.currentTime() + 0.04)
                  : t.tech_.setCurrentTime(t.tech_.currentTime());
              }))
            : this.logger_(
                "skipping fastQualityChange because new media is same as old"
              );
        }),
        (t.play = function () {
          if (!this.setupFirstPlay()) {
            this.tech_.ended() && this.tech_.setCurrentTime(0),
              this.hasPlayed_ && this.load();
            var e = this.tech_.seekable();
            return this.tech_.duration() === 1 / 0 &&
              this.tech_.currentTime() < e.start(0)
              ? this.tech_.setCurrentTime(e.end(e.length - 1))
              : void 0;
          }
        }),
        (t.setupFirstPlay = function () {
          var e = this,
            t = this.masterPlaylistLoader_.media();
          if (!t || this.tech_.paused() || this.hasPlayed_) return !1;
          if (!t.endList) {
            var i = this.seekable();
            if (!i.length) return !1;
            if (tr.browser.IE_VERSION && 0 === this.tech_.readyState())
              return (
                this.tech_.one("loadedmetadata", function () {
                  e.trigger("firstplay"),
                    e.tech_.setCurrentTime(i.end(0)),
                    (e.hasPlayed_ = !0);
                }),
                !1
              );
            this.trigger("firstplay"), this.tech_.setCurrentTime(i.end(0));
          }
          return (this.hasPlayed_ = !0), this.load(), !0;
        }),
        (t.handleSourceOpen_ = function () {
          var e;
          this.tryToCreateSourceBuffers_(),
            !this.tech_.autoplay() ||
              ("undefined" != typeof (e = this.tech_.play()) &&
                "function" == typeof e.then &&
                e.then(null, function (e) {})),
            this.trigger("sourceopen");
        }),
        (t.handleSourceEnded_ = function () {
          var e, t;
          !this.inbandTextTracks_.metadataTrack_ ||
            ((e = this.inbandTextTracks_.metadataTrack_.cues) &&
              e.length &&
              ((t = this.duration()),
              (e[e.length - 1].endTime =
                isNaN(t) || Math.abs(t) === 1 / 0 ? Number.MAX_VALUE : t)));
        }),
        (t.handleDurationChange_ = function () {
          this.tech_.trigger("durationchange");
        }),
        (t.onEndOfStream = function () {
          var e,
            t = this.mainSegmentLoader_.ended_;
          (t = this.mediaTypes_.AUDIO.activePlaylistLoader
            ? (((e = this.mainSegmentLoader_.getCurrentMediaInfo_()) &&
                !e.hasVideo) ||
                t) &&
              this.audioSegmentLoader_.ended_
            : t) && (this.stopABRTimer_(), this.sourceUpdater_.endOfStream());
        }),
        (t.stuckAtPlaylistEnd_ = function (e) {
          if (!this.seekable().length) return !1;
          var t = this.syncController_.getExpiredTime(e, this.duration());
          if (null === t) return !1;
          var i = Kl.Playlist.playlistEnd(e, t),
            e = this.tech_.currentTime(),
            t = this.tech_.buffered();
          if (!t.length) return i - e <= 0.1;
          t = t.end(t.length - 1);
          return t - e <= 0.1 && i - t <= 0.1;
        }),
        (t.blacklistCurrentPlaylist = function (e, t) {
          var i =
            (e = void 0 === e ? {} : e).playlist ||
            this.masterPlaylistLoader_.media();
          if (((t = t || e.blacklistDuration || this.blacklistDuration), !i))
            return (
              (this.error = e),
              void ("open" !== this.mediaSource.readyState
                ? this.trigger("error")
                : this.sourceUpdater_.endOfStream("network"))
            );
          i.playlistErrors_++;
          var n,
            r = this.masterPlaylistLoader_.master.playlists,
            a = r.filter(Jo),
            s = 1 === a.length && a[0] === i;
          if (1 === r.length && t !== 1 / 0)
            return (
              tr.log.warn(
                "Problem encountered with playlist " +
                  i.id +
                  ". Trying again since it is the only playlist."
              ),
              this.tech_.trigger("retryplaylist"),
              this.masterPlaylistLoader_.load(s)
            );
          s &&
            ((n = !1),
            r.forEach(function (e) {
              var t;
              e === i ||
                ("undefined" != typeof (t = e.excludeUntil) &&
                  t !== 1 / 0 &&
                  ((n = !0), delete e.excludeUntil));
            }),
            n &&
              (tr.log.warn(
                "Removing other playlists from the exclusion list because the last rendition is about to be excluded."
              ),
              this.tech_.trigger("retryplaylist"))),
            (a =
              i.playlistErrors_ > this.maxPlaylistRetries
                ? 1 / 0
                : Date.now() + 1e3 * t),
            (i.excludeUntil = a),
            e.reason && (i.lastExcludeReason_ = e.reason),
            this.tech_.trigger("blacklistplaylist"),
            this.tech_.trigger({
              type: "usage",
              name: "vhs-rendition-blacklisted",
            }),
            this.tech_.trigger({
              type: "usage",
              name: "hls-rendition-blacklisted",
            });
          r = this.selectPlaylist();
          if (!r)
            return (
              (this.error =
                "Playback cannot continue. No available working or supported playlists."),
              void this.trigger("error")
            );
          (t = e.internal ? this.logger_ : tr.log.warn),
            (a = e.message ? " " + e.message : "");
          t(
            (e.internal ? "Internal problem" : "Problem") +
              " encountered with playlist " +
              i.id +
              "." +
              a +
              " Switching to playlist " +
              r.id +
              "."
          ),
            r.attributes.AUDIO !== i.attributes.AUDIO &&
              this.delegateLoaders_("audio", ["abort", "pause"]),
            r.attributes.SUBTITLES !== i.attributes.SUBTITLES &&
              this.delegateLoaders_("subtitle", ["abort", "pause"]),
            this.delegateLoaders_("main", ["abort", "pause"]);
          (a = (r.targetDuration / 2) * 1e3 || 5e3),
            (a =
              "number" == typeof r.lastRequest &&
              Date.now() - r.lastRequest <= a);
          return this.switchMedia_(r, "exclude", s || a);
        }),
        (t.pauseLoading = function () {
          this.delegateLoaders_("all", ["abort", "pause"]),
            this.stopABRTimer_();
        }),
        (t.delegateLoaders_ = function (i, e) {
          var n = this,
            r = [],
            t = "all" === i;
          (!t && "main" !== i) || r.push(this.masterPlaylistLoader_);
          var a = [];
          (!t && "audio" !== i) || a.push("AUDIO"),
            (!t && "subtitle" !== i) ||
              (a.push("CLOSED-CAPTIONS"), a.push("SUBTITLES")),
            a.forEach(function (e) {
              e = n.mediaTypes_[e] && n.mediaTypes_[e].activePlaylistLoader;
              e && r.push(e);
            }),
            ["main", "audio", "subtitle"].forEach(function (e) {
              var t = n[e + "SegmentLoader_"];
              !t || (i !== e && "all" !== i) || r.push(t);
            }),
            r.forEach(function (t) {
              return e.forEach(function (e) {
                "function" == typeof t[e] && t[e]();
              });
            });
        }),
        (t.setCurrentTime = function (e) {
          var t = Mo(this.tech_.buffered(), e);
          return this.masterPlaylistLoader_ &&
            this.masterPlaylistLoader_.media() &&
            this.masterPlaylistLoader_.media().segments
            ? t && t.length
              ? e
              : (this.mainSegmentLoader_.resetEverything(),
                this.mainSegmentLoader_.abort(),
                this.mediaTypes_.AUDIO.activePlaylistLoader &&
                  (this.audioSegmentLoader_.resetEverything(),
                  this.audioSegmentLoader_.abort()),
                this.mediaTypes_.SUBTITLES.activePlaylistLoader &&
                  (this.subtitleSegmentLoader_.resetEverything(),
                  this.subtitleSegmentLoader_.abort()),
                void this.load())
            : 0;
        }),
        (t.duration = function () {
          if (!this.masterPlaylistLoader_) return 0;
          var e = this.masterPlaylistLoader_.media();
          return e
            ? e.endList
              ? this.mediaSource
                ? this.mediaSource.duration
                : Kl.Playlist.duration(e)
              : 1 / 0
            : 0;
        }),
        (t.seekable = function () {
          return this.seekable_;
        }),
        (t.onSyncInfoUpdate_ = function () {
          var e;
          if (this.masterPlaylistLoader_) {
            var t = this.masterPlaylistLoader_.media();
            if (t) {
              var i = this.syncController_.getExpiredTime(t, this.duration());
              if (null !== i) {
                var n,
                  r,
                  a = this.masterPlaylistLoader_.master,
                  s = Kl.Playlist.seekable(
                    t,
                    i,
                    Kl.Playlist.liveEdgeDelay(a, t)
                  );
                if (0 !== s.length) {
                  if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
                    if (
                      ((t =
                        this.mediaTypes_.AUDIO.activePlaylistLoader.media()),
                      null ===
                        (i = this.syncController_.getExpiredTime(
                          t,
                          this.duration()
                        )))
                    )
                      return;
                    if (
                      0 ===
                      (e = Kl.Playlist.seekable(
                        t,
                        i,
                        Kl.Playlist.liveEdgeDelay(a, t)
                      )).length
                    )
                      return;
                  }
                  this.seekable_ &&
                    this.seekable_.length &&
                    ((n = this.seekable_.end(0)),
                    (r = this.seekable_.start(0))),
                    !e || e.start(0) > s.end(0) || s.start(0) > e.end(0)
                      ? (this.seekable_ = s)
                      : (this.seekable_ = tr.createTimeRanges([
                          [
                            (e.start(0) > s.start(0) ? e : s).start(0),
                            (e.end(0) < s.end(0) ? e : s).end(0),
                          ],
                        ])),
                    (this.seekable_ &&
                      this.seekable_.length &&
                      this.seekable_.end(0) === n &&
                      this.seekable_.start(0) === r) ||
                      (this.logger_(
                        "seekable updated [" + Uo(this.seekable_) + "]"
                      ),
                      this.tech_.trigger("seekablechanged"));
                }
              }
            }
          }
        }),
        (t.updateDuration = function (e) {
          if (
            (this.updateDuration_ &&
              (this.mediaSource.removeEventListener(
                "sourceopen",
                this.updateDuration_
              ),
              (this.updateDuration_ = null)),
            "open" !== this.mediaSource.readyState)
          )
            return (
              (this.updateDuration_ = this.updateDuration.bind(this, e)),
              void this.mediaSource.addEventListener(
                "sourceopen",
                this.updateDuration_
              )
            );
          if (e) {
            var t = this.seekable();
            return t.length
              ? void (
                  (isNaN(this.mediaSource.duration) ||
                    this.mediaSource.duration < t.end(t.length - 1)) &&
                  this.sourceUpdater_.setDuration(t.end(t.length - 1))
                )
              : void 0;
          }
          (e = this.tech_.buffered()),
            (t = Kl.Playlist.duration(this.masterPlaylistLoader_.media()));
          0 < e.length && (t = Math.max(t, e.end(e.length - 1))),
            this.mediaSource.duration !== t &&
              this.sourceUpdater_.setDuration(t);
        }),
        (t.dispose = function () {
          var n = this;
          this.trigger("dispose"),
            this.decrypter_.terminate(),
            this.masterPlaylistLoader_.dispose(),
            this.mainSegmentLoader_.dispose(),
            this.loadOnPlay_ && this.tech_.off("play", this.loadOnPlay_),
            ["AUDIO", "SUBTITLES"].forEach(function (e) {
              var t,
                i = n.mediaTypes_[e].groups;
              for (t in i)
                i[t].forEach(function (e) {
                  e.playlistLoader && e.playlistLoader.dispose();
                });
            }),
            this.audioSegmentLoader_.dispose(),
            this.subtitleSegmentLoader_.dispose(),
            this.sourceUpdater_.dispose(),
            this.timelineChangeController_.dispose(),
            this.stopABRTimer_(),
            this.updateDuration_ &&
              this.mediaSource.removeEventListener(
                "sourceopen",
                this.updateDuration_
              ),
            this.mediaSource.removeEventListener(
              "durationchange",
              this.handleDurationChange_
            ),
            this.mediaSource.removeEventListener(
              "sourceopen",
              this.handleSourceOpen_
            ),
            this.mediaSource.removeEventListener(
              "sourceended",
              this.handleSourceEnded_
            ),
            this.off();
        }),
        (t.master = function () {
          return this.masterPlaylistLoader_.master;
        }),
        (t.media = function () {
          return this.masterPlaylistLoader_.media() || this.initialMedia_;
        }),
        (t.areMediaTypesKnown_ = function () {
          var e = !!this.mediaTypes_.AUDIO.activePlaylistLoader,
            t = !!this.mainSegmentLoader_.getCurrentMediaInfo_(),
            e = !e || !!this.audioSegmentLoader_.getCurrentMediaInfo_();
          return t && e;
        }),
        (t.getCodecsOrExclude_ = function () {
          var n = this,
            r = {
              main: this.mainSegmentLoader_.getCurrentMediaInfo_() || {},
              audio: this.audioSegmentLoader_.getCurrentMediaInfo_() || {},
            };
          r.video = r.main;
          var e = Yu(this.master(), this.media()),
            a = {},
            t = !!this.mediaTypes_.AUDIO.activePlaylistLoader;
          if (
            (r.main.hasVideo &&
              (a.video = e.video || r.main.videoCodec || "avc1.4d400d"),
            r.main.isMuxed &&
              (a.video += "," + (e.audio || r.main.audioCodec || Cr)),
            ((r.main.hasAudio && !r.main.isMuxed) || r.audio.hasAudio || t) &&
              ((a.audio =
                e.audio || r.main.audioCodec || r.audio.audioCodec || Cr),
              (r.audio.isFmp4 = (
                r.main.hasAudio && !r.main.isMuxed ? r.main : r.audio
              ).isFmp4)),
            a.audio || a.video)
          ) {
            var s,
              i,
              o = {};
            if (
              (["video", "audio"].forEach(function (e) {
                var t, i;
                a.hasOwnProperty(e) &&
                  ((t = r[e].isFmp4), (i = a[e]), !(t ? gr : yr)(i)) &&
                  ((i = r[e].isFmp4 ? "browser" : "muxer"),
                  (o[i] = o[i] || []),
                  o[i].push(a[e]),
                  "audio" === e && (s = i));
              }),
              t &&
                s &&
                this.media().attributes.AUDIO &&
                ((i = this.media().attributes.AUDIO),
                this.master().playlists.forEach(function (e) {
                  (e.attributes && e.attributes.AUDIO) === i &&
                    e !== n.media() &&
                    (e.excludeUntil = 1 / 0);
                }),
                this.logger_(
                  "excluding audio group " +
                    i +
                    " as " +
                    s +
                    ' does not support codec(s): "' +
                    a.audio +
                    '"'
                )),
              !Object.keys(o).length)
            ) {
              if (
                this.sourceUpdater_.hasCreatedSourceBuffers() &&
                !this.sourceUpdater_.canChangeType()
              ) {
                var u = [];
                if (
                  (["video", "audio"].forEach(function (e) {
                    var t = (pr(n.sourceUpdater_.codecs[e] || "")[0] || {})
                        .type,
                      i = (pr(a[e] || "")[0] || {}).type;
                    t &&
                      i &&
                      t.toLowerCase() !== i.toLowerCase() &&
                      u.push(
                        '"' + n.sourceUpdater_.codecs[e] + '" -> "' + a[e] + '"'
                      );
                  }),
                  u.length)
                )
                  return void this.blacklistCurrentPlaylist({
                    playlist: this.media(),
                    message:
                      "Codec switching not supported: " + u.join(", ") + ".",
                    blacklistDuration: 1 / 0,
                    internal: !0,
                  });
              }
              return a;
            }
            t =
              Object.keys(o).reduce(function (e, t) {
                return (
                  e && (e += ", "),
                  (e +=
                    t + ' does not support codec(s): "' + o[t].join(",") + '"')
                );
              }, "") + ".";
            this.blacklistCurrentPlaylist({
              playlist: this.media(),
              internal: !0,
              message: t,
              blacklistDuration: 1 / 0,
            });
          } else
            this.blacklistCurrentPlaylist({
              playlist: this.media(),
              message: "Could not determine codecs for playlist.",
              blacklistDuration: 1 / 0,
            });
        }),
        (t.tryToCreateSourceBuffers_ = function () {
          var e;
          "open" !== this.mediaSource.readyState ||
            this.sourceUpdater_.hasCreatedSourceBuffers() ||
            !this.areMediaTypesKnown_() ||
            ((e = this.getCodecsOrExclude_()) &&
              (this.sourceUpdater_.createSourceBuffers(e),
              (e = [e.video, e.audio].filter(Boolean).join(",")),
              this.excludeIncompatibleVariants_(e)));
        }),
        (t.excludeUnsupportedVariants_ = function () {
          var n = this,
            r = this.master().playlists,
            a = [];
          Object.keys(r).forEach(function (e) {
            var t,
              i = r[e];
            -1 === a.indexOf(i.id) &&
              (a.push(i.id),
              (t = []),
              !(e = Yu(n.master, i)).audio ||
                yr(e.audio) ||
                gr(e.audio) ||
                t.push("audio codec " + e.audio),
              !e.video ||
                yr(e.video) ||
                gr(e.video) ||
                t.push("video codec " + e.video),
              e.text &&
                "stpp.ttml.im1t" === e.text &&
                t.push("text codec " + e.text),
              t.length &&
                ((i.excludeUntil = 1 / 0),
                n.logger_(
                  "excluding " + i.id + " for unsupported: " + t.join(", ")
                )));
          });
        }),
        (t.excludeIncompatibleVariants_ = function (e) {
          var r = this,
            a = [],
            s = this.master().playlists,
            e = Xu(pr(e)),
            o = Ku(e),
            u = (e.video && pr(e.video)[0]) || null,
            l = (e.audio && pr(e.audio)[0]) || null;
          Object.keys(s).forEach(function (e) {
            var t,
              i,
              n = s[e];
            -1 === a.indexOf(n.id) &&
              n.excludeUntil !== 1 / 0 &&
              (a.push(n.id),
              (t = []),
              (i = Yu(r.masterPlaylistLoader_.master, n)),
              (e = Ku(i)),
              (i.audio || i.video) &&
                (e !== o && t.push('codec count "' + e + '" !== "' + o + '"'),
                r.sourceUpdater_.canChangeType() ||
                  ((e = (i.video && pr(i.video)[0]) || null),
                  (i = (i.audio && pr(i.audio)[0]) || null),
                  e &&
                    u &&
                    e.type.toLowerCase() !== u.type.toLowerCase() &&
                    t.push('video codec "' + e.type + '" !== "' + u.type + '"'),
                  i &&
                    l &&
                    i.type.toLowerCase() !== l.type.toLowerCase() &&
                    t.push(
                      'audio codec "' + i.type + '" !== "' + l.type + '"'
                    )),
                t.length &&
                  ((n.excludeUntil = 1 / 0),
                  r.logger_("blacklisting " + n.id + ": " + t.join(" && ")))));
          });
        }),
        (t.updateAdCues_ = function (e) {
          var t = 0,
            i = this.seekable();
          i.length && (t = i.start(0)),
            (function (e, t, i) {
              if ((void 0 === i && (i = 0), e.segments))
                for (var n = i, r = 0; r < e.segments.length; r++) {
                  var a,
                    s,
                    o,
                    u = e.segments[r];
                  if (
                    (o =
                      o ||
                      (function (e, t) {
                        for (var i = e.cues, n = 0; n < i.length; n++) {
                          var r = i[n];
                          if (t >= r.adStartTime && t <= r.adEndTime) return r;
                        }
                        return null;
                      })(t, n + u.duration / 2))
                  ) {
                    if ("cueIn" in u) {
                      (o.endTime = n),
                        (o.adEndTime = n),
                        (n += u.duration),
                        (o = null);
                      continue;
                    }
                    if (n < o.endTime) {
                      n += u.duration;
                      continue;
                    }
                    o.endTime += u.duration;
                  } else
                    "cueOut" in u &&
                      (((o = new window.VTTCue(
                        n,
                        n + u.duration,
                        u.cueOut
                      )).adStartTime = n),
                      (o.adEndTime = n + parseFloat(u.cueOut)),
                      t.addCue(o)),
                      "cueOutCont" in u &&
                        ((a = (s = u.cueOutCont.split("/").map(parseFloat))[0]),
                        (s = s[1]),
                        ((o = new window.VTTCue(
                          n,
                          n + u.duration,
                          ""
                        )).adStartTime = n - a),
                        (o.adEndTime = o.adStartTime + s),
                        t.addCue(o));
                  n += u.duration;
                }
            })(e, this.cueTagsTrack_, t);
        }),
        (t.goalBufferLength = function () {
          var e = this.tech_.currentTime(),
            t = Sl.GOAL_BUFFER_LENGTH,
            i = Sl.GOAL_BUFFER_LENGTH_RATE,
            n = Math.max(t, Sl.MAX_GOAL_BUFFER_LENGTH);
          return Math.min(t + e * i, n);
        }),
        (t.bufferLowWaterLine = function () {
          var e = this.tech_.currentTime(),
            t = Sl.BUFFER_LOW_WATER_LINE,
            i = Sl.BUFFER_LOW_WATER_LINE_RATE,
            n = Math.max(t, Sl.MAX_BUFFER_LOW_WATER_LINE),
            r = Math.max(t, Sl.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);
          return Math.min(t + e * i, this.experimentalBufferBasedABR ? r : n);
        }),
        (t.bufferHighWaterLine = function () {
          return Sl.BUFFER_HIGH_WATER_LINE;
        }),
        e
      );
    })(tr.EventTarget),
    _c = ["seeking", "seeked", "pause", "playing", "error"],
    bc = (function () {
      function e(e) {
        var i = this;
        (this.masterPlaylistController_ = e.masterPlaylistController),
          (this.tech_ = e.tech),
          (this.seekable = e.seekable),
          (this.allowSeeksWithinUnsafeLiveWindow =
            e.allowSeeksWithinUnsafeLiveWindow),
          (this.liveRangeSafeTimeDelta = e.liveRangeSafeTimeDelta),
          (this.media = e.media),
          (this.consecutiveUpdates = 0),
          (this.lastRecordedTime = null),
          (this.timer_ = null),
          (this.checkCurrentTimeTimeout_ = null),
          (this.logger_ = Oo("PlaybackWatcher")),
          this.logger_("initialize");
        function t() {
          return i.monitorCurrentTime_();
        }
        function n() {
          return i.monitorCurrentTime_();
        }
        function r() {
          return i.techWaiting_();
        }
        function a() {
          return i.cancelTimer_();
        }
        var s = this.masterPlaylistController_,
          o = ["main", "subtitle", "audio"],
          u = {};
        o.forEach(function (e) {
          (u[e] = {
            reset: function () {
              return i.resetSegmentDownloads_(e);
            },
            updateend: function () {
              return i.checkSegmentDownloads_(e);
            },
          }),
            s[e + "SegmentLoader_"].on("appendsdone", u[e].updateend),
            s[e + "SegmentLoader_"].on("playlistupdate", u[e].reset),
            i.tech_.on(["seeked", "seeking"], u[e].reset);
        });
        function l(t) {
          ["main", "audio"].forEach(function (e) {
            s[e + "SegmentLoader_"][t]("appended", i.seekingAppendCheck_);
          });
        }
        (this.seekingAppendCheck_ = function () {
          i.fixesBadSeeks_() &&
            ((i.consecutiveUpdates = 0),
            (i.lastRecordedTime = i.tech_.currentTime()),
            l("off"));
        }),
          (this.clearSeekingAppendCheck_ = function () {
            return l("off");
          }),
          (this.watchForBadSeeking_ = function () {
            i.clearSeekingAppendCheck_(), l("on");
          }),
          this.tech_.on("seeked", this.clearSeekingAppendCheck_),
          this.tech_.on("seeking", this.watchForBadSeeking_),
          this.tech_.on("waiting", r),
          this.tech_.on(_c, a),
          this.tech_.on("canplay", n),
          this.tech_.one("play", t),
          (this.dispose = function () {
            i.clearSeekingAppendCheck_(),
              i.logger_("dispose"),
              i.tech_.off("waiting", r),
              i.tech_.off(_c, a),
              i.tech_.off("canplay", n),
              i.tech_.off("play", t),
              i.tech_.off("seeking", i.watchForBadSeeking_),
              i.tech_.off("seeked", i.clearSeekingAppendCheck_),
              o.forEach(function (e) {
                s[e + "SegmentLoader_"].off("appendsdone", u[e].updateend),
                  s[e + "SegmentLoader_"].off("playlistupdate", u[e].reset),
                  i.tech_.off(["seeked", "seeking"], u[e].reset);
              }),
              i.checkCurrentTimeTimeout_ &&
                window.clearTimeout(i.checkCurrentTimeTimeout_),
              i.cancelTimer_();
          });
      }
      var t = e.prototype;
      return (
        (t.monitorCurrentTime_ = function () {
          this.checkCurrentTime_(),
            this.checkCurrentTimeTimeout_ &&
              window.clearTimeout(this.checkCurrentTimeTimeout_),
            (this.checkCurrentTimeTimeout_ = window.setTimeout(
              this.monitorCurrentTime_.bind(this),
              250
            ));
        }),
        (t.resetSegmentDownloads_ = function (e) {
          var t = this.masterPlaylistController_[e + "SegmentLoader_"];
          0 < this[e + "StalledDownloads_"] &&
            this.logger_(
              "resetting possible stalled download count for " + e + " loader"
            ),
            (this[e + "StalledDownloads_"] = 0),
            (this[e + "Buffered_"] = t.buffered_());
        }),
        (t.checkSegmentDownloads_ = function (e) {
          var t = this.masterPlaylistController_,
            i = t[e + "SegmentLoader_"],
            n = i.buffered_(),
            r = (function (e, t) {
              if (e === t) return !1;
              if ((!e && t) || (!t && e)) return !0;
              if (e.length !== t.length) return !0;
              for (var i = 0; i < e.length; i++)
                if (e.start(i) !== t.start(i) || e.end(i) !== t.end(i))
                  return !0;
              return !1;
            })(this[e + "Buffered_"], n);
          (this[e + "Buffered_"] = n),
            r
              ? this.resetSegmentDownloads_(e)
              : (this[e + "StalledDownloads_"]++,
                this.logger_(
                  "found #" +
                    this[e + "StalledDownloads_"] +
                    " " +
                    e +
                    " appends that did not increase buffer (possible stalled download)",
                  { playlistId: i.playlist_ && i.playlist_.id, buffered: Bo(n) }
                ),
                this[e + "StalledDownloads_"] < 10 ||
                  (this.logger_(e + " loader stalled download exclusion"),
                  this.resetSegmentDownloads_(e),
                  this.tech_.trigger({
                    type: "usage",
                    name: "vhs-" + e + "-download-exclusion",
                  }),
                  "subtitle" !== e &&
                    t.blacklistCurrentPlaylist(
                      {
                        message:
                          "Excessive " + e + " segment downloading detected.",
                      },
                      1 / 0
                    )));
        }),
        (t.checkCurrentTime_ = function () {
          if (!this.tech_.paused() && !this.tech_.seeking()) {
            var e = this.tech_.currentTime(),
              t = this.tech_.buffered();
            if (
              this.lastRecordedTime === e &&
              (!t.length || e + 0.1 >= t.end(t.length - 1))
            )
              return this.techWaiting_();
            5 <= this.consecutiveUpdates && e === this.lastRecordedTime
              ? (this.consecutiveUpdates++, this.waiting_())
              : e === this.lastRecordedTime
              ? this.consecutiveUpdates++
              : ((this.consecutiveUpdates = 0), (this.lastRecordedTime = e));
          }
        }),
        (t.cancelTimer_ = function () {
          (this.consecutiveUpdates = 0),
            this.timer_ &&
              (this.logger_("cancelTimer_"), clearTimeout(this.timer_)),
            (this.timer_ = null);
        }),
        (t.fixesBadSeeks_ = function () {
          if (!this.tech_.seeking()) return !1;
          var e,
            t = this.seekable(),
            i = this.tech_.currentTime();
          if (
            (this.afterSeekableWindow_(
              t,
              i,
              this.media(),
              this.allowSeeksWithinUnsafeLiveWindow
            ) && (e = t.end(t.length - 1)),
            "undefined" !=
              typeof (e = this.beforeSeekableWindow_(t, i)
                ? (a = t.start(0)) + (a === t.end(0) ? 0 : 0.1)
                : e))
          )
            return (
              this.logger_(
                "Trying to seek outside of seekable at time " +
                  i +
                  " with seekable range " +
                  Uo(t) +
                  ". Seeking to " +
                  e +
                  "."
              ),
              this.tech_.setCurrentTime(e),
              !0
            );
          for (
            var n = this.masterPlaylistController_.sourceUpdater_,
              r = this.tech_.buffered(),
              a = n.audioBuffer ? n.audioBuffered() : null,
              t = n.videoBuffer ? n.videoBuffered() : null,
              n = this.media(),
              s = n.partTargetDuration || 2 * (n.targetDuration - hl),
              o = [a, t],
              u = 0;
            u < o.length;
            u++
          )
            if (o[u]) if (jo(o[u], i) < s) return !1;
          r = No(r, i);
          return (
            0 !== r.length &&
            ((e = r.start(0) + 0.1),
            this.logger_(
              "Buffered region starts (" +
                r.start(0) +
                ")  just beyond seek point (" +
                i +
                "). Seeking to " +
                e +
                "."
            ),
            this.tech_.setCurrentTime(e),
            !0)
          );
        }),
        (t.waiting_ = function () {
          var e, t;
          this.techWaiting_() ||
            ((e = this.tech_.currentTime()),
            (t = this.tech_.buffered()),
            (t = Mo(t, e)).length &&
              e + 3 <= t.end(0) &&
              (this.cancelTimer_(),
              this.tech_.setCurrentTime(e),
              this.logger_(
                "Stopped at " +
                  e +
                  " while inside a buffered region [" +
                  t.start(0) +
                  " -> " +
                  t.end(0) +
                  "]. Attempting to resume playback by seeking to the current time."
              ),
              this.tech_.trigger({
                type: "usage",
                name: "vhs-unknown-waiting",
              }),
              this.tech_.trigger({
                type: "usage",
                name: "hls-unknown-waiting",
              })));
        }),
        (t.techWaiting_ = function () {
          var e = this.seekable(),
            t = this.tech_.currentTime();
          if (this.tech_.seeking() || null !== this.timer_) return !0;
          if (this.beforeSeekableWindow_(e, t)) {
            var i = e.end(e.length - 1);
            return (
              this.logger_(
                "Fell out of live window at time " +
                  t +
                  ". Seeking to live point (seekable end) " +
                  i
              ),
              this.cancelTimer_(),
              this.tech_.setCurrentTime(i),
              this.tech_.trigger({ type: "usage", name: "vhs-live-resync" }),
              this.tech_.trigger({ type: "usage", name: "hls-live-resync" }),
              !0
            );
          }
          (e = this.tech_.vhs.masterPlaylistController_.sourceUpdater_),
            (i = this.tech_.buffered());
          if (
            this.videoUnderflow_({
              audioBuffered: e.audioBuffered(),
              videoBuffered: e.videoBuffered(),
              currentTime: t,
            })
          )
            return (
              this.cancelTimer_(),
              this.tech_.setCurrentTime(t),
              this.tech_.trigger({
                type: "usage",
                name: "vhs-video-underflow",
              }),
              this.tech_.trigger({
                type: "usage",
                name: "hls-video-underflow",
              }),
              !0
            );
          e = No(i, t);
          if (0 < e.length) {
            i = e.start(0) - t;
            return (
              this.logger_(
                "Stopped at " +
                  t +
                  ", setting timer for " +
                  i +
                  ", seeking to " +
                  e.start(0)
              ),
              this.cancelTimer_(),
              (this.timer_ = setTimeout(
                this.skipTheGap_.bind(this),
                1e3 * i,
                t
              )),
              !0
            );
          }
          return !1;
        }),
        (t.afterSeekableWindow_ = function (e, t, i, n) {
          if ((void 0 === n && (n = !1), !e.length)) return !1;
          var r = e.end(e.length - 1) + 0.1;
          return (
            (r =
              !i.endList && n
                ? e.end(e.length - 1) + 3 * i.targetDuration
                : r) < t
          );
        }),
        (t.beforeSeekableWindow_ = function (e, t) {
          return !!(
            e.length &&
            0 < e.start(0) &&
            t < e.start(0) - this.liveRangeSafeTimeDelta
          );
        }),
        (t.videoUnderflow_ = function (e) {
          var t,
            i,
            n = e.videoBuffered,
            r = e.audioBuffered,
            a = e.currentTime;
          if (n)
            return (
              n.length && r.length
                ? ((i = Mo(n, a - 3)),
                  (e = Mo(n, a)),
                  (r = Mo(r, a)).length &&
                    !e.length &&
                    i.length &&
                    (t = { start: i.end(0), end: r.end(0) }))
                : No(n, a).length || (t = this.gapFromVideoUnderflow_(n, a)),
              !!t &&
                (this.logger_(
                  "Encountered a gap in video from " +
                    t.start +
                    " to " +
                    t.end +
                    ". Seeking to current time " +
                    a
                ),
                !0)
            );
        }),
        (t.skipTheGap_ = function (e) {
          var t = this.tech_.buffered(),
            i = this.tech_.currentTime(),
            t = No(t, i);
          this.cancelTimer_(),
            0 !== t.length &&
              i === e &&
              (this.logger_(
                "skipTheGap_:",
                "currentTime:",
                i,
                "scheduled currentTime:",
                e,
                "nextRange start:",
                t.start(0)
              ),
              this.tech_.setCurrentTime(t.start(0) + hl),
              this.tech_.trigger({ type: "usage", name: "vhs-gap-skip" }),
              this.tech_.trigger({ type: "usage", name: "hls-gap-skip" }));
        }),
        (t.gapFromVideoUnderflow_ = function (e, t) {
          for (
            var i = (function (e) {
                if (e.length < 2) return tr.createTimeRanges();
                for (var t = [], i = 1; i < e.length; i++) {
                  var n = e.end(i - 1),
                    r = e.start(i);
                  t.push([n, r]);
                }
                return tr.createTimeRanges(t);
              })(e),
              n = 0;
            n < i.length;
            n++
          ) {
            var r = i.start(n),
              a = i.end(n);
            if (t - r < 4 && 2 < t - r) return { start: r, end: a };
          }
          return null;
        }),
        e
      );
    })(),
    Tc = {
      errorInterval: 30,
      getSource: function (e) {
        return e(
          this.tech({ IWillNotUseThisInPlugins: !0 }).currentSource_ ||
            this.currentSource()
        );
      },
    },
    Sc = {
      PlaylistLoader: yl,
      Playlist: fl,
      utils: zt,
      STANDARD_PLAYLIST_SELECTOR: ar,
      INITIAL_PLAYLIST_SELECTOR: function () {
        var t = this,
          e = this.playlists.master.playlists.filter(fl.isEnabled);
        return (
          Ju(e, Zu),
          e.filter(function (e) {
            return !!Yu(t.playlists.master, e).video;
          })[0] || null
        );
      },
      lastBandwidthSelector: ar,
      movingAverageBandwidthSelector: function (t) {
        var i = -1,
          n = -1;
        if (t < 0 || 1 < t)
          throw new Error(
            "Moving average bandwidth decay must be between 0 and 1."
          );
        return function () {
          var e = (this.useDevicePixelRatio && window.devicePixelRatio) || 1;
          return (
            i < 0 && ((i = this.systemBandwidth), (n = this.systemBandwidth)),
            0 < this.systemBandwidth &&
              this.systemBandwidth !== n &&
              ((i = t * this.systemBandwidth + (1 - t) * i),
              (n = this.systemBandwidth)),
            el(
              this.playlists.master,
              i,
              parseInt($u(this.tech_.el(), "width"), 10) * e,
              parseInt($u(this.tech_.el(), "height"), 10) * e,
              this.limitRenditionByPlayerDimensions,
              this.masterPlaylistController_
            )
          );
        };
      },
      comparePlaylistBandwidth: Zu,
      comparePlaylistResolution: function (e, t) {
        var i, n;
        return (i =
          (i =
            e.attributes.RESOLUTION && e.attributes.RESOLUTION.width
              ? e.attributes.RESOLUTION.width
              : i) || window.Number.MAX_VALUE) ===
          (n =
            (n =
              t.attributes.RESOLUTION && t.attributes.RESOLUTION.width
                ? t.attributes.RESOLUTION.width
                : n) || window.Number.MAX_VALUE) &&
          e.attributes.BANDWIDTH &&
          t.attributes.BANDWIDTH
          ? e.attributes.BANDWIDTH - t.attributes.BANDWIDTH
          : i - n;
      },
      xhr: mu(),
    };
  Object.keys(Sl).forEach(function (t) {
    Object.defineProperty(Sc, t, {
      get: function () {
        return (
          tr.log.warn(
            "using Vhs." + t + " is UNSAFE be sure you know what you are doing"
          ),
          Sl[t]
        );
      },
      set: function (e) {
        tr.log.warn(
          "using Vhs." + t + " is UNSAFE be sure you know what you are doing"
        ),
          "number" != typeof e || e < 0
            ? tr.log.warn(
                "value of Vhs." + t + " must be greater than or equal to 0"
              )
            : (Sl[t] = e);
      },
    });
  });
  function wc(e, t) {
    for (var i = t.media(), n = -1, r = 0; r < e.length; r++)
      if (e[r].id === i.id) {
        n = r;
        break;
      }
    (e.selectedIndex_ = n), e.trigger({ selectedIndex: n, type: "change" });
  }
  var Ec = "videojs-vhs";
  Sc.canPlaySource = function () {
    return tr.log.warn(
      "HLS is no longer a tech. Please remove it from your player's techOrder."
    );
  };
  function kc(e) {
    var n = e.player,
      t = e.sourceKeySystems,
      i = e.audioMedia,
      e = e.mainPlaylists;
    if (!n.eme.initializeMediaKeys) return Promise.resolve();
    var r,
      e =
        ((e = e = i ? e.concat([i]) : e),
        (r = Object.keys(t)),
        e.reduce(function (e, n) {
          if (!n.contentProtection) return e;
          var t = r.reduce(function (e, t) {
            var i = n.contentProtection[t];
            return i && i.pssh && (e[t] = { pssh: i.pssh }), e;
          }, {});
          return Object.keys(t).length && e.push(t), e;
        }, [])),
      a = [],
      s = [];
    return (
      e.forEach(function (e) {
        s.push(
          new Promise(function (e, t) {
            n.tech_.one("keysessioncreated", e);
          })
        ),
          a.push(
            new Promise(function (t, i) {
              n.eme.initializeMediaKeys({ keySystems: e }, function (e) {
                e ? i(e) : t();
              });
            })
          );
      }),
      Promise.race([Promise.all(a), Promise.race(s)])
    );
  }
  function Cc(e) {
    var t = e.player;
    return (
      !!(e = (function (e, t, i) {
        if (!e) return e;
        var n = {};
        t &&
          t.attributes &&
          t.attributes.CODECS &&
          (n = Xu(pr(t.attributes.CODECS))),
          i &&
            i.attributes &&
            i.attributes.CODECS &&
            (n.audio = i.attributes.CODECS);
        var r,
          a = mr(n.video),
          s = mr(n.audio),
          o = {};
        for (r in e)
          (o[r] = {}),
            s && (o[r].audioContentType = s),
            a && (o[r].videoContentType = a),
            t.contentProtection &&
              t.contentProtection[r] &&
              t.contentProtection[r].pssh &&
              (o[r].pssh = t.contentProtection[r].pssh),
            "string" == typeof e[r] && (o[r].url = e[r]);
        return tr.mergeOptions(e, o);
      })(e.sourceKeySystems, e.media, e.audioMedia)) &&
      (!((t.currentSource().keySystems = e) && !t.eme) ||
        (tr.log.warn(
          "DRM encrypted source cannot be decrypted without a DRM plugin"
        ),
        !1))
    );
  }
  function Ic() {
    if (!window.localStorage) return null;
    var e = window.localStorage.getItem(Ec);
    if (!e) return null;
    try {
      return JSON.parse(e);
    } catch (e) {
      return null;
    }
  }
  (Sc.supportsNativeHls = (function () {
    if (!document || !document.createElement) return !1;
    var t = document.createElement("video");
    if (!tr.getTech("Html5").isSupported()) return !1;
    return [
      "application/vnd.apple.mpegurl",
      "audio/mpegurl",
      "audio/x-mpegurl",
      "application/x-mpegurl",
      "video/x-mpegurl",
      "video/mpegurl",
      "application/mpegurl",
    ].some(function (e) {
      return /maybe|probably/i.test(t.canPlayType(e));
    });
  })()),
    (Sc.supportsNativeDash =
      !!(
        document &&
        document.createElement &&
        tr.getTech("Html5").isSupported()
      ) &&
      /maybe|probably/i.test(
        document.createElement("video").canPlayType("application/dash+xml")
      )),
    (Sc.supportsTypeNatively = function (e) {
      return "hls" === e
        ? Sc.supportsNativeHls
        : "dash" === e && Sc.supportsNativeDash;
    }),
    (Sc.isSupported = function () {
      return tr.log.warn(
        "HLS is no longer a tech. Please remove it from your player's techOrder."
      );
    });
  var xc = (function (r) {
      function e(e, t, i) {
        var n = r.call(this, t, tr.mergeOptions(i.hls, i.vhs)) || this;
        if (
          (i.hls &&
            Object.keys(i.hls).length &&
            tr.log.warn("Using hls options is deprecated. Use vhs instead."),
          "number" == typeof i.initialBandwidth &&
            (n.options_.bandwidth = i.initialBandwidth),
          (n.logger_ = Oo("VhsHandler")),
          t.options_ &&
            t.options_.playerId &&
            ((i = tr(t.options_.playerId)).hasOwnProperty("hls") ||
              Object.defineProperty(i, "hls", {
                get: function () {
                  return (
                    tr.log.warn(
                      "player.hls is deprecated. Use player.tech().vhs instead."
                    ),
                    t.trigger({ type: "usage", name: "hls-player-access" }),
                    ft(n)
                  );
                },
                configurable: !0,
              }),
            i.hasOwnProperty("vhs") ||
              Object.defineProperty(i, "vhs", {
                get: function () {
                  return (
                    tr.log.warn(
                      "player.vhs is deprecated. Use player.tech().vhs instead."
                    ),
                    t.trigger({ type: "usage", name: "vhs-player-access" }),
                    ft(n)
                  );
                },
                configurable: !0,
              }),
            i.hasOwnProperty("dash") ||
              Object.defineProperty(i, "dash", {
                get: function () {
                  return (
                    tr.log.warn(
                      "player.dash is deprecated. Use player.tech().vhs instead."
                    ),
                    ft(n)
                  );
                },
                configurable: !0,
              }),
            (n.player_ = i)),
          (n.tech_ = t),
          (n.source_ = e),
          (n.stats = {}),
          (n.ignoreNextSeekingEvent_ = !1),
          n.setOptions_(),
          n.options_.overrideNative &&
            t.overrideNativeAudioTracks &&
            t.overrideNativeVideoTracks)
        )
          t.overrideNativeAudioTracks(!0), t.overrideNativeVideoTracks(!0);
        else if (
          n.options_.overrideNative &&
          (t.featuresNativeVideoTracks || t.featuresNativeAudioTracks)
        )
          throw new Error(
            "Overriding native HLS requires emulated tracks. See https://git.io/vMpjB"
          );
        return (
          n.on(
            document,
            [
              "fullscreenchange",
              "webkitfullscreenchange",
              "mozfullscreenchange",
              "MSFullscreenChange",
            ],
            function (e) {
              var t =
                document.fullscreenElement ||
                document.webkitFullscreenElement ||
                document.mozFullScreenElement ||
                document.msFullscreenElement;
              t && t.contains(n.tech_.el())
                ? n.masterPlaylistController_.fastQualityChange_()
                : n.masterPlaylistController_.checkABR_();
            }
          ),
          n.on(n.tech_, "seeking", function () {
            this.ignoreNextSeekingEvent_
              ? (this.ignoreNextSeekingEvent_ = !1)
              : this.setCurrentTime(this.tech_.currentTime());
          }),
          n.on(n.tech_, "error", function () {
            this.tech_.error() &&
              this.masterPlaylistController_ &&
              this.masterPlaylistController_.pauseLoading();
          }),
          n.on(n.tech_, "play", n.play),
          n
        );
      }
      mt(e, r);
      var t = e.prototype;
      return (
        (t.setOptions_ = function () {
          var e,
            t = this;
          (this.options_.withCredentials = this.options_.withCredentials || !1),
            (this.options_.handleManifestRedirects =
              !1 !== this.options_.handleManifestRedirects),
            (this.options_.limitRenditionByPlayerDimensions =
              !1 !== this.options_.limitRenditionByPlayerDimensions),
            (this.options_.useDevicePixelRatio =
              this.options_.useDevicePixelRatio || !1),
            (this.options_.smoothQualityChange =
              this.options_.smoothQualityChange || !1),
            (this.options_.useBandwidthFromLocalStorage =
              "undefined" != typeof this.source_.useBandwidthFromLocalStorage
                ? this.source_.useBandwidthFromLocalStorage
                : this.options_.useBandwidthFromLocalStorage || !1),
            (this.options_.useNetworkInformationApi =
              this.options_.useNetworkInformationApi || !1),
            (this.options_.customTagParsers =
              this.options_.customTagParsers || []),
            (this.options_.customTagMappers =
              this.options_.customTagMappers || []),
            (this.options_.cacheEncryptionKeys =
              this.options_.cacheEncryptionKeys || !1),
            "number" != typeof this.options_.blacklistDuration &&
              (this.options_.blacklistDuration = 300),
            "number" != typeof this.options_.bandwidth &&
              this.options_.useBandwidthFromLocalStorage &&
              ((e = Ic()) &&
                e.bandwidth &&
                ((this.options_.bandwidth = e.bandwidth),
                this.tech_.trigger({
                  type: "usage",
                  name: "vhs-bandwidth-from-local-storage",
                }),
                this.tech_.trigger({
                  type: "usage",
                  name: "hls-bandwidth-from-local-storage",
                })),
              e &&
                e.throughput &&
                ((this.options_.throughput = e.throughput),
                this.tech_.trigger({
                  type: "usage",
                  name: "vhs-throughput-from-local-storage",
                }),
                this.tech_.trigger({
                  type: "usage",
                  name: "hls-throughput-from-local-storage",
                }))),
            "number" != typeof this.options_.bandwidth &&
              (this.options_.bandwidth = Sl.INITIAL_BANDWIDTH),
            (this.options_.enableLowInitialPlaylist =
              this.options_.enableLowInitialPlaylist &&
              this.options_.bandwidth === Sl.INITIAL_BANDWIDTH),
            [
              "withCredentials",
              "useDevicePixelRatio",
              "limitRenditionByPlayerDimensions",
              "bandwidth",
              "smoothQualityChange",
              "customTagParsers",
              "customTagMappers",
              "handleManifestRedirects",
              "cacheEncryptionKeys",
              "playlistSelector",
              "initialPlaylistSelector",
              "experimentalBufferBasedABR",
              "liveRangeSafeTimeDelta",
              "experimentalLLHLS",
              "useNetworkInformationApi",
              "experimentalExactManifestTimings",
              "experimentalLeastPixelDiffSelector",
            ].forEach(function (e) {
              "undefined" != typeof t.source_[e] &&
                (t.options_[e] = t.source_[e]);
            }),
            (this.limitRenditionByPlayerDimensions =
              this.options_.limitRenditionByPlayerDimensions),
            (this.useDevicePixelRatio = this.options_.useDevicePixelRatio);
        }),
        (t.src = function (e, t) {
          var n = this;
          e &&
            (this.setOptions_(),
            (this.options_.src =
              0 ===
              (e = this.source_.src)
                .toLowerCase()
                .indexOf("data:application/vnd.videojs.vhs+json,")
                ? JSON.parse(e.substring(e.indexOf(",") + 1))
                : e),
            (this.options_.tech = this.tech_),
            (this.options_.externVhs = Sc),
            (this.options_.sourceType = vr(t)),
            (this.options_.seekTo = function (e) {
              n.tech_.setCurrentTime(e);
            }),
            this.options_.smoothQualityChange &&
              tr.log.warn(
                "smoothQualityChange is deprecated and will be removed in the next major version"
              ),
            (this.masterPlaylistController_ = new vc(this.options_)),
            (t = tr.mergeOptions(
              { liveRangeSafeTimeDelta: 0.1 },
              this.options_,
              {
                seekable: function () {
                  return n.seekable();
                },
                media: function () {
                  return n.masterPlaylistController_.media();
                },
                masterPlaylistController: this.masterPlaylistController_,
              }
            )),
            (this.playbackWatcher_ = new bc(t)),
            this.masterPlaylistController_.on("error", function () {
              var e = tr.players[n.tech_.options_.playerId],
                t = n.masterPlaylistController_.error;
              "object" != typeof t || t.code
                ? "string" == typeof t && (t = { message: t, code: 3 })
                : (t.code = 3),
                e.error(t);
            }),
            (t = this.options_.experimentalBufferBasedABR
              ? Sc.movingAverageBandwidthSelector(0.55)
              : Sc.STANDARD_PLAYLIST_SELECTOR),
            (this.masterPlaylistController_.selectPlaylist = (
              this.selectPlaylist || t
            ).bind(this)),
            (this.masterPlaylistController_.selectInitialPlaylist =
              Sc.INITIAL_PLAYLIST_SELECTOR.bind(this)),
            (this.playlists =
              this.masterPlaylistController_.masterPlaylistLoader_),
            (this.mediaSource = this.masterPlaylistController_.mediaSource),
            Object.defineProperties(this, {
              selectPlaylist: {
                get: function () {
                  return this.masterPlaylistController_.selectPlaylist;
                },
                set: function (e) {
                  this.masterPlaylistController_.selectPlaylist = e.bind(this);
                },
              },
              throughput: {
                get: function () {
                  return this.masterPlaylistController_.mainSegmentLoader_
                    .throughput.rate;
                },
                set: function (e) {
                  (this.masterPlaylistController_.mainSegmentLoader_.throughput.rate =
                    e),
                    (this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1);
                },
              },
              bandwidth: {
                get: function () {
                  var e =
                      this.masterPlaylistController_.mainSegmentLoader_
                        .bandwidth,
                    t =
                      window.navigator.connection ||
                      window.navigator.mozConnection ||
                      window.navigator.webkitConnection;
                  return (e =
                    this.options_.useNetworkInformationApi && t
                      ? 1e7 <= (t = 1e3 * t.downlink * 1e3) && 1e7 <= e
                        ? Math.max(e, t)
                        : t
                      : e);
                },
                set: function (e) {
                  (this.masterPlaylistController_.mainSegmentLoader_.bandwidth =
                    e),
                    (this.masterPlaylistController_.mainSegmentLoader_.throughput =
                      { rate: 0, count: 0 });
                },
              },
              systemBandwidth: {
                get: function () {
                  var e = 1 / (this.bandwidth || 1),
                    t = 0 < this.throughput ? 1 / this.throughput : 0;
                  return Math.floor(1 / (e + t));
                },
                set: function () {
                  tr.log.error('The "systemBandwidth" property is read-only');
                },
              },
            }),
            this.options_.bandwidth &&
              (this.bandwidth = this.options_.bandwidth),
            this.options_.throughput &&
              (this.throughput = this.options_.throughput),
            Object.defineProperties(this.stats, {
              bandwidth: {
                get: function () {
                  return n.bandwidth || 0;
                },
                enumerable: !0,
              },
              mediaRequests: {
                get: function () {
                  return n.masterPlaylistController_.mediaRequests_() || 0;
                },
                enumerable: !0,
              },
              mediaRequestsAborted: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mediaRequestsAborted_() || 0
                  );
                },
                enumerable: !0,
              },
              mediaRequestsTimedout: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mediaRequestsTimedout_() || 0
                  );
                },
                enumerable: !0,
              },
              mediaRequestsErrored: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mediaRequestsErrored_() || 0
                  );
                },
                enumerable: !0,
              },
              mediaTransferDuration: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mediaTransferDuration_() || 0
                  );
                },
                enumerable: !0,
              },
              mediaBytesTransferred: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mediaBytesTransferred_() || 0
                  );
                },
                enumerable: !0,
              },
              mediaSecondsLoaded: {
                get: function () {
                  return n.masterPlaylistController_.mediaSecondsLoaded_() || 0;
                },
                enumerable: !0,
              },
              mediaAppends: {
                get: function () {
                  return n.masterPlaylistController_.mediaAppends_() || 0;
                },
                enumerable: !0,
              },
              mainAppendsToLoadedData: {
                get: function () {
                  return (
                    n.masterPlaylistController_.mainAppendsToLoadedData_() || 0
                  );
                },
                enumerable: !0,
              },
              audioAppendsToLoadedData: {
                get: function () {
                  return (
                    n.masterPlaylistController_.audioAppendsToLoadedData_() || 0
                  );
                },
                enumerable: !0,
              },
              appendsToLoadedData: {
                get: function () {
                  return (
                    n.masterPlaylistController_.appendsToLoadedData_() || 0
                  );
                },
                enumerable: !0,
              },
              timeToLoadedData: {
                get: function () {
                  return n.masterPlaylistController_.timeToLoadedData_() || 0;
                },
                enumerable: !0,
              },
              buffered: {
                get: function () {
                  return Bo(n.tech_.buffered());
                },
                enumerable: !0,
              },
              currentTime: {
                get: function () {
                  return n.tech_.currentTime();
                },
                enumerable: !0,
              },
              currentSource: {
                get: function () {
                  return n.tech_.currentSource_;
                },
                enumerable: !0,
              },
              currentTech: {
                get: function () {
                  return n.tech_.name_;
                },
                enumerable: !0,
              },
              duration: {
                get: function () {
                  return n.tech_.duration();
                },
                enumerable: !0,
              },
              master: {
                get: function () {
                  return n.playlists.master;
                },
                enumerable: !0,
              },
              playerDimensions: {
                get: function () {
                  return n.tech_.currentDimensions();
                },
                enumerable: !0,
              },
              seekable: {
                get: function () {
                  return Bo(n.tech_.seekable());
                },
                enumerable: !0,
              },
              timestamp: {
                get: function () {
                  return Date.now();
                },
                enumerable: !0,
              },
              videoPlaybackQuality: {
                get: function () {
                  return n.tech_.getVideoPlaybackQuality();
                },
                enumerable: !0,
              },
            }),
            this.tech_.one(
              "canplay",
              this.masterPlaylistController_.setupFirstPlay.bind(
                this.masterPlaylistController_
              )
            ),
            this.tech_.on("bandwidthupdate", function () {
              n.options_.useBandwidthFromLocalStorage &&
                (function (e) {
                  if (!window.localStorage) return;
                  var t = (t = Ic()) ? tr.mergeOptions(t, e) : e;
                  try {
                    window.localStorage.setItem(Ec, JSON.stringify(t));
                  } catch (e) {
                    return;
                  }
                })({
                  bandwidth: n.bandwidth,
                  throughput: Math.round(n.throughput),
                });
            }),
            this.masterPlaylistController_.on(
              "selectedinitialmedia",
              function () {
                var i;
                (i = n).representations = function () {
                  var e = i.masterPlaylistController_.master(),
                    e = nu(e)
                      ? i.masterPlaylistController_.getAudioTrackPlaylists_()
                      : e.playlists;
                  return e
                    ? e
                        .filter(function (e) {
                          return !$o(e);
                        })
                        .map(function (e, t) {
                          return new zl(i, e, e.id);
                        })
                    : [];
                };
              }
            ),
            this.masterPlaylistController_.sourceUpdater_.on(
              "createdsourcebuffers",
              function () {
                n.setupEme_();
              }
            ),
            this.on(this.masterPlaylistController_, "progress", function () {
              this.tech_.trigger("progress");
            }),
            this.on(this.masterPlaylistController_, "firstplay", function () {
              this.ignoreNextSeekingEvent_ = !0;
            }),
            this.setupQualityLevels_(),
            this.tech_.el() &&
              ((this.mediaSourceUrl_ = window.URL.createObjectURL(
                this.masterPlaylistController_.mediaSource
              )),
              this.tech_.src(this.mediaSourceUrl_)));
        }),
        (t.createKeySessions_ = function () {
          var t = this,
            e =
              this.masterPlaylistController_.mediaTypes_.AUDIO
                .activePlaylistLoader;
          this.logger_("waiting for EME key session creation"),
            kc({
              player: this.player_,
              sourceKeySystems: this.source_.keySystems,
              audioMedia: e && e.media(),
              mainPlaylists: this.playlists.master.playlists,
            })
              .then(function () {
                t.logger_("created EME key session"),
                  t.masterPlaylistController_.sourceUpdater_.initializedEme();
              })
              .catch(function (e) {
                t.logger_("error while creating EME key session", e),
                  t.player_.error({
                    message: "Failed to initialize media keys for EME",
                    code: 3,
                  });
              });
        }),
        (t.handleWaitingForKey_ = function () {
          this.logger_(
            "waitingforkey fired, attempting to create any new key sessions"
          ),
            this.createKeySessions_();
        }),
        (t.setupEme_ = function () {
          var t = this,
            e =
              this.masterPlaylistController_.mediaTypes_.AUDIO
                .activePlaylistLoader,
            e = Cc({
              player: this.player_,
              sourceKeySystems: this.source_.keySystems,
              media: this.playlists.media(),
              audioMedia: e && e.media(),
            });
          this.player_.tech_.on("keystatuschange", function (e) {
            "output-restricted" === e.status &&
              t.masterPlaylistController_.blacklistCurrentPlaylist({
                playlist: t.masterPlaylistController_.media(),
                message:
                  "DRM keystatus changed to " +
                  e.status +
                  ". Playlist will fail to play. Check for HDCP content.",
                blacklistDuration: 1 / 0,
              });
          }),
            (this.handleWaitingForKey_ = this.handleWaitingForKey_.bind(this)),
            this.player_.tech_.on("waitingforkey", this.handleWaitingForKey_),
            11 !== tr.browser.IE_VERSION && e
              ? this.createKeySessions_()
              : this.masterPlaylistController_.sourceUpdater_.initializedEme();
        }),
        (t.setupQualityLevels_ = function () {
          var i = this,
            e = tr.players[this.tech_.options_.playerId];
          e &&
            e.qualityLevels &&
            !this.qualityLevels_ &&
            ((this.qualityLevels_ = e.qualityLevels()),
            this.masterPlaylistController_.on(
              "selectedinitialmedia",
              function () {
                var t, e;
                (t = i.qualityLevels_),
                  (e = i).representations().forEach(function (e) {
                    t.addQualityLevel(e);
                  }),
                  wc(t, e.playlists);
              }
            ),
            this.playlists.on("mediachange", function () {
              wc(i.qualityLevels_, i.playlists);
            }));
        }),
        (e.version = function () {
          return {
            "@videojs/http-streaming": "2.13.1",
            "mux.js": "6.0.1",
            "mpd-parser": "0.21.0",
            "m3u8-parser": "4.7.0",
            "aes-decrypter": "3.1.2",
          };
        }),
        (t.version = function () {
          return this.constructor.version();
        }),
        (t.canChangeType = function () {
          return sc.canChangeType();
        }),
        (t.play = function () {
          this.masterPlaylistController_.play();
        }),
        (t.setCurrentTime = function (e) {
          this.masterPlaylistController_.setCurrentTime(e);
        }),
        (t.duration = function () {
          return this.masterPlaylistController_.duration();
        }),
        (t.seekable = function () {
          return this.masterPlaylistController_.seekable();
        }),
        (t.dispose = function () {
          this.playbackWatcher_ && this.playbackWatcher_.dispose(),
            this.masterPlaylistController_ &&
              this.masterPlaylistController_.dispose(),
            this.qualityLevels_ && this.qualityLevels_.dispose(),
            this.player_ &&
              (delete this.player_.vhs,
              delete this.player_.dash,
              delete this.player_.hls),
            this.tech_ && this.tech_.vhs && delete this.tech_.vhs,
            this.tech_ && delete this.tech_.hls,
            this.mediaSourceUrl_ &&
              window.URL.revokeObjectURL &&
              (window.URL.revokeObjectURL(this.mediaSourceUrl_),
              (this.mediaSourceUrl_ = null)),
            this.tech_ &&
              this.tech_.off("waitingforkey", this.handleWaitingForKey_),
            r.prototype.dispose.call(this);
        }),
        (t.convertToProgramTime = function (e, t) {
          return wu({
            playlist: this.masterPlaylistController_.media(),
            time: e,
            callback: t,
          });
        }),
        (t.seekToProgramTime = function (e, t, i, n) {
          return (
            void 0 === i && (i = !0),
            void 0 === n && (n = 2),
            Eu({
              programTime: e,
              playlist: this.masterPlaylistController_.media(),
              retryCount: n,
              pauseAfterSeek: i,
              seekTo: this.options_.seekTo,
              tech: this.options_.tech,
              callback: t,
            })
          );
        }),
        e
      );
    })(tr.getComponent("Component")),
    Ac = {
      name: "videojs-http-streaming",
      VERSION: "2.13.1",
      canHandleSource: function (e, t) {
        t = tr.mergeOptions(tr.options, (t = void 0 === t ? {} : t));
        return Ac.canPlayType(e.type, t);
      },
      handleSource: function (e, t, i) {
        i = tr.mergeOptions(tr.options, (i = void 0 === i ? {} : i));
        return (
          (t.vhs = new xc(e, t, i)),
          tr.hasOwnProperty("hls") ||
            Object.defineProperty(t, "hls", {
              get: function () {
                return (
                  tr.log.warn(
                    "player.tech().hls is deprecated. Use player.tech().vhs instead."
                  ),
                  t.vhs
                );
              },
              configurable: !0,
            }),
          (t.vhs.xhr = mu()),
          t.vhs.src(e.src, e.type),
          t.vhs
        );
      },
      canPlayType: function (e, t) {
        var i = tr.mergeOptions(tr.options, (t = void 0 === t ? {} : t)),
          t = i.vhs,
          t = (t = void 0 === t ? {} : t).overrideNative,
          t = void 0 === t ? !tr.browser.IS_ANY_SAFARI : t,
          i = i.hls,
          i = (i = void 0 === i ? {} : i).overrideNative,
          i = void 0 !== i && i,
          e = vr(e);
        return e && (!Sc.supportsTypeNatively(e) || i || t) ? "maybe" : "";
      },
    };
  return (
    gr("avc1.4d400d,mp4a.40.2") &&
      tr.getTech("Html5").registerSourceHandler(Ac, 0),
    (tr.VhsHandler = xc),
    Object.defineProperty(tr, "HlsHandler", {
      get: function () {
        return (
          tr.log.warn(
            "videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."
          ),
          xc
        );
      },
      configurable: !0,
    }),
    (tr.VhsSourceHandler = Ac),
    Object.defineProperty(tr, "HlsSourceHandler", {
      get: function () {
        return (
          tr.log.warn(
            "videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."
          ),
          Ac
        );
      },
      configurable: !0,
    }),
    (tr.Vhs = Sc),
    Object.defineProperty(tr, "Hls", {
      get: function () {
        return (
          tr.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."), Sc
        );
      },
      configurable: !0,
    }),
    tr.use ||
      (tr.registerComponent("Hls", Sc), tr.registerComponent("Vhs", Sc)),
    (tr.options.vhs = tr.options.vhs || {}),
    (tr.options.hls = tr.options.hls || {}),
    (tr.getPlugin && tr.getPlugin("reloadSourceOnError")) ||
      (tr.registerPlugin || tr.plugin)("reloadSourceOnError", function (e) {
        Xl(this, e);
      }),
    tr
  );
});

/*! @name videojs-contrib-ads @version 6.9.0 @license Apache-2.0 */
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t(
        require("video.js"),
        require("global/window"),
        require("global/document")
      ))
    : "function" == typeof define && define.amd
    ? define(["video.js", "global/window", "global/document"], t)
    : ((e = e || self).videojsContribAds = t(e.videojs, e.window, e.document));
})(this, function (e, t, n) {
  "use strict";
  (e = e && e.hasOwnProperty("default") ? e.default : e),
    (t = t && t.hasOwnProperty("default") ? t.default : t),
    (n = n && n.hasOwnProperty("default") ? n.default : n);
  var a = "6.9.0";
  var o = function (e, t) {
      (t.isImmediatePropagationStopped = function () {
        return !0;
      }),
        (t.cancelBubble = !0),
        (t.isPropagationStopped = function () {
          return !0;
        });
    },
    r = function (e, t, n) {
      o(0, n), e.trigger({ type: t + n.type, originalEvent: n });
    },
    i = function (e, t) {
      e.ads.isInAdMode() &&
        (e.ads.isContentResuming()
          ? e.ads._contentEnding && r(e, "content", t)
          : r(e, "ad", t));
    },
    s = function (e, t) {
      e.ads.isInAdMode()
        ? e.ads.isContentResuming()
          ? (o(0, t), e.trigger("resumeended"))
          : r(e, "ad", t)
        : e.ads._contentHasEnded ||
          e.ads.stitchedAds() ||
          (r(e, "content", t), e.trigger("readyforpostroll"));
    },
    d = function (e, t) {
      if (
        !(
          ("loadstart" === t.type &&
            !e.ads._hasThereBeenALoadStartDuringPlayerLife) ||
          ("loadeddata" === t.type && !e.ads._hasThereBeenALoadedData) ||
          ("loadedmetadata" === t.type && !e.ads._hasThereBeenALoadedMetaData)
        )
      )
        if (e.ads.inAdBreak()) r(e, "ad", t);
        else {
          if (e.currentSrc() !== e.ads.contentSrc) return;
          r(e, "content", t);
        }
    },
    l = function (e, t) {
      e.ads.inAdBreak()
        ? r(e, "ad", t)
        : e.ads.isContentResuming() && r(e, "content", t);
    };
  function u(e) {
    "playing" === e.type
      ? i(this, e)
      : "ended" === e.type
      ? s(this, e)
      : "loadstart" === e.type ||
        "loadeddata" === e.type ||
        "loadedmetadata" === e.type
      ? d(this, e)
      : "play" === e.type
      ? l(this, e)
      : this.ads.isInAdMode() &&
        (this.ads.isContentResuming()
          ? r(this, "content", e)
          : r(this, "ad", e));
  }
  var c = {},
    f = function () {
      !(function (n) {
        if (e.dom.isInFrame() && "function" != typeof t.__tcfapi) {
          for (var a, o = t, r = {}; o; ) {
            try {
              if (o.frames.__tcfapiLocator) {
                a = o;
                break;
              }
            } catch (e) {}
            if (o === t.top) break;
            o = o.parent;
          }
          if (!a) return;
          (t.__tcfapi = function (e, t, n, o) {
            var i = Math.random() + "",
              s = {
                __tcfapiCall: {
                  command: e,
                  parameter: o,
                  version: t,
                  callId: i,
                },
              };
            (r[i] = n), a.postMessage(s, "*");
          }),
            t.addEventListener(
              "message",
              function (e) {
                var t = {};
                try {
                  t = "string" == typeof e.data ? JSON.parse(e.data) : e.data;
                } catch (e) {}
                var n = t.__tcfapiReturn;
                n &&
                  "function" == typeof r[n.callId] &&
                  (r[n.callId](n.returnValue, n.success), (r[n.callId] = null));
              },
              !1
            );
        }
      })(),
        "function" == typeof t.__tcfapi &&
          t.__tcfapi("addEventListener", 2, function (e, t) {
            t && (c = e);
          });
    },
    h = function (e, t) {
      return t ? encodeURIComponent(e) : e;
    },
    p = function (e, t, n) {
      if (e && e[n])
        for (var a = e[n], o = Object.keys(a), r = 0; r < o.length; r++) {
          t["{mediainfo." + n + "." + o[r] + "}"] = a[o[r]];
        }
    };
  var g = {
      processMetadataTracks: function (e, t) {
        for (
          var n = e.textTracks(),
            a = function (n) {
              "metadata" === n.kind &&
                (e.ads.cueTextTracks.setMetadataTrackMode(n), t(e, n));
            },
            o = 0;
          o < n.length;
          o++
        )
          a(n[o]);
        n.addEventListener("addtrack", function (e) {
          a(e.track);
        });
      },
      setMetadataTrackMode: function (e) {},
      getSupportedAdCue: function (e, t) {
        return t;
      },
      isSupportedAdCue: function (e, t) {
        return !0;
      },
      getCueId: function (e, t) {
        return t.id;
      },
    },
    y = function (e, t) {
      return void 0 !== t && e.ads.includedCues[t];
    },
    v = function (e, t) {
      void 0 !== t && "" !== t && (e.ads.includedCues[t] = !0);
    };
  function m() {
    !1 !== this.ads._shouldBlockPlay &&
      (this.paused() ||
        (this.ads.debug("Playback was canceled by cancelContentPlay"),
        this.pause()),
      (this.ads._cancelledPlay = !0));
  }
  g.processAdTrack = function (t, n, a, o) {
    t.ads.includedCues = {};
    for (var r = 0; r < n.length; r++) {
      var i = n[r],
        s = this.getSupportedAdCue(t, i);
      if (!this.isSupportedAdCue(t, i))
        return void e.log.warn(
          "Skipping as this is not a supported ad cue.",
          i
        );
      var d = this.getCueId(t, i),
        l = i.startTime;
      if (y(t, d)) return void e.log("Skipping ad already seen with ID " + d);
      o && o(t, s, d, l), a(t, s, d, l), v(t, d);
    }
  };
  var A = {},
    S = e;
  (A.isMiddlewareMediatorSupported = function () {
    return (
      !S.browser.IS_IOS &&
      !S.browser.IS_ANDROID &&
      !!(S.use && S.middleware && S.middleware.TERMINATOR)
    );
  }),
    (A.playMiddleware = function (t) {
      return {
        setSource: function (e, t) {
          t(null, e);
        },
        callPlay: function () {
          if (t.ads && !0 === t.ads._shouldBlockPlay)
            return (
              t.ads.debug("Using playMiddleware to block content playback"),
              (t.ads._playBlocked = !0),
              S.middleware.TERMINATOR
            );
        },
        play: function (n, a) {
          t.ads && t.ads._playBlocked && n
            ? (t.ads.debug("Play call to Tech was terminated."),
              t.trigger("play"),
              t.addClass("vjs-has-started"),
              (t.ads._playBlocked = !1))
            : a &&
              a.catch &&
              a.catch(function (n) {
                "NotAllowedError" !== n.name ||
                  e.browser.IS_SAFARI ||
                  t.trigger("pause");
              });
        },
      };
    }),
    (A.testHook = function (e) {
      S = e;
    });
  var _ = A.playMiddleware,
    P = A.isMiddlewareMediatorSupported,
    b = function () {
      if (e.getPlugin) return Boolean(e.getPlugin("ads"));
      var t = e.getComponent("Player");
      return Boolean(t && t.prototype.ads);
    };
  var k = (function () {
      function e() {}
      return (
        (e.getState = function (t) {
          if (t) return e.states_ && e.states_[t] ? e.states_[t] : void 0;
        }),
        (e.registerState = function (t, n) {
          if ("string" != typeof t || !t)
            throw new Error(
              'Illegal state name, "' + t + '"; must be a non-empty string.'
            );
          return e.states_ || (e.states_ = {}), (e.states_[t] = n), n;
        }),
        e
      );
    })(),
    C = (function () {
      function t(e) {
        this.player = e;
      }
      t._getName = function () {
        return "Anonymous State";
      };
      var n = t.prototype;
      return (
        (n.transitionTo = function (e) {
          var t = this.player;
          this.cleanup(t);
          var n = new e(t);
          (t.ads._state = n),
            t.ads.debug(
              this.constructor._getName() + " -> " + n.constructor._getName()
            );
          for (
            var a = arguments.length, o = new Array(a > 1 ? a - 1 : 0), r = 1;
            r < a;
            r++
          )
            o[r - 1] = arguments[r];
          n.init.apply(n, [t].concat(o));
        }),
        (n.init = function () {}),
        (n.cleanup = function () {}),
        (n.onPlay = function () {}),
        (n.onPlaying = function () {}),
        (n.onEnded = function () {}),
        (n.onAdEnded = function () {}),
        (n.onAdsReady = function () {
          e.log.warn("Unexpected adsready event");
        }),
        (n.onAdsError = function () {}),
        (n.onAdsCanceled = function () {}),
        (n.onAdTimeout = function () {}),
        (n.onAdStarted = function () {}),
        (n.onContentChanged = function () {}),
        (n.onContentResumed = function () {}),
        (n.onReadyForPostroll = function () {
          e.log.warn("Unexpected readyforpostroll event");
        }),
        (n.onNoPreroll = function () {}),
        (n.onNoPostroll = function () {}),
        (n.startLinearAdMode = function () {
          e.log.warn(
            "Unexpected startLinearAdMode invocation (State via " +
              this.constructor._getName() +
              ")"
          );
        }),
        (n.endLinearAdMode = function () {
          e.log.warn(
            "Unexpected endLinearAdMode invocation (State via " +
              this.constructor._getName() +
              ")"
          );
        }),
        (n.skipLinearAdMode = function () {
          e.log.warn(
            "Unexpected skipLinearAdMode invocation (State via " +
              this.constructor._getName() +
              ")"
          );
        }),
        (n.isAdState = function () {
          throw new Error(
            "isAdState unimplemented for " + this.constructor._getName()
          );
        }),
        (n.isWaitingForAdBreak = function () {
          return !1;
        }),
        (n.isContentResuming = function () {
          return !1;
        }),
        (n.inAdBreak = function () {
          return !1;
        }),
        (n.handleEvent = function (e) {
          var t = this.player;
          "play" === e
            ? this.onPlay(t)
            : "adsready" === e
            ? this.onAdsReady(t)
            : "adserror" === e
            ? this.onAdsError(t)
            : "adscanceled" === e
            ? this.onAdsCanceled(t)
            : "adtimeout" === e
            ? this.onAdTimeout(t)
            : "ads-ad-started" === e
            ? this.onAdStarted(t)
            : "contentchanged" === e
            ? this.onContentChanged(t)
            : "contentresumed" === e
            ? this.onContentResumed(t)
            : "readyforpostroll" === e
            ? this.onReadyForPostroll(t)
            : "playing" === e
            ? this.onPlaying(t)
            : "ended" === e
            ? this.onEnded(t)
            : "nopreroll" === e
            ? this.onNoPreroll(t)
            : "nopostroll" === e
            ? this.onNoPostroll(t)
            : "adended" === e && this.onAdEnded(t);
        }),
        t
      );
    })();
  function T(e, t) {
    (e.prototype = Object.create(t.prototype)),
      (e.prototype.constructor = e),
      (e.__proto__ = t);
  }
  k.registerState("State", C);
  var w = (function (e) {
    function t(t) {
      var n;
      return (
        ((n = e.call(this, t) || this).contentResuming = !1),
        (n.waitingForAdBreak = !1),
        n
      );
    }
    T(t, e);
    var n = t.prototype;
    return (
      (n.isAdState = function () {
        return !0;
      }),
      (n.onPlaying = function () {
        var e = k.getState("ContentPlayback");
        this.contentResuming && this.transitionTo(e);
      }),
      (n.onContentResumed = function () {
        var e = k.getState("ContentPlayback");
        this.contentResuming && this.transitionTo(e);
      }),
      (n.isWaitingForAdBreak = function () {
        return this.waitingForAdBreak;
      }),
      (n.isContentResuming = function () {
        return this.contentResuming;
      }),
      (n.inAdBreak = function () {
        return !0 === this.player.ads._inLinearAdMode;
      }),
      t
    );
  })(C);
  k.registerState("AdState", w);
  var R = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e);
    var n = t.prototype;
    return (
      (n.isAdState = function () {
        return !1;
      }),
      (n.onContentChanged = function (e) {
        var t = k.getState("BeforePreroll"),
          n = k.getState("Preroll");
        e.ads.debug("Received contentchanged event (ContentState)"),
          e.paused()
            ? this.transitionTo(t)
            : (this.transitionTo(n, !1),
              e.pause(),
              (e.ads._pausedOnContentupdate = !0));
      }),
      t
    );
  })(C);
  k.registerState("ContentState", R);
  var L,
    B = (function (t) {
      function n() {
        return t.apply(this, arguments) || this;
      }
      T(n, t),
        (n._getName = function () {
          return "AdsDone";
        });
      var a = n.prototype;
      return (
        (a.init = function (e) {
          (e.ads._contentHasEnded = !0), e.trigger("ended");
        }),
        (a.startLinearAdMode = function () {
          e.log.warn("Unexpected startLinearAdMode invocation (AdsDone)");
        }),
        n
      );
    })(k.getState("ContentState"));
  k.registerState("AdsDone", B);
  var M = {
      start: function (t) {
        t.ads.debug("Starting ad break"),
          (t.ads._inLinearAdMode = !0),
          t.trigger("adstart"),
          t.ads.shouldTakeSnapshots() &&
            (t.ads.snapshot = (function (t) {
              var n;
              n =
                e.browser.IS_IOS && t.ads.isLive(t) && t.seekable().length > 0
                  ? t.currentTime() - t.seekable().end(0)
                  : t.currentTime();
              var a = t.$(".vjs-tech"),
                o = t.textTracks ? t.textTracks() : [],
                r = [],
                i = {
                  ended: t.ended(),
                  currentSrc: t.currentSrc(),
                  sources: t.currentSources(),
                  src: t.tech_.src(),
                  currentTime: n,
                  type: t.currentType(),
                };
              a && (i.style = a.getAttribute("style"));
              for (var s = 0; s < o.length; s++) {
                var d = o[s];
                r.push({ track: d, mode: d.mode }), (d.mode = "disabled");
              }
              return (i.suppressedTracks = r), i;
            })(t)),
          t.ads.shouldPlayContentBehindAd(t) &&
            ((t.ads.preAdVolume_ = t.volume()), t.volume(0)),
          t.addClass("vjs-ad-playing"),
          t.hasClass("vjs-live") && t.removeClass("vjs-live"),
          t.ads.removeNativePoster();
      },
      end: function (t, n) {
        t.ads.debug("Ending ad break"),
          void 0 === n && (n = function () {}),
          (t.ads.adType = null),
          (t.ads._inLinearAdMode = !1),
          t.trigger("adend"),
          t.removeClass("vjs-ad-playing"),
          t.ads.isLive(t) && t.addClass("vjs-live"),
          t.ads.shouldTakeSnapshots()
            ? (function (t, n) {
                var a = t.ads.snapshot;
                if (
                  (void 0 === n && (n = function () {}),
                  !0 === t.ads.disableNextSnapshotRestore)
                )
                  return (
                    (t.ads.disableNextSnapshotRestore = !1),
                    delete t.ads.snapshot,
                    void n()
                  );
                var o,
                  r = t.$(".vjs-tech"),
                  i = 20,
                  s = a.suppressedTracks,
                  d = function () {
                    for (var e = 0; e < s.length; e++)
                      (o = s[e]).track.mode = o.mode;
                  },
                  l = function () {
                    var n;
                    if (e.browser.IS_IOS && t.ads.isLive(t)) {
                      if (
                        (a.currentTime < 0 &&
                          ((n =
                            t.seekable().length > 0
                              ? t.seekable().end(0) + a.currentTime
                              : t.currentTime()),
                          t.currentTime(n)),
                        t.paused())
                      ) {
                        var o = t.play();
                        o &&
                          o.catch &&
                          o.catch(function (t) {
                            e.log.warn(
                              "Play promise rejected in IOS snapshot resume",
                              t
                            );
                          });
                      }
                    } else if (a.ended) t.currentTime(t.duration());
                    else {
                      t.currentTime(a.currentTime);
                      var r = t.play();
                      r &&
                        r.catch &&
                        r.catch(function (t) {
                          e.log.warn(
                            "Play promise rejected in snapshot resume",
                            t
                          );
                        });
                    }
                    t.ads.shouldRemoveAutoplay_ &&
                      (t.autoplay(!1), (t.ads.shouldRemoveAutoplay_ = !1));
                  },
                  u = function n() {
                    if (
                      (t.off("contentcanplay", n),
                      L && t.clearTimeout(L),
                      (r = t.el().querySelector(".vjs-tech")).readyState > 1)
                    )
                      return l();
                    if (void 0 === r.seekable) return l();
                    if (r.seekable.length > 0) return l();
                    if (i--) t.setTimeout(n, 50);
                    else
                      try {
                        l();
                      } catch (t) {
                        e.log.warn(
                          "Failed to resume the content after an advertisement",
                          t
                        );
                      }
                  };
                if (
                  ("style" in a && r.setAttribute("style", a.style || ""),
                  t.ads.videoElementRecycled())
                )
                  t.one("resumeended", function () {
                    delete t.ads.snapshot, n();
                  }),
                    t.one("contentloadedmetadata", d),
                    e.browser.IS_IOS &&
                      !t.autoplay() &&
                      (t.autoplay(!0), (t.ads.shouldRemoveAutoplay_ = !0)),
                    t.src(a.sources),
                    t.one("contentcanplay", u),
                    (L = t.setTimeout(u, 2e3));
                else {
                  if ((d(), !t.ended())) {
                    var c = t.play();
                    c &&
                      c.catch &&
                      c.catch(function (t) {
                        e.log.warn(
                          "Play promise rejected in snapshot restore",
                          t
                        );
                      });
                  }
                  delete t.ads.snapshot, n();
                }
              })(t, n)
            : (t.volume(t.ads.preAdVolume_), n());
      },
    },
    j = (function (t) {
      function n() {
        return t.apply(this, arguments) || this;
      }
      T(n, t),
        (n._getName = function () {
          return "Preroll";
        });
      var a = n.prototype;
      return (
        (a.init = function (e, t, n) {
          if (
            ((this.waitingForAdBreak = !0),
            e.addClass("vjs-ad-loading"),
            n || e.ads.nopreroll_)
          )
            return this.resumeAfterNoPreroll(e);
          var a = e.ads.settings.timeout;
          "number" == typeof e.ads.settings.prerollTimeout &&
            (a = e.ads.settings.prerollTimeout),
            (this._timeout = e.setTimeout(function () {
              e.trigger("adtimeout");
            }, a)),
            t ? this.handleAdsReady() : (this.adsReady = !1);
        }),
        (a.onAdsReady = function (t) {
          t.ads.inAdBreak()
            ? e.log.warn("Unexpected adsready event (Preroll)")
            : (t.ads.debug("Received adsready event (Preroll)"),
              this.handleAdsReady());
        }),
        (a.handleAdsReady = function () {
          (this.adsReady = !0), this.readyForPreroll();
        }),
        (a.afterLoadStart = function (e) {
          var t = this.player;
          t.ads._hasThereBeenALoadStartDuringPlayerLife
            ? e()
            : (t.ads.debug("Waiting for loadstart..."),
              t.one("loadstart", function () {
                t.ads.debug("Received loadstart event"), e();
              }));
        }),
        (a.noPreroll = function () {
          var e = this;
          this.afterLoadStart(function () {
            e.player.ads.debug(
              "Skipping prerolls due to nopreroll event (Preroll)"
            ),
              e.resumeAfterNoPreroll(e.player);
          });
        }),
        (a.readyForPreroll = function () {
          var e = this.player;
          this.afterLoadStart(function () {
            e.ads.debug("Triggered readyforpreroll event (Preroll)"),
              e.trigger("readyforpreroll");
          });
        }),
        (a.onAdsCanceled = function (e) {
          var t = this;
          e.ads.debug("adscanceled (Preroll)"),
            this.afterLoadStart(function () {
              t.resumeAfterNoPreroll(e);
            });
        }),
        (a.onAdsError = function (t) {
          var n = this;
          e.log("adserror (Preroll)"),
            this.inAdBreak()
              ? t.ads.endLinearAdMode()
              : this.afterLoadStart(function () {
                  n.resumeAfterNoPreroll(t);
                });
        }),
        (a.startLinearAdMode = function () {
          var t = this.player;
          !this.adsReady || t.ads.inAdBreak() || this.isContentResuming()
            ? e.log.warn("Unexpected startLinearAdMode invocation (Preroll)")
            : (this.clearTimeout(t),
              (t.ads.adType = "preroll"),
              (this.waitingForAdBreak = !1),
              M.start(t),
              (t.ads._shouldBlockPlay = !1));
        }),
        (a.onAdStarted = function (e) {
          e.removeClass("vjs-ad-loading");
        }),
        (a.endLinearAdMode = function () {
          var e = this.player;
          this.inAdBreak() &&
            (e.removeClass("vjs-ad-loading"),
            e.addClass("vjs-ad-content-resuming"),
            (this.contentResuming = !0),
            M.end(e));
        }),
        (a.skipLinearAdMode = function () {
          var t = this,
            n = this.player;
          n.ads.inAdBreak() || this.isContentResuming()
            ? e.log.warn("Unexpected skipLinearAdMode invocation")
            : this.afterLoadStart(function () {
                n.trigger("adskip"),
                  n.ads.debug("skipLinearAdMode (Preroll)"),
                  t.resumeAfterNoPreroll(n);
              });
        }),
        (a.onAdTimeout = function (e) {
          var t = this;
          this.afterLoadStart(function () {
            e.ads.debug("adtimeout (Preroll)"), t.resumeAfterNoPreroll(e);
          });
        }),
        (a.onNoPreroll = function (t) {
          t.ads.inAdBreak() || this.isContentResuming()
            ? e.log.warn("Unexpected nopreroll event (Preroll)")
            : this.noPreroll();
        }),
        (a.resumeAfterNoPreroll = function (e) {
          if (
            ((this.contentResuming = !0),
            (e.ads._shouldBlockPlay = !1),
            this.cleanupPartial(e),
            e.ads._playRequested || e.ads._pausedOnContentupdate)
          )
            if (e.paused()) {
              e.ads.debug(
                "resumeAfterNoPreroll: attempting to resume playback (Preroll)"
              );
              var t = e.play();
              t && t.then && t.then(null, function (e) {});
            } else
              e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),
                e.trigger("play"),
                e.trigger("playing");
        }),
        (a.cleanup = function (t) {
          t.ads._hasThereBeenALoadStartDuringPlayerLife ||
            e.log.warn(
              "Leaving Preroll state before loadstart event can cause issues."
            ),
            this.cleanupPartial(t);
        }),
        (a.cleanupPartial = function (e) {
          e.removeClass("vjs-ad-loading"),
            e.removeClass("vjs-ad-content-resuming"),
            this.clearTimeout(e);
        }),
        (a.clearTimeout = function (e) {
          e.clearTimeout(this._timeout), (this._timeout = null);
        }),
        n
      );
    })(k.getState("AdState"));
  k.registerState("Preroll", j);
  var I = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e),
      (t._getName = function () {
        return "BeforePreroll";
      });
    var n = t.prototype;
    return (
      (n.init = function (e) {
        (this.adsReady = !1),
          (this.shouldResumeToContent = !1),
          (e.ads._shouldBlockPlay =
            !e.ads.settings.allowVjsAutoplay || !e.autoplay());
      }),
      (n.onAdsReady = function (e) {
        e.ads.debug("Received adsready event (BeforePreroll)"),
          (this.adsReady = !0);
      }),
      (n.onPlay = function (e) {
        var t = k.getState("Preroll");
        e.ads.debug("Received play event (BeforePreroll)"),
          this.transitionTo(t, this.adsReady, this.shouldResumeToContent);
      }),
      (n.onAdsCanceled = function (e) {
        e.ads.debug("adscanceled (BeforePreroll)"),
          (this.shouldResumeToContent = !0);
      }),
      (n.onAdsError = function () {
        this.player.ads.debug("adserror (BeforePreroll)"),
          (this.shouldResumeToContent = !0);
      }),
      (n.onNoPreroll = function () {
        this.player.ads.debug(
          "Skipping prerolls due to nopreroll event (BeforePreroll)"
        ),
          (this.shouldResumeToContent = !0);
      }),
      (n.skipLinearAdMode = function () {
        var e = this.player;
        e.trigger("adskip"),
          e.ads.debug("skipLinearAdMode (BeforePreroll)"),
          (this.shouldResumeToContent = !0);
      }),
      (n.onContentChanged = function () {
        this.init(this.player);
      }),
      t
    );
  })(k.getState("ContentState"));
  k.registerState("BeforePreroll", I);
  var N = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e),
      (t._getName = function () {
        return "Midroll";
      });
    var n = t.prototype;
    return (
      (n.init = function (e) {
        (e.ads.adType = "midroll"), M.start(e), e.addClass("vjs-ad-loading");
      }),
      (n.onAdStarted = function (e) {
        e.removeClass("vjs-ad-loading");
      }),
      (n.endLinearAdMode = function () {
        var e = this.player;
        this.inAdBreak() &&
          ((this.contentResuming = !0),
          e.addClass("vjs-ad-content-resuming"),
          e.removeClass("vjs-ad-loading"),
          M.end(e));
      }),
      (n.onAdsError = function (e) {
        this.inAdBreak() && e.ads.endLinearAdMode();
      }),
      (n.cleanup = function (e) {
        e.removeClass("vjs-ad-loading"),
          e.removeClass("vjs-ad-content-resuming");
      }),
      t
    );
  })(k.getState("AdState"));
  k.registerState("Midroll", N);
  var E = (function (t) {
    function n() {
      return t.apply(this, arguments) || this;
    }
    T(n, t),
      (n._getName = function () {
        return "Postroll";
      });
    var a = n.prototype;
    return (
      (a.init = function (e) {
        if (
          ((this.waitingForAdBreak = !0),
          (e.ads._contentEnding = !0),
          e.ads.nopostroll_)
        ) {
          this.resumeContent(e);
          var t = k.getState("AdsDone");
          this.transitionTo(t);
        } else {
          e.addClass("vjs-ad-loading");
          var n = e.ads.settings.timeout;
          "number" == typeof e.ads.settings.postrollTimeout &&
            (n = e.ads.settings.postrollTimeout),
            (this._postrollTimeout = e.setTimeout(function () {
              e.trigger("adtimeout");
            }, n));
        }
      }),
      (a.startLinearAdMode = function () {
        var t = this.player;
        t.ads.inAdBreak() || this.isContentResuming()
          ? e.log.warn("Unexpected startLinearAdMode invocation (Postroll)")
          : ((t.ads.adType = "postroll"),
            t.clearTimeout(this._postrollTimeout),
            (this.waitingForAdBreak = !1),
            M.start(t));
      }),
      (a.onAdStarted = function (e) {
        e.removeClass("vjs-ad-loading");
      }),
      (a.endLinearAdMode = function () {
        var e = this,
          t = this.player,
          n = k.getState("AdsDone");
        this.inAdBreak() &&
          (t.removeClass("vjs-ad-loading"),
          this.resumeContent(t),
          M.end(t, function () {
            e.transitionTo(n);
          }));
      }),
      (a.skipLinearAdMode = function () {
        var t = this.player;
        t.ads.inAdBreak() || this.isContentResuming()
          ? e.log.warn("Unexpected skipLinearAdMode invocation")
          : (t.ads.debug("Postroll abort (skipLinearAdMode)"),
            t.trigger("adskip"),
            this.abort(t));
      }),
      (a.onAdTimeout = function (e) {
        e.ads.debug("Postroll abort (adtimeout)"), this.abort(e);
      }),
      (a.onAdsError = function (e) {
        e.ads.debug("Postroll abort (adserror)"),
          e.ads.inAdBreak() ? e.ads.endLinearAdMode() : this.abort(e);
      }),
      (a.onContentChanged = function (e) {
        if (this.isContentResuming()) {
          var t = k.getState("BeforePreroll");
          this.transitionTo(t);
        } else if (!this.inAdBreak()) {
          var n = k.getState("Preroll");
          this.transitionTo(n);
        }
      }),
      (a.onNoPostroll = function (t) {
        this.isContentResuming() || this.inAdBreak()
          ? e.log.warn("Unexpected nopostroll event (Postroll)")
          : this.abort(t);
      }),
      (a.resumeContent = function (e) {
        (this.contentResuming = !0), e.addClass("vjs-ad-content-resuming");
      }),
      (a.abort = function (e) {
        var t = k.getState("AdsDone");
        this.resumeContent(e),
          e.removeClass("vjs-ad-loading"),
          this.transitionTo(t);
      }),
      (a.cleanup = function (e) {
        e.removeClass("vjs-ad-content-resuming"),
          e.clearTimeout(this._postrollTimeout),
          (e.ads._contentEnding = !1);
      }),
      n
    );
  })(k.getState("AdState"));
  k.registerState("Postroll", E);
  var x = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e),
      (t._getName = function () {
        return "ContentPlayback";
      });
    var n = t.prototype;
    return (
      (n.init = function (e) {
        e.ads._shouldBlockPlay = !1;
      }),
      (n.onAdsReady = function (e) {
        e.ads.debug("Received adsready event (ContentPlayback)"),
          e.ads.nopreroll_ ||
            (e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),
            e.trigger("readyforpreroll"));
      }),
      (n.onReadyForPostroll = function (e) {
        var t = k.getState("Postroll");
        e.ads.debug("Received readyforpostroll event"), this.transitionTo(t);
      }),
      (n.startLinearAdMode = function () {
        var e = k.getState("Midroll");
        this.transitionTo(e);
      }),
      t
    );
  })(k.getState("ContentState"));
  k.registerState("ContentPlayback", x);
  var D = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e),
      (t._getName = function () {
        return "StitchedContentPlayback";
      });
    var n = t.prototype;
    return (
      (n.init = function () {
        this.player.ads._shouldBlockPlay = !1;
      }),
      (n.onContentChanged = function () {
        this.player.ads.debug(
          "Received contentchanged event (" + this.constructor._getName() + ")"
        );
      }),
      (n.startLinearAdMode = function () {
        var e = k.getState("StitchedAdRoll");
        this.transitionTo(e);
      }),
      t
    );
  })(k.getState("ContentState"));
  k.registerState("StitchedContentPlayback", D);
  var O = (function (e) {
    function t() {
      return e.apply(this, arguments) || this;
    }
    T(t, e),
      (t._getName = function () {
        return "StitchedAdRoll";
      });
    var n = t.prototype;
    return (
      (n.init = function () {
        (this.waitingForAdBreak = !1),
          (this.contentResuming = !1),
          (this.player.ads.adType = "stitched"),
          M.start(this.player);
      }),
      (n.onPlaying = function () {}),
      (n.onContentResumed = function () {}),
      (n.onAdEnded = function () {
        this.endLinearAdMode(), this.player.trigger("ended");
      }),
      (n.endLinearAdMode = function () {
        var e = k.getState("StitchedContentPlayback");
        M.end(this.player), this.transitionTo(e);
      }),
      t
    );
  })(k.getState("AdState"));
  k.registerState("StitchedAdRoll", O);
  var F = A.isMiddlewareMediatorSupported,
    U = e.getTech("Html5").Events,
    V = {
      timeout: 5e3,
      prerollTimeout: void 0,
      postrollTimeout: void 0,
      debug: !1,
      stitchedAds: !1,
      contentIsLive: void 0,
      liveCuePoints: !0,
      allowVjsAutoplay: e.options.normalizeAutoplay || !1,
    },
    q = function (o) {
      var r = this,
        i = e.mergeOptions(V, o),
        s = [];
      U.concat(["firstplay", "loadedalldata"]).forEach(function (e) {
        -1 === s.indexOf(e) && s.push(e);
      }),
        r.on(s, u),
        F() ||
          (function (t, n) {
            n && e.log("Using cancelContentPlay to block content playback"),
              t.on("play", m);
          })(r, i.debug),
        r.setTimeout(function () {
          r.ads._hasThereBeenALoadStartDuringPlayerLife ||
            "" === r.src() ||
            e.log.error(
              "videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html"
            );
        }, 5e3),
        r.on("ended", function () {
          r.hasClass("vjs-has-started") || r.addClass("vjs-has-started");
        }),
        r.on("contenttimeupdate", function () {
          r.removeClass("vjs-waiting");
        }),
        r.on(["addurationchange", "adcanplay"], function () {
          if (
            !r.ads.settings.stitchedAds &&
            !r.hasStarted() &&
            (!r.ads.snapshot || r.currentSrc() !== r.ads.snapshot.currentSrc) &&
            r.ads.inAdBreak()
          ) {
            var t = r.play();
            t &&
              t.catch &&
              t.catch(function (t) {
                e.log.warn("Play promise rejected when playing ad", t);
              });
          }
        }),
        r.on("nopreroll", function () {
          r.ads.debug("Received nopreroll event"), (r.ads.nopreroll_ = !0);
        }),
        r.on("nopostroll", function () {
          r.ads.debug("Received nopostroll event"), (r.ads.nopostroll_ = !0);
        }),
        r.on("playing", function () {
          (r.ads._cancelledPlay = !1), (r.ads._pausedOnContentupdate = !1);
        }),
        r.on("play", function () {
          r.ads._playRequested = !0;
        }),
        r.one("loadstart", function () {
          r.ads._hasThereBeenALoadStartDuringPlayerLife = !0;
        }),
        r.on("loadeddata", function () {
          r.ads._hasThereBeenALoadedData = !0;
        }),
        r.on("loadedmetadata", function () {
          r.ads._hasThereBeenALoadedMetaData = !0;
        }),
        (r.ads = (function (t) {
          return {
            disableNextSnapshotRestore: !1,
            _contentEnding: !1,
            _contentHasEnded: !1,
            _hasThereBeenALoadStartDuringPlayerLife: !1,
            _hasThereBeenALoadedData: !1,
            _hasThereBeenALoadedMetaData: !1,
            _inLinearAdMode: !1,
            _shouldBlockPlay: !1,
            _playBlocked: !1,
            _playRequested: !1,
            adType: null,
            VERSION: a,
            reset: function () {
              (t.ads.disableNextSnapshotRestore = !1),
                (t.ads._contentEnding = !1),
                (t.ads._contentHasEnded = !1),
                (t.ads.snapshot = null),
                (t.ads.adType = null),
                (t.ads._hasThereBeenALoadedData = !1),
                (t.ads._hasThereBeenALoadedMetaData = !1),
                (t.ads._cancelledPlay = !1),
                (t.ads._shouldBlockPlay = !1),
                (t.ads._playBlocked = !1),
                (t.ads.nopreroll_ = !1),
                (t.ads.nopostroll_ = !1),
                (t.ads._playRequested = !1);
            },
            startLinearAdMode: function () {
              t.ads._state.startLinearAdMode();
            },
            endLinearAdMode: function () {
              t.ads._state.endLinearAdMode();
            },
            skipLinearAdMode: function () {
              t.ads._state.skipLinearAdMode();
            },
            stitchedAds: function (t) {
              return (
                void 0 !== t &&
                  (e.log.warn(
                    "Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."
                  ),
                  (this.settings.stitchedAds = !!t)),
                this.settings.stitchedAds
              );
            },
            videoElementRecycled: function () {
              if (t.ads.shouldPlayContentBehindAd(t)) return !1;
              if (!this.snapshot)
                throw new Error(
                  "You cannot use videoElementRecycled while there is no snapshot."
                );
              var e = t.tech_.src() !== this.snapshot.src,
                n = t.currentSrc() !== this.snapshot.currentSrc;
              return e || n;
            },
            isLive: function (n) {
              return (
                void 0 === n && (n = t),
                "boolean" == typeof n.ads.settings.contentIsLive
                  ? n.ads.settings.contentIsLive
                  : n.duration() === 1 / 0 ||
                    ("8" === e.browser.IOS_VERSION && 0 === n.duration())
              );
            },
            shouldPlayContentBehindAd: function (n) {
              if ((void 0 === n && (n = t), n))
                return (
                  !!n.ads.settings.liveCuePoints &&
                  !e.browser.IS_IOS &&
                  !e.browser.IS_ANDROID &&
                  n.duration() === 1 / 0
                );
              throw new Error(
                "shouldPlayContentBehindAd requires a player as a param"
              );
            },
            shouldTakeSnapshots: function (e) {
              return (
                void 0 === e && (e = t),
                !this.shouldPlayContentBehindAd(e) && !this.stitchedAds()
              );
            },
            isInAdMode: function () {
              return this._state.isAdState();
            },
            isWaitingForAdBreak: function () {
              return this._state.isWaitingForAdBreak();
            },
            isContentResuming: function () {
              return this._state.isContentResuming();
            },
            isAdPlaying: function () {
              return this._state.inAdBreak();
            },
            inAdBreak: function () {
              return this._state.inAdBreak();
            },
            removeNativePoster: function () {
              var e = t.$(".vjs-tech");
              e && e.removeAttribute("poster");
            },
            debug: function () {
              if (this.settings.debug) {
                for (
                  var t = arguments.length, n = new Array(t), a = 0;
                  a < t;
                  a++
                )
                  n[a] = arguments[a];
                1 === n.length && "string" == typeof n[0]
                  ? e.log("ADS: " + n[0])
                  : e.log.apply(e, ["ADS:"].concat(n));
              }
            },
          };
        })(r)),
        (r.ads.settings = i),
        (i.stitchedAds = !!i.stitchedAds),
        i.stitchedAds
          ? (r.ads._state = new (k.getState("StitchedContentPlayback"))(r))
          : (r.ads._state = new (k.getState("BeforePreroll"))(r)),
        r.ads._state.init(r),
        (r.ads.cueTextTracks = g),
        (r.ads.adMacroReplacement = function (a, o, r) {
          var i = this,
            s = {};
          (a = a.replace(/{([^}=]+)=([^}]+)}/g, function (e, t, n) {
            return (s["{" + t + "}"] = n), "{" + t + "}";
          })),
            void 0 === o && (o = !1);
          var d = {};
          for (var l in (void 0 !== r && (d = r),
          (d["{player.id}"] = this.options_["data-player"] || this.id_),
          (d["{player.height}"] = this.currentHeight()),
          (d["{player.width}"] = this.currentWidth()),
          (d["{mediainfo.id}"] = this.mediainfo ? this.mediainfo.id : ""),
          (d["{mediainfo.name}"] = this.mediainfo ? this.mediainfo.name : ""),
          (d["{mediainfo.duration}"] = this.mediainfo
            ? this.mediainfo.duration
            : ""),
          (d["{player.duration}"] = this.duration()),
          (d["{player.pageUrl}"] = e.dom.isInFrame()
            ? n.referrer
            : t.location.href),
          (d["{playlistinfo.id}"] = this.playlistinfo
            ? this.playlistinfo.id
            : ""),
          (d["{playlistinfo.name}"] = this.playlistinfo
            ? this.playlistinfo.name
            : ""),
          (d["{timestamp}"] = new Date().getTime()),
          (d["{document.referrer}"] = n.referrer),
          (d["{window.location.href}"] = t.location.href),
          (d["{random}"] = Math.floor(1e12 * Math.random())),
          ["description", "tags", "reference_id", "ad_keys"].forEach(function (
            e
          ) {
            i.mediainfo && i.mediainfo[e]
              ? (d["{mediainfo." + e + "}"] = i.mediainfo[e])
              : s["{mediainfo." + e + "}"]
              ? (d["{mediainfo." + e + "}"] = s["{mediainfo." + e + "}"])
              : (d["{mediainfo." + e + "}"] = "");
          }),
          p(this.mediainfo, d, "custom_fields"),
          p(this.mediainfo, d, "customFields"),
          Object.keys(c).forEach(function (e) {
            d["{tcf." + e + "}"] = c[e];
          }),
          (d["{tcf.gdprAppliesInt}"] = c.gdprApplies ? 1 : 0),
          d))
            a = a.split(l).join(h(d[l], o));
          for (var u in ((a = a.replace(
            /{pageVariable\.([^}]+)}/g,
            function (n, a) {
              for (var r, i = t, d = a.split("."), l = 0; l < d.length; l++)
                l === d.length - 1 ? (r = i[d[l]]) : (i = i[d[l]]);
              var u = typeof r;
              return null === r
                ? "null"
                : void 0 === r
                ? s["{pageVariable." + a + "}"]
                  ? s["{pageVariable." + a + "}"]
                  : (e.log.warn('Page variable "' + a + '" not found'), "")
                : "string" !== u && "number" !== u && "boolean" !== u
                ? (e.log.warn(
                    'Page variable "' + a + '" is not a supported type'
                  ),
                  "")
                : h(String(r), o);
            }
          )),
          s))
            a = a.replace(u, s[u]);
          return a;
        }.bind(r)),
        (function (e) {
          (e.ads.contentSrc = e.currentSrc()),
            (e.ads._seenInitialLoadstart = !1),
            e.on("loadstart", function () {
              if (!e.ads.inAdBreak()) {
                var t = e.currentSrc();
                t !== e.ads.contentSrc &&
                  (e.ads._seenInitialLoadstart &&
                    e.trigger({ type: "contentchanged" }),
                  e.trigger({
                    type: "contentupdate",
                    oldValue: e.ads.contentSrc,
                    newValue: t,
                  }),
                  (e.ads.contentSrc = t)),
                  (e.ads._seenInitialLoadstart = !0);
              }
            });
        })(r),
        r.on("contentchanged", r.ads.reset);
      var d = function () {
        var t = r.textTracks();
        if (
          !r.ads.shouldPlayContentBehindAd(r) &&
          r.ads.inAdBreak() &&
          r.tech_.featuresNativeTextTracks &&
          e.browser.IS_IOS &&
          !Array.isArray(r.textTracks())
        )
          for (var n = 0; n < t.length; n++) {
            var a = t[n];
            "showing" === a.mode && (a.mode = "disabled");
          }
      };
      r.ready(function () {
        r.textTracks().addEventListener("change", d);
      }),
        r.on(
          [
            "play",
            "playing",
            "ended",
            "adsready",
            "adscanceled",
            "adskip",
            "adserror",
            "adtimeout",
            "adended",
            "ads-ad-started",
            "contentchanged",
            "dispose",
            "contentresumed",
            "readyforpostroll",
            "nopreroll",
            "nopostroll",
          ],
          function (e) {
            r.ads._state.handleEvent(e.type);
          }
        ),
        r.on("dispose", function () {
          r.ads.reset(), r.textTracks().removeEventListener("change", d);
        }),
        f(),
        (r.ads.listenToTcf = f);
    };
  return (
    (q.VERSION = a),
    (function (t) {
      !b(e) &&
        ((e.registerPlugin || e.plugin)("ads", t),
        P() &&
          !e.usingContribAdsMiddleware_ &&
          (e.use("*", _),
          (e.usingContribAdsMiddleware_ = !0),
          e.log.debug("Play middleware has been registered with videojs")));
    })(q),
    q
  );
});
// Copyright 2011 Google Inc. All Rights Reserved.
(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var l,aa=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}},ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},ea=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");
},fa=ea(this),ha=function(a,b){if(b)a:{var c=fa;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}};
ha("Symbol",function(a){if(a)return a;var b=function(f,g){this.h=f;ba(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.h};var c="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e});
ha("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=fa[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ia(aa(this))}})}return a});
var ia=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a},p=function(a){return a.raw=a},q=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");},ka=function(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a},la=function(a,b){return Object.prototype.hasOwnProperty.call(a,
b)},ma="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)la(d,e)&&(a[e]=d[e])}return a};ha("Object.assign",function(a){return a||ma});
var na="function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b},oa=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if("undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,e){c=b(c,d);e&&Reflect.setPrototypeOf(c,e.prototype);return c}}return function(c,d,e){void 0===e&&(e=c);e=na(e.prototype||Object.prototype);return Function.prototype.apply.call(c,
e,d)||e}}(),qa;if("function"==typeof Object.setPrototypeOf)qa=Object.setPrototypeOf;else{var ra;a:{var sa={a:!0},ta={};try{ta.__proto__=sa;ra=ta.a;break a}catch(a){}ra=!1}qa=ra?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}
var ua=qa,t=function(a,b){a.prototype=na(b.prototype);a.prototype.constructor=a;if(ua)ua(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ba=b.prototype},va=function(){this.B=!1;this.o=null;this.j=void 0;this.h=1;this.I=this.l=0;this.A=null},wa=function(a){if(a.B)throw new TypeError("Generator is already running");a.B=!0};va.prototype.C=function(a){this.j=a};
var xa=function(a,b){a.A={Td:b,Ef:!0};a.h=a.l||a.I};va.prototype.return=function(a){this.A={return:a};this.h=this.I};
var ya=function(a,b,c){a.h=c;return{value:b}},za=function(a){a.l=0;var b=a.A.Td;a.A=null;return b},Aa=function(a){this.h=new va;this.j=a},Da=function(a,b){wa(a.h);var c=a.h.o;if(c)return Ba(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.h.return);a.h.return(b);return Ca(a)},Ba=function(a,b,c,d){try{var e=b.call(a.h.o,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.h.B=!1,e;var f=e.value}catch(g){return a.h.o=null,
xa(a.h,g),Ca(a)}a.h.o=null;d.call(a.h,f);return Ca(a)},Ca=function(a){for(;a.h.h;)try{var b=a.j(a.h);if(b)return a.h.B=!1,{value:b.value,done:!1}}catch(c){a.h.j=void 0,xa(a.h,c)}a.h.B=!1;if(a.h.A){b=a.h.A;a.h.A=null;if(b.Ef)throw b.Td;return{value:b.return,done:!0}}return{value:void 0,done:!0}},Ea=function(a){this.next=function(b){wa(a.h);a.h.o?b=Ba(a,a.h.o.next,b,a.h.C):(a.h.C(b),b=Ca(a));return b};this.throw=function(b){wa(a.h);a.h.o?b=Ba(a,a.h.o["throw"],b,a.h.C):(xa(a.h,b),b=Ca(a));return b};
this.return=function(b){return Da(a,b)};this[Symbol.iterator]=function(){return this}},Fa=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})},Ga=function(a){return Fa(new Ea(new Aa(a)))},Ha=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};ha("Reflect",function(a){return a?a:{}});ha("Reflect.construct",function(){return oa});
ha("Reflect.setPrototypeOf",function(a){return a?a:ua?function(b,c){try{return ua(b,c),!0}catch(d){return!1}}:null});
ha("Promise",function(a){function b(){this.h=null}function c(g){return g instanceof e?g:new e(function(h){h(g)})}if(a)return a;b.prototype.j=function(g){if(null==this.h){this.h=[];var h=this;this.l(function(){h.A()})}this.h.push(g)};var d=fa.setTimeout;b.prototype.l=function(g){d(g,0)};b.prototype.A=function(){for(;this.h&&this.h.length;){var g=this.h;this.h=[];for(var h=0;h<g.length;++h){var k=g[h];g[h]=null;try{k()}catch(m){this.o(m)}}}this.h=null};b.prototype.o=function(g){this.l(function(){throw g;
})};var e=function(g){this.h=0;this.l=void 0;this.j=[];this.C=!1;var h=this.o();try{g(h.resolve,h.reject)}catch(k){h.reject(k)}};e.prototype.o=function(){function g(m){return function(n){k||(k=!0,m.call(h,n))}}var h=this,k=!1;return{resolve:g(this.H),reject:g(this.A)}};e.prototype.H=function(g){if(g===this)this.A(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof e)this.L(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?
this.G(g):this.B(g)}};e.prototype.G=function(g){var h=void 0;try{h=g.then}catch(k){this.A(k);return}"function"==typeof h?this.M(h,g):this.B(g)};e.prototype.A=function(g){this.I(2,g)};e.prototype.B=function(g){this.I(1,g)};e.prototype.I=function(g,h){if(0!=this.h)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.h);this.h=g;this.l=h;2===this.h&&this.J();this.K()};e.prototype.J=function(){var g=this;d(function(){if(g.F()){var h=fa.console;"undefined"!==typeof h&&h.error(g.l)}},
1)};e.prototype.F=function(){if(this.C)return!1;var g=fa.CustomEvent,h=fa.Event,k=fa.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"===typeof h?g=new h("unhandledrejection",{cancelable:!0}):(g=fa.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.l;return k(g)};e.prototype.K=function(){if(null!=this.j){for(var g=0;g<this.j.length;++g)f.j(this.j[g]);this.j=
null}};var f=new b;e.prototype.L=function(g){var h=this.o();g.dc(h.resolve,h.reject)};e.prototype.M=function(g,h){var k=this.o();try{g.call(h,k.resolve,k.reject)}catch(m){k.reject(m)}};e.prototype.then=function(g,h){function k(v,y){return"function"==typeof v?function(B){try{m(v(B))}catch(F){n(F)}}:y}var m,n,r=new e(function(v,y){m=v;n=y});this.dc(k(g,m),k(h,n));return r};e.prototype.catch=function(g){return this.then(void 0,g)};e.prototype.dc=function(g,h){function k(){switch(m.h){case 1:g(m.l);break;
case 2:h(m.l);break;default:throw Error("Unexpected state: "+m.h);}}var m=this;null==this.j?f.j(k):this.j.push(k);this.C=!0};e.resolve=c;e.reject=function(g){return new e(function(h,k){k(g)})};e.race=function(g){return new e(function(h,k){for(var m=q(g),n=m.next();!n.done;n=m.next())c(n.value).dc(h,k)})};e.all=function(g){var h=q(g),k=h.next();return k.done?c([]):new e(function(m,n){function r(B){return function(F){v[B]=F;y--;0==y&&m(v)}}var v=[],y=0;do v.push(void 0),y++,c(k.value).dc(r(v.length-
1),n),k=h.next();while(!k.done)})};return e});ha("Array.prototype.find",function(a){return a?a:function(b,c){a:{var d=this;d instanceof String&&(d=String(d));for(var e=d.length,f=0;f<e;f++){var g=d[f];if(b.call(c,g,f,d)){b=g;break a}}b=void 0}return b}});
ha("WeakMap",function(a){function b(){}function c(k){var m=typeof k;return"object"===m&&null!==k||"function"===m}function d(k){if(!la(k,f)){var m=new b;ba(k,f,{value:m})}}function e(k){var m=Object[k];m&&(Object[k]=function(n){if(n instanceof b)return n;Object.isExtensible(n)&&d(n);return m(n)})}if(function(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),m=Object.seal({}),n=new a([[k,2],[m,3]]);if(2!=n.get(k)||3!=n.get(m))return!1;n.delete(k);n.set(m,4);return!n.has(k)&&4==n.get(m)}catch(r){return!1}}())return a;
var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var g=0,h=function(k){this.h=(g+=Math.random()+1).toString();if(k){k=q(k);for(var m;!(m=k.next()).done;)m=m.value,this.set(m[0],m[1])}};h.prototype.set=function(k,m){if(!c(k))throw Error("Invalid WeakMap key");d(k);if(!la(k,f))throw Error("WeakMap key fail: "+k);k[f][this.h]=m;return this};h.prototype.get=function(k){return c(k)&&la(k,f)?k[f][this.h]:void 0};h.prototype.has=function(k){return c(k)&&la(k,f)&&la(k[f],
this.h)};h.prototype.delete=function(k){return c(k)&&la(k,f)&&la(k[f],this.h)?delete k[f][this.h]:!1};return h});
ha("Map",function(a){if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),k=new a(q([[h,"s"]]));if("s"!=k.get(h)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var m=k.entries(),n=m.next();if(n.done||n.value[0]!=h||"s"!=n.value[1])return!1;n=m.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!m.next().done?!1:!0}catch(r){return!1}}())return a;var b=new WeakMap,c=function(h){this.j={};this.h=
f();this.size=0;if(h){h=q(h);for(var k;!(k=h.next()).done;)k=k.value,this.set(k[0],k[1])}};c.prototype.set=function(h,k){h=0===h?0:h;var m=d(this,h);m.list||(m.list=this.j[m.id]=[]);m.oa?m.oa.value=k:(m.oa={next:this.h,Qa:this.h.Qa,head:this.h,key:h,value:k},m.list.push(m.oa),this.h.Qa.next=m.oa,this.h.Qa=m.oa,this.size++);return this};c.prototype.delete=function(h){h=d(this,h);return h.oa&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.j[h.id],h.oa.Qa.next=h.oa.next,h.oa.next.Qa=h.oa.Qa,
h.oa.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.j={};this.h=this.h.Qa=f();this.size=0};c.prototype.has=function(h){return!!d(this,h).oa};c.prototype.get=function(h){return(h=d(this,h).oa)&&h.value};c.prototype.entries=function(){return e(this,function(h){return[h.key,h.value]})};c.prototype.keys=function(){return e(this,function(h){return h.key})};c.prototype.values=function(){return e(this,function(h){return h.value})};c.prototype.forEach=function(h,k){for(var m=this.entries(),
n;!(n=m.next()).done;)n=n.value,h.call(k,n[1],n[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(h,k){var m=k&&typeof k;"object"==m||"function"==m?b.has(k)?m=b.get(k):(m=""+ ++g,b.set(k,m)):m="p_"+k;var n=h.j[m];if(n&&la(h.j,m))for(h=0;h<n.length;h++){var r=n[h];if(k!==k&&r.key!==r.key||k===r.key)return{id:m,list:n,index:h,oa:r}}return{id:m,list:n,index:-1,oa:void 0}},e=function(h,k){var m=h.h;return ia(function(){if(m){for(;m.head!=h.h;)m=m.Qa;for(;m.next!=m.head;)return m=
m.next,{done:!1,value:k(m)};m=null}return{done:!0,value:void 0}})},f=function(){var h={};return h.Qa=h.next=h.head=h},g=0;return c});var Ia=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};ha("Array.prototype.entries",function(a){return a?a:function(){return Ia(this,function(b,c){return[b,c]})}});
ha("Array.prototype.keys",function(a){return a?a:function(){return Ia(this,function(b){return b})}});ha("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});
ha("Array.prototype.values",function(a){return a?a:function(){return Ia(this,function(b,c){return c})}});ha("Object.setPrototypeOf",function(a){return a||ua});ha("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)la(b,d)&&c.push([d,b[d]]);return c}});
var Ja=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};ha("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=Ja(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}});
ha("String.prototype.repeat",function(a){return a?a:function(b){var c=Ja(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});ha("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
ha("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});ha("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==Ja(this,b,"includes").indexOf(b,c||0)}});
ha("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});ha("String.prototype.padStart",function(a){return a?a:function(b,c){var d=Ja(this,null,"padStart");b-=d.length;c=void 0!==c?String(c):" ";return(0<b&&c?c.repeat(Math.ceil(b/c.length)).substring(0,b):"")+d}});
ha("Math.imul",function(a){return a?a:function(b,c){b=Number(b);c=Number(c);var d=b&65535,e=c&65535;return d*e+((b>>>16&65535)*e+d*(c>>>16&65535)<<16>>>0)|0}});ha("Array.prototype.flatMap",function(a){return a?a:function(b,c){var d=[];Array.prototype.forEach.call(this,function(e,f){e=b.call(c,e,f,this);Array.isArray(e)?d.push.apply(d,e):d.push(e)});return d}});ha("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)la(b,d)&&c.push(b[d]);return c}});
var Ka=Ka||{},u=this||self,w=function(a,b,c){a=a.split(".");c=c||u;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b},La=function(a,b){a=a.split(".");b=b||u;for(var c=0;c<a.length;c++)if(b=b[a[c]],null==b)return null;return b},Ma=function(a){var b=typeof a;b="object"!=b?b:a?Array.isArray(a)?"array":b:"null";return"array"==b||"object"==b&&"number"==typeof a.length},Na=
function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},Qa=function(a){return Object.prototype.hasOwnProperty.call(a,Oa)&&a[Oa]||(a[Oa]=++Pa)},Ra=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(Oa);try{delete a[Oa]}catch(b){}},Oa="closure_uid_"+(1E9*Math.random()>>>0),Pa=0,Sa=function(a,b,c){return a.call.apply(a.bind,arguments)},Ta=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},Ua=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ua=Sa:Ua=Ta;return Ua.apply(null,arguments)},Va=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}},Wa=function(){return Date.now()},Xa=function(a,b){function c(){}c.prototype=b.prototype;a.Ba=b.prototype;
a.prototype=new c;a.prototype.constructor=a;a.hi=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}},Ya=function(a){return a};function Za(a,b){if(Error.captureStackTrace)Error.captureStackTrace(this,Za);else{var c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a));void 0!==b&&(this.cause=b)}Xa(Za,Error);Za.prototype.name="CustomError";var $a;var ab,bb="undefined"!==typeof TextEncoder;function cb(a){u.setTimeout(function(){throw a;},0)};var db=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c},eb=function(a){return/^[\s\xa0]*$/.test(a)},fb=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},gb=function(a,b){return-1!=a.indexOf(b)},ib=function(a,b){return gb(a.toLowerCase(),b.toLowerCase())},kb=function(a,b){var c=0;a=fb(String(a)).split(".");b=fb(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",g=b[e]||"";
do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;c=jb(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||jb(0==f[2].length,0==g[2].length)||jb(f[2],g[2]);f=f[3];g=g[3]}while(0==c)}return c},jb=function(a,b){return a<b?-1:a>b?1:0};var nb,ob=La("CLOSURE_FLAGS"),pb=ob&&ob[610401301];nb=null!=pb?pb:!1;function qb(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}var sb,tb=u.navigator;sb=tb?tb.userAgentData||null:null;function ub(a){return nb?sb?sb.brands.some(function(b){return(b=b.brand)&&gb(b,a)}):!1:!1}function x(a){return gb(qb(),a)};function vb(){return nb?!!sb&&0<sb.brands.length:!1}function wb(){return vb()?!1:x("Opera")}function xb(){return vb()?!1:x("Trident")||x("MSIE")}function yb(){return x("Firefox")||x("FxiOS")}function zb(){return x("Safari")&&!(Ab()||(vb()?0:x("Coast"))||wb()||(vb()?0:x("Edge"))||(vb()?ub("Microsoft Edge"):x("Edg/"))||(vb()?ub("Opera"):x("OPR"))||yb()||x("Silk")||x("Android"))}function Ab(){return vb()?ub("Chromium"):(x("Chrome")||x("CriOS"))&&!(vb()?0:x("Edge"))||x("Silk")};function Bb(){return nb?!!sb&&!!sb.platform:!1}function Cb(){return Bb()?"Android"===sb.platform:x("Android")}function Db(){return x("iPhone")&&!x("iPod")&&!x("iPad")}function Eb(){return Bb()?"macOS"===sb.platform:x("Macintosh")};var Fb=function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Gb=function(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)e in d&&b.call(void 0,d[e],e,a)};function Hb(a,b){for(var c="string"===typeof a?a.split(""):a,d=a.length-1;0<=d;--d)d in c&&b.call(void 0,c[d],d,a)}
var Ib=function(a,b){for(var c=a.length,d=[],e=0,f="string"===typeof a?a.split(""):a,g=0;g<c;g++)if(g in f){var h=f[g];b.call(void 0,h,g,a)&&(d[e++]=h)}return d},Jb=function(a,b){for(var c=a.length,d=Array(c),e="string"===typeof a?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Kb=function(a,b,c){var d=c;Gb(a,function(e,f){d=b.call(void 0,d,e,f,a)});return d},Lb=function(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],
e,a))return!0;return!1};function Mb(a,b){b=Nb(a,b);return 0>b?null:"string"===typeof a?a.charAt(b):a[b]}function Nb(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return e;return-1}function Ob(a,b){for(var c="string"===typeof a?a.split(""):a,d=a.length-1;0<=d;d--)if(d in c&&b.call(void 0,c[d],d,a))return d;return-1}function Pb(a,b){return 0<=Fb(a,b)}function Qb(a,b){b=Fb(a,b);var c;(c=0<=b)&&Sb(a,b);return c}
function Sb(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function Tb(a,b){var c=0;Hb(a,function(d,e){b.call(void 0,d,e,a)&&Sb(a,e)&&c++})}function Ub(a){return Array.prototype.concat.apply([],arguments)}function Vb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Wb(a){for(var b=0,c=0,d={};c<a.length;){var e=a[c++],f=Na(e)?"o"+Qa(e):(typeof e).charAt(0)+e;Object.prototype.hasOwnProperty.call(d,f)||(d[f]=!0,a[b++]=e)}a.length=b}
function Xb(a,b){a.sort(b||Yb)}function Yb(a,b){return a>b?1:a<b?-1:0}function Zb(a){for(var b=[],c=0;c<a;c++)b[c]="";return b};var $b=function(a){$b[" "](a);return a};$b[" "]=function(){};var ac=function(a,b){try{return $b(a[b]),!0}catch(c){}return!1},cc=function(a){var b=bc;return Object.prototype.hasOwnProperty.call(b,8)?b[8]:b[8]=a(8)};var dc=wb(),ec=xb(),fc=x("Edge"),gc=x("Gecko")&&!(ib(qb(),"WebKit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),hc=ib(qb(),"WebKit")&&!x("Edge"),ic=Eb(),jc=Cb(),kc=Db(),lc=x("iPad"),mc=x("iPod"),nc=Db()||x("iPad")||x("iPod"),oc=function(){var a=u.document;return a?a.documentMode:void 0},pc;
a:{var qc="",rc=function(){var a=qb();if(gc)return/rv:([^\);]+)(\)|;)/.exec(a);if(fc)return/Edge\/([\d\.]+)/.exec(a);if(ec)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(hc)return/WebKit\/(\S+)/.exec(a);if(dc)return/(?:Version)[ \/]?(\S+)/.exec(a)}();rc&&(qc=rc?rc[1]:"");if(ec){var sc=oc();if(null!=sc&&sc>parseFloat(qc)){pc=String(sc);break a}}pc=qc}var tc=pc,bc={},uc=function(){return cc(function(){return 0<=kb(tc,8)})},vc;
if(u.document&&ec){var wc=oc();vc=wc?wc:parseInt(tc,10)||void 0}else vc=void 0;var xc=vc;var yc=yb(),zc=x("Android")&&!(Ab()||yb()||wb()||x("Silk")),Ac=Ab();zb();var Bc={},Cc=null,Ec=function(a,b){void 0===b&&(b=0);Dc();b=Bc[b];for(var c=Array(Math.floor(a.length/3)),d=b[64]||"",e=0,f=0;e<a.length-2;e+=3){var g=a[e],h=a[e+1],k=a[e+2],m=b[g>>2];g=b[(g&3)<<4|h>>4];h=b[(h&15)<<2|k>>6];k=b[k&63];c[f++]=""+m+g+h+k}m=0;k=d;switch(a.length-e){case 2:m=a[e+1],k=b[(m&15)<<2]||d;case 1:a=a[e],c[f]=""+b[a>>2]+b[(a&3)<<4|m>>4]+k+d}return c.join("")},Gc=function(a){var b=[];Fc(a,function(c){b.push(c)});return b},Fc=function(a,b){function c(k){for(;d<a.length;){var m=a.charAt(d++),
n=Cc[m];if(null!=n)return n;if(!eb(m))throw Error("Unknown base64 encoding at char: "+m);}return k}Dc();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),h=c(64);if(64===h&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=h&&b(g<<6&192|h))}},Dc=function(){if(!Cc){Cc={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=["+/=","+/","-_=","-_.","-_"],c=0;5>c;c++){var d=a.concat(b[c].split(""));Bc[c]=d;for(var e=0;e<d.length;e++){var f=d[e];void 0===Cc[f]&&(Cc[f]=e)}}}};var Hc="undefined"!==typeof Uint8Array,Ic=!ec&&"function"===typeof btoa,Jc,Kc={};var Lc=0,Mc=0;function Nc(a){var b=0>a;a=Math.abs(a);var c=a>>>0;a=Math.floor((a-c)/4294967296);b&&(c=q(Pc(c,a)),b=c.next().value,a=c.next().value,c=b);Lc=c>>>0;Mc=a>>>0}var Qc="function"===typeof BigInt;
function Rc(a){if(16>a.length)Nc(Number(a));else if(Qc)a=BigInt(a),Lc=Number(a&BigInt(4294967295))>>>0,Mc=Number(a>>BigInt(32)&BigInt(4294967295));else{var b=+("-"===a[0]);Mc=Lc=0;for(var c=a.length,d=0+b,e=(c-b)%6+b;e<=c;d=e,e+=6)d=Number(a.slice(d,e)),Mc*=1E6,Lc=1E6*Lc+d,4294967296<=Lc&&(Mc+=Lc/4294967296|0,Lc%=4294967296);b&&(b=q(Pc(Lc,Mc)),a=b.next().value,b=b.next().value,Lc=a,Mc=b)}}function Pc(a,b){b=~b;a?a=~a+1:b+=1;return[a,b]};var Sc=function(a,b){this.j=a>>>0;this.h=b>>>0},Uc=function(a){if(!a)return Tc||(Tc=new Sc(0,0));if(!/^\d+$/.test(a))return null;Rc(a);return new Sc(Lc,Mc)},Tc,Vc=function(a,b){this.j=a>>>0;this.h=b>>>0},Xc=function(a){if(!a)return Wc||(Wc=new Vc(0,0));if(!/^-?\d+$/.test(a))return null;Rc(a);return new Vc(Lc,Mc)},Wc;var Yc=function(){this.h=[]};Yc.prototype.length=function(){return this.h.length};Yc.prototype.end=function(){var a=this.h;this.h=[];return a};
var Zc=function(a,b,c){for(;0<c||127<b;)a.h.push(b&127|128),b=(b>>>7|c<<25)>>>0,c>>>=7;a.h.push(b)},$c=function(a,b){for(;127<b;)a.h.push(b&127|128),b>>>=7;a.h.push(b)},ad=function(a,b){if(0<=b)$c(a,b);else{for(var c=0;9>c;c++)a.h.push(b&127|128),b>>=7;a.h.push(1)}},bd=function(a,b){a.h.push(b>>>0&255);a.h.push(b>>>8&255);a.h.push(b>>>16&255);a.h.push(b>>>24&255)};var cd=function(){this.l=[];this.j=0;this.h=new Yc},dd=function(a,b){0!==b.length&&(a.l.push(b),a.j+=b.length)},fd=function(a,b){ed(a,b,2);b=a.h.end();dd(a,b);b.push(a.j);return b},gd=function(a,b){var c=b.pop();for(c=a.j+a.h.length()-c;127<c;)b.push(c&127|128),c>>>=7,a.j++;b.push(c);a.j++},hd=function(a,b){if(b=b.bd){dd(a,a.h.end());for(var c=0;c<b.length;c++)dd(a,b[c].h(Kc)||Jc||(Jc=new Uint8Array(0)))}},ed=function(a,b,c){$c(a.h,8*b+c)};var id="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol():void 0;function jd(a,b){if(id)return a[id]|=b;if(void 0!==a.h)return a.h|=b;Object.defineProperties(a,{h:{value:b,configurable:!0,writable:!0,enumerable:!1}});return b}function kd(a,b){var c=ld(a);(c&b)!==b&&(Object.isFrozen(a)&&(a=Array.prototype.slice.call(a)),md(a,c|b));return a}function nd(a,b){id?a[id]&&(a[id]&=~b):void 0!==a.h&&(a.h&=~b)}function ld(a){var b;id?b=a[id]:b=a.h;return null==b?0:b}
function md(a,b){id?a[id]=b:void 0!==a.h?a.h=b:Object.defineProperties(a,{h:{value:b,configurable:!0,writable:!0,enumerable:!1}});return a}function od(a){jd(a,1);return a}function pd(a){return!!(ld(a)&2)}function qd(a){jd(a,16);return a}function rd(a,b){md(b,(a|0)&-51)}function sd(a,b){md(b,(a|18)&-41)};var ud={};function vd(a){return null!==a&&"object"===typeof a&&!Array.isArray(a)&&a.constructor===Object}var wd,xd=Object.freeze(md([],23));function yd(a){if(a&2)throw Error();}function zd(a){var b=a.length;(b=b?a[b-1]:void 0)&&vd(b)?b.g=1:(b={},a.push((b.g=1,b)))};function Ad(a){if(null!=a&&"number"!==typeof a)throw Error("Value of float/double field must be a number|null|undefined, found "+typeof a+": "+a);return a}function Bd(a){if(null==a)return a;switch(typeof a){case "string":return+a;case "number":return a}}function Cd(a){return a}function Dd(a,b,c,d){var e=!1;if(null!=a&&"object"===typeof a&&!(e=Array.isArray(a))&&a.gd===ud)return a;if(!e)return c?d&2?(a=b[Ed])?b=a:(a=new b,jd(a.ca,18),b=b[Ed]=a):b=new b:b=void 0,b;Fd(a,d);return new b(a)}
function Fd(a,b){var c=ld(a),d=c;0===d&&(d|=b&16);d|=b&2;d!==c&&md(a,d)}var Ed="function"===typeof Symbol&&"symbol"===typeof Symbol()?Symbol():"di";var Gd=function(a){var b=a.j+a.ab;return a.ya||(a.ya=a.ca[b]={})},z=function(a,b,c){return-1===b?null:b>=a.j?a.ya?a.ya[b]:void 0:c&&a.ya&&(c=a.ya[b],null!=c)?c:a.ca[b+a.ab]},A=function(a,b,c,d){yd(ld(a.ca));return Hd(a,b,c,d)},Hd=function(a,b,c,d){a.l&&(a.l=void 0);if(b>=a.j||d)return Gd(a)[b]=c,a;a.ca[b+a.ab]=c;(c=a.ya)&&b in c&&delete c[b];return a};
function Id(a,b,c,d,e){var f=z(a,b,d);Array.isArray(f)||(f=xd);var g=ld(f);g&1||od(f);if(e)g&2||jd(f,18),c&1||Object.freeze(f);else{e=!(c&2);var h=g&2;c&1||!h?e&&g&16&&!h&&nd(f,16):(f=od(Array.prototype.slice.call(f)),Hd(a,b,f,d))}return f}var Jd=function(a,b){var c=z(a,b);var d=null==c?c:"number"===typeof c||"NaN"===c||"Infinity"===c||"-Infinity"===c?Number(c):void 0;null!=d&&d!==c&&Hd(a,b,d);return d},Kd=function(a,b){a=z(a,b);return null==a?a:!!a};
function Ld(a,b,c){var d=pd(a.ca),e=Id(a,b,1,void 0,d),f=ld(e);if(!(f&4)){Object.isFrozen(e)&&(e=od(e.slice()),Hd(a,b,e));for(var g=0,h=0;g<e.length;g++){var k=c(e[g]);null!=k&&(e[h++]=k)}h<g&&(e.length=h);f|=5;d&&(f|=18);md(e,f);f&2&&Object.freeze(e)}!d&&(f&2||Object.isFrozen(e))&&(e=Array.prototype.slice.call(e),jd(e,5),Hd(a,b,e));return e}
var Md=function(a,b,c){if(null==c)a=A(a,b,xd);else{var d=ld(c);if(!(d&4)){if(d&2||Object.isFrozen(c))c=Array.prototype.slice.call(c);for(var e=0;e<c.length;e++)c[e]=c[e];md(c,d|5)}a=A(a,b,c)}return a},Nd=function(a,b,c){c=null==c?xd:kd(c,1);return A(a,b,c)};function Od(a,b,c,d){yd(ld(a.ca));c!==d?Hd(a,b,c):Hd(a,b,void 0,!1);return a}
var Pd=function(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d];null!=z(a,e)&&(0!==c&&Hd(a,c,void 0,!1),c=e)}return c},Rd=function(a,b,c){var d=void 0===d?!1:d;var e=z(a,c,d);b=Dd(e,b,!1,ld(a.ca));b!==e&&null!=b&&Hd(a,c,b,d);e=b;if(null==e)return e;pd(a.ca)||(b=Qd(e),b!==e&&(e=b,Hd(a,c,e,d)));return e};
function Sd(a,b,c,d,e){var f=!!(e&2);a.h||(a.h={});var g=a.h[c],h=Id(a,c,3,void 0,f);if(!g){var k=h;g=[];f=!!(e&2);h=!!(ld(k)&2);var m=k;!f&&h&&(k=Array.prototype.slice.call(k));var n=e|(h?2:0);e=h;for(var r=0;r<k.length;r++){var v=k[r];var y=b;Array.isArray(v)?(Fd(v,n),v=new y(v)):v=void 0;void 0!==v&&(e=e||!!(2&ld(v.ca)),g.push(v))}a.h[c]=g;n=ld(k);b=n|33;b=e?b&-9:b|8;n!=b&&(e=k,Object.isFrozen(e)&&(e=Array.prototype.slice.call(e)),md(e,b),k=e);m!==k&&Hd(a,c,k);(f||1===d&&h)&&jd(g,18);(f||1===d)&&
Object.freeze(g);return g}if(3===d)return g;f||((f=Object.isFrozen(g),1!==d||f)?2===d&&f&&(g=Array.prototype.slice.call(g),a.h[c]=g):Object.freeze(g));return g}
var Td=function(a,b,c){var d=ld(a.ca),e=!!(d&2);b=Sd(a,b,c,e?1:2,d);a=Id(a,c,3,void 0,e);if(!(e||ld(a)&8)){for(e=0;e<b.length;e++)c=b[e],d=Qd(c),c!==d&&(b[e]=d,a[e]=d.ca);jd(a,8)}return b},Ud=function(a,b,c){yd(ld(a.ca));null==c&&(c=void 0);return Hd(a,b,c)},Vd=function(a,b,c,d){yd(ld(a.ca));var e=null==c?xd:od([]);if(null!=c){for(var f=!!c.length,g=0;g<c.length;g++){var h=c[g];f=f&&!pd(h.ca);e[g]=h.ca}e=kd(e,(f?8:0)|1);a.h||(a.h={});a.h[b]=c}else a.h&&(a.h[b]=void 0);return Hd(a,b,e,d)};
function Wd(a,b,c,d){var e=ld(a.ca);yd(e);e=Sd(a,c,b,2,e);c=null!=d?d:new c;a=Id(a,b,2,void 0,!1);e.push(c);a.push(c.ca);pd(c.ca)&&nd(a,8);return c}var Xd=function(a){a:if(a=z(a,1),null!=a){switch(typeof a){case "string":a=+a;break a;case "number":break a}a=void 0}return a},Yd=function(a,b){return Id(a,b,0,!1,pd(a.ca))};function Zd(a,b){return null==a?b:a}var $d=function(a,b){return Zd(z(a,b),0)};var ae;function be(a,b){ae=b;a=new a(b);ae=void 0;return a};function ce(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(a)if(Array.isArray(a)){if(0!==(ld(a)&128))return a=Array.prototype.slice.call(a),zd(a),a}else if(Hc&&null!=a&&a instanceof Uint8Array){if(Ic){for(var b="",c=0,d=a.length-10240;c<d;)b+=String.fromCharCode.apply(null,a.subarray(c,c+=10240));b+=String.fromCharCode.apply(null,c?a.subarray(c):a);a=btoa(b)}else a=Ec(a);return a}}return a};function de(a,b,c,d,e,f){if(null!=a){if(Array.isArray(a))a=e&&0==a.length&&ld(a)&1?void 0:f&&ld(a)&2?a:ee(a,b,c,void 0!==d,e,f);else if(vd(a)){var g={},h;for(h in a)g[h]=de(a[h],b,c,d,e,f);a=g}else a=b(a,d);return a}}function ee(a,b,c,d,e,f){var g=ld(a);d=d?!!(g&16):void 0;a=Array.prototype.slice.call(a);for(var h=0;h<a.length;h++)a[h]=de(a[h],b,c,d,e,f);c(g,a);return a}function fe(a){return a.gd===ud?a.toJSON():ce(a)}function ge(a,b){a&128&&zd(b)};function he(a,b,c){c=void 0===c?sd:c;if(null!=a){if(Hc&&a instanceof Uint8Array)return b?a:new Uint8Array(a);if(Array.isArray(a)){var d=ld(a);if(d&2)return a;if(b&&!(d&32)&&(d&16||0===d))return md(a,d|18),a;a=ee(a,he,d&4?sd:c,!0,!1,!0);b=ld(a);b&4&&b&2&&Object.freeze(a);return a}return a.gd===ud?ie(a):a}}function je(a,b,c,d,e,f,g){(a=a.h&&a.h[c])?(d=ld(a),d&2?d=a:(f=Jb(a,ie),sd(d,f),Object.freeze(f),d=f),Vd(b,c,d,e)):A(b,c,he(d,f,g),e)}
function ie(a){if(pd(a.ca))return a;a=ke(a,!0);jd(a.ca,18);return a}function ke(a,b){var c=a.ca,d=qd([]),e=a.constructor.messageId;e&&d.push(e);e=a.ya;if(e){d.length=c.length;var f={};d[d.length-1]=f}0!==(ld(c)&128)&&zd(d);b=b||pd(a.ca)?sd:rd;d=be(a.constructor,d);a.bd&&(d.bd=a.bd.slice());f=!!(ld(c)&16);for(var g=e?c.length-1:c.length,h=0;h<g;h++)je(a,d,h-a.ab,c[h],!1,f,b);if(e)for(var k in e)je(a,d,+k,e[k],!0,f,b);return d}function Qd(a){if(!pd(a.ca))return a;var b=ke(a,!1);b.l=a;return b};var C=function(a,b,c,d){null==a&&(a=ae);ae=void 0;var e=this.constructor.messageId;if(null==a){a=e?[e]:[];var f=48;var g=!0;d&&(f|=128);md(a,f)}else{if(!Array.isArray(a))throw Error();if(e&&e!==a[0])throw Error();f=jd(a,0)|32;g=0!==(16&f);if(d){if(f|=128,0<a.length){var h=a[a.length-1];if(vd(h)&&"g"in h){delete h.g;var k=!0,m;for(m in h){k=!1;break}k&&a.pop()}}}else if(128&f)throw Error();md(a,f)}this.ab=e?0:-1;this.h=void 0;this.ca=a;a:{f=this.ca.length;e=f-1;if(f&&(f=this.ca[e],vd(f))){this.ya=
f;this.j=e-this.ab;break a}void 0!==b&&-1<b?(this.j=Math.max(b,e+1-this.ab),this.ya=void 0):this.j=Number.MAX_VALUE}if(!d&&this.ya&&"g"in this.ya)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(c){b=g&&!0;d=this.j;var n;for(g=0;g<c.length;g++)e=c[g],e<d?(e+=this.ab,(f=a[e])?le(f,b):a[e]=xd):(n||(n=Gd(this)),(f=n[e])?le(f,b):n[e]=xd)}};C.prototype.toJSON=function(){var a=this.ca,b;wd?b=a:b=ee(a,fe,ge,void 0,!1,!1);return b};
var ne=function(a){wd=!0;try{return JSON.stringify(a.toJSON(),me)}finally{wd=!1}};function le(a,b){if(Array.isArray(a)){var c=ld(a),d=1;!b||c&2||(d|=16);(c&d)!==d&&md(a,c|d)}}C.prototype.gd=ud;C.prototype.toString=function(){return this.ca.toString()};function me(a,b){return ce(b)};function oe(a,b,c){if(c){var d={},e;for(e in c){var f=c[e],g=f.mg;g||(d.Db=f.pi||f.si.Kc,f.af?(d.Nc=pe(f.af),g=function(h){return function(k,m,n){return h.Db(k,m,n,h.Nc)}}(d)):f.If?(d.Mc=qe(f.kf.Rd,f.If),g=function(h){return function(k,m,n){return h.Db(k,m,n,h.Mc)}}(d)):g=d.Db,f.mg=g);g(b,a,f.kf);d={Db:d.Db,Nc:d.Nc,Mc:d.Mc}}}hd(b,a)}
function re(a,b){var c=a[b];"function"==typeof c&&0===c.length&&(c=c(),a[b]=c);return Array.isArray(c)&&(se in c||te in c||0<c.length&&"function"==typeof c[0])?c:void 0}var ue=Symbol();function pe(a){var b=a[ue];if(!b){var c=ve(a);b=function(d,e){return we(d,e,c)};a[ue]=b}return b}function qe(a,b){var c=a[ue];c||(c=function(d,e){return oe(d,e,b)},a[ue]=c);return c}var te=Symbol();function xe(a,b){a.push(b)}function ye(a,b,c){a.push(b,c.Kc)}
function ze(a,b,c,d){var e=pe(d),f=ve(d).Rd,g=c.Kc;a.push(b,function(h,k,m){return g(h,k,m,f,e)})}function Ae(a,b,c,d,e,f){var g=qe(d,f),h=c.Kc;a.push(b,function(k,m,n){return h(k,m,n,d,g)})}
function ve(a){var b=a[te];if(b)return b;b=a[te]=[];var c=xe,d=ye,e=ze,f=Ae;b.Rd=a[0];var g=1;if(a.length>g&&"number"!==typeof a[g]){var h=a[g++];c(b,h)}for(;g<a.length;){c=a[g++];for(var k=g+1;k<a.length&&"number"!==typeof a[k];)k++;h=a[g++];k-=g;switch(k){case 0:d(b,c,h);break;case 1:(k=re(a,g))?(g++,e(b,c,h,k)):d(b,c,h,a[g++]);break;case 2:k=b;var m=g++;m=re(a,m);e(k,c,h,m,a[g++]);break;case 3:f(b,c,h,a[g++],a[g++],a[g++]);break;case 4:f(b,c,h,a[g++],a[g++],a[g++],a[g++]);break;default:throw Error("unexpected number of binary field arguments: "+
k);}}se in a&&te in a&&(a.length=0);return b}var se=Symbol();function we(a,b,c){for(var d=c.length,e=1==d%2,f=e?1:0;f<d;f+=2)(0,c[f+1])(b,a,c[f]);oe(a,b,e?c[0]:void 0)}function Be(a,b){return{ri:a,Kc:b}}function Ce(a,b,c){b=z(b,c);null!=b&&("string"===typeof b&&Xc(b),null!=b&&(ed(a,c,0),"number"===typeof b?(a=a.h,Nc(b),Zc(a,Lc,Mc)):(c=Xc(b),Zc(a.h,c.j,c.h))))}function De(a,b,c){b=Bd(z(b,c));null!=b&&null!=b&&(ed(a,c,0),ad(a.h,b))}
var Ee=Be(function(a,b,c){if(1!==a.h())return!1;a=a.B();Od(b,c,Ad(a),0);return!0},function(a,b,c){b=Jd(b,c);if(null!=b){ed(a,c,1);a=a.h;var d=+b;if(0===d)Mc=0<1/d?0:2147483648,Lc=0;else if(isNaN(d))Mc=2147483647,Lc=4294967295;else if(d=(c=0>d?-2147483648:0)?-d:d,1.7976931348623157E308<d)Mc=(c|2146435072)>>>0,Lc=0;else if(2.2250738585072014E-308>d)b=d/Math.pow(2,-1074),Mc=(c|b/4294967296)>>>0,Lc=b>>>0;else{var e=d;b=0;if(2<=e)for(;2<=e&&1023>b;)b++,e/=2;else for(;1>e&&-1022<b;)e*=2,b--;d*=Math.pow(2,
-b);Mc=(c|b+1023<<20|1048576*d&1048575)>>>0;Lc=4503599627370496*d>>>0}bd(a,Lc);bd(a,Mc)}}),Fe=Be(function(a,b,c){if(5!==a.h())return!1;A(b,c,a.I());return!0},function(a,b,c){b=Jd(b,c);if(null!=b){ed(a,c,5);a=a.h;var d=+b;0===d?0<1/d?Lc=Mc=0:(Mc=0,Lc=2147483648):isNaN(d)?(Mc=0,Lc=2147483647):(d=(c=0>d?-2147483648:0)?-d:d,3.4028234663852886E38<d?(Mc=0,Lc=(c|2139095040)>>>0):1.1754943508222875E-38>d?(d=Math.round(d/Math.pow(2,-149)),Mc=0,Lc=(c|d)>>>0):(b=Math.floor(Math.log(d)/Math.LN2),d*=Math.pow(2,
-b),d=Math.round(8388608*d),16777216<=d&&++b,Mc=0,Lc=(c|b+127<<23|d&8388607)>>>0));bd(a,Lc)}}),Ge=Be(function(a,b,c){if(0!==a.h())return!1;A(b,c,a.l());return!0},Ce),He=Be(function(a,b,c){if(0!==a.h())return!1;a=a.l();Od(b,c,a,0);return!0},Ce),Ie=Be(function(a,b,c){if(0!==a.h())return!1;A(b,c,a.K());return!0},function(a,b,c){b=z(b,c);null!=b&&("string"===typeof b&&Uc(b),null!=b&&(ed(a,c,0),"number"===typeof b?(a=a.h,Nc(b),Zc(a,Lc,Mc)):(c=Uc(b),Zc(a.h,c.j,c.h))))}),Je=Be(function(a,b,c){if(0!==a.h())return!1;
A(b,c,a.j());return!0},De),Ke=Be(function(a,b,c){if(0!==a.h())return!1;a=a.j();Od(b,c,a,0);return!0},De),Le=Be(function(a,b,c){if(0!==a.h())return!1;A(b,c,a.A());return!0},function(a,b,c){b=Kd(b,c);null!=b&&(ed(a,c,0),a.h.h.push(b?1:0))}),Me=Be(function(a,b,c){if(2!==a.h())return!1;A(b,c,a.F());return!0},function(a,b,c){b=z(b,c);if(null!=b){var d=!1;d=void 0===d?!1:d;if(bb){if(d&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(b))throw Error("Found an unpaired surrogate");
b=(ab||(ab=new TextEncoder)).encode(b)}else{for(var e=0,f=new Uint8Array(3*b.length),g=0;g<b.length;g++){var h=b.charCodeAt(g);if(128>h)f[e++]=h;else{if(2048>h)f[e++]=h>>6|192;else{if(55296<=h&&57343>=h){if(56319>=h&&g<b.length){var k=b.charCodeAt(++g);if(56320<=k&&57343>=k){h=1024*(h-55296)+k-56320+65536;f[e++]=h>>18|240;f[e++]=h>>12&63|128;f[e++]=h>>6&63|128;f[e++]=h&63|128;continue}else g--}if(d)throw Error("Found an unpaired surrogate");h=65533}f[e++]=h>>12|224;f[e++]=h>>6&63|128}f[e++]=h&63|
128}}b=e===f.length?f:f.subarray(0,e)}ed(a,c,2);$c(a.h,b.length);dd(a,a.h.end());dd(a,b)}}),Ne=Be(function(a,b,c,d,e){if(2!==a.h())return!1;var f=a.o,g=ld(b.ca);yd(g);var h=z(b,c);d=Qd(Dd(h,d,!0,g));h!==d&&Hd(b,c,d);f.call(a,d,e);return!0},function(a,b,c,d,e){b=Rd(b,d,c);null!=b&&(c=fd(a,c),e(b,a),gd(a,c))}),Oe=Be(function(a,b,c,d,e){if(2!==a.h())return!1;a.o(Wd(b,c,d),e);return!0},function(a,b,c,d,e){b=Td(b,d,c);if(null!=b)for(d=0;d<b.length;d++){var f=fd(a,c);e(b[d],a);gd(a,f)}}),Pe=Be(function(a,
b,c){if(0!==a.h())return!1;A(b,c,a.C());return!0},function(a,b,c){b=z(b,c);null!=b&&(b=parseInt(b,10),ed(a,c,0),ad(a.h,b))});function Qe(a){return function(){var b=new cd;we(this,b,ve(a));dd(b,b.h.end());for(var c=new Uint8Array(b.j),d=b.l,e=d.length,f=0,g=0;g<e;g++){var h=d[g];c.set(h,f);f+=h.length}b.l=[c];return c}}function Re(a){return function(b){if(null==b||""==b)b=new a;else{b=JSON.parse(b);if(!Array.isArray(b))throw Error(void 0);b=be(a,qd(b))}return b}};var Ue=function(a,b){this.h=a===Se&&b||"";this.j=Te};Ue.prototype.xb=!0;Ue.prototype.gb=function(){return this.h};var Ve=function(a){return a instanceof Ue&&a.constructor===Ue&&a.j===Te?a.h:"type_error:Const"},Te={},Se={};var We=function(){},Xe=function(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}},Ye=function(a){var b=a;return function(){if(b){var c=b;b=null;c()}}},Ze=function(a){var b=0,c=!1,d=[],e=function(){b=0;c&&(c=!1,f())},f=function(){b=u.setTimeout(e,1E3);var g=d;d=[];a.apply(void 0,g)};return function(g){d=arguments;b?c=!0:f()}};var $e=Xe(function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});u.addEventListener("test",null,b)}catch(c){}return a});function af(a){return a?a.passive&&$e()?a:a.capture||!1:!1}var bf=function(a,b,c,d){return a.addEventListener?(a.addEventListener(b,c,af(d)),!0):!1},cf=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,af())};function df(a){a&&"function"==typeof a.W&&a.W()};var D=function(){this.K=this.K;this.I=this.I};D.prototype.K=!1;D.prototype.wa=function(){return this.K};D.prototype.W=function(){this.K||(this.K=!0,this.N())};var ff=function(a,b){ef(a,Va(df,b))},ef=function(a,b){a.K?b():(a.I||(a.I=[]),a.I.push(b))};D.prototype.N=function(){if(this.I)for(;this.I.length;)this.I.shift()()};var gf=function(){var a;this.h=a=void 0===a?{}:a};gf.prototype.reset=function(){this.h={}};var hf=ec||hc;function jf(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function kf(a,b){var c={},d;for(d in a)b.call(void 0,a[d],d,a)&&(c[d]=a[d]);return c}function lf(a){var b=mf,c;for(c in b)if(a.call(void 0,b[c],c,b))return!0;return!1}function nf(a){var b=of,c;for(c in b)if(!a.call(void 0,b[c],c,b))return!1;return!0}function pf(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function qf(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}
function rf(a,b){var c=Ma(b),d=c?b:arguments;for(c=c?0:1;c<d.length;c++){if(null==a)return;a=a[d[c]]}return a}function sf(a,b){return null!==a&&b in a}function tf(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function uf(a){var b=vf,c;for(c in b)if(a.call(void 0,b[c],c,b))return c}function wf(a){for(var b in a)return!1;return!0}function xf(a){for(var b in a)delete a[b]}function yf(a,b,c){return null!==a&&b in a?a[b]:c}var zf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Af(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<zf.length;f++)c=zf[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Bf,Cf=function(){if(void 0===Bf){var a=null,b=u.trustedTypes;if(b&&b.createPolicy){try{a=b.createPolicy("goog#html",{createHTML:Ya,createScript:Ya,createScriptURL:Ya})}catch(c){u.console&&u.console.error(c.message)}Bf=a}else Bf=a}return Bf};var Ef=function(a,b){this.h=b===Df?a:""};Ef.prototype.toString=function(){return this.h+""};Ef.prototype.xb=!0;Ef.prototype.gb=function(){return this.h.toString()};var Ff=function(a){return a instanceof Ef&&a.constructor===Ef?a.h:"type_error:TrustedResourceUrl"},Df={},Gf=function(a){var b=Cf();a=b?b.createScriptURL(a):a;return new Ef(a,Df)};var If=function(a,b){this.h=b===Hf?a:""};If.prototype.toString=function(){return this.h.toString()};If.prototype.xb=!0;If.prototype.gb=function(){return this.h.toString()};var Jf=function(a){return a instanceof If&&a.constructor===If?a.h:"type_error:SafeUrl"},Kf;try{new URL("s://g"),Kf=!0}catch(a){Kf=!1}var Lf=Kf,Hf={},Mf=new If("about:invalid#zClosurez",Hf);var Nf={},Of=function(a,b){this.h=b===Nf?a:"";this.xb=!0};Of.prototype.gb=function(){return this.h};Of.prototype.toString=function(){return this.h.toString()};var Pf=new Of("",Nf);var Qf={},Rf=function(a,b){this.h=b===Qf?a:"";this.xb=!0};Rf.prototype.gb=function(){return this.h.toString()};Rf.prototype.toString=function(){return this.h.toString()};var Sf=function(a){return a instanceof Rf&&a.constructor===Rf?a.h:"type_error:SafeHtml"},Tf=function(a){var b=Cf();a=b?b.createHTML(a):a;return new Rf(a,Qf)};var Uf=/^[\w+/_-]+[=]{0,2}$/,Vf=function(a,b){b=(b||u).document;return b.querySelector?(a=b.querySelector(a))&&(a=a.nonce||a.getAttribute("nonce"))&&Uf.test(a)?a:"":""};var Wf=function(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0};Wf.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};Wf.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};Wf.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};Wf.prototype.scale=function(a,b){this.x*=a;this.y*="number"===typeof b?b:a;return this};var E=function(a,b){this.width=a;this.height=b};l=E.prototype;l.aspectRatio=function(){return this.width/this.height};l.isEmpty=function(){return!(this.width*this.height)};l.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};l.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
l.scale=function(a,b){this.width*=a;this.height*="number"===typeof b?b:a;return this};var Xf=function(a){return decodeURIComponent(a.replace(/\+/g," "))},Yf=function(a,b){a.length>b&&(a=a.substring(0,b-3)+"...");return a},Zf=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)},$f=function(a){return null==a?"":String(a)},ag=2147483648*Math.random()|0,bg=function(a){return String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})},cg=function(){return"googleAvInapp".replace(/([A-Z])/g,"-$1").toLowerCase()},dg=function(a){return a.replace(RegExp("(^|[\\s]+)([a-z])",
"g"),function(b,c,d){return c+d.toUpperCase()})},eg=function(a){isFinite(a)&&(a=String(a));return"string"===typeof a?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};var hg=function(a){return a?new fg(gg(a)):$a||($a=new fg)},ig=function(a){var b=document;return"string"===typeof a?b.getElementById(a):a},kg=function(a,b){jf(b,function(c,d){c&&"object"==typeof c&&c.xb&&(c=c.gb());"style"==d?a.style.cssText=c:"class"==d?a.className=c:"for"==d?a.htmlFor=c:jg.hasOwnProperty(d)?a.setAttribute(jg[d],c):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,c):a[d]=c})},jg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",
height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},mg=function(a){a=a.document;a=lg(a)?a.documentElement:a.body;return new E(a.clientWidth,a.clientHeight)},ng=function(a){var b=a.scrollingElement?a.scrollingElement:!hc&&lg(a)?a.documentElement:a.body||a.documentElement;a=a.parentWindow||a.defaultView;return ec&&a.pageYOffset!=b.scrollTop?new Wf(b.scrollLeft,b.scrollTop):new Wf(a.pageXOffset||b.scrollLeft,a.pageYOffset||
b.scrollTop)},G=function(a){return a?a.parentWindow||a.defaultView:window},qg=function(a,b,c){var d=arguments,e=document,f=d[1],g=og(e,String(d[0]));f&&("string"===typeof f?g.className=f:Array.isArray(f)?g.className=f.join(" "):kg(g,f));2<d.length&&pg(e,g,d,2);return g},pg=function(a,b,c,d){function e(h){h&&b.appendChild("string"===typeof h?a.createTextNode(h):h)}for(;d<c.length;d++){var f=c[d];if(!Ma(f)||Na(f)&&0<f.nodeType)e(f);else{a:{if(f&&"number"==typeof f.length){if(Na(f)){var g="function"==
typeof f.item||"string"==typeof f.item;break a}if("function"===typeof f){g="function"==typeof f.item;break a}}g=!1}Gb(g?Vb(f):f,e)}}},og=function(a,b){b=String(b);"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase());return a.createElement(b)},lg=function(a){return"CSS1Compat"==a.compatMode},rg=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},sg=function(a){var b;if(hf&&(b=a.parentElement))return b;b=a.parentNode;return Na(b)&&1==b.nodeType?b:null},tg=function(a,b){if(!a||!b)return!1;
if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a},gg=function(a){return 9==a.nodeType?a:a.ownerDocument||a.document},ug=function(a){try{return a.contentWindow||(a.contentDocument?G(a.contentDocument):null)}catch(b){}return null},vg=function(a,b){a&&(a=a.parentNode);for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null},fg=function(a){this.h=a||
u.document||document};fg.prototype.getElementsByTagName=function(a,b){return(b||this.h).getElementsByTagName(String(a))};fg.prototype.appendChild=function(a,b){a.appendChild(b)};fg.prototype.append=function(a,b){pg(gg(a),a,arguments,1)};fg.prototype.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};var xg=function(){return nb&&sb?sb.mobile:!wg()&&(x("iPod")||x("iPhone")||x("Android")||x("IEMobile"))},wg=function(){return nb&&sb?!sb.mobile&&(x("iPad")||x("Android")||x("Silk")):x("iPad")||x("Android")&&!x("Mobile")||x("Silk")};var yg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$"),zg=function(a){var b=a.match(yg);a=b[1];var c=b[3];b=b[4];var d="";a&&(d+=a+":");c&&(d=d+"//"+c,b&&(d+=":"+b));return d},Ag=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?Xf(e):"")}}},Bg=/#|$/,Cg=function(a,b){var c=a.search(Bg);a:{var d=
0;for(var e=b.length;0<=(d=a.indexOf(b,d))&&d<c;){var f=a.charCodeAt(d-1);if(38==f||63==f)if(f=a.charCodeAt(d+e),!f||61==f||38==f||35==f)break a;d+=e+1}d=-1}if(0>d)return null;e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return Xf(a.slice(d,-1!==e?e:0))};var Dg=function(a){var b=[],c=[],d={},e=function(f,g){var h=g+"  ";try{if(void 0===f)b.push("undefined");else if(null===f)b.push("NULL");else if("string"===typeof f)b.push('"'+f.replace(/\n/g,"\n"+g)+'"');else if("function"===typeof f)b.push(String(f).replace(/\n/g,"\n"+g));else if(Na(f)){f[Oa]||c.push(f);var k=Qa(f);if(d[k])b.push("*** reference loop detected (id="+k+") ***");else{d[k]=!0;b.push("{");for(var m in f)"function"!==typeof f[m]&&(b.push("\n"),b.push(h),b.push(m+" = "),e(f[m],h));b.push("\n"+
g+"}");delete d[k]}}else b.push(f)}catch(n){b.push("*** "+n+" ***")}};e(a,"");for(a=0;a<c.length;a++)Ra(c[a]);return b.join("")};/*

 SPDX-License-Identifier: Apache-2.0
*/
var Eg;try{new URL("s://g"),Eg=!0}catch(a){Eg=!1}var Fg=Eg;function Gg(a,b){if(void 0!==a.tagName){if("script"===a.tagName.toLowerCase())throw Error("");if("style"===a.tagName.toLowerCase())throw Error("");}a.innerHTML=Sf(b)};function Hg(a){var b,c,d=null==(c=(b=(a.ownerDocument&&a.ownerDocument.defaultView||window).document).querySelector)?void 0:c.call(b,"script[nonce]");(b=d?d.nonce||d.getAttribute("nonce")||"":"")&&a.setAttribute("nonce",b)};function Ig(a,b){a.write(Sf(b))};var Jg=function(a){this.Gf=a};function Kg(a){return new Jg(function(b){return b.substr(0,a.length+1).toLowerCase()===a+":"})}var Lg=[Kg("data"),Kg("http"),Kg("https"),Kg("mailto"),Kg("ftp"),new Jg(function(a){return/^[^:]*([/?#]|$)/.test(a)})];var Mg=function(a){try{return!!a&&null!=a.location.href&&ac(a,"foo")}catch(b){return!1}},Og=function(a){var b=void 0===b?!1:b;var c=void 0===c?u:c;for(var d=0;c&&40>d++&&(!b&&!Mg(c)||!a(c));)c=Ng(c)},Pg=function(){var a=window;Og(function(b){a=b;return!1});return a},Ng=function(a){try{var b=a.parent;if(b&&b!=a)return b}catch(c){}return null},Qg=function(a,b){if(a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)},Rg=function(a){var b=a.length;if(0==b)return 0;for(var c=305419896,
d=0;d<b;d++)c^=(c<<5)+(c>>2)+a.charCodeAt(d)&4294967295;return 0<c?c:4294967296+c};function Sg(a){var b,c;return null!=(c=null==(b=/https?:\/\/[^\/]+/.exec(a))?void 0:b[0])?c:""}
var Tg=function(){var a=u;try{for(var b=null;b!=a;b=a,a=a.parent)switch(a.location.protocol){case "https:":return!0;case "file:":return!0;case "http:":return!1}}catch(c){}return!0},Ug=function(a,b){try{return!(!a.frames||!a.frames[b])}catch(c){return!1}},Vg=function(a,b){for(var c=0;50>c;++c){if(Ug(a,b))return a;if(!(a=Ng(a)))break}return null},Wg=function(a,b){b=void 0===b?document:b;return b.createElement(String(a).toLowerCase())},Xg=function(a){for(var b=a;a&&a!=a.parent;)a=a.parent,Mg(a)&&(b=
a);return b};var H=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};H.prototype.getWidth=function(){return this.right-this.left};H.prototype.getHeight=function(){return this.bottom-this.top};var Yg=function(a){return new H(a.top,a.right,a.bottom,a.left)};H.prototype.expand=function(a,b,c,d){Na(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=Number(b),this.bottom+=Number(c),this.left-=Number(d));return this};
H.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};H.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
H.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};var Zg=function(a,b,c){b instanceof Wf?(a.left+=b.x,a.right+=b.x,a.top+=b.y,a.bottom+=b.y):(a.left+=b,a.right+=b,"number"===typeof c&&(a.top+=c,a.bottom+=c));return a};H.prototype.scale=function(a,b){b="number"===typeof b?b:a;this.left*=a;this.right*=a;this.top*=b;this.bottom*=b;return this};var $g=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d},ah=function(a){return new H(a.top,a.left+a.width,a.top+a.height,a.left)};l=$g.prototype;l.getSize=function(){return new E(this.width,this.height)};l.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
l.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};l.scale=function(a,b){b="number"===typeof b?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function bh(a){a=void 0===a?u:a;var b=a.context||a.AMP_CONTEXT_DATA;if(!b)try{b=a.parent.context||a.parent.AMP_CONTEXT_DATA}catch(e){}var c,d;return(null==(c=b)?0:c.pageViewId)&&(null==(d=b)?0:d.canonicalUrl)?b:null};var ch=function(){this.S={}},dh=function(){var a=bh(window);if(a){if(a){var b=a.pageViewId;a=a.clientId;"string"===typeof a&&(b+=a.replace(/\D/g,"").substr(0,6))}else b=null;return+b}b=Xg(window);(a=b.google_global_correlator)||(b.google_global_correlator=a=1+Math.floor(Math.random()*Math.pow(2,43)));return a},fh=function(a,b){var c=eh[7]||"google_ps_7";a=a.S;var d=a[c];return void 0===d?(a[c]=b(),a[c]):d},gh=function(a){var b=dh();return fh(a,function(){return b})},ih=function(){if(hh)var a=hh;else{a=
((a=void 0===a?bh():a)?Mg(a.master)?a.master:null:null)||window;var b=a.google_persistent_state_async;a=null!=b&&"object"==typeof b&&null!=b.S&&"object"==typeof b.S?hh=b:a.google_persistent_state_async=hh=new ch}return gh(a)},hh=null,jh={},eh=(jh[8]="google_prev_ad_formats_by_region",jh[9]="google_prev_ad_slotnames_by_region",jh);var lh=function(a,b,c,d,e){kh(a,b,void 0===c?null:c,void 0===d?!1:d,void 0===e?!1:e)};function kh(a,b,c,d,e){e=void 0===e?!1:e;a.google_image_requests||(a.google_image_requests=[]);var f=Wg("IMG",a.document);if(c||d){var g=function(h){c&&c(h);d&&Qb(a.google_image_requests,f);cf(f,"load",g);cf(f,"error",g)};bf(f,"load",g);bf(f,"error",g)}e&&(f.attributionSrc="");f.src=b;a.google_image_requests.push(f)}
var nh=function(a,b){var c=void 0===c?!1:c;var d="https://pagead2.googlesyndication.com/pagead/gen_204?id="+b;Qg(a,function(e,f){if(e||0===e)d+="&"+f+"="+encodeURIComponent(""+e)});mh(d,c)},mh=function(a,b){var c=window;b=void 0===b?!1:b;var d=void 0===d?!1:d;c.fetch?(b={keepalive:!0,credentials:"include",redirect:"follow",method:"get",mode:"no-cors"},d&&(b.mode="cors",b.headers={"Attribution-Reporting-Eligible":"event-source"}),c.fetch(a,b)):lh(c,a,void 0,b,d)};var oh=function(a,b,c){c=void 0===c?{}:c;this.error=a;this.context=b.context;this.msg=b.message||"";this.id=b.id||"jserror";this.meta=c},ph=function(a){return!!(a.error&&a.meta&&a.id)};function I(a){var b=Ha.apply(1,arguments);if(0===b.length)return Gf(a[0]);for(var c=[a[0]],d=0;d<b.length;d++)c.push(encodeURIComponent(b[d])),c.push(a[d+1]);return Gf(c.join(""))}function qh(a,b){var c=Ff(a).toString();if(/#/.test(c))throw Error("");var d=/\?/.test(c)?"&":"?";b.forEach(function(e,f){e=e instanceof Array?e:[e];for(var g=0;g<e.length;g++){var h=e[g];null!==h&&void 0!==h&&(c+=d+encodeURIComponent(f)+"="+encodeURIComponent(String(h)),d="&")}});return Gf(c)};var rh=p(["https://pagead2.googlesyndication.com/pagead/js/err_rep.js"]),sh=function(){var a=void 0===a?"jserror":a;var b=void 0===b?.01:b;var c=void 0===c?I(rh):c;this.j=a;this.l=!1;this.h=null;this.o=!1;this.C=Math.random();this.A=b;this.B=this.Oa;this.I=c};l=sh.prototype;l.td=function(a){this.j=a};l.Gc=function(a){this.h=a};l.ud=function(a){this.l=a};l.wd=function(a){this.o=a};
l.Oa=function(a,b,c,d,e){c=void 0===c?this.A:c;e=void 0===e?this.j:e;if((this.o?this.C:Math.random())>c)return this.l;ph(b)||(b=new oh(b,{context:a,id:e}));if(d||this.h)b.meta={},this.h&&this.h(b.meta),d&&d(b.meta);u.google_js_errors=u.google_js_errors||[];u.google_js_errors.push(b);u.error_rep_loaded||(b=u.document,a=Wg("SCRIPT",b),a.src=Ff(this.I),Hg(a),(b=b.getElementsByTagName("script")[0])&&b.parentNode&&b.parentNode.insertBefore(a,b),u.error_rep_loaded=!0);return this.l};
l.kb=function(a,b,c){try{return b()}catch(d){if(!this.B(a,d,this.A,c,this.j))throw d;}};l.pd=function(a,b,c,d){var e=this;return function(){var f=Ha.apply(0,arguments);return e.kb(a,function(){return b.apply(c,f)},d)}};var th=function(a){return a.prerendering?3:{visible:1,hidden:2,prerender:3,preview:4,unloaded:5}[a.visibilityState||a.webkitVisibilityState||a.mozVisibilityState||""]||0},uh=function(a){var b;a.visibilityState?b="visibilitychange":a.mozVisibilityState?b="mozvisibilitychange":a.webkitVisibilityState&&(b="webkitvisibilitychange");return b};var vh=null;function wh(){var a=void 0===a?u:a;return(a=a.performance)&&a.now&&a.timing?Math.floor(a.now()+a.timing.navigationStart):Wa()}function xh(){var a=void 0===a?u:a;return(a=a.performance)&&a.now?a.now():null}function yh(a,b){b=void 0===b?u:b;var c,d;return(null==(c=b.performance)?void 0:null==(d=c.timing)?void 0:d[a])||0}
function zh(){var a=void 0===a?u:a;var b=Math.min(yh("domLoading",a)||Infinity,yh("domInteractive",a)||Infinity);return Infinity===b?Math.max(yh("responseEnd",a),yh("navigationStart",a)):b};var Ah=function(a,b,c,d){this.label=a;this.type=b;this.value=c;this.duration=void 0===d?0:d;this.uniqueId=Math.random();this.taskId=this.slotId=void 0};var Bh=u.performance,Ch=!!(Bh&&Bh.mark&&Bh.measure&&Bh.clearMarks),Dh=Xe(function(){var a;if(a=Ch){var b;if(null===vh){vh="";try{a="";try{a=u.top.location.hash}catch(c){a=u.location.hash}a&&(vh=(b=a.match(/\bdeid=([\d,]+)/))?b[1]:"")}catch(c){}}b=vh;a=!!b.indexOf&&0<=b.indexOf("1337")}return a}),Eh=function(a,b){this.C=[];this.h=b||u;var c=null;b&&(b.google_js_reporting_queue=b.google_js_reporting_queue||[],this.C=b.google_js_reporting_queue,c=b.google_measure_js_timing);this.l=Dh()||(null!=c?c:Math.random()<
a)};Eh.prototype.I=function(){this.l=!1;this.C!=this.h.google_js_reporting_queue&&(Dh()&&Gb(this.C,Fh),this.C.length=0)};Eh.prototype.K=function(a){!this.l||2048<this.C.length||this.C.push(a)};var Fh=function(a){a&&Bh&&Dh()&&(Bh.clearMarks("goog_"+a.label+"_"+a.uniqueId+"_start"),Bh.clearMarks("goog_"+a.label+"_"+a.uniqueId+"_end"))};Eh.prototype.start=function(a,b){if(!this.l)return null;a=new Ah(a,b,xh()||wh());b="goog_"+a.label+"_"+a.uniqueId+"_start";Bh&&Dh()&&Bh.mark(b);return a};
Eh.prototype.end=function(a){if(this.l&&"number"===typeof a.value){a.duration=(xh()||wh())-a.value;var b="goog_"+a.label+"_"+a.uniqueId+"_end";Bh&&Dh()&&Bh.mark(b);this.K(a)}};var Gh=function(a){a=a._google_rum_ns_=a._google_rum_ns_||{};return a.pq=a.pq||[]};var Hh=function(a,b,c){Qg(b,function(d,e){var f=c&&c[e];!d&&0!==d||f||(a+="&"+encodeURIComponent(e)+"="+encodeURIComponent(String(d)),c&&(c[e]=!0))});return a},Oh=function(a,b,c,d,e,f,g,h){f=void 0===f?Infinity:f;g=void 0===g?!1:g;Eh.call(this,a,h);var k=this;this.F=0;this.M=f;this.aa=b;this.L=c;this.Z=d;this.ia=e;a=this.h.navigator;this.Y=!("csi.gstatic.com"!==this.L||!a||!a.sendBeacon);this.A={};this.J={};this.h.performance&&this.h.performance.now||Ih(this,"dat",1);a&&a.deviceMemory&&Ih(this,"dmc",
a.deviceMemory);this.h===this.h.top&&Ih(this,"top",1);this.V=!g;this.P=function(){k.h.setTimeout(function(){return Jh(k)},1100)};this.da=[];this.U=function(){Ih(k,"uet",2);for(var n=q(k.da),r=n.next();!r.done;r=n.next()){r=r.value;try{r()}catch(y){}}n=k.h;var v=void 0===v?{}:v;"function"===typeof window.CustomEvent?r=new CustomEvent("rum_blp",v):(r=document.createEvent("CustomEvent"),r.initCustomEvent("rum_blp",!!v.bubbles,!!v.cancelable,v.detail));n.dispatchEvent(r);Jh(k);null!=k.A.uet&&(k.o-=3+
k.A.uet.length+2,delete k.A.uet)};this.ka=Ze(function(){Jh(k)});this.ua=function(){var n=k.h.document;(null!=n.hidden?n.hidden:null!=n.mozHidden?n.mozHidden:null!=n.webkitHidden&&n.webkitHidden)&&k.ka()};this.G=this.h.setTimeout(function(){return Jh(k)},5E3);this.B={};this.o=b.length+c.length+d.length+e.length+3;this.j=0;Gb(this.C,function(n){return Kh(k,n)});this.H=[];b=Gh(this.h);var m=function(n){var r=n[0];n=n[1];var v=r.length+n.length+2;8E3<k.o+k.j+v&&Jh(k);k.H.push([r,n]);k.j+=v;Lh(k);return 0};
Gb(b,function(n){return m(n)});b.length=0;b.push=m;Mh(this);Nh(this)};t(Oh,Eh);
var Nh=function(a){"complete"===a.h.document.readyState?a.h.setTimeout(function(){return Jh(a)},0):bf(a.h,"load",a.P);var b=uh(a.h.document);"undefined"!==typeof b&&bf(a.h,b,a.ua);bf(a.h,"pagehide",a.U)},Ih=function(a,b,c){c=String(c);a.o=null!=a.A[b]?a.o+(c.length-a.A[b].length):a.o+(b.length+c.length+2);a.A[b]=c},Rh=function(a,b,c,d,e){e=void 0===e?"":e;var f=Ph(a,b,c,d,e);8E3<a.o+a.j+f&&(Jh(a),f=b.length+c.length+2);Qh(a,b,c,d,e);a.j+=f;Lh(a)},Ph=function(a,b,c,d,e){return null==a.B[b]?b.length+
c.length+2:d?c.length+(void 0===e?"":e).length:c.length-a.B[b].length},Qh=function(a,b,c,d,e){a.B[b]=d&&null!=a.B[b]?a.B[b]+(""+(void 0===e?"":e)+c):c},Lh=function(a){6E3<=a.o+a.j&&Jh(a)},Jh=function(a){if(a.l&&a.V){try{if(a.j){var b=a.B;a.F++;var c=Sh(a,b);b=!1;try{b=!!(a.Y&&a.h.navigator&&a.h.navigator.sendBeacon(c,null))}catch(d){a.Y=!1}b||lh(a.h,c);Mh(a);a.F===a.M&&a.I()}}catch(d){(new sh).Oa(358,d)}a.B={};a.j=0;a.C.length=0;a.h.clearTimeout(a.G);a.G=0}},Sh=function(a,b){var c=a.aa+"//"+a.L+a.Z+
a.ia,d={};c=Hh(c,a.A,d);c=Hh(c,b,d);b=a.h;b.google_timing_params&&(c=Hh(c,b.google_timing_params,d),b.google_timing_params=void 0);Gb(a.H,function(e){var f=q(e);e=f.next().value;f=f.next().value;var g={};c=Hh(c,(g[e]=f,g))});a.H.length=0;return c},Mh=function(a){Ih(a,"puid",(a.F+1).toString(36)+"~"+Wa().toString(36))},Kh=function(a,b){var c="met."+b.type,d="number"===typeof b.value?Math.round(b.value).toString(36):b.value,e=Math.round(b.duration);b=""+b.label+(null!=b.slotId?"_"+b.slotId:"")+("."+
d)+(0<e?"_"+e.toString(36):"")+(null!=b.taskId?"__"+Math.round(b.taskId).toString(36):"");Rh(a,c,b,!0,"~")};Oh.prototype.K=function(a){this.l&&this.F<this.M&&(Eh.prototype.K.call(this,a),Kh(this,a))};Oh.prototype.I=function(){Eh.prototype.I.call(this);this.h.clearTimeout(this.G);this.j=this.G=0;this.B={};xf(this.J);xf(this.A);cf(this.h,"load",this.P);cf(this.h,"pagehide",this.U)};var J=function(a){var b="ib";if(a.ib&&a.hasOwnProperty(b))return a.ib;b=new a;return a.ib=b};var K=function(){this.h=new Oh(1,"https:","csi.gstatic.com","/csi?v=2&s=","ima",void 0,!0);var a=ih();null!=a&&Ih(this.h,"c",a);a=parseInt(this.h.A.c,10)/2;null!=a&&Ih(this.h,"slotId",a)},L=function(a,b,c){if(null!=c){a=a.h;var d=b+"="+c;a.J[d]||(Rh(a,b,c,!1),1E3>d.length&&(a.J[d]=!0))}},Th=function(a,b){for(var c in b)b[c]="object"===typeof b[c]?encodeURIComponent(JSON.stringify(b[c])):encodeURIComponent(String(b[c]));a=a.h;c=!1;var d=0,e;for(e in b)null!=a.B[e]&&(c=!0),d+=Ph(a,e,b[e],!1);(8E3<a.o+
a.j+d||c)&&Jh(a);for(var f in b)Qh(a,f,b[f],!1);a.j+=d;Lh(a)},Uh=function(a){var b=K.h().h;b.l&&b.K(new Ah(a,4,wh()-0,0))};
K.prototype.recordClick=function(a,b,c,d){for(var e=!1,f="notag";void 0!=d&&d!=document.documentElement;){var g=void 0,h=void 0;if((null==(g=d)?0:g.getAttribute("data-ck-navigates"))||(null==(h=d)?0:h.getAttribute("data-ck-tag"))){g=f=void 0;e=null!=(g=null==(f=d)?void 0:f.getAttribute("data-ck-navigates"))?g:!1;h=g=void 0;f=null!=(h=null==(g=d)?void 0:g.getAttribute("data-ck-tag"))?h:"notag";break}g=void 0;d=null!=(g=d.parentElement)?g:void 0}d=this.h;d.l&&d.K(new Ah(a+"_"+b+"x"+c+"|"+e+"|"+f,4,
wh(),0))};K.h=function(){return J(K)};var Vh=function(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))},Wh=function(a){try{return u.JSON.parse(a)}catch(b){}a=String(a);if(Vh(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);},Yh=function(){this.h=Xh},Zh=function(a,b,c){if(null==
b)c.push("null");else{if("object"==typeof b){if(Array.isArray(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),e=d[f],Zh(a,a.h?a.h.call(d,String(f),e):e,c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");f="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(f),$h(d,c),c.push(":"),Zh(a,a.h?a.h.call(b,d,e):e,c),f=","));c.push("}");return}}switch(typeof b){case "string":$h(b,
c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}},ai={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},bi=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,$h=function(a,b){b.push('"',a.replace(bi,function(c){var d=ai[c];d||(d="\\u"+(c.charCodeAt(0)|65536).toString(16).slice(1),
ai[c]=d);return d}),'"')};var ci=function(){this.l=null;this.h="missing-id";this.j=!1},ei=function(a){var b=null;try{b=document.getElementsByClassName("lima-exp-data")}catch(c){return di("missing-element",a.h),null}if(1<b.length)return di("multiple-elements",a.h),null;b=b[0];return b?b.innerHTML:(di("missing-element",a.h),null)},gi=function(){var a=fi,b=ei(a);if(null!==b)if(Vh(b)){var c=JSON.parse(b);b=c.experimentIds;var d=c.binaryIdentifier;c=c.adEventId;var e="string"===typeof d;if("string"==typeof c){var f=K.h();null!=
c&&Ih(f.h,"qqid",c)}e&&(a.h=d);"string"!==typeof b?di("missing-flags",a.h):(e||di("missing-binary-id",a.h),a.l=b)}else di("invalid-json",a.h)};ci.prototype.reset=function(){this.l=null;this.h="missing-id"};var ii=function(a,b,c,d,e){this.id=a;this.D=b;this.o=c;this.h=!1;this.l=d;this.j=e;this.o&&hi(this)},ji=function(a){return a.h||a.o},hi=function(a){if(a.l&&a.j){var b=a.l;b&&Object.assign(a.j.h,b)}},ki=function(){this.h=[]},li=function(){this.h=new Map;this.j=!1;this.A=new ki;this.B=new ii(0,0,!1);this.l=[this.A];this.o=new gf},M=function(a){var b=mi;if(b.j||b.h.has(a.id)||null==a.D&&null==a.control||0==a.df)return b.B;var c=b.A;if(null!=a.control)for(var d=q(b.l),e=d.next();!e.done;e=d.next()){if(e=
e.value,e.h.includes(a.control)){c=e;break}}else null!=a.X&&(c=a.X);d=0;null!=a.control?d=a.control.D:null!=a.D&&(d=a.D);a=new ii(a.id,d,!!a.li,a.flags,b.o);c.h.push(a);b.l.includes(c)||b.l.push(c);b.h.set(a.id,a);return a},ni=function(){var a=mi;return[].concat(ka(a.h.keys())).filter(function(b){return ji(this.h.get(b))},a)},oi=function(a){var b=mi;b.j||(a.h(b.l,b.h),b.j=!0)};
li.prototype.reset=function(){for(var a=q(this.h),b=a.next();!b.done;b=a.next())b=q(b.value),b.next(),b.next().value.h=!1;this.j=!1;this.o.reset()};var mi=new li,qi=function(){return pi.h.filter(function(a){return ji(a)}).map(function(a){return a.id})};var ri=function(){};ri.prototype.h=function(a){a=q(a);for(var b=a.next();!b.done;b=a.next()){var c=0,d=Math.floor(1E3*Math.random());b=q(b.value.h);for(var e=b.next();!e.done;e=b.next())if(e=e.value,c+=e.D,d<c){e.h=!0;hi(e);break}}};var ti=function(a){C.call(this,a,-1,si)};t(ti,C);var si=[2,8],ui=[3,4,5];var wi=function(a){C.call(this,a,-1,vi)};t(wi,C);var vi=[4];var yi=function(a){C.call(this,a,-1,xi)};t(yi,C);var xi=[5],zi=[1,2,3,6,7];var Bi=function(a){C.call(this,a,-1,Ai)};t(Bi,C);Bi.prototype.getId=function(){return Zd(z(this,1),0)};var Ai=[2];var Di=function(a){C.call(this,a,-1,Ci)};t(Di,C);var Ci=[2];var Fi=function(a){C.call(this,a,-1,Ei)};t(Fi,C);var Ei=[2];var Hi=function(a){C.call(this,a,-1,Gi)};t(Hi,C);var Gi=[1,4,2,3];function Ii(a,b){switch(b){case 1:return $d(a,1===Pd(a,zi)?1:-1);case 2:return $d(a,2===Pd(a,zi)?2:-1);case 3:return $d(a,3===Pd(a,zi)?3:-1);case 6:return $d(a,6===Pd(a,zi)?6:-1);default:return null}}function Ji(a,b){if(!a)return null;switch(b){case 1:return Zd(Kd(a,1),!1);case 7:return Zd(z(a,3),"");case 2:var c=void 0===c?0:c;return Zd(Jd(a,2),c);case 3:return Zd(z(a,3),"");case 6:return Ld(a,4,Cd);default:return null}};var Ki={},Li=(Ki[47]=yc,Ki);function Mi(){var a=Ni,b=Td(new Hi(Oi),Fi,2);1==b.length&&16==$d(b[0],1)&&Td(b[0],Di,2).forEach(function(c){var d=Zd(Xd(c),0),e=Rd(c,ti,3),f=a[$d(c,4)];Td(c,Bi,2).forEach(function(g){var h=d||Zd(z(g,4),0),k=g.getId(),m=e||Rd(g,ti,3);m=m?$d(m,3===Pd(m,ui)?3:-1):null;m=Li[m];g=Pi(Td(g,yi,2));M({id:k,D:h,X:f,df:m,flags:g})})})}function Pi(a){if(a.length){var b={};a.forEach(function(c){var d=Pd(c,zi),e=Rd(c,wi,4);e&&(c=Ii(c,d),d=Ji(e,d),b[c]=d)});return b}};var Qi=function(a){this.j=a};Qi.prototype.h=function(a,b){a=q(this.j);for(var c=a.next();!c.done;c=a.next())if(c=b.get(c.value))c.h=!0,hi(c)};var Ri=function(a,b){this.j=a;this.l=b};t(Ri,Qi);Ri.prototype.h=function(a,b){Qi.prototype.h.call(this,a,b);var c=[];a=[];for(var d=q(this.j),e=d.next();!e.done;e=d.next())e=e.value,b.get(e)?c.push(e):a.push(e);b=c.map(String).join(",")||"0";a=a.map(String).join(",")||"0";L(K.h(),"sei",b);L(K.h(),"nsei",a);L(K.h(),"bi",this.l)};var Si=function(){ci.apply(this,arguments)};t(Si,ci);var di=function(a,b){var c=K.h();L(c,"eee",a);L(c,"bi",b)};Si.h=function(){return J(Si)};function Ti(){return Ui.split(",").map(function(a){return parseInt(a,10)}).filter(function(a){return!isNaN(a)})};var pi=new ki,Vi=new ki,Wi=new ki,Xi=new ki,Yi=new ki,Zi=new ki,$i=new ki,aj=new ki,bj=new ki,cj=new ki,dj=new ki,ej=new ki,fj=new ki,gj=new ki,hj=new ki,ij=new ki;M({id:45786216,D:10});M({id:318475490,D:0});M({id:324123032,D:0});M({id:418572103,D:0});M({id:420706097,D:10});M({id:420706098,D:10});M({id:21062100,D:0});M({id:420706105,D:0});M({id:420706106,D:0});M({id:21064018,D:0});M({id:21064020,D:0});M({id:21064022,D:0});M({id:21064024,D:0});M({id:21064075,D:0});M({id:21064201,D:0});
M({id:420706142,D:0});M({id:21064347,D:0});M({id:44745813,D:0});M({id:44746068,D:0});M({id:21064565,D:0});M({id:21064567,D:0});M({id:418572006,D:10});M({id:44768716,D:10,X:ej});var jj=M({id:44768717,D:10,X:ej}),kj=M({id:44787137,D:10,X:ej}),lj=M({id:44744588,D:10}),mj=M({id:44747319,D:10});M({id:44740339,D:10});var nj=M({id:44740340,D:10});M({id:44749839,D:0});var oj=M({id:44749840,D:0});M({id:44749841,D:0});var pj=M({id:44749842,D:0});M({id:44749843,D:1});var qj=M({id:44749844,D:1});
M({id:44749845,D:1});var rj=M({id:44749846,D:1});M({id:44714743,D:0});M({id:44719216,D:0});M({id:44730895,D:10});M({id:44730896,D:10});M({id:44736292,D:10});M({id:44736293,D:10});M({id:44772138,D:0,X:Yi});M({id:44772139,X:Yi,D:1E3});M({id:31061774,D:10});var sj=M({id:31061775,D:10});M({id:44715336,D:10});M({id:44729309,D:10});M({id:75259410,D:0});M({id:75259412,D:0});M({id:75259413,D:0});M({id:44773378,D:10,X:Wi});var tj=M({id:44773379,D:10,X:Wi});M({id:44724516,D:0});M({id:44726389,D:10});
M({id:44752711,D:50});M({id:44752052,D:50});M({id:44752657,D:50});M({id:44781407,X:Xi,D:0});M({id:44781408,X:Xi,D:0});M({id:44781409,X:Xi,D:1E3});M({id:44777647,X:Zi,D:0});M({id:44777648,X:Zi,D:0});M({id:44777649,X:Zi,D:1E3});M({id:44781752,X:aj,D:10});M({id:44781753,X:aj,D:990});M({id:44782990,X:bj,D:10});M({id:44782991,X:bj,D:990});M({id:44727953,D:0});M({id:44729911,D:0});M({id:44782089,X:$i,D:10});M({id:44782090,X:$i,D:10});M({id:44730425,D:0});M({id:44730426,D:0});M({id:44733246,D:10});
M({id:44750823,D:10,X:dj});M({id:44750824,D:10,X:dj});M({id:44750822,D:10,X:dj});M({id:44737473,D:10,X:Vi});M({id:44771449,D:10,X:Vi});M({id:44771450,D:10,X:Vi});M({id:44751889,D:10});M({id:44751890,D:10});M({id:44752995,D:10});M({id:44752996,D:10});var uj=M({id:44748969,D:1E3,X:gj});M({id:44762627,D:0});M({id:44762628,D:0});M({id:44752538,D:0});M({id:44754608,D:10});M({id:44754609,D:10});M({id:44770822,D:10});M({id:44770823,D:10});M({id:44770824,D:10});M({id:44770825,D:10});M({id:75259414,D:0});
M({id:44731964,D:50,X:pi});M({id:44731965,D:50,X:pi});M({id:44765701,D:1E3,X:fj});M({id:44767584,D:0});var vj,wj=(null==(vj=window.document.featurePolicy)?0:vj.allowedFeatures().includes("attribution-reporting"))?300:0;M({id:44776494,D:wj,X:hj});M({id:44776495,D:wj,X:hj});var xj,yj=(null==(xj=window.document.featurePolicy)||xj.allowedFeatures().includes("attribution-reporting"),0);M({id:44769484,D:yj,X:ij});M({id:44769485,D:yj,X:ij});M({id:44776384,D:0});M({id:44773331,D:10});M({id:44773332,D:10});
M({id:44775192,D:10});M({id:44775193,D:10});M({id:44783566,D:1});M({id:45390960,D:1});M({id:44783518,D:0});M({id:44783849,D:0});M({id:44787954,D:0});M({id:75259415,D:0});M({id:44785452,D:10});M({id:44785453,D:10});M({id:44782453,D:10});var zj=M({id:44782454,D:10});M({id:45401791,D:0});var Aj={},Ni=(Aj[32]=pi,Aj[35]=cj,Aj);Ni=void 0===Ni?{}:Ni;
if(!/^\{+IMA_EXPERIMENT_STATE_JSPB\}+$/.test("{{IMA_EXPERIMENT_STATE_JSPB}}"))try{var Oi=JSON.parse("{{IMA_EXPERIMENT_STATE_JSPB}}");Oi instanceof Array&&Mi()}catch(a){L(K.h(),"espe",a.message)}if("undefined"===typeof window.v8_flag_map){var fi=Si.h();fi.j||(gi(),fi.j=!0);var Ui=fi.l,Bj;fi.j||(gi(),fi.j=!0);Bj=fi.h;if(null!=Ui){var Cj=new Ri(Ti(),Bj);oi(Cj)}};mi.reset();oi(new ri);u.console&&"function"===typeof u.console.log&&Ua(u.console.log,u.console);var Dj=function(a){for(var b=[],c=a=G(a.ownerDocument);c!=a.top;c=c.parent)if(c.frameElement)b.push(c.frameElement);else break;return b};var Ej=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.j=!1};Ej.prototype.stopPropagation=function(){this.j=!0};Ej.prototype.preventDefault=function(){this.defaultPrevented=!0};var Fj=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{u.addEventListener("test",function(){},b),u.removeEventListener("test",function(){},b)}catch(c){}return a}();var Gj=function(a,b){Ej.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.h=null;a&&this.init(a,b)};Xa(Gj,Ej);var Hj={2:"touch",3:"pen",4:"mouse"};
Gj.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;(b=a.relatedTarget)?gc&&(ac(b,"nodeName")||(b=null)):"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?
a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:Hj[a.pointerType]||"";this.state=a.state;this.h=a;a.defaultPrevented&&Gj.Ba.preventDefault.call(this)};
Gj.prototype.stopPropagation=function(){Gj.Ba.stopPropagation.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};Gj.prototype.preventDefault=function(){Gj.Ba.preventDefault.call(this);var a=this.h;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ij="closure_listenable_"+(1E6*Math.random()|0),Jj=function(a){return!(!a||!a[Ij])};var Kj=0;var Lj=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.sc=e;this.key=++Kj;this.Rb=this.cc=!1},Mj=function(a){a.Rb=!0;a.listener=null;a.proxy=null;a.src=null;a.sc=null};var Nj=function(a){this.src=a;this.h={};this.j=0};Nj.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.h[f];a||(a=this.h[f]=[],this.j++);var g=Oj(a,b,d,e);-1<g?(b=a[g],c||(b.cc=!1)):(b=new Lj(b,this.src,f,!!d,e),b.cc=c,a.push(b));return b};Nj.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.h))return!1;var e=this.h[a];b=Oj(e,b,c,d);return-1<b?(Mj(e[b]),Sb(e,b),0==e.length&&(delete this.h[a],this.j--),!0):!1};
var Pj=function(a,b){var c=b.type;c in a.h&&Qb(a.h[c],b)&&(Mj(b),0==a.h[c].length&&(delete a.h[c],a.j--))};Nj.prototype.Lb=function(a,b,c,d){a=this.h[a.toString()];var e=-1;a&&(e=Oj(a,b,c,d));return-1<e?a[e]:null};var Oj=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Rb&&f.listener==b&&f.capture==!!c&&f.sc==d)return e}return-1};var Qj="closure_lm_"+(1E6*Math.random()|0),Rj={},Sj=0,Uj=function(a,b,c,d,e){if(d&&d.once)return Tj(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)Uj(a,b[f],c,d,e);return null}c=Vj(c);return Jj(a)?a.O(b,c,Na(d)?!!d.capture:!!d,e):Wj(a,b,c,!1,d,e)},Wj=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=Na(e)?!!e.capture:!!e,h=Xj(a);h||(a[Qj]=h=new Nj(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=Yj();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)Fj||(e=g),void 0===
e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Zj(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Sj++;return c},Yj=function(){var a=ak,b=function(c){return a.call(b.src,b.listener,c)};return b},Tj=function(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)Tj(a,b[f],c,d,e);return null}c=Vj(c);return Jj(a)?a.Ob(b,c,Na(d)?!!d.capture:!!d,e):Wj(a,b,c,!0,d,e)},bk=
function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)bk(a,b[f],c,d,e);else d=Na(d)?!!d.capture:!!d,c=Vj(c),Jj(a)?a.lb(b,c,d,e):a&&(a=Xj(a))&&(b=a.Lb(b,c,d,e))&&ck(b)},ck=function(a){if("number"!==typeof a&&a&&!a.Rb){var b=a.src;if(Jj(b))Pj(b.o,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Zj(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Sj--;(c=Xj(b))?(Pj(c,a),0==c.j&&(c.src=null,b[Qj]=null)):Mj(a)}}},
Zj=function(a){return a in Rj?Rj[a]:Rj[a]="on"+a},ak=function(a,b){if(a.Rb)a=!0;else{b=new Gj(b,this);var c=a.listener,d=a.sc||a.src;a.cc&&ck(a);a=c.call(d,b)}return a},Xj=function(a){a=a[Qj];return a instanceof Nj?a:null},dk="__closure_events_fn_"+(1E9*Math.random()>>>0),Vj=function(a){if("function"===typeof a)return a;a[dk]||(a[dk]=function(b){return a.handleEvent(b)});return a[dk]};var N=function(){D.call(this);this.o=new Nj(this);this.bc=this;this.ia=null};Xa(N,D);N.prototype[Ij]=!0;l=N.prototype;l.addEventListener=function(a,b,c,d){Uj(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){bk(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.ia;if(c)for(b=[];c;c=c.ia)b.push(c);c=this.bc;var d=a.type||a;if("string"===typeof a)a=new Ej(a,c);else if(a instanceof Ej)a.target=a.target||c;else{var e=a;a=new Ej(d,c);Af(a,e)}e=!0;if(b)for(var f=b.length-1;!a.j&&0<=f;f--){var g=a.currentTarget=b[f];e=ek(g,d,!0,a)&&e}a.j||(g=a.currentTarget=c,e=ek(g,d,!0,a)&&e,a.j||(e=ek(g,d,!1,a)&&e));if(b)for(f=0;!a.j&&f<b.length;f++)g=a.currentTarget=b[f],e=ek(g,d,!1,a)&&e;return e};
l.N=function(){N.Ba.N.call(this);if(this.o){var a=this.o,b=0,c;for(c in a.h){for(var d=a.h[c],e=0;e<d.length;e++)++b,Mj(d[e]);delete a.h[c];a.j--}}this.ia=null};l.O=function(a,b,c,d){return this.o.add(String(a),b,!1,c,d)};l.Ob=function(a,b,c,d){return this.o.add(String(a),b,!0,c,d)};l.lb=function(a,b,c,d){this.o.remove(String(a),b,c,d)};
var ek=function(a,b,c,d){b=a.o.h[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.Rb&&g.capture==c){var h=g.listener,k=g.sc||g.src;g.cc&&Pj(a.o,g);e=!1!==h.call(k,d)&&e}}return e&&!d.defaultPrevented};N.prototype.Lb=function(a,b,c,d){return this.o.Lb(String(a),b,c,d)};var fk=function(a,b){this.l=a;this.o=b;this.j=0;this.h=null};fk.prototype.get=function(){if(0<this.j){this.j--;var a=this.h;this.h=a.next;a.next=null}else a=this.l();return a};var gk=function(a,b){a.o(b);100>a.j&&(a.j++,b.next=a.h,a.h=b)};var hk,ik=function(){var a=u.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!x("Presto")&&(a=function(){var e=og(document,"IFRAME");e.style.display="none";document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=Ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!xb()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pd;c.Pd=null;e()}};return function(e){d.next={Pd:e};d=d.next;b.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}};var jk=function(){this.j=this.h=null};jk.prototype.add=function(a,b){var c=kk.get();c.set(a,b);this.j?this.j.next=c:this.h=c;this.j=c};jk.prototype.remove=function(){var a=null;this.h&&(a=this.h,this.h=this.h.next,this.h||(this.j=null),a.next=null);return a};var kk=new fk(function(){return new lk},function(a){return a.reset()}),lk=function(){this.next=this.h=this.j=null};lk.prototype.set=function(a,b){this.j=a;this.h=b;this.next=null};lk.prototype.reset=function(){this.next=this.h=this.j=null};var mk,nk=!1,ok=new jk,qk=function(a,b){mk||pk();nk||(mk(),nk=!0);ok.add(a,b)},pk=function(){if(u.Promise&&u.Promise.resolve){var a=u.Promise.resolve(void 0);mk=function(){a.then(rk)}}else mk=function(){var b=rk;"function"!==typeof u.setImmediate||u.Window&&u.Window.prototype&&(vb()||!x("Edge"))&&u.Window.prototype.setImmediate==u.setImmediate?(hk||(hk=ik()),hk(b)):u.setImmediate(b)}},rk=function(){for(var a;a=ok.remove();){try{a.j.call(a.h)}catch(b){cb(b)}gk(kk,a)}nk=!1};var sk=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};var uk=function(a){this.h=0;this.C=void 0;this.o=this.j=this.l=null;this.A=this.B=!1;if(a!=We)try{var b=this;a.call(void 0,function(c){tk(b,2,c)},function(c){tk(b,3,c)})}catch(c){tk(this,3,c)}},vk=function(){this.next=this.context=this.j=this.l=this.h=null;this.o=!1};vk.prototype.reset=function(){this.context=this.j=this.l=this.h=null;this.o=!1};var wk=new fk(function(){return new vk},function(a){a.reset()}),xk=function(a,b,c){var d=wk.get();d.l=a;d.j=b;d.context=c;return d};
uk.prototype.then=function(a,b,c){return yk(this,"function"===typeof a?a:null,"function"===typeof b?b:null,c)};uk.prototype.$goog_Thenable=!0;uk.prototype.K=function(a,b){return yk(this,null,a,b)};uk.prototype.catch=uk.prototype.K;uk.prototype.cancel=function(a){if(0==this.h){var b=new zk(a);qk(function(){Ak(this,b)},this)}};
var Ak=function(a,b){if(0==a.h)if(a.l){var c=a.l;if(c.j){for(var d=0,e=null,f=null,g=c.j;g&&(g.o||(d++,g.h==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.h&&1==d?Ak(c,b):(f?(d=f,d.next==c.o&&(c.o=d),d.next=d.next.next):Bk(c),Ck(c,e,3,b)))}a.l=null}else tk(a,3,b)},Ek=function(a,b){a.j||2!=a.h&&3!=a.h||Dk(a);a.o?a.o.next=b:a.j=b;a.o=b},yk=function(a,b,c,d){var e=xk(null,null,null);e.h=new uk(function(f,g){e.l=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.j=c?function(h){try{var k=c.call(d,
h);void 0===k&&h instanceof zk?g(h):f(k)}catch(m){g(m)}}:g});e.h.l=a;Ek(a,e);return e.h};uk.prototype.F=function(a){this.h=0;tk(this,2,a)};uk.prototype.G=function(a){this.h=0;tk(this,3,a)};
var tk=function(a,b,c){if(0==a.h){a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself"));a.h=1;a:{var d=c,e=a.F,f=a.G;if(d instanceof uk){Ek(d,xk(e||We,f||null,a));var g=!0}else if(sk(d))d.then(e,f,a),g=!0;else{if(Na(d))try{var h=d.then;if("function"===typeof h){Fk(d,h,e,f,a);g=!0;break a}}catch(k){f.call(a,k);g=!0;break a}g=!1}}g||(a.C=c,a.h=b,a.l=null,Dk(a),3!=b||c instanceof zk||Gk(a,c))}},Fk=function(a,b,c,d,e){var f=!1,g=function(k){f||(f=!0,c.call(e,k))},h=function(k){f||(f=!0,d.call(e,
k))};try{b.call(a,g,h)}catch(k){h(k)}},Dk=function(a){a.B||(a.B=!0,qk(a.I,a))},Bk=function(a){var b=null;a.j&&(b=a.j,a.j=b.next,b.next=null);a.j||(a.o=null);return b};uk.prototype.I=function(){for(var a;a=Bk(this);)Ck(this,a,this.h,this.C);this.B=!1};
var Ck=function(a,b,c,d){if(3==c&&b.j&&!b.o)for(;a&&a.A;a=a.l)a.A=!1;if(b.h)b.h.l=null,Hk(b,c,d);else try{b.o?b.l.call(b.context):Hk(b,c,d)}catch(e){Ik.call(null,e)}gk(wk,b)},Hk=function(a,b,c){2==b?a.l.call(a.context,c):a.j&&a.j.call(a.context,c)},Gk=function(a,b){a.A=!0;qk(function(){a.A&&Ik.call(null,b)})},Ik=cb,zk=function(a){Za.call(this,a)};Xa(zk,Za);zk.prototype.name="cancel";var Jk=function(a,b){N.call(this);this.j=a||1;this.h=b||u;this.l=Ua(this.dg,this);this.A=Wa()};Xa(Jk,N);l=Jk.prototype;l.ob=!1;l.Ia=null;l.dg=function(){if(this.ob){var a=Wa()-this.A;0<a&&a<.8*this.j?this.Ia=this.h.setTimeout(this.l,this.j-a):(this.Ia&&(this.h.clearTimeout(this.Ia),this.Ia=null),this.dispatchEvent("tick"),this.ob&&(this.stop(),this.start()))}};l.start=function(){this.ob=!0;this.Ia||(this.Ia=this.h.setTimeout(this.l,this.j),this.A=Wa())};
l.stop=function(){this.ob=!1;this.Ia&&(this.h.clearTimeout(this.Ia),this.Ia=null)};l.N=function(){Jk.Ba.N.call(this);this.stop();delete this.h};var Kk=function(a,b,c){if("function"===typeof a)c&&(a=Ua(a,c));else if(a&&"function"==typeof a.handleEvent)a=Ua(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:u.setTimeout(a,b||0)};var Lk=function(){return Math.round(Date.now()/1E3)};var Mk=function(){this.h={};return this};Mk.prototype.remove=function(a){var b=this.h;a in b&&delete b[a]};Mk.prototype.set=function(a,b){this.h[a]=b};var Nk=function(a,b){a.h.eb=yf(a.h,"eb",0)|b};Mk.prototype.get=function(a){return yf(this.h,a,null)};var Ok=null,Pk=function(){this.h={};this.j=0},Qk=function(){Ok||(Ok=new Pk);return Ok},Rk=function(a,b){a.h[b.getName()]=b},Sk=function(a,b){this.o=a;this.l=!0;this.h=b};Sk.prototype.getName=function(){return this.o};Sk.prototype.j=function(){return String(this.h)};var Tk=function(a,b){Sk.call(this,String(a),b);this.A=a;this.h=!!b};t(Tk,Sk);Tk.prototype.j=function(){return this.h?"1":"0"};var Uk=function(a,b){Sk.call(this,a,b)};t(Uk,Sk);
Uk.prototype.j=function(){return this.h?Math.round(this.h.top)+"."+Math.round(this.h.left)+"."+(Math.round(this.h.top)+Math.round(this.h.height))+"."+(Math.round(this.h.left)+Math.round(this.h.width)):""};var Vk=function(a){if(a.match(/^-?[0-9]+\.-?[0-9]+\.-?[0-9]+\.-?[0-9]+$/)){a=a.split(".");var b=Number(a[0]),c=Number(a[1]);return new Uk("",new $g(c,b,Number(a[3])-c,Number(a[2])-b))}return new Uk("",new $g(0,0,0,0))};var Xk=function(a,b){if("string"===typeof b)(b=Wk(a,b))&&(a.style[b]=void 0);else for(var c in b){var d=a,e=b[c],f=Wk(d,c);f&&(d.style[f]=e)}},Yk={},Wk=function(a,b){var c=Yk[b];if(!c){var d=bg(b);c=d;void 0===a.style[d]&&(d=(hc?"Webkit":gc?"Moz":ec?"ms":null)+dg(d),void 0!==a.style[d]&&(c=d));Yk[b]=c}return c},Zk=function(a,b){var c=a.style[bg(b)];return"undefined"!==typeof c?c:a.style[Wk(a,b)]||""},$k=function(a,b){var c=gg(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,
null))?a[b]||a.getPropertyValue(b)||"":""},al=function(a){try{return a.getBoundingClientRect()}catch(b){return{left:0,top:0,right:0,bottom:0}}},bl=function(a){var b=gg(a),c=new Wf(0,0);var d=b?gg(b):document;d=!ec||9<=Number(xc)||lg(hg(d).h)?d.documentElement:d.body;if(a==d)return c;a=al(a);b=ng(hg(b).h);c.x=a.left+b.x;c.y=a.top+b.y;return c},cl=function(a,b){var c=new Wf(0,0),d=G(gg(a));if(!ac(d,"parent"))return c;do{if(d==b)var e=bl(a);else e=al(a),e=new Wf(e.left,e.top);c.x+=e.x;c.y+=e.y}while(d&&
d!=b&&d!=d.parent&&(a=d.frameElement)&&(d=d.parent));return c},dl=function(){var a="100%";"number"==typeof a&&(a=Math.round(a)+"px");return a},fl=function(a){var b=el;if("none"!=($k(a,"display")||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a},el=function(a){var b=a.offsetWidth,c=a.offsetHeight,
d=hc&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=al(a),new E(a.right-a.left,a.bottom-a.top)):new E(b,c)},jl=function(a){var b=gg(a),c=ec&&a.currentStyle;if(c&&lg(hg(b).h)&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=gl(a,c.width,"width","pixelWidth"),a=gl(a,c.height,"height","pixelHeight"),new E(b,a);c=new E(a.offsetWidth,a.offsetHeight);if(ec){b=hl(a,"paddingLeft");var d=hl(a,"paddingRight"),e=hl(a,"paddingTop"),f=hl(a,"paddingBottom");b=new H(e,d,f,b)}else b=$k(a,"paddingLeft"),
d=$k(a,"paddingRight"),e=$k(a,"paddingTop"),f=$k(a,"paddingBottom"),b=new H(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(b));!ec||9<=Number(xc)?(d=$k(a,"borderLeftWidth"),e=$k(a,"borderRightWidth"),f=$k(a,"borderTopWidth"),a=$k(a,"borderBottomWidth"),a=new H(parseFloat(f),parseFloat(e),parseFloat(a),parseFloat(d))):(d=il(a,"borderLeft"),e=il(a,"borderRight"),f=il(a,"borderTop"),a=il(a,"borderBottom"),a=new H(f,e,a,d));return new E(c.width-a.left-b.left-b.right-a.right,c.height-a.top-b.top-
b.bottom-a.bottom)},gl=function(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return+b},hl=function(a,b){return(b=a.currentStyle?a.currentStyle[b]:null)?gl(a,b,"left","pixelLeft"):0},kl={thin:2,medium:4,thick:6},il=function(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;b=a.currentStyle?a.currentStyle[b+"Width"]:null;return b in kl?kl[b]:
gl(a,b,"left","pixelLeft")};var ll=function(a){var b=new $g(-Number.MAX_VALUE/2,-Number.MAX_VALUE/2,Number.MAX_VALUE,Number.MAX_VALUE),c=new $g(0,0,0,0);if(!a||0==a.length)return c;for(var d=0;d<a.length;d++){a:{var e=b;var f=a[d],g=Math.max(e.left,f.left),h=Math.min(e.left+e.width,f.left+f.width);if(g<=h){var k=Math.max(e.top,f.top);f=Math.min(e.top+e.height,f.top+f.height);if(k<=f){e.left=g;e.top=k;e.width=h-g;e.height=f-k;e=!0;break a}}e=!1}if(!e)return c}return b},ml=function(a,b){var c=a.getBoundingClientRect();a=cl(a,
b);return new $g(Math.round(a.x),Math.round(a.y),Math.round(c.right-c.left),Math.round(c.bottom-c.top))},nl=function(a,b,c){if(b&&c){a:{var d=Math.max(b.left,c.left);var e=Math.min(b.left+b.width,c.left+c.width);if(d<=e){var f=Math.max(b.top,c.top),g=Math.min(b.top+b.height,c.top+c.height);if(f<=g){d=new $g(d,f,e-d,g-f);break a}}d=null}e=d?d.height*d.width:0;f=d?b.height*b.width:0;d=d&&f?Math.round(e/f*100):0;Rk(a,new Sk("vp",d));d&&0<d?(e=ah(b),f=ah(c),e=e.top>=f.top&&e.top<f.bottom):e=!1;Rk(a,new Tk(512,
e));d&&0<d?(e=ah(b),f=ah(c),e=e.bottom<=f.bottom&&e.bottom>f.top):e=!1;Rk(a,new Tk(1024,e));d&&0<d?(e=ah(b),f=ah(c),e=e.left>=f.left&&e.left<f.right):e=!1;Rk(a,new Tk(2048,e));d&&0<d?(b=ah(b),c=ah(c),c=b.right<=c.right&&b.right>c.left):c=!1;Rk(a,new Tk(4096,c))}};var ol=function(a,b){var c=0;rf(G(),"ima","video","client","tagged")&&(c=1);var d=null;a&&(d=a());if(d){a=Qk();a.h={};var e=new Tk(32,!0);e.l=!1;Rk(a,e);e=G().document;e=e.visibilityState||e.webkitVisibilityState||e.mozVisibilityState||e.msVisibilityState||"";Rk(a,new Tk(64,"hidden"!=e.toLowerCase().substring(e.length-6)?!0:!1));try{var f=G().top;try{var g=!!f.location.href||""===f.location.href}catch(n){g=!1}if(g){var h=Dj(d);var k=h&&0!=h.length?"1":"0"}else k="2"}catch(n){k="2"}Rk(a,new Tk(256,
"2"==k));Rk(a,new Tk(128,"1"==k));h=g=G().top;"2"==k&&(h=G());f=ml(d,h);Rk(a,new Uk("er",f));try{var m=h.document&&!h.document.body?null:mg(h||window)}catch(n){m=null}m?(h=ng(hg(h.document).h),Rk(a,new Tk(16384,!!h)),m=h?new $g(h.x,h.y,m.width,m.height):null):m=null;Rk(a,new Uk("vi",m));if(m&&"1"==k){k=Dj(d);d=[];for(h=0;h<k.length;h++)(e=ml(k[h],g))&&d.push(e);d.push(m);m=ll(d)}nl(a,f,m);a.j&&Rk(a,new Sk("ts",Lk()-a.j));a.j=Lk()}else a=Qk(),a.h={},a.j=Lk(),Rk(a,new Tk(32,!1));this.l=a;this.h=new Mk;
this.h.set("ve",4);c&&Nk(this.h,1);rf(G(),"ima","video","client","crossdomainTag")&&Nk(this.h,4);rf(G(),"ima","video","client","sdkTag")&&Nk(this.h,8);rf(G(),"ima","video","client","jsTag")&&Nk(this.h,2);b&&yf(b,"fullscreen",!1)&&Nk(this.h,16);this.j=b=null;if(c&&(c=rf(G(),"ima","video","client"),c.getEData)){this.j=c.getEData();if(c=rf(G(),"ima","video","client","getLastSnapshotFromTop"))if(a=c())this.j.extendWithDataFromTopIframe(a.tagstamp,a.playstamp,a.lactstamp),c=this.l,b=a.er,a=a.vi,b&&a&&
(b=Vk(b).h,a=Vk(a).h,k=null,yf(c.h,"er",null)&&(k=yf(c.h,"er",null).h,k.top+=b.top,k.left+=b.left,Rk(c,new Uk("er",k))),yf(c.h,"vi",null)&&(m=yf(c.h,"vi",null).h,m.top+=b.top,m.left+=b.left,d=[],d.push(m),d.push(b),d.push(a),b=ll(d),nl(c,k,b),Rk(c,new Uk("vi",a))));a:{if(this.j){if(this.j.getTagLoadTimestamp){b=this.j.getTagLoadTimestamp();break a}if(this.j.getTimeSinceTagLoadSeconds){b=this.j.getTimeSinceTagLoadSeconds();break a}}b=null}}c=this.h;a=window.performance&&window.performance.timing&&
window.performance.timing.domLoading&&0<window.performance.timing.domLoading?Math.round(window.performance.timing.domLoading/1E3):null;c.set.call(c,"td",Lk()-(null!=a?a:null!=b?b:Lk()))};var pl=new Jk(200),ql=function(a,b){try{var c=new ol(a,b);a=[];var d=Number(c.h.get("eb"));c.h.remove("eb");var e,f=c.h;b=[];for(var g in f.h)b.push(g+f.h[g]);(e=b.join("_"))&&a.push(e);if(c.j){var h=c.j.serialize();h&&a.push(h)}var k,m=c.l;e=d;f=[];e||(e=0);for(var n in m.h){var r=m.h[n];if(r instanceof Tk)r.h&&(e|=r.A);else{var v=m.h[n],y=v.l?v.j():"";y&&f.push(n+y)}}f.push("eb"+String(e));(k=f.join("_"))&&a.push(k);c.h.set("eb",d);return a.join("_")}catch(B){return"tle;"+Yf(B.name,12)+";"+Yf(B.message,
40)}},rl=function(a,b){Uj(pl,"tick",function(){var c=ql(b);a(c)});pl.start();pl.dispatchEvent("tick")};var sl=function(a){C.call(this,a)};t(sl,C);var tl=function(a){C.call(this,a)};t(tl,C);var ul=function(a,b){return A(a,1,b)},vl=[tl,1,Pe];var wl=function(a){C.call(this,a)};t(wl,C);var xl=function(a){var b=new wl;return A(b,1,a)};wl.prototype.getError=function(){return Rd(this,tl,10)};wl.prototype.Ha=function(a){return Ud(this,10,a)};var yl=Re(wl),zl=[wl,1,Me,2,Me,3,Ge,7,Ge,8,Fe,4,Je,5,Je,6,Je,9,Le,11,Le,10,Ne,vl];var Al=function(a){C.call(this,a)};t(Al,C);var Bl=[Al,4,Pe,5,Me];var Cl=function(a){C.call(this,a)};t(Cl,C);var Dl=[Cl,1,Ie,2,Ie,3,Ie];var El=function(a){C.call(this,a)};t(El,C);El.prototype.getError=function(){return Rd(this,Al,7)};El.prototype.Ha=function(a){return Ud(this,7,a)};var Fl=[El,5,Me,4,Me,2,Ne,Dl,3,Ne,Dl,6,Le,7,Ne,Bl,8,Ge];var Hl=function(a){C.call(this,a,-1,Gl)};t(Hl,C);var Gl=[1,2];Hl.prototype.o=Qe([Hl,1,Oe,Fl,2,Oe,zl]);var Il=function(a){C.call(this,a)};t(Il,C);Il.prototype.getVersion=function(){return z(this,5)};var Jl=Re(Il);var Kl;Kl=["av.default","js","unreleased"].slice(-1)[0];var Ll=new function(a,b){this.key=a;this.defaultValue=void 0===b?!1:b;this.valueType="boolean"}("45378663");var Ml=document,O=window;var Nl=function(a){var b={};Gb(a,function(c){var d=c.h,e=b[d];b.hasOwnProperty(d)?null!==e&&(c.j(e)||(b[d]=null)):b[d]=c});Tb(a,function(c){return null===b[c.h]})};var Ol={NONE:0,Dg:1},Pl={Bg:0,Gh:1,Fh:2,Hh:3},Ql={se:"a",Cg:"d",We:"v"};var Rl=function(){this.ba=0;this.h=!1;this.j=-1;this.jb=!1;this.sa=0};Rl.prototype.isVisible=function(){return this.jb?.3<=this.ba:.5<=this.ba};var Sl={Ag:0,Gg:1},Tl={668123728:0,668123729:1},Ul={44731964:0,44731965:1},Vl={NONE:0,kh:1,Lg:2},Wl={480596784:0,480596785:1,21063355:2};var Xl=function(){this.h=null;this.o=!1;this.l=null},Yl=function(a){a.o=!0;return a},Zl=function(a,b){a.l&&Gb(b,function(c){c=a.l[c];void 0!==c&&a.j(c)})},$l=function(a){Xl.call(this);this.A=a};t($l,Xl);$l.prototype.j=function(a){null===this.h&&tf(this.A,a)&&(this.h=a)};var am=function(){Xl.call(this)};t(am,Xl);am.prototype.j=function(a){null===this.h&&"number"===typeof a&&(this.h=a)};var bm=function(){Xl.call(this)};t(bm,Xl);
bm.prototype.j=function(a){null===this.h&&"string"===typeof a&&(this.h=a)};var cm=function(){this.h={};this.l=!0;this.j={}};cm.prototype.reset=function(){this.h={};this.l=!0;this.j={}};
var dm=function(a,b,c){a.h[b]||(a.h[b]=new $l(c));return a.h[b]},em=function(a){a.h.queryid||(a.h.queryid=new bm)},fm=function(a,b,c){(a=a.h[b])&&a.j(c)},gm=function(a,b){if(sf(a.j,b))return a.j[b];if(a=a.h[b])return a.h},hm=function(a){var b={},c=kf(a.h,function(d){return d.o});jf(c,function(d,e){d=void 0!==a.j[e]?String(a.j[e]):d.o&&null!==d.h?String(d.h):"";0<d.length&&(b[e]=d)},a);return b},im=function(a){a=hm(a);var b=[];jf(a,function(c,d){d in Object.prototype||"undefined"!=typeof c&&b.push([d,
":",c].join(""))});return b},jm=function(){var a=P().R,b=qi();a.l&&Gb(pf(a.h),function(c){return Zl(c,b)})};var km=function(a){dm(a,"od",Ol);Yl(dm(a,"opac",Sl));Yl(dm(a,"sbeos",Sl));Yl(dm(a,"prf",Sl));Yl(dm(a,"mwt",Sl));dm(a,"iogeo",Sl)};var lm=!ec&&!zb();var mm=function(){this.h=this.Ya=null};var nm=function(){};nm.prototype.h=function(){return 0};nm.prototype.l=function(){return 0};nm.prototype.o=function(){return 0};nm.prototype.j=function(){return 0};var pm=function(){if(!om())throw Error();};t(pm,nm);var om=function(){return!(!O||!O.performance)};pm.prototype.h=function(){return om()&&O.performance.now?O.performance.now():nm.prototype.h.call(this)};pm.prototype.l=function(){return om()&&O.performance.memory?O.performance.memory.totalJSHeapSize||0:nm.prototype.l.call(this)};pm.prototype.o=function(){return om()&&O.performance.memory?O.performance.memory.usedJSHeapSize||0:nm.prototype.o.call(this)};
pm.prototype.j=function(){return om()&&O.performance.memory?O.performance.memory.jsHeapSizeLimit||0:nm.prototype.j.call(this)};var qm=function(){};qm.prototype.isVisible=function(){return 1===th(Ml)};var rm=RegExp("^https?://(\\w|-)+\\.cdn\\.ampproject\\.(net|org)(\\?|/|$)"),vm=function(a){a=a||sm();for(var b=new tm(u.location.href,!1),c=null,d=a.length-1,e=d;0<=e;--e){var f=a[e];!c&&rm.test(f.url)&&(c=f);if(f.url&&!f.cd){b=f;break}}e=null;f=a.length&&a[d].url;0!=b.depth&&f&&(e=a[d]);return new um(b,e,c)},sm=function(){var a=u,b=[],c=null;do{var d=a;if(Mg(d)){var e=d.location.href;c=d.document&&d.document.referrer||null}else e=c,c=null;b.push(new tm(e||""));try{a=d.parent}catch(f){a=null}}while(a&&
d!=a);d=0;for(a=b.length-1;d<=a;++d)b[d].depth=a-d;d=u;if(d.location&&d.location.ancestorOrigins&&d.location.ancestorOrigins.length==b.length-1)for(a=1;a<b.length;++a)e=b[a],e.url||(e.url=d.location.ancestorOrigins[a-1]||"",e.cd=!0);return b},um=function(a,b,c){this.h=a;this.j=b;this.l=c},tm=function(a,b){this.url=a;this.cd=!!b;this.depth=null};var wm=function(){this.l="&";this.j={};this.o=0;this.h=[]},xm=function(a,b){var c={};c[a]=b;return[c]},zm=function(a,b,c,d,e){var f=[];Qg(a,function(g,h){(g=ym(g,b,c,d,e))&&f.push(h+"="+g)});return f.join(b)},ym=function(a,b,c,d,e){if(null==a)return"";b=b||"&";c=c||",$";"string"==typeof c&&(c=c.split(""));if(a instanceof Array){if(d=d||0,d<c.length){for(var f=[],g=0;g<a.length;g++)f.push(ym(a[g],b,c,d+1,e));return f.join(c[d])}}else if("object"==typeof a)return e=e||0,2>e?encodeURIComponent(zm(a,
b,c,d,e+1)):"...";return encodeURIComponent(String(a))},Am=function(a,b,c){a.h.push(b);a.j[b]=c},Bm=function(a,b,c,d){a.h.push(b);a.j[b]=xm(c,d)},Dm=function(a,b,c){b=b+"//pagead2.googlesyndication.com"+c;var d=Cm(a)-c.length;if(0>d)return"";a.h.sort(function(n,r){return n-r});c=null;for(var e="",f=0;f<a.h.length;f++)for(var g=a.h[f],h=a.j[g],k=0;k<h.length;k++){if(!d){c=null==c?g:c;break}var m=zm(h[k],a.l,",$");if(m){m=e+m;if(d>=m.length){d-=m.length;b+=m;e=a.l;break}c=null==c?g:c}}a="";null!=c&&
(a=e+"trn="+c);return b+a},Cm=function(a){var b=1,c;for(c in a.j)b=c.length>b?c.length:b;return 3997-b-a.l.length-1};var Em=function(a,b){this.h=a;this.depth=b},Gm=function(){var a=sm(),b=Math.max(a.length-1,0),c=vm(a);a=c.h;var d=c.j,e=c.l,f=[];c=function(h,k){return null==h?k:h};e&&f.push(new Em([e.url,e.cd?2:0],c(e.depth,1)));d&&d!=e&&f.push(new Em([d.url,2],0));a.url&&a!=e&&f.push(new Em([a.url,0],c(a.depth,b)));var g=Jb(f,function(h,k){return f.slice(0,f.length-k)});!a.url||(e||d)&&a!=e||(d=Sg(a.url))&&g.push([new Em([d,1],c(a.depth,b))]);g.push([]);return Jb(g,function(h){return Fm(b,h)})};
function Fm(a,b){var c=Kb(b,function(e,f){return Math.max(e,f.depth)},-1),d=Zb(c+2);d[0]=a;Gb(b,function(e){return d[e.depth+1]=e.h});return d}function Hm(){var a=void 0===a?Gm():a;return a.map(function(b){return ym(b)})};var Im=function(){this.j=new qm;this.h=om()?new pm:new nm},Km=function(){Jm();var a=O.document;return!!(a&&a.body&&a.body.getBoundingClientRect&&"function"===typeof O.setInterval&&"function"===typeof O.clearInterval&&"function"===typeof O.setTimeout&&"function"===typeof O.clearTimeout)};Im.prototype.setTimeout=function(a,b){return O.setTimeout(a,b)};Im.prototype.clearTimeout=function(a){O.clearTimeout(a)};var Lm=function(){Jm();return Hm()};var Mm=function(){},Jm=function(){var a=J(Mm);if(!a.h){if(!O)throw Error("Context has not been set and window is undefined.");a.h=J(Im)}return a.h};var Nm=function(a){C.call(this,a)};t(Nm,C);Nm.prototype.o=Qe([Nm,1,Ee,2,He,3,He,4,He,5,Ke]);var Om=function(a){this.l=a;this.h=-1;this.j=this.o=0},Pm=function(a,b){return function(){var c=Ha.apply(0,arguments);if(-1<a.h)return b.apply(null,ka(c));try{return a.h=a.l.h.h(),b.apply(null,ka(c))}finally{a.o+=a.l.h.h()-a.h,a.h=-1,a.j+=1}}};var Qm=function(a,b){this.j=a;this.l=b;this.h=new Om(a)};var Rm=function(){this.h={}},Sm=function(){var a=P().flags.h[Ll.key];if("proto"===Ll.valueType){try{var b=JSON.parse(a);if(Array.isArray(b))return b}catch(c){}return Ll.defaultValue}return typeof a===typeof Ll.defaultValue?a:Ll.defaultValue};var Tm={Bh:1,ci:2,sh:3};var Um=function(){this.l=void 0;this.j=this.B=0;this.A=-1;this.R=new cm;Yl(dm(this.R,"mv",Vl)).l=void 0===Wl?null:Wl;dm(this.R,"omid",Sl);Yl(dm(this.R,"epoh",Sl));Yl(dm(this.R,"epph",Sl));Yl(dm(this.R,"umt",Sl)).l=void 0===Tl?null:Tl;Yl(dm(this.R,"phel",Sl));Yl(dm(this.R,"phell",Sl));Yl(dm(this.R,"oseid",Tm));var a=this.R;a.h.sloi||(a.h.sloi=new am);Yl(a.h.sloi);dm(this.R,"mm",Ql);Yl(dm(this.R,"ovms",Pl));Yl(dm(this.R,"xdi",Sl));Yl(dm(this.R,"amp",Sl));Yl(dm(this.R,"prf",Sl));Yl(dm(this.R,"gtx",Sl));
Yl(dm(this.R,"mvp_lv",Sl));Yl(dm(this.R,"ssmol",Sl)).l=void 0===Ul?null:Ul;Yl(dm(this.R,"fmd",Sl));this.h=new Qm(Jm(),this.R);this.o=!1;this.flags=new Rm};Um.prototype.od=function(a){if("string"===typeof a&&0!=a.length){var b=this.R;if(b.l){a=a.split("&");for(var c=a.length-1;0<=c;c--){var d=a[c].split("="),e=decodeURIComponent(d[0]);1<d.length?(d=decodeURIComponent(d[1]),d=/^[0-9]+$/g.exec(d)?parseInt(d,10):d):d=1;(e=b.h[e])&&e.j(d)}}}};var P=function(){return J(Um)};var Vm=function(a,b,c,d,e){if((d?a.l:Math.random())<(e||a.h))try{if(c instanceof wm)var f=c;else f=new wm,Qg(c,function(h,k){var m=f,n=m.o++;Am(m,n,xm(k,h))});var g=Dm(f,a.j,"/pagead/gen_204?id="+b+"&");g&&(Jm(),lh(O,g))}catch(h){}};var Ym=function(){var a=Wm;this.B=Xm;this.A="jserror";this.l=!0;this.j=null;this.C=this.Oa;this.h=void 0===a?null:a;this.o=!1};l=Ym.prototype;l.Gc=function(a){this.j=a};l.td=function(a){this.A=a};l.ud=function(a){this.l=a};l.wd=function(a){this.o=a};l.kb=function(a,b,c){var d=this;return Pm(P().h.h,function(){try{if(d.h&&d.h.l){var e=d.h.start(a.toString(),3);var f=b();d.h.end(e)}else f=b()}catch(h){var g=d.l;try{Fh(e),g=d.C(a,new Zm($m(h)),void 0,c)}catch(k){d.Oa(217,k)}if(!g)throw h;}return f})()};
l.pd=function(a,b,c,d){var e=this;return Pm(P().h.h,function(){var f=Ha.apply(0,arguments);return e.kb(a,function(){return b.apply(c,f)},d)})};
l.Oa=function(a,b,c,d,e){e=e||this.A;try{var f=new wm;Bm(f,1,"context",a);ph(b)||(b=new Zm($m(b)));b.msg&&Bm(f,2,"msg",b.msg.substring(0,512));var g=b.meta||{};if(this.j)try{this.j(g)}catch(k){}if(d)try{d(g)}catch(k){}Am(f,3,[g]);var h=vm();h.j&&Bm(f,4,"top",h.j.url||"");Am(f,5,[{url:h.h.url||""},{url:h.h.url?zg(h.h.url):""}]);Vm(this.B,e,f,this.o,c)}catch(k){try{Vm(this.B,e,{context:"ecmserr",rctx:a,msg:$m(k),url:h&&h.h.url},this.o,c)}catch(m){}}return this.l};
var $m=function(a){var b=a.toString();a.name&&-1==b.indexOf(a.name)&&(b+=": "+a.name);a.message&&-1==b.indexOf(a.message)&&(b+=": "+a.message);if(a.stack){a=a.stack;var c=b;try{-1==a.indexOf(c)&&(a=c+"\n"+a);for(var d;a!=d;)d=a,a=a.replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");b=a.replace(/\n */g,"\n")}catch(e){b=c}}return b},Zm=function(a){oh.call(this,Error(a),{message:a})};t(Zm,oh);var Xm,an,Wm=new Eh(1,window),bn=function(){O&&"undefined"!=typeof O.google_measure_js_timing&&(O.google_measure_js_timing||Wm.I())};Xm=new function(){var a="https:";O&&O.location&&"http:"===O.location.protocol&&(a="http:");this.j=a;this.h=.01;this.l=Math.random()};an=new Ym;O&&O.document&&("complete"==O.document.readyState?bn():Wm.l&&bf(O,"load",function(){bn()}));
var cn=function(a){an.Gc(function(b){Gb(a,function(c){c(b)})})},dn=function(a,b){return an.kb(a,b)},en=function(a,b,c,d){return an.pd(a,b,c,d)},fn=function(a,b,c,d){an.Oa(a,b,c,d)};var gn=Date.now(),hn=-1,jn=-1,kn,ln=-1,mn=!1,nn=function(){return Date.now()-gn},on=function(){var a=P().l,b=0<=jn?nn()-jn:-1,c=mn?nn()-hn:-1,d=0<=ln?nn()-ln:-1;if(947190542==a)return 100;if(79463069==a)return 200;a=[2E3,4E3];var e=[250,500,1E3];fn(637,Error(),.001);var f=b;-1!=c&&c<b&&(f=c);for(b=0;b<a.length;++b)if(f<a[b]){var g=e[b];break}void 0===g&&(g=e[a.length]);return-1!=d&&1500<d&&4E3>d?500:g};var pn=function(a,b,c){var d=new H(0,0,0,0);this.time=a;this.volume=null;this.l=b;this.h=d;this.j=c};var qn=function(a,b,c,d,e,f,g){this.l=a;this.j=b;this.A=c;this.h=d;this.o=e;this.C=f;this.B=g};qn.prototype.getTimestamp=function(){return this.C};var rn={currentTime:1,duration:2,isVpaid:4,volume:8,isYouTube:16,isPlaying:32},vf={Jd:"start",FIRST_QUARTILE:"firstquartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdquartile",COMPLETE:"complete",Ce:"error",Ie:"metric",Id:"pause",Re:"resume",SKIPPED:"skip",VIEWABLE_IMPRESSION:"viewable_impression",Je:"mute",Ve:"unmute",FULLSCREEN:"fullscreen",De:"exitfullscreen",xe:"bufferstart",we:"bufferfinish",Dd:"fully_viewable_audible_half_duration_impression",Hd:"measurable_impression",re:"abandon",Cd:"engagedview",
IMPRESSION:"impression",ze:"creativeview",LOADED:"loaded",Dh:"progress",ug:"close",vg:"collapse",Ke:"overlay_resize",Le:"overlay_unmeasurable_impression",Me:"overlay_unviewable_impression",Oe:"overlay_viewable_immediate_impression",Ne:"overlay_viewable_end_of_session_impression",Ae:"custom_metric_viewable",wh:"verification_debug",te:"audio_audible",ve:"audio_measurable",ue:"audio_impression"},sn="start firstquartile midpoint thirdquartile resume loaded".split(" "),tn=["start","firstquartile","midpoint",
"thirdquartile"],un=["abandon"],vn={Wh:-1,Jd:0,FIRST_QUARTILE:1,MIDPOINT:2,THIRD_QUARTILE:3,COMPLETE:4,Ie:5,Id:6,Re:7,SKIPPED:8,VIEWABLE_IMPRESSION:9,Je:10,Ve:11,FULLSCREEN:12,De:13,Dd:14,Hd:15,re:16,Cd:17,IMPRESSION:18,ze:19,LOADED:20,Ae:21,xe:22,we:23,ue:27,ve:28,te:29};var of={ng:"addEventListener",Mg:"getMaxSize",Ng:"getScreenSize",Og:"getState",Pg:"getVersion",Eh:"removeEventListener",lh:"isViewable"},wn=function(a){var b=a!==a.top,c=a.top===Xg(a),d=-1,e=0;if(b&&c&&a.top.mraid){d=3;var f=a.top.mraid}else d=(f=a.mraid)?b?c?2:1:0:-1;f&&(f.IS_GMA_SDK||(e=2),nf(function(g){return"function"===typeof f[g]})||(e=1));return{za:f,jc:e,Zf:d}};var xn=function(){var a=window.document;return a&&"function"===typeof a.elementFromPoint};function yn(a,b,c){try{a&&(b=b.top);var d=b;a&&null!==d&&d!=d.top&&(d=d.top);try{var e=(void 0===c?0:c)?(new E(d.innerWidth,d.innerHeight)).round():mg(d||window).round()}catch(n){e=new E(-12245933,-12245933)}a=e;var f=a.height,g=a.width;if(-12245933===g)return new H(g,g,g,g);var h=ng(hg(b.document).h),k=h.x,m=h.y;return new H(m,k+g,m+f,k)}catch(n){return new H(-12245933,-12245933,-12245933,-12245933)}};var zn=function(a,b){b=Math.pow(10,b);return Math.floor(a*b)/b};function An(a,b,c,d){if(!a)return{value:d,done:!1};d=b(d,a);var e=c(d,a);return!e&&ac(a,"parentElement")?An(sg(a),b,c,d):{done:e,value:d}}var Bn=function(a,b,c,d){if(!a)return d;d=An(a,b,c,d);if(!d.done)try{var e=gg(a),f=e&&G(e);return Bn(f&&f.frameElement,b,c,d.value)}catch(g){}return d.value};
function Cn(a){var b=!ec||uc();return Bn(a,function(c,d){c=ac(d,"style")&&d.style&&Zk(d,"visibility");return{hidden:"hidden"===c,visible:b&&"visible"===c}},function(c){return c.hidden||c.visible},{hidden:!1,visible:!1}).hidden}
var Dn=function(a){return Bn(a,function(b,c){return!(!ac(c,"style")||!c.style||"none"!==Zk(c,"display"))},function(b){return b},!1)?!0:Cn(a)},En=function(a){return new H(a.top,a.right,a.bottom,a.left)},Fn=function(a){var b=a.top||0,c=a.left||0;return new H(b,c+(a.width||0),b+(a.height||0),c)},Hn=function(a){return null!=a&&0<=a&&1>=a};function In(){var a=qb();return a?Lb("Android TV;AppleTV;Apple TV;GoogleTV;HbbTV;NetCast.TV;Opera TV;POV_TV;SMART-TV;SmartTV;TV Store;AmazonWebAppPlatform;MiBOX".split(";"),function(b){return ib(a,b)})||ib(a,"OMI/")&&!ib(a,"XiaoMi/")?!0:ib(a,"Presto")&&ib(a,"Linux")&&!ib(a,"X11")&&!ib(a,"Android")&&!ib(a,"Mobi"):!1}function Jn(){var a=qb();return ib(a,"AppleTV")||ib(a,"Apple TV")||ib(a,"CFNetwork")||ib(a,"tvOS")}
function Kn(){var a;(a=ib(qb(),"CrKey")||ib(qb(),"PlayStation")||ib(qb(),"Roku")||In()||ib(qb(),"Xbox")||Jn())||(a=qb(),a=ib(a,"sdk_google_atv_x86")||ib(a,"Android TV"));return a};var Mn=function(){this.l=!Mg(O.top);this.C=wg()||xg();var a=sm();a=0<a.length&&null!=a[a.length-1]&&null!=a[a.length-1].url?((a=a[a.length-1].url.match(yg)[3]||null)?decodeURI(a):a)||"":"";this.domain=a;this.h=new H(0,0,0,0);this.A=new E(0,0);this.o=new E(0,0);this.I=new H(0,0,0,0);this.B=0;this.K=!1;this.j=!(!O||!wn(O).za);Ln(this)},Nn=function(a,b){b&&b.screen&&(a.A=new E(b.screen.width,b.screen.height))},On=function(a,b){var c=a.h?new E(a.h.getWidth(),a.h.getHeight()):new E(0,0);b=void 0===b?O:
b;null!==b&&b!=b.top&&(b=b.top);var d=0,e=0;try{var f=b.document,g=f.body,h=f.documentElement;if("CSS1Compat"==f.compatMode&&h.scrollHeight)d=h.scrollHeight!=c.height?h.scrollHeight:h.offsetHeight,e=h.scrollWidth!=c.width?h.scrollWidth:h.offsetWidth;else{var k=h.scrollHeight,m=h.scrollWidth,n=h.offsetHeight,r=h.offsetWidth;h.clientHeight!=n&&(k=g.scrollHeight,m=g.scrollWidth,n=g.offsetHeight,r=g.offsetWidth);k>c.height?k>n?(d=k,e=m):(d=n,e=r):k<n?(d=k,e=m):(d=n,e=r)}var v=new E(e,d)}catch(y){v=new E(-12245933,
-12245933)}a.o=v},Ln=function(a){O&&O.document&&(a.I=yn(!1,O,a.C),a.h=yn(!0,O,a.C),On(a,O),Nn(a,O))},Qn=function(){var a=Pn();if(0<a.B||a.K)return!0;a=Jm().j.isVisible();var b=0===th(Ml);return a||b},Pn=function(){return J(Mn)};var Rn=function(a){this.l=a;this.j=0;this.h=null};Rn.prototype.cancel=function(){Jm().clearTimeout(this.h);this.h=null};var Sn=function(a){var b=Jm(),c=P().h.h;a.h=b.setTimeout(Pm(c,en(143,function(){a.j++;a.l.sample()})),on())};var Tn=function(a,b,c){this.l=a;this.ka=void 0===c?"na":c;this.A=[];this.B=!1;this.o=new pn(-1,!0,this);this.h=this;this.F=b;this.J=this.G=!1;this.Y="uk";this.P=!1;this.I=!0};Tn.prototype.H=function(){return!1};Tn.prototype.initialize=function(){return this.B=!0};Tn.prototype.ub=function(){return this.h.Y};Tn.prototype.Mb=function(){return this.h.J};var Vn=function(a,b,c){if(!a.J||(void 0===c?0:c))a.J=!0,a.Y=b,a.F=0,a.h!=a||Un(a)};Tn.prototype.getName=function(){return this.h.ka};
Tn.prototype.Va=function(){return this.h.Z()};Tn.prototype.Z=function(){return{}};Tn.prototype.La=function(){return this.h.F};var Wn=function(a,b){Pb(a.A,b)||(a.A.push(b),b.wb(a.h),b.Wa(a.o),b.Ga()&&(a.G=!0))};Tn.prototype.U=function(){var a=Pn();a.h=yn(!0,this.l,a.C)};Tn.prototype.V=function(){Nn(Pn(),this.l)};Tn.prototype.aa=function(){return this.o.h};var Xn=function(a){a=a.h;a.V();a.U();var b=Pn();b.I=yn(!1,a.l,b.C);On(Pn(),a.l);a.o.h=a.aa()};Tn.prototype.sample=function(){};
Tn.prototype.isActive=function(){return this.h.I};var Yn=function(a){a.G=a.A.length?Lb(a.A,function(b){return b.Ga()}):!1},Zn=function(a){var b=Vb(a.A);Gb(b,function(c){c.Wa(a.o)})},Un=function(a){var b=Vb(a.A);Gb(b,function(c){c.wb(a.h)});a.h!=a||Zn(a)};l=Tn.prototype;l.wb=function(a){var b=this.h;this.h=a.La()>=this.F?a:this;b!==this.h?(this.I=this.h.I,Un(this)):this.I!==this.h.I&&(this.I=this.h.I,Un(this))};
l.Wa=function(a){if(a.j===this.h){var b=this.o,c=this.G;if(c=a&&(void 0===c||!c||b.volume==a.volume)&&b.l==a.l)b=b.h,c=a.h,c=b==c?!0:b&&c?b.top==c.top&&b.right==c.right&&b.bottom==c.bottom&&b.left==c.left:!1;this.o=a;!c&&Zn(this)}};l.Ga=function(){return this.G};l.W=function(){this.P=!0};l.wa=function(){return this.P};var $n=function(a,b,c,d){this.l=a;this.h=new H(0,0,0,0);this.A=new H(0,0,0,0);this.j=b;this.R=c;this.H=d;this.G=!1;this.timestamp=-1;this.I=new qn(b.o,this.h,new H(0,0,0,0),0,0,nn(),0)};l=$n.prototype;l.Oc=function(){return!0};l.Vb=function(){};l.W=function(){if(!this.wa()){var a=this.j;Qb(a.A,this);a.G&&this.Ga()&&Yn(a);this.Vb();this.G=!0}};l.wa=function(){return this.G};l.Va=function(){return this.j.Va()};l.La=function(){return this.j.La()};l.ub=function(){return this.j.ub()};l.Mb=function(){return this.j.Mb()};
l.wb=function(){};l.Wa=function(){this.Ua()};l.Ga=function(){return this.H};var ao=function(a){this.A=!1;this.h=a;this.o=function(){}};l=ao.prototype;l.La=function(){return this.h.La()};l.ub=function(){return this.h.ub()};l.Mb=function(){return this.h.Mb()};l.create=function(a,b,c){var d=null;this.h&&(d=this.Wb(a,b,c),Wn(this.h,d));return d};l.Ed=function(){return this.Gb()};l.Gb=function(){return!1};l.init=function(a){return this.h.initialize()?(Wn(this.h,this),this.o=a,!0):!1};l.wb=function(a){0==a.La()&&this.o(a.ub(),this)};l.Wa=function(){};l.Ga=function(){return!1};
l.W=function(){this.A=!0};l.wa=function(){return this.A};l.Va=function(){return{}};var bo=function(a,b,c){this.l=void 0===c?0:c;this.j=a;this.h=null==b?"":b},co=function(a){switch(Math.trunc(a.l)){case -16:return-16;case -8:return-8;case 0:return 0;case 8:return 8;case 16:return 16;default:return 16}},eo=function(a,b){return a.l<b.l?!0:a.l>b.l?!1:a.j<b.j?!0:a.j>b.j?!1:typeof a.h<typeof b.h?!0:typeof a.h>typeof b.h?!1:a.h<b.h};var fo=function(){this.l=0;this.h=[];this.j=!1};fo.prototype.add=function(a,b,c){++this.l;a=new bo(a,b,c);this.h.push(new bo(a.j,a.h,a.l+this.l/4096));this.j=!0;return this};
var go=function(a,b){Gb(b.h,function(c){a.add(c.j,c.h,co(c))})},ho=function(a,b){var c=void 0===c?0:c;var d=void 0===d?!0:d;Qg(b,function(e,f){d&&void 0===e||a.add(f,e,c)});return a},jo=function(a){var b=io;a.j&&(Xb(a.h,function(c,d){return eo(d,c)?1:eo(c,d)?-1:0}),a.j=!1);return Kb(a.h,function(c,d){d=b(d);return""+c+(""!=c&&""!=d?"&":"")+d},"")};var io=function(a){var b=a.j;a=a.h;return""===a?b:"boolean"===typeof a?a?b:"":Array.isArray(a)?0===a.length?b:b+"="+a.join():b+"="+(Pb(["mtos","tos","p"],b)?a:encodeURIComponent(a))};var ko=function(a){var b=void 0===b?!0:b;this.h=new fo;void 0!==a&&go(this.h,a);b&&this.h.add("v",Kl,-16)};ko.prototype.toString=function(){var a="//pagead2.googlesyndication.com//pagead/gen_204",b=jo(this.h);0<b.length&&(a+="?"+b);return a};var lo=function(a){var b=[],c=[];jf(a,function(d,e){if(!(e in Object.prototype)&&"undefined"!=typeof d)switch(Array.isArray(d)&&(d=d.join(",")),d=[e,"=",d].join(""),e){case "adk":case "r":case "tt":case "error":case "mtos":case "tos":case "p":case "bs":b.unshift(d);break;case "req":case "url":case "referrer":case "iframe_loc":c.push(d);break;default:b.push(d)}});return b.concat(c)},mo=function(){if(Kl&&"unreleased"!==Kl)return Kl},no=function(a){var b=void 0===b?4E3:b;a=a.toString();if(!/&v=[^&]+/.test(a)){var c=
mo();a=c?a+"&v="+encodeURIComponent(c):a}b=a=a.substring(0,b);Jm();lh(O,b)};var oo=function(){this.h=0};var po=function(a,b,c){Gb(a.l,function(d){var e=a.h;if(!d.h&&(d.l(b,c),d.o())){d.h=!0;var f=d.j(),g=new fo;g.add("id","av-js");g.add("type","verif");g.add("vtype",d.A);d=J(oo);g.add("i",d.h++);g.add("adk",e);ho(g,f);e=new ko(g);no(e)}})};var qo=function(){this.j=this.l=this.o=this.h=0},ro=function(a,b,c,d){b&&(a.h+=c,a.j+=c,a.o+=c,a.l=Math.max(a.l,a.o));if(void 0===d?!b:d)a.o=0};var so=[1,.75,.5,.3,0],to=function(a){this.j=a=void 0===a?so:a;this.h=Jb(this.j,function(){return new qo})},vo=function(a,b){return uo(a,function(c){return c.h},void 0===b?!0:b)},xo=function(a,b){return wo(a,b,function(c){return c.h})},yo=function(a,b){return uo(a,function(c){return c.l},void 0===b?!0:b)},zo=function(a,b){return wo(a,b,function(c){return c.l})},Ao=function(a,b){return wo(a,b,function(c){return c.j})},Bo=function(a){Gb(a.h,function(b){b.j=0})},Co=function(a,b,c,d,e,f,g){g=void 0===
g?!0:g;c=f?Math.min(b,c):c;for(f=0;f<a.j.length;f++){var h=a.j[f],k=0<c&&c>=h;h=!(0<b&&b>=h)||d;ro(a.h[f],g&&k,e,!g||h)}},uo=function(a,b,c){a=Jb(a.h,function(d){return b(d)});return c?a:Do(a)},wo=function(a,b,c){var d=Ob(a.j,function(e){return b<=e});return-1==d?0:c(a.h[d])},Do=function(a){return Jb(a,function(b,c,d){return 0<c?d[c]-d[c-1]:d[c]})};var Eo=function(){this.j=new to;this.V=new qo;this.H=this.C=-1;this.aa=1E3;this.da=new to([1,.9,.8,.7,.6,.5,.4,.3,.2,.1,0]);this.M=this.J=-1},Fo=function(a,b){return yo(a.j,void 0===b?!0:b)};
Eo.prototype.K=function(a,b,c,d){this.C=-1!=this.C?Math.min(this.C,b.ba):b.ba;this.H=Math.max(this.H,b.ba);this.J=-1!=this.J?Math.min(this.J,b.sa):b.sa;this.M=Math.max(this.M,b.sa);Co(this.da,b.sa,c.sa,b.h,a,d);Co(this.j,b.ba,c.ba,b.h,a,d);c=d||c.jb!=b.jb?c.isVisible()&&b.isVisible():c.isVisible();b=!b.isVisible()||b.h;ro(this.V,c,a,b)};Eo.prototype.Na=function(){return this.V.l>=this.aa};if(Ml&&Ml.URL){var Go=Ml.URL,Ho;if(Ho=!!Go){var Io;a:{if(Go){var Jo=RegExp(".*[&#?]google_debug(=[^&]*)?(&.*)?$");try{var Ko=Jo.exec(decodeURIComponent(Go));if(Ko){Io=Ko[1]&&1<Ko[1].length?Ko[1].substring(1):"true";break a}}catch(a){}}Io=""}Ho=0<Io.length}an.ud(!Ho)}var Lo=function(a,b,c,d){var e=void 0===e?!1:e;c=en(d,c);bf(a,b,c,{capture:e})};var Mo=new H(0,0,0,0);function No(a,b){b=Oo(b);return 0===b?0:Oo(a)/b}function Oo(a){return Math.max(a.bottom-a.top,0)*Math.max(a.right-a.left,0)}function Po(a,b){if(!a||!b)return!1;for(var c=0;null!==a&&100>c++;){if(a===b)return!0;try{if(a=sg(a)||a){var d=gg(a),e=d&&G(d),f=e&&e.frameElement;f&&(a=f)}}catch(g){break}}return!1}
function Qo(a,b,c){if(!a||!b)return!1;b=Zg(Yg(a),-b.left,-b.top);a=(b.left+b.right)/2;b=(b.top+b.bottom)/2;Mg(window.top)&&window.top&&window.top.document&&(window=window.top);if(!xn())return!1;a=window.document.elementFromPoint(a,b);if(!a)return!1;b=(b=(b=gg(c))&&b.defaultView&&b.defaultView.frameElement)&&Po(b,a);var d=a===c;a=!d&&a&&vg(a,function(e){return e===c});return!(b||d||a)}
function Ro(a,b,c,d){return Pn().l?!1:0>=a.getWidth()||0>=a.getHeight()?!0:c&&d?dn(208,function(){return Qo(a,b,c)}):!1};var So=new H(0,0,0,0),Uo=function(a,b,c){D.call(this);this.position=Yg(So);this.yc=this.rc();this.ed=-2;this.eg=Date.now();this.ne=-1;this.uc=b;this.tc=null;this.Kb=!1;this.Dc=null;this.opacity=-1;this.Tf=c;this.fg=!1;this.fd=function(){};this.oe=function(){};this.ta=new mm;this.ta.Ya=a;this.ta.h=a;this.Ma=!1;this.bb={jd:null,hd:null};this.ke=!0;this.Tb=null;this.yb=this.Ff=!1;P().B++;this.qa=this.Xc();this.me=-1;this.fa=null;this.Zd=this.Df=!1;this.R=new cm;km(this.R);To(this);1==this.Tf?fm(this.R,
"od",1):fm(this.R,"od",0)};t(Uo,D);Uo.prototype.N=function(){this.ta.h&&(this.bb.jd&&(cf(this.ta.h,"mouseover",this.bb.jd),this.bb.jd=null),this.bb.hd&&(cf(this.ta.h,"mouseout",this.bb.hd),this.bb.hd=null));this.Tb&&this.Tb.W();this.fa&&this.fa.W();delete this.yc;delete this.fd;delete this.oe;delete this.ta.Ya;delete this.ta.h;delete this.bb;delete this.Tb;delete this.fa;delete this.R;D.prototype.N.call(this)};Uo.prototype.fb=function(){return this.fa?this.fa.h:this.position};Uo.prototype.od=function(a){P().od(a)};
var To=function(a){a=a.ta.Ya;var b;if(b=a&&a.getAttribute)b=/-[a-z]/.test("googleAvInapp")?!1:lm&&a.dataset?"googleAvInapp"in a.dataset:a.hasAttribute?a.hasAttribute("data-"+cg()):!!a.getAttribute("data-"+cg());b&&(Pn().j=!0)};Uo.prototype.Ga=function(){return!1};Uo.prototype.rc=function(){return new Eo};Uo.prototype.pa=function(){return this.yc};
var Vo=function(a,b){b!=a.yb&&(a.yb=b,a=Pn(),b?a.B++:0<a.B&&a.B--)},Wo=function(a,b){if(a.fa){if(b.getName()===a.fa.getName())return;a.fa.W();a.fa=null}b=b.create(a.ta.h,a.R,a.Ga());if(b=null!=b&&b.Oc()?b:null)a.fa=b},Xo=function(a,b,c){if(!a.tc||-1==a.uc||-1===b.getTimestamp()||-1===a.tc.getTimestamp())return 0;a=b.getTimestamp()-a.tc.getTimestamp();return a>c?0:a};Uo.prototype.Wd=function(a){return Xo(this,a,1E4)};
var Yo=function(a,b,c){if(a.fa){a.fa.Ua();var d=a.fa.I,e=d.l,f=e.h;if(null!=d.A){var g=d.j;a.Dc=new Wf(g.left-f.left,g.top-f.top)}f=a.Hc()?Math.max(d.h,d.o):d.h;g={};null!==e.volume&&(g.volume=e.volume);e=a.Wd(d);a.tc=d;a.yd(f,b,c,!1,g,e,d.B)}},Zo=function(a){if(a.Kb&&a.Tb){var b=1==gm(a.R,"od"),c=Pn().h,d=a.Tb,e=a.fa?a.fa.getName():"ns",f=new E(c.getWidth(),c.getHeight());c=a.Hc();a={cg:e,Dc:a.Dc,lg:f,Hc:c,ba:a.qa.ba,hg:b};if(b=d.j){b.Ua();e=b.I;f=e.l.h;var g=null,h=null;null!=e.A&&f&&(g=e.j,g=new Wf(g.left-
f.left,g.top-f.top),h=new E(f.right-f.left,f.bottom-f.top));e=c?Math.max(e.h,e.o):e.h;c={cg:b.getName(),Dc:g,lg:h,Hc:c,hg:!1,ba:e}}else c=null;c&&po(d,a,c)}};l=Uo.prototype;l.yd=function(a,b,c,d,e,f,g){this.Ma||(this.Kb&&(a=this.Qc(a,c,e,g),d=d&&this.qa.ba>=(this.jb()?.3:.5),this.zd(f,a,d),this.uc=b,0<a.ba&&-1===this.me&&(this.me=b),-1==this.ne&&this.Na()&&(this.ne=b),-2==this.ed&&(this.ed=Oo(this.fb())?a.ba:-1),this.qa=a),this.fd(this))};l.zd=function(a,b,c){this.pa().K(a,b,this.qa,c)};l.Xc=function(){return new Rl};
l.Qc=function(a,b,c,d){c=this.Xc();c.h=b;b=Jm().j;b=0===th(Ml)?-1:b.isVisible()?0:1;c.j=b;c.ba=this.Sc(a);c.jb=this.jb();c.sa=d;return c};l.Sc=function(a){return 0===this.opacity&&1===gm(this.R,"opac")?0:a};l.jb=function(){return!1};l.Hc=function(){return this.Df||this.Ff};l.va=function(){return 0};l.Na=function(){return this.yc.Na()};l.Yd=function(){var a=this.Kb;a=(this.Zd||this.wa())&&!a;var b=2!==P().j||this.fg;return this.Ma||b&&a?2:this.Na()?4:3};l.lc=function(){return 0};
var $o=function(a,b,c){b&&(a.fd=b);c&&(a.oe=c)};var ap=function(){};ap.prototype.next=function(){return bp};var bp={done:!0,value:void 0};ap.prototype.qb=function(){return this};var cp=function(){this.o=this.h=this.l=this.j=this.A=0},dp=function(a){var b={};b=(b.ptlt=Wa()-a.A,b);var c=a.j;c&&(b.pnk=c);(c=a.l)&&(b.pnc=c);(c=a.o)&&(b.pnmm=c);(a=a.h)&&(b.pns=a);return b};var ep=function(){Rl.call(this);this.fullscreen=!1;this.volume=void 0;this.paused=!1;this.mediaTime=-1};t(ep,Rl);var fp=function(a){return Hn(a.volume)&&0<a.volume};var hp=function(a,b,c,d){c=void 0===c?!0:c;d=void 0===d?function(){return!0}:d;return function(e){var f=e[a];if(Array.isArray(f)&&d(e))return gp(f,b,c)}},ip=function(a,b){return function(c){return b(c)?c[a]:void 0}},jp=function(a){return function(b){for(var c=0;c<a.length;c++)if(a[c]===b.e||void 0===a[c]&&!b.hasOwnProperty("e"))return!0;return!1}},gp=function(a,b,c){return void 0===c||c?Ib(a,function(d,e){return Pb(b,e)}):Jb(b,function(d,e,f){return a.slice(0<e?f[e-1]+1:0,d+1).reduce(function(g,h){return g+
h},0)})};var kp=jp([void 0,1,2,3,4,8,16]),lp=jp([void 0,4,8,16]),mp={sv:"sv",v:"v",cb:"cb",e:"e",nas:"nas",msg:"msg","if":"if",sdk:"sdk",p:"p",p0:ip("p0",lp),p1:ip("p1",lp),p2:ip("p2",lp),p3:ip("p3",lp),cp:"cp",tos:"tos",mtos:"mtos",amtos:"amtos",mtos1:hp("mtos1",[0,2,4],!1,lp),mtos2:hp("mtos2",[0,2,4],!1,lp),mtos3:hp("mtos3",[0,2,4],!1,lp),mcvt:"mcvt",ps:"ps",scs:"scs",bs:"bs",vht:"vht",mut:"mut",a:"a",a0:ip("a0",lp),a1:ip("a1",lp),a2:ip("a2",lp),a3:ip("a3",lp),ft:"ft",dft:"dft",at:"at",dat:"dat",as:"as",
vpt:"vpt",gmm:"gmm",std:"std",efpf:"efpf",swf:"swf",nio:"nio",px:"px",nnut:"nnut",vmer:"vmer",vmmk:"vmmk",vmiec:"vmiec",nmt:"nmt",tcm:"tcm",bt:"bt",pst:"pst",vpaid:"vpaid",dur:"dur",vmtime:"vmtime",dtos:"dtos",dtoss:"dtoss",dvs:"dvs",dfvs:"dfvs",dvpt:"dvpt",fmf:"fmf",vds:"vds",is:"is",i0:"i0",i1:"i1",i2:"i2",i3:"i3",ic:"ic",cs:"cs",c:"c",c0:ip("c0",lp),c1:ip("c1",lp),c2:ip("c2",lp),c3:ip("c3",lp),mc:"mc",nc:"nc",mv:"mv",nv:"nv",qmt:ip("qmtos",kp),qnc:ip("qnc",kp),qmv:ip("qmv",kp),qnv:ip("qnv",kp),
raf:"raf",rafc:"rafc",lte:"lte",ces:"ces",tth:"tth",femt:"femt",femvt:"femvt",emc:"emc",emuc:"emuc",emb:"emb",avms:"avms",nvat:"nvat",qi:"qi",psm:"psm",psv:"psv",psfv:"psfv",psa:"psa",pnk:"pnk",pnc:"pnc",pnmm:"pnmm",pns:"pns",ptlt:"ptlt",pngs:"pings",veid:"veid",ssb:"ssb",ss0:ip("ss0",lp),ss1:ip("ss1",lp),ss2:ip("ss2",lp),ss3:ip("ss3",lp),dc_rfl:"urlsigs",obd:"obd",omidp:"omidp",omidr:"omidr",omidv:"omidv",omida:"omida",omids:"omids",omidpv:"omidpv",omidam:"omidam",omidct:"omidct",omidia:"omidia",
omiddc:"omiddc",omidlat:"omidlat",omiddit:"omiddit",nopd:"nopd"},np=Object.assign({},mp,{avid:function(a){return function(){return a}}("audio"),avas:"avas",vs:"vs"}),op={atos:"atos",avt:hp("atos",[2]),davs:"davs",dafvs:"dafvs",dav:"dav",ss:function(a,b){return function(c){return void 0===c[a]&&void 0!==b?b:c[a]}}("ss",0),t:"t"};var pp=function(){this.j=this.h=""};var qp=function(){},rp=function(a,b){var c={};if(void 0!==a)if(null!=b)for(var d in b){var e=b[d];d in Object.prototype||null!=e&&(c[d]="function"===typeof e?e(a):a[e])}else Af(c,a);return jo(ho(new fo,c))};var sp=function(){var a={};this.j=(a.vs=[1,0],a.vw=[0,1],a.am=[2,2],a.a=[4,4],a.f=[8,8],a.bm=[16,16],a.b=[32,32],a.avw=[0,64],a.avs=[64,0],a.pv=[256,256],a.gdr=[0,512],a.p=[0,1024],a.r=[0,2048],a.m=[0,4096],a.um=[0,8192],a.ef=[0,16384],a.s=[0,32768],a.pmx=[0,16777216],a.mut=[33554432,33554432],a.umutb=[67108864,67108864],a);this.h={};for(var b in this.j)0<this.j[b][1]&&(this.h[b]=0);this.l=0},tp=function(a,b){var c=a.j[b],d=c[1];a.l+=c[0];0<d&&0==a.h[b]&&(a.h[b]=1)},up=function(a){var b=qf(a.j),c=
0,d;for(d in a.h)Pb(b,d)&&1==a.h[d]&&(c+=a.j[d][1],a.h[d]=2);return c},vp=function(a){var b=0,c;for(c in a.h){var d=a.h[c];if(1==d||2==d)b+=a.j[c][1]}return b};var wp=function(){this.j=this.h=0},xp=function(a,b,c){32<=b||(a.j&1<<b&&!c?a.h&=~(1<<b):a.j&1<<b||!c||(a.h|=1<<b),a.j|=1<<b)};var yp=function(){Eo.call(this);this.l=new qo;this.U=this.F=this.L=0;this.I=-1;this.ia=new qo;this.A=new qo;this.h=new to;this.B=this.o=-1;this.G=new qo;this.aa=2E3;this.P=new wp;this.Z=new wp;this.Y=new wp};t(yp,Eo);var zp=function(a,b,c){var d=a.U;mn||c||-1==a.I||(d+=b-a.I);return d};
yp.prototype.K=function(a,b,c,d){if(!b.paused){Eo.prototype.K.call(this,a,b,c,d);var e=fp(b)&&fp(c),f=.5<=(d?Math.min(b.ba,c.ba):c.ba);Hn(b.volume)&&(this.o=-1!=this.o?Math.min(this.o,b.volume):b.volume,this.B=Math.max(this.B,b.volume));f&&(this.L+=a,this.F+=e?a:0);Co(this.h,b.ba,c.ba,b.h,a,d,e);ro(this.l,!0,a);ro(this.A,e,a);ro(this.G,c.fullscreen,a);ro(this.ia,e&&!f,a);a=Math.floor(b.mediaTime/1E3);xp(this.P,a,b.isVisible());xp(this.Z,a,1<=b.ba);xp(this.Y,a,fp(b))}};var Ap=function(){this.l=!1};Ap.prototype.j=function(a){this.l||(this.h(a)?(a=this.K.report(this.o,a),this.A|=a,a=0==a):a=!1,this.l=a)};var Bp=function(a,b){this.l=!1;this.o=a;this.K=b;this.A=0};t(Bp,Ap);Bp.prototype.h=function(){return!0};Bp.prototype.B=function(){return!1};Bp.prototype.getId=function(){var a=this,b=uf(function(c){return c==a.o});return vn[b].toString()};Bp.prototype.toString=function(){var a="";this.B()&&(a+="c");this.l&&(a+="s");0<this.A&&(a+=":"+this.A);return this.getId()+a};var Cp=function(a,b){Bp.call(this,a,b);this.C=[]};t(Cp,Bp);Cp.prototype.j=function(a,b){b=void 0===b?null:b;null!=b&&this.C.push(b);Bp.prototype.j.call(this,a)};var Dp=function(){};var Ep=function(){};t(Ep,Dp);Ep.prototype.j=function(){return null};Ep.prototype.l=function(){return[]};var Fp=function(a,b,c,d){$n.call(this,a,b,c,d)};t(Fp,$n);l=Fp.prototype;l.Rc=function(){if(this.l){var a=this.l,b=this.j.h.l;try{try{var c=En(a.getBoundingClientRect())}catch(m){c=new H(0,0,0,0)}var d=c.right-c.left,e=c.bottom-c.top,f=cl(a,b),g=f.x,h=f.y;var k=new H(Math.round(h),Math.round(g+d),Math.round(h+e),Math.round(g))}catch(m){k=Yg(Mo)}this.h=k}};l.Md=function(){this.A=this.j.o.h};l.ae=function(a){return Ro(a,this.A,this.l,1==gm(this.R,"od"))};l.Nd=function(){this.timestamp=nn()};
l.Ua=function(){this.Nd();this.Rc();if(this.l&&"number"===typeof this.l.videoWidth&&"number"===typeof this.l.videoHeight){var a=this.l;var b=new E(a.videoWidth,a.videoHeight);a=this.h;var c=a.getWidth(),d=a.getHeight(),e=b.width;b=b.height;0>=e||0>=b||0>=c||0>=d||(e/=b,a=Yg(a),e>c/d?(c/=e,d=(d-c)/2,0<d&&(d=a.top+d,a.top=Math.round(d),a.bottom=Math.round(d+c))):(d*=e,c=Math.round((c-d)/2),0<c&&(c=a.left+c,a.left=Math.round(c),a.right=Math.round(c+d))));this.h=a}this.Md();a=this.h;c=this.A;a=a.left<=
c.right&&c.left<=a.right&&a.top<=c.bottom&&c.top<=a.bottom?new H(Math.max(a.top,c.top),Math.min(a.right,c.right),Math.min(a.bottom,c.bottom),Math.max(a.left,c.left)):new H(0,0,0,0);c=a.top>=a.bottom||a.left>=a.right?new H(0,0,0,0):a;a=this.j.o;b=e=d=0;0<(this.h.bottom-this.h.top)*(this.h.right-this.h.left)&&(this.ae(c)?c=new H(0,0,0,0):(d=Pn().A,b=new H(0,d.height,d.width,0),d=No(c,this.h),e=No(c,Pn().h),b=No(c,b)));c=c.top>=c.bottom||c.left>=c.right?new H(0,0,0,0):Zg(c,-this.h.left,-this.h.top);
Qn()||(e=d=0);this.I=new qn(a,this.h,c,d,e,this.timestamp,b)};l.getName=function(){return this.j.getName()};var Gp=new H(0,0,0,0),Hp=function(a,b,c){$n.call(this,null,a,b,c);this.C=a.isActive();this.B=0};t(Hp,Fp);l=Hp.prototype;l.Oc=function(){this.o();return!0};l.Wa=function(){Fp.prototype.Ua.call(this)};l.Nd=function(){};l.Rc=function(){};l.Ua=function(){this.o();Fp.prototype.Ua.call(this)};l.wb=function(a){a=a.isActive();a!==this.C&&(a?this.o():(Pn().h=new H(0,0,0,0),this.h=new H(0,0,0,0),this.A=new H(0,0,0,0),this.timestamp=-1));this.C=a};function Ip(a){return[a.top,a.left,a.bottom,a.right]}
var Jp={},Kp=(Jp.firstquartile=0,Jp.midpoint=1,Jp.thirdquartile=2,Jp.complete=3,Jp),Lp=function(a,b,c,d,e,f){f=void 0===f?new Ep:f;Uo.call(this,b,c,d);this.nd=e;this.Vc=0;this.la={};this.ha=new sp;this.qe={};this.na="";this.playerId=null;this.ua=!1;this.h=[];this.Pa=f.j();this.B=f.l();this.A=null;this.l=-1;this.V=this.G=void 0;this.J=this.H=0;this.P=-1;this.da=this.aa=!1;this.M=this.F=this.j=this.Cb=this.ka=0;new to;this.U=this.Y=0;this.Z=-1;this.ma=0;this.C=We;this.L=[this.rc()];this.Ja=2;this.nb=
{};this.nb.pause="p";this.nb.resume="r";this.nb.skip="s";this.nb.mute="m";this.nb.unmute="um";this.nb.exitfullscreen="ef";this.o=null;this.ia=!1};t(Lp,Uo);Lp.prototype.Ga=function(){return!0};var Mp=function(a){a.Zd=!0;0!=a.ma&&(a.ma=3)},Np=function(a){return void 0===a?a:Number(a)?zn(a,3):0};l=Lp.prototype;l.Wd=function(a){return Xo(this,a,Math.max(1E4,this.l/3))};
l.yd=function(a,b,c,d,e,f,g){var h=this,k=this.C(this)||{};Af(k,e);this.l=k.duration||this.l;this.G=k.isVpaid||this.G;this.V=k.isYouTube||this.V;e=Op(this,b);1===Pp(this)&&(f=e);Uo.prototype.yd.call(this,a,b,c,d,k,f,g);this.Pa&&this.Pa.l&&Gb(this.B,function(m){m.j(h)})};
l.zd=function(a,b,c){Uo.prototype.zd.call(this,a,b,c);Qp(this).K(a,b,this.qa,c);this.da=fp(this.qa)&&fp(b);-1==this.P&&this.aa&&(this.P=this.pa().l.h);this.ha.l=0;a=this.Na();b.isVisible()&&tp(this.ha,"vs");a&&tp(this.ha,"vw");Hn(b.volume)&&tp(this.ha,"am");fp(b)?tp(this.ha,"a"):tp(this.ha,"mut");this.yb&&tp(this.ha,"f");-1!=b.j&&(tp(this.ha,"bm"),1==b.j&&(tp(this.ha,"b"),fp(b)&&tp(this.ha,"umutb")));fp(b)&&b.isVisible()&&tp(this.ha,"avs");this.da&&a&&tp(this.ha,"avw");0<b.ba&&tp(this.ha,"pv");Rp(this,
this.pa().l.h,!0)&&tp(this.ha,"gdr");2E3<=zo(this.pa().j,1)&&tp(this.ha,"pmx")};l.rc=function(){return new yp};l.pa=function(){return this.yc};var Qp=function(a,b){return a.L[null!=b&&b<a.L.length?b:a.L.length-1]};Lp.prototype.Xc=function(){return new ep};
Lp.prototype.Qc=function(a,b,c,d){a=Uo.prototype.Qc.call(this,a,b,c,void 0===d?-1:d);a.fullscreen=this.yb;a.paused=2==this.ma;a.volume=c.volume;Hn(a.volume)||(this.ka++,b=this.qa,Hn(b.volume)&&(a.volume=b.volume));c=c.currentTime;a.mediaTime=void 0!==c&&0<=c?c:-1;return a};
var Pp=function(a){var b=!!gm(P().R,"umt");return a.G||!b&&!a.V?0:1},Op=function(a,b){2==a.ma?b=0:-1==a.uc?b=0:(b-=a.uc,b=b>Math.max(1E4,a.l/3)?0:b);var c=a.C(a)||{};c=void 0!==c.currentTime?c.currentTime:a.H;var d=c-a.H,e=0;0<=d?(a.J+=b,a.U+=Math.max(b-d,0),e=Math.min(d,a.J)):a.Y+=Math.abs(d);0!=d&&(a.J=0);-1==a.Z&&0<d&&(a.Z=0<=ln?nn()-ln:-1);a.H=c;return e};Lp.prototype.Sc=function(a){return Pn(),this.yb?1:Uo.prototype.Sc.call(this,a)};Lp.prototype.va=function(){return 1};
Lp.prototype.getDuration=function(){return this.l};
var Sp=function(a,b){Lb(a.B,function(c){return c.o==b.o})||a.B.push(b)},Tp=function(a){var b=xo(a.pa().h,1);return Rp(a,b)},Rp=function(a,b,c){return 15E3<=b?!0:a.aa?(void 0===c?0:c)?!0:0<a.l?b>=a.l/2:0<a.P?b>=a.P:!1:!1},Up=function(a){var b={},c=Pn();b.insideIframe=c.l;b.unmeasurable=a.Ma;b.position=a.fb();b.exposure=a.qa.ba;b.documentSize=c.o;b.viewportSize=new E(c.h.getWidth(),c.h.getHeight());null!=a.o&&(b.presenceData=a.o);b.screenShare=a.qa.sa;return b},Vp=function(a){var b=zn(a.qa.ba,2),c=
a.ha.l,d=a.qa,e=Qp(a),f=Np(e.o),g=Np(e.B),h=Np(d.volume),k=zn(e.C,2),m=zn(e.H,2),n=zn(d.ba,2),r=zn(e.J,2),v=zn(e.M,2);d=zn(d.sa,2);a=Yg(a.fb());a.round();e=Fo(e,!1);return{kg:b,Nb:c,zc:f,vc:g,Hb:h,Ac:k,wc:m,ba:n,Bc:r,xc:v,sa:d,position:a,Cc:e}},Xp=function(a,b){Wp(a.h,b,function(){return{kg:0,Nb:void 0,zc:-1,vc:-1,Hb:-1,Ac:-1,wc:-1,ba:-1,Bc:-1,xc:-1,sa:-1,position:void 0,Cc:[]}});a.h[b]=Vp(a)},Wp=function(a,b,c){for(var d=a.length;d<b+1;)a.push(c()),d++},$p=function(a,b,c){var d=a.qe[b];if(null!=
d)return d;d=Yp(a,b);var e=uf(function(f){return f==b});a=Zp(a,d,d,c,Kp[vf[e]]);"fully_viewable_audible_half_duration_impression"==b&&(a.std="csm");return a},aq=function(a,b,c){var d=[b];if(a!=b||c!=b)d.unshift(a),d.push(c);return d},Zp=function(a,b,c,d,e){if(a.Ma)return{"if":0,vs:0};var f=Yg(a.fb());f.round();var g=Pn(),h=P(),k=a.pa(),m=a.fa?a.fa.getName():"ns",n={};n["if"]=g.l?1:void 0;n.sdk=a.A?a.A:void 0;n.t=a.eg;n.p=[f.top,f.left,f.bottom,f.right];n.tos=vo(k.j,!1);n.mtos=Fo(k);n.mcvt=k.V.l;n.ps=
void 0;n.vht=zp(k,nn(),2==a.ma);n.mut=k.ia.l;n.a=Np(a.qa.volume);n.mv=Np(k.B);n.fs=a.yb?1:0;n.ft=k.G.h;n.at=k.A.h;n.as=0<k.o?1:0;n.atos=vo(k.h);n.ssb=vo(k.da,!1);n.amtos=yo(k.h,!1);n.uac=a.ka;n.vpt=k.l.h;"nio"==m&&(n.nio=1,n.avms="nio");n.gmm="4";n.gdr=Rp(a,k.l.h,!0)?1:0;n.efpf=a.Ja;if("gsv"==m||"nis"==m)f=a.fa,0<f.B&&(n.nnut=f.B);n.tcm=Pp(a);n.nmt=a.Y;n.bt=a.U;n.pst=a.Z;n.vpaid=a.G;n.dur=a.l;n.vmtime=a.H;n.is=a.ha.l;1<=a.h.length&&(n.i0=a.h[0].Nb,n.a0=[a.h[0].Hb],n.c0=[a.h[0].ba],n.ss0=[a.h[0].sa],
f=a.h[0].position,n.p0=f?Ip(f):void 0);2<=a.h.length&&(n.i1=a.h[1].Nb,n.a1=aq(a.h[1].zc,a.h[1].Hb,a.h[1].vc),n.c1=aq(a.h[1].Ac,a.h[1].ba,a.h[1].wc),n.ss1=aq(a.h[1].Bc,a.h[1].sa,a.h[1].xc),f=a.h[1].position,n.p1=f?Ip(f):void 0,n.mtos1=a.h[1].Cc);3<=a.h.length&&(n.i2=a.h[2].Nb,n.a2=aq(a.h[2].zc,a.h[2].Hb,a.h[2].vc),n.c2=aq(a.h[2].Ac,a.h[2].ba,a.h[2].wc),n.ss2=aq(a.h[2].Bc,a.h[2].sa,a.h[2].xc),f=a.h[2].position,n.p2=f?Ip(f):void 0,n.mtos2=a.h[2].Cc);4<=a.h.length&&(n.i3=a.h[3].Nb,n.a3=aq(a.h[3].zc,a.h[3].Hb,
a.h[3].vc),n.c3=aq(a.h[3].Ac,a.h[3].ba,a.h[3].wc),n.ss3=aq(a.h[3].Bc,a.h[3].sa,a.h[3].xc),f=a.h[3].position,n.p3=f?Ip(f):void 0,n.mtos3=a.h[3].Cc);n.cs=vp(a.ha);b&&(n.ic=up(a.ha),n.dvpt=k.l.j,n.dvs=Ao(k.j,.5),n.dfvs=Ao(k.j,1),n.davs=Ao(k.h,.5),n.dafvs=Ao(k.h,1),c&&(k.l.j=0,Bo(k.j),Bo(k.h)),a.Na()&&(n.dtos=k.L,n.dav=k.F,n.dtoss=a.Vc+1,c&&(k.L=0,k.F=0,a.Vc++)),n.dat=k.A.j,n.dft=k.G.j,c&&(k.A.j=0,k.G.j=0));n.ps=[g.o.width,g.o.height];n.bs=[g.h.getWidth(),g.h.getHeight()];n.scs=[g.A.width,g.A.height];
n.dom=g.domain;a.Cb&&(n.vds=a.Cb);if(0<a.B.length||a.Pa)b=Vb(a.B),a.Pa&&b.push(a.Pa),n.pings=Jb(b,function(r){return r.toString()});b=Jb(Ib(a.B,function(r){return r.B()}),function(r){return r.getId()});Wb(b);n.ces=b;a.j&&(n.vmer=a.j);a.F&&(n.vmmk=a.F);a.M&&(n.vmiec=a.M);n.avms=a.fa?a.fa.getName():"ns";a.fa&&Af(n,a.fa.Va());d?(n.c=zn(a.qa.ba,2),n.ss=zn(a.qa.sa,2)):n.tth=nn()-kn;n.mc=zn(k.H,2);n.nc=zn(k.C,2);n.mv=Np(k.B);n.nv=Np(k.o);n.lte=zn(a.ed,2);d=Qp(a,e);Fo(k);n.qmtos=Fo(d);n.qnc=zn(d.C,2);n.qmv=
Np(d.B);n.qnv=Np(d.o);n.qas=0<d.o?1:0;n.qi=a.na;n.avms||(n.avms="geo");n.psm=k.P.j;n.psv=k.P.h;n.psfv=k.Z.h;n.psa=k.Y.h;h=im(h.R);h.length&&(n.veid=h);a.o&&Af(n,dp(a.o));n.avas=a.lc();n.vs=a.Yd();return n},Yp=function(a,b){if(Pb(un,b))return!0;var c=a.la[b];return void 0!==c?(a.la[b]=!0,!c):!1};Lp.prototype.Yd=function(){return this.Ma?2:Tp(this)?5:this.Na()?4:3};Lp.prototype.lc=function(){return this.ia?2E3<=this.pa().A.l?4:3:2};var bq=Wa(),eq=function(){this.h={};var a=G();cq(this,a,document);var b=dq();try{if("1"==b){for(var c=a.parent;c!=a.top;c=c.parent)cq(this,c,c.document);cq(this,a.top,a.top.document)}}catch(d){}},dq=function(){var a=document.documentElement;try{if(!Mg(G().top))return"2";var b=[],c=G(a.ownerDocument);for(a=c;a!=c.top;a=a.parent)if(a.frameElement)b.push(a.frameElement);else break;return b&&0!=b.length?"1":"0"}catch(d){return"2"}},cq=function(a,b,c){Lo(c,"mousedown",function(){return fq(a)},301);Lo(b,
"scroll",function(){return gq(a)},302);Lo(c,"touchmove",function(){return hq(a)},303);Lo(c,"mousemove",function(){return iq(a)},304);Lo(c,"keydown",function(){return jq(a)},305)},fq=function(a){jf(a.h,function(b){1E5<b.l||++b.l})},gq=function(a){jf(a.h,function(b){1E5<b.h||++b.h})},hq=function(a){jf(a.h,function(b){1E5<b.h||++b.h})},jq=function(a){jf(a.h,function(b){1E5<b.j||++b.j})},iq=function(a){jf(a.h,function(b){1E5<b.o||++b.o})};var kq=function(){this.h=[];this.j=[]},lq=function(a,b){return Mb(a.h,function(c){return c.na==b})},mq=function(a,b){return b?Mb(a.h,function(c){return c.ta.Ya==b}):null},nq=function(a,b){return Mb(a.j,function(c){return 2==c.va()&&c.na==b})},pq=function(){var a=oq;return 0==a.h.length?a.j:0==a.j.length?a.h:Ub(a.j,a.h)};kq.prototype.reset=function(){this.h=[];this.j=[]};
var qq=function(a,b){a=1==b.va()?a.h:a.j;var c=Nb(a,function(d){return d==b});return-1!=c?(a.splice(c,1),b.fa&&b.fa.Vb(),b.W(),!0):!1},rq=function(a){var b=oq;if(qq(b,a)){switch(a.va()){case 0:var c=function(){return null};case 2:c=function(){return nq(b,a.na)};break;case 1:c=function(){return lq(b,a.na)}}for(var d=c();d;d=c())qq(b,d)}},sq=function(a){var b=oq;a=Ib(a,function(c){return!mq(b,c.ta.Ya)});b.h.push.apply(b.h,ka(a))},tq=function(a){var b=[];Gb(a,function(c){Lb(oq.h,function(d){return d.ta.Ya===
c.ta.Ya&&d.na===c.na})||(oq.h.push(c),b.push(c))})},oq=J(kq);var uq=function(){this.h=this.j=null},vq=function(a,b){if(null==a.j)return!1;var c=function(d,e){b(d,e)};a.h=Mb(a.j,function(d){return null!=d&&d.Ed()});a.h&&(a.h.init(c)?Xn(a.h.h):b(a.h.h.ub(),a.h));return null!=a.h};var xq=function(a){a=wq(a);ao.call(this,a.length?a[a.length-1]:new Tn(O,0));this.l=a;this.j=null};t(xq,ao);l=xq.prototype;l.getName=function(){return(this.j?this.j:this.h).getName()};l.Va=function(){return(this.j?this.j:this.h).Va()};l.La=function(){return(this.j?this.j:this.h).La()};l.init=function(a){var b=!1;Gb(this.l,function(c){c.initialize()&&(b=!0)});b&&(this.o=a,Wn(this.h,this));return b};l.W=function(){Gb(this.l,function(a){a.W()});ao.prototype.W.call(this)};
l.Ed=function(){return Lb(this.l,function(a){return a.H()})};l.Gb=function(){return Lb(this.l,function(a){return a.H()})};l.Wb=function(a,b,c){return new Fp(a,this.h,b,c)};l.Wa=function(a){this.j=a.j};var wq=function(a){if(!a.length)return[];a=Ib(a,function(c){return null!=c&&c.H()});for(var b=1;b<a.length;b++)Wn(a[b-1],a[b]);return a};var yq={threshold:[0,.3,.5,.75,1]},zq=function(a,b,c,d){$n.call(this,a,b,c,d);this.F=this.K=this.B=this.C=this.o=null};t(zq,Fp);zq.prototype.Oc=function(){var a=this;this.F||(this.F=nn());if(dn(298,function(){return Aq(a)}))return!0;Vn(this.j,"msf");return!1};zq.prototype.Vb=function(){if(this.o&&this.l)try{this.o.unobserve(this.l),this.C?(this.C.unobserve(this.l),this.C=null):this.B&&(this.B.disconnect(),this.B=null)}catch(a){}};
var Bq=function(a){return a.o&&a.o.takeRecords?a.o.takeRecords():[]},Aq=function(a){if(!a.l)return!1;var b=a.l,c=a.j.h.l,d=P().h.h;a.o=new c.IntersectionObserver(Pm(d,function(e){return Cq(a,e)}),yq);d=Pm(d,function(){a.o.unobserve(b);a.o.observe(b);Cq(a,Bq(a))});c.ResizeObserver?(a.C=new c.ResizeObserver(d),a.C.observe(b)):c.MutationObserver&&(a.B=new u.MutationObserver(d),a.B.observe(b,{attributes:!0,childList:!0,characterData:!0,subtree:!0}));a.o.observe(b);Cq(a,Bq(a));return!0},Cq=function(a,
b){try{if(b.length){a.K||(a.K=nn());var c=Dq(b),d=cl(a.l,a.j.h.l),e=d.x,f=d.y;a.h=new H(Math.round(f),Math.round(e)+c.boundingClientRect.width,Math.round(f)+c.boundingClientRect.height,Math.round(e));var g=En(c.intersectionRect);a.A=Zg(g,a.h.left-g.left,a.h.top-g.top)}}catch(h){a.Vb(),fn(299,h)}},Dq=function(a){return Kb(a,function(b,c){return b.time>c.time?b:c},a[0])};l=zq.prototype;l.Ua=function(){var a=Bq(this);0<a.length&&Cq(this,a);Fp.prototype.Ua.call(this)};l.Rc=function(){};l.ae=function(){return!1};
l.Md=function(){};l.Va=function(){var a={};return Object.assign(this.j.Va(),(a.niot_obs=this.F,a.niot_cbk=this.K,a))};l.getName=function(){return"nio"};var Eq=function(a){a=void 0===a?O:a;ao.call(this,new Tn(a,2))};t(Eq,ao);Eq.prototype.getName=function(){return"nio"};Eq.prototype.Gb=function(){return!Pn().j&&null!=this.h.h.l.IntersectionObserver};Eq.prototype.Wb=function(a,b,c){return new zq(a,this.h,b,c)};var Gq=function(){var a=Fq();Tn.call(this,O.top,a,"geo")};t(Gq,Tn);Gq.prototype.aa=function(){return Pn().h};Gq.prototype.H=function(){var a=Fq();this.F!==a&&(this.h!=this&&a>this.h.F&&(this.h=this,Un(this)),this.F=a);return 2==a};var Fq=function(){P();var a=Pn();return a.l||a.j?0:2};var Hq=function(){};var Iq=function(){this.done=!1;this.h={Xe:0,Kd:0,ui:0,Sd:0,Zc:-1,gf:0,ff:0,hf:0,bg:0};this.A=null;this.B=!1;this.l=null;this.C=0;this.j=new Rn(this)},Lq=function(){var a=Jq;a.B||(a.B=!0,Kq(a,function(){return a.o.apply(a,ka(Ha.apply(0,arguments)))}),a.o())};Iq.prototype.sample=function(){Mq(this,pq(),!1)};
var Nq=function(){J(Hq);var a=J(uq);null!=a.h&&a.h.h?Xn(a.h.h):Ln(Pn())},Mq=function(a,b,c){if(!a.done&&(a.j.cancel(),0!=b.length)){a.l=null;try{Nq();var d=nn();P().A=d;if(null!=J(uq).h)for(var e=0;e<b.length;e++)Yo(b[e],d,c);for(d=0;d<b.length;d++)Zo(b[d]);++a.h.Sd}finally{c?Gb(b,function(f){f.qa.ba=0}):Sn(a.j)}}},Kq=function(a,b){if(!a.A){b=en(142,b);Jm();var c=uh(Ml);c&&bf(Ml,c,b,{capture:!1})&&(a.A=b)}};
Iq.prototype.o=function(){var a=Qn(),b=nn();a?(mn||(hn=b,Gb(oq.h,function(c){var d=c.pa();d.U=zp(d,b,1!=c.ma)})),mn=!0):(this.C=Oq(this,b),mn=!1,kn=b,Gb(oq.h,function(c){c.Kb&&(c.pa().I=b)}));Mq(this,pq(),!a)};
var Pq=function(){var a=J(uq);if(null!=a.h){var b=a.h;Gb(pq(),function(c){return Wo(c,b)})}},Oq=function(a,b){a=a.C;mn&&(a+=b-hn);return a},Qq=function(a){a=void 0===a?function(){return{}}:a;an.td("av-js");Xm.h=.01;cn([function(b){var c=P(),d={};d=(d.bin=c.j,d.type="error",d);c=hm(c.R);if(!Jq.l){var e=Jq,f=O.document,g=0<=jn?nn()-jn:-1,h=nn();-1==e.h.Zc&&(g=h);var k=Pn(),m=P(),n=hm(m.R),r=pq();try{if(0<r.length){var v=k.h;v&&(n.bs=[v.getWidth(),v.getHeight()]);var y=k.o;y&&(n.ps=[y.width,y.height]);
O.screen&&(n.scs=[O.screen.width,O.screen.height])}else n.url=encodeURIComponent(O.location.href.substring(0,512)),f.referrer&&(n.referrer=encodeURIComponent(f.referrer.substring(0,512)));n.tt=g;n.pt=jn;n.bin=m.j;void 0!==O.google_osd_load_pub_page_exp&&(n.olpp=O.google_osd_load_pub_page_exp);n.deb=[1,e.h.Xe,e.h.Kd,e.h.Sd,e.h.Zc,0,e.j.j,e.h.gf,e.h.ff,e.h.hf,e.h.bg,-1].join(";");n.tvt=Oq(e,h);k.j&&(n.inapp=1);if(null!==O&&O!=O.top){0<r.length&&(n.iframe_loc=encodeURIComponent(O.location.href.substring(0,
512)));var B=k.I;n.is=[B.getWidth(),B.getHeight()]}}catch(rb){n.error=1}Jq.l=n}y=Jq.l;v={};for(var F in y)v[F]=y[F];F=P().h;1==gm(F.l,"prf")?(y=new Nm,B=F.h,e=0,-1<B.h&&(e=B.l.h.h()-B.h),y=Od(y,1,Ad(B.o+e),0),B=F.h,y=Od(y,5,-1<B.h?B.j+1:B.j,0),y=Od(y,2,F.j.h.o(),0),y=Od(y,3,F.j.h.l(),0),F=Od(y,4,F.j.h.j(),0),y={},F=(y.pf=Ec(F.o()),y)):F={};Af(v,F);Af(b,d,c,v,a());if(d=mo())c={},Af(b,(c.v=encodeURIComponent(d),c))}])},Jq=J(Iq);var Rq=null,Sq="",Tq=!1,Uq=function(){var a=Rq||O;if(!a)return"";var b=[];if(!a.location||!a.location.href)return"";b.push("url="+encodeURIComponent(a.location.href.substring(0,512)));a.document&&a.document.referrer&&b.push("referrer="+encodeURIComponent(a.document.referrer.substring(0,512)));return b.join("&")};function Vq(){var a="av.default_js_unreleased_RCxx".match(/_(\d{8})_RC\d+$/)||"av.default_js_unreleased_RCxx".match(/_(\d{8})_\d+_\d+$/)||"av.default_js_unreleased_RCxx".match(/_(\d{8})_\d+\.\d+$/)||"av.default_js_unreleased_RCxx".match(/_(\d{8})_\d+_RC\d+$/),b;if(2==(null==(b=a)?void 0:b.length))return a[1];a="av.default_js_unreleased_RCxx".match(/.*_(\d{2})\.(\d{4})\.\d+_RC\d+$/);var c;return 3==(null==(c=a)?void 0:c.length)?"20"+a[1]+a[2]:null}
var Wq=function(){return"ima_html5_sdk".includes("ima_html5_sdk")?{Da:"ima",Ea:null}:"ima_html5_sdk".includes("ima_native_sdk")?{Da:"nima",Ea:null}:"ima_html5_sdk".includes("admob-native-video-javascript")?{Da:"an",Ea:null}:"av.default_js_unreleased_RCxx".includes("cast_js_sdk")?{Da:"cast",Ea:Vq()}:"av.default_js_unreleased_RCxx".includes("youtube.player.web")?{Da:"yw",Ea:Vq()}:"av.default_js_unreleased_RCxx".includes("outstream_web_client")?{Da:"out",Ea:Vq()}:"av.default_js_unreleased_RCxx".includes("drx_rewarded_web")?
{Da:"r",Ea:Vq()}:"av.default_js_unreleased_RCxx".includes("gam_native_web_video")?{Da:"n",Ea:Vq()}:"av.default_js_unreleased_RCxx".includes("admob_interstitial_video")?{Da:"int",Ea:Vq()}:{Da:"j",Ea:null}},Xq=Wq().Da,Yq=Wq().Ea;var $q=function(a,b){var c={sv:"950"};null!==Yq&&(c.v=Yq);c.cb=Xq;c.nas=oq.h.length;c.msg=a;void 0!==b&&(a=Zq(b))&&(c.e=vn[a]);return c},ar=function(a){return 0==a.lastIndexOf("custom_metric_viewable",0)},Zq=function(a){var b=ar(a)?"custom_metric_viewable":a.toLowerCase();return uf(function(c){return c==b})};var br={Hg:"visible",qg:"audible",Qh:"time",Sh:"timetype"},cr={visible:function(a){return/^(100|[0-9]{1,2})$/.test(a)},audible:function(a){return"0"==a||"1"==a},timetype:function(a){return"mtos"==a||"tos"==a},time:function(a){return/^(100|[0-9]{1,2})%$/.test(a)||/^([0-9])+ms$/.test(a)}},dr=function(){this.h=void 0;this.j=!1;this.l=0;this.o=-1;this.A="tos"},er=function(a){try{var b=a.split(",");return b.length>qf(br).length?null:Kb(b,function(c,d){d=d.toLowerCase().split("=");if(2!=d.length||void 0===
cr[d[0]]||!cr[d[0]](d[1]))throw Error("Entry ("+d[0]+", "+d[1]+") is invalid.");c[d[0]]=d[1];return c},{})}catch(c){return null}},fr=function(a,b){if(void 0==a.h)return 0;switch(a.A){case "mtos":return a.j?zo(b.h,a.h):zo(b.j,a.h);case "tos":return a.j?xo(b.h,a.h):xo(b.j,a.h)}return 0};var gr=function(a,b,c,d){Bp.call(this,b,d);this.C=a;this.I=c};t(gr,Bp);gr.prototype.getId=function(){return this.C};gr.prototype.B=function(){return!0};gr.prototype.h=function(a){var b=a.pa(),c=a.getDuration();return Lb(this.I,function(d){if(void 0!=d.h)var e=fr(d,b);else b:{switch(d.A){case "mtos":e=d.j?b.A.l:b.l.h;break b;case "tos":e=d.j?b.A.h:b.l.h;break b}e=0}0==e?d=!1:(d=-1!=d.l?d.l:void 0!==c&&0<c?d.o*c:-1,d=-1!=d&&e>=d);return d})};var hr=function(){};t(hr,qp);hr.prototype.h=function(a){var b=new pp;b.h=rp(a,mp);b.j=rp(a,op);return b};var ir=function(a){Bp.call(this,"fully_viewable_audible_half_duration_impression",a)};t(ir,Bp);ir.prototype.h=function(a){return Tp(a)};var jr=function(a){this.h=a};t(jr,Dp);var kr=function(a,b){Bp.call(this,a,b)};t(kr,Bp);kr.prototype.h=function(a){return a.pa().Na()};var lr=function(a){Cp.call(this,"measurable_impression",a)};t(lr,Cp);lr.prototype.h=function(a){var b=Pb(this.C,gm(P().R,"ovms"));return!a.Ma&&(0!=a.ma||b)};var mr=function(){jr.apply(this,arguments)};t(mr,jr);mr.prototype.j=function(){return new lr(this.h)};mr.prototype.l=function(){return[new kr("viewable_impression",this.h),new ir(this.h)]};var nr=function(a,b,c){Hp.call(this,a,b,c)};t(nr,Hp);nr.prototype.o=function(){var a=La("ima.admob.getViewability"),b=gm(this.R,"queryid");"function"===typeof a&&b&&a(b)};nr.prototype.getName=function(){return"gsv"};var or=function(a){a=void 0===a?O:a;ao.call(this,new Tn(a,2))};t(or,ao);or.prototype.getName=function(){return"gsv"};or.prototype.Gb=function(){var a=Pn();P();return a.j&&!1};or.prototype.Wb=function(a,b,c){return new nr(this.h,b,c)};var pr=function(a,b,c){Hp.call(this,a,b,c)};t(pr,Hp);pr.prototype.o=function(){var a=this,b=La("ima.bridge.getNativeViewability"),c=gm(this.R,"queryid");"function"===typeof b&&c&&b(c,function(d){wf(d)&&a.B++;var e=d.opt_nativeViewVisibleBounds||{},f=d.opt_nativeViewHidden;a.h=Fn(d.opt_nativeViewBounds||{});var g=a.j.o;g.h=f?Yg(Gp):Fn(e);a.timestamp=d.opt_nativeTime||-1;Pn().h=g.h;d=d.opt_nativeVolume;void 0!==d&&(g.volume=d)})};pr.prototype.getName=function(){return"nis"};var qr=function(a){a=void 0===a?O:a;ao.call(this,new Tn(a,2))};t(qr,ao);qr.prototype.getName=function(){return"nis"};qr.prototype.Gb=function(){var a=Pn();P();return a.j&&!1};qr.prototype.Wb=function(a,b,c){return new pr(this.h,b,c)};var rr=function(){Tn.call(this,O,2,"mraid");this.da=0;this.L=this.M=!1;this.K=null;this.j=wn(this.l);this.o.h=new H(0,0,0,0);this.ia=!1};t(rr,Tn);rr.prototype.H=function(){return null!=this.j.za};rr.prototype.Z=function(){var a={};this.da&&(a.mraid=this.da);this.M&&(a.mlc=1);a.mtop=this.j.Zf;this.K&&(a.mse=this.K);this.ia&&(a.msc=1);a.mcp=this.j.jc;return a};
rr.prototype.C=function(a){var b=Ha.apply(1,arguments);try{return this.j.za[a].apply(this.j.za,b)}catch(c){fn(538,c,.01,function(d){d.method=a})}};var sr=function(a,b,c){a.C("addEventListener",b,c)};
rr.prototype.initialize=function(){var a=this;if(this.B)return!this.Mb();this.B=!0;if(2===this.j.jc)return this.K="ng",Vn(this,"w"),!1;if(1===this.j.jc)return this.K="mm",Vn(this,"w"),!1;Pn().K=!0;this.l.document.readyState&&"complete"==this.l.document.readyState?tr(this):Lo(this.l,"load",function(){Jm().setTimeout(en(292,function(){return tr(a)}),100)},292);return!0};
var tr=function(a){P().o=!!a.C("isViewable");sr(a,"viewableChange",ur);"loading"===a.C("getState")?sr(a,"ready",vr):wr(a)},wr=function(a){"string"===typeof a.j.za.AFMA_LIDAR?(a.M=!0,xr(a)):(a.j.jc=3,a.K="nc",Vn(a,"w"))},xr=function(a){a.L=!1;var b=1==gm(P().R,"rmmt"),c=!!a.C("isViewable");(b?!c:1)&&Jm().setTimeout(en(524,function(){a.L||(yr(a),fn(540,Error()),a.K="mt",Vn(a,"w"))}),500);zr(a);sr(a,a.j.za.AFMA_LIDAR,Ar)},zr=function(a){var b=1==gm(P().R,"sneio"),c=void 0!==a.j.za.AFMA_LIDAR_EXP_1,d=
void 0!==a.j.za.AFMA_LIDAR_EXP_2;(b=b&&d)&&(a.j.za.AFMA_LIDAR_EXP_2=!0);c&&(a.j.za.AFMA_LIDAR_EXP_1=!b)},yr=function(a){a.C("removeEventListener",a.j.za.AFMA_LIDAR,Ar);a.M=!1};rr.prototype.U=function(){var a=Pn(),b=Br(this,"getMaxSize");a.h=new H(0,b.width,b.height,0)};rr.prototype.V=function(){Pn().A=Br(this,"getScreenSize")};
var Br=function(a,b){if("loading"===a.C("getState"))return new E(-1,-1);b=a.C(b);if(!b)return new E(-1,-1);a=parseInt(b.width,10);b=parseInt(b.height,10);return isNaN(a)||isNaN(b)?new E(-1,-1):new E(a,b)};rr.prototype.W=function(){yr(this);Tn.prototype.W.call(this)};
var vr=function(){try{var a=J(rr);a.C("removeEventListener","ready",vr);wr(a)}catch(b){fn(541,b)}},Ar=function(a,b){try{var c=J(rr);c.L=!0;var d=a?new H(a.y,a.x+a.width,a.y+a.height,a.x):new H(0,0,0,0);var e=nn(),f=Qn();var g=new pn(e,f,c);g.h=d;g.volume=b;c.Wa(g)}catch(h){fn(542,h)}},ur=function(a){var b=P(),c=J(rr);a&&!b.o&&(b.o=!0,c.ia=!0,c.K&&Vn(c,"w",!0))};var Dr=function(){this.l=this.B=!1;this.h=this.j=null;var a={};this.M=(a.start=this.Af,a.firstquartile=this.vf,a.midpoint=this.xf,a.thirdquartile=this.Bf,a.complete=this.sf,a.error=this.tf,a.pause=this.md,a.resume=this.je,a.skip=this.zf,a.viewable_impression=this.Fa,a.mute=this.Bb,a.unmute=this.Bb,a.fullscreen=this.wf,a.exitfullscreen=this.uf,a.fully_viewable_audible_half_duration_impression=this.Fa,a.measurable_impression=this.Fa,a.abandon=this.md,a.engagedview=this.Fa,a.impression=this.Fa,a.creativeview=
this.Fa,a.progress=this.Bb,a.custom_metric_viewable=this.Fa,a.bufferstart=this.md,a.bufferfinish=this.je,a.audio_measurable=this.Fa,a.audio_audible=this.Fa,a);a={};this.U=(a.overlay_resize=this.yf,a.abandon=this.Yc,a.close=this.Yc,a.collapse=this.Yc,a.overlay_unmeasurable_impression=function(b){return $p(b,"overlay_unmeasurable_impression",Qn())},a.overlay_viewable_immediate_impression=function(b){return $p(b,"overlay_viewable_immediate_impression",Qn())},a.overlay_unviewable_impression=function(b){return $p(b,
"overlay_unviewable_impression",Qn())},a.overlay_viewable_end_of_session_impression=function(b){return $p(b,"overlay_viewable_end_of_session_impression",Qn())},a);P().j=3;Cr(this)};Dr.prototype.A=function(a){Vo(a,!1);rq(a)};Dr.prototype.K=function(){};var Er=function(a,b,c,d){a=a.C(null,d,!0,b);a.A=c;sq([a]);return a};
Dr.prototype.C=function(a,b,c,d){var e=this;a=new Lp(O,a,c?b:-1,7,this.Tc(),this.Qd());a.na=d;em(a.R);fm(a.R,"queryid",a.na);a.od("");$o(a,function(){return e.L.apply(e,ka(Ha.apply(0,arguments)))},function(){return e.P.apply(e,ka(Ha.apply(0,arguments)))});(d=J(uq).h)&&Wo(a,d);a.ta.Ya&&J(Hq);return a};
var Fr=function(a,b,c){Nl(b);var d=a.h;Gb(b,function(e){var f=Jb(e.l,function(g){var h=er(g);if(null==h)g=null;else if(g=new dr,null!=h.visible&&(g.h=h.visible/100),null!=h.audible&&(g.j=1==h.audible),null!=h.time){var k="mtos"==h.timetype?"mtos":"tos",m=db(h.time,"%")?"%":"ms";h=parseInt(h.time,10);"%"==m&&(h/=100);"ms"==m?(g.l=h,g.o=-1):(g.l=-1,g.o=h);g.A=void 0===k?"tos":k}return g});Lb(f,function(g){return null==g})||Sp(c,new gr(e.id,e.h,f,d))})},Gr=function(){var a=[],b=P();a.push(J(Gq));gm(b.R,
"mvp_lv")&&a.push(J(rr));b=[new or,new qr];b.push(new xq(a));b.push(new Eq(O));return b},Ir=function(a){if(!a.B){a.B=!0;try{var b=nn(),c=P(),d=Pn();jn=b;c.l=79463069;"o"!==a.j&&(Rq=Xg(O));if(Km()){Jq.h.Kd=0;Jq.h.Zc=nn()-b;var e=Gr(),f=J(uq);f.j=e;vq(f,function(){Hr()})?Jq.done||(Pq(),Wn(f.h.h,a),Lq()):d.l?Hr():Lq()}else Tq=!0}catch(g){throw oq.reset(),g;}}},Jr=function(a){Jq.j.cancel();Sq=a;Jq.done=!0},Kr=function(a){if(a.j)return a.j;var b=J(uq).h;if(b)switch(b.getName()){case "nis":a.j="n";break;
case "gsv":a.j="m"}a.j||(a.j="h");return a.j},Lr=function(a,b,c){if(null==a.h)return b.Cb|=4,!1;a=a.h.report(c,b);b.Cb|=a;return 0==a};Dr.prototype.wb=function(a){switch(a.La()){case 0:if(a=J(uq).h)a=a.h,Qb(a.A,this),a.G&&this.Ga()&&Yn(a);Hr();break;case 2:Lq()}};Dr.prototype.Wa=function(){};Dr.prototype.Ga=function(){return!1};var Hr=function(){var a=[new Eq(O)],b=J(uq);b.j=a;vq(b,function(){Jr("i")})?Jq.done||(Pq(),Lq()):Jr("i")};
Dr.prototype.P=function(a,b){a.Ma=!0;switch(a.va()){case 1:Mr(a,b);break;case 2:this.qd(a)}this.rd(a)};var Mr=function(a,b){if(!a.ua){var c=$p(a,"start",Qn());c=a.nd.h(c).h;var d={id:"lidarv"};d.r=b;d.sv="950";null!==Yq&&(d.v=Yq);Ag(c,function(e,f){return d[e]="mtos"==e||"tos"==e?f:encodeURIComponent(f)});b=Uq();Ag(b,function(e,f){return d[e]=encodeURIComponent(f)});b="//pagead2.googlesyndication.com/pagead/gen_204?"+jo(ho(new fo,d));no(b);a.ua=!0}};l=Dr.prototype;
l.Af=function(a){var b=a.C(a);b&&(b=b.volume,a.ia=Hn(b)&&0<b);Xp(a,0);return $p(a,"start",Qn())};l.Bb=function(a,b,c){Mq(Jq,[a],!Qn());return this.Fa(a,b,c)};l.Fa=function(a,b,c){return $p(a,c,Qn())};l.vf=function(a){return Nr(a,"firstquartile",1)};l.xf=function(a){a.aa=!0;return Nr(a,"midpoint",2)};l.Bf=function(a){return Nr(a,"thirdquartile",3)};l.sf=function(a){var b=Nr(a,"complete",4);Mp(a);return b};l.tf=function(a){a.ma=3;return $p(a,"error",Qn())};
var Nr=function(a,b,c){Mq(Jq,[a],!Qn());Xp(a,c);4!=c&&Wp(a.L,c,a.rc);return $p(a,b,Qn())};l=Dr.prototype;l.je=function(a,b,c){b=Qn();2!=a.ma||b||(a.pa().I=nn());Mq(Jq,[a],!b);2==a.ma&&(a.ma=1);return $p(a,c,b)};l.zf=function(a,b){b=this.Bb(a,b||{},"skip");Mp(a);return b};l.wf=function(a,b){Vo(a,!0);return this.Bb(a,b||{},"fullscreen")};l.uf=function(a,b){Vo(a,!1);return this.Bb(a,b||{},"exitfullscreen")};
l.md=function(a,b,c){b=a.pa();b.U=zp(b,nn(),1!=a.ma);Mq(Jq,[a],!Qn());1==a.ma&&(a.ma=2);return $p(a,c,Qn())};l.yf=function(a){Mq(Jq,[a],!Qn());return a.j()};l.Yc=function(a){Mq(Jq,[a],!Qn());this.he(a);Mp(a);return a.j()};
var Cr=function(a){Qq(function(){var b=Or();null!=a.j&&(b.sdk=a.j);var c=J(uq);null!=c.h&&(b.avms=c.h.getName());return b})},Pr=function(a,b,c,d){var e=mq(oq,c);null!==e&&e.na!==b&&(a.A(e),e=null);e||(b=a.C(c,nn(),!1,b),0==oq.j.length&&(P().l=79463069),tq([b]),e=b,e.A=Kr(a),d&&(e.playerId=d));return e};Dr.prototype.L=function(){};var Rr=function(a,b){b.F=0;for(var c in rn)null==a[c]&&(b.F|=rn[c]);Qr(a,"currentTime");Qr(a,"duration")};l=Dr.prototype;l.qd=function(){};l.he=function(){};l.Fd=function(){};
l.rd=function(){};l.Uc=function(){};l.Qd=function(){this.h||(this.h=this.Uc());return null==this.h||this.l?new Ep:new mr(this.h)};l.Tc=function(){return new hr};var Qr=function(a,b){var c=a[b];void 0!==c&&0<c&&(a[b]=Math.floor(1E3*c))},Or=function(){var a=Pn(),b={},c={},d={};return Object.assign({},(b.sv="950",b),null!==Yq&&(c.v=Yq,c),(d["if"]=a.l?"1":"0",d.nas=String(oq.h.length),d))};var Sr=function(a){Bp.call(this,"audio_audible",a)};t(Sr,Bp);Sr.prototype.h=function(a){return 4==a.lc()};var Tr=function(a){Cp.call(this,"audio_measurable",a)};t(Tr,Cp);Tr.prototype.h=function(a){a=a.lc();return 3==a||4==a};var Ur=function(){jr.apply(this,arguments)};t(Ur,jr);Ur.prototype.j=function(){return new Tr(this.h)};Ur.prototype.l=function(){return[new Sr(this.h)]};var Vr=function(){};t(Vr,qp);Vr.prototype.h=function(a){a&&(28===a.e&&(a=Object.assign({},a,{avas:3})),4===a.vs||5===a.vs)&&(a=Object.assign({},a,{vs:3}));var b=new pp;b.h=rp(a,np);b.j=rp(a,op);return b};var Wr=function(a){this.j=a};Wr.prototype.report=function(a,b){var c=this.h(b);if("function"===typeof c){var d={};var e={};d=Object.assign({},null!==Yq&&(d.v=Yq,d),(e.sv="950",e.cb=Xq,e.e=Xr(a),e));e=$p(b,a,Qn());Af(d,e);b.qe[a]=e;d=2==b.va()?lo(d).join("&"):b.nd.h(d).h;try{return c(b.na,d,a),0}catch(f){return 2}}else return 1};var Xr=function(a){var b=ar(a)?"custom_metric_viewable":a;a=uf(function(c){return c==b});return vn[a]};Wr.prototype.h=function(){return La(this.j)};var Yr=function(a,b){this.j=a;this.l=b};t(Yr,Wr);Yr.prototype.h=function(a){if(!a.playerId)return Wr.prototype.h.call(this,a);if(this.l[a.playerId])return function(){};fn(393,Error());return null};var Zr=function(){Dr.call(this);this.G=void 0;this.H=null;this.F=!1;this.o={};this.J=0;this.I="ACTIVE_VIEW_TRAFFIC_TYPE_UNSPECIFIED"};t(Zr,Dr);Zr.prototype.K=function(a,b){var c=this,d=J(uq);if(null!=d.h)switch(d.h.getName()){case "nis":var e=$r(this,a,b);break;case "gsv":e=as(this,a,b);break;case "exc":e=bs(this,a)}e||(b.opt_overlayAdElement?e=void 0:b.opt_adElement&&(e=Pr(this,a,b.opt_adElement,b.opt_osdId)));e&&1==e.va()&&(e.C==We&&(e.C=function(f){return c.Fd(f)}),cs(this,e,b));return e};
var cs=function(a,b,c){c=c.opt_configurable_tracking_events;null!=a.h&&Array.isArray(c)&&Fr(a,c,b)};
Zr.prototype.Fd=function(a){a.j=0;a.M=0;if("h"==a.A||"n"==a.A){var b;P();if(a.playerId&&ds(this)){var c=this.o[a.playerId];c?b=function(e){return es(c,e)}:null!==c&&fn(379,Error())}else b=La("ima.common.getVideoMetadata");if("function"===typeof b)try{var d=b(a.na)}catch(e){a.j|=4}else a.j|=2}else if("b"==a.A)if(b=La("ytads.bulleit.getVideoMetadata"),"function"===typeof b)try{d=b(a.na)}catch(e){a.j|=4}else a.j|=2;else if("ml"==a.A)if(b=La("ima.common.getVideoMetadata"),"function"===typeof b)try{d=
b(a.na)}catch(e){a.j|=4}else a.j|=2;else a.j|=1;a.j||(void 0===d?a.j|=8:null===d?a.j|=16:wf(d)?a.j|=32:null!=d.errorCode&&(a.M=d.errorCode,a.j|=64));null==d&&(d={});Rr(d,a);Hn(d.volume)&&Hn(this.G)&&(d.volume*=this.G);return d};var as=function(a,b,c){var d=lq(oq,b);d||(d=c.opt_nativeTime||-1,d=Er(a,b,Kr(a),d),c.opt_osdId&&(d.playerId=c.opt_osdId));return d},$r=function(a,b,c){var d=lq(oq,b);d||(d=Er(a,b,"n",c.opt_nativeTime||-1));return d},bs=function(a,b){var c=lq(oq,b);c||(c=Er(a,b,"h",-1));return c};
Zr.prototype.Uc=function(){if(ds(this))return new Yr("ima.common.triggerExternalActivityEvent",this.o);var a=fs(this);return null!=a?new Wr(a):null};var fs=function(a){P();switch(Kr(a)){case "b":return"ytads.bulleit.triggerExternalActivityEvent";case "n":return"ima.bridge.triggerExternalActivityEvent";case "h":case "m":case "ml":return"ima.common.triggerExternalActivityEvent"}return null};Zr.prototype.qd=function(a){!a.h&&a.Ma&&Lr(this,a,"overlay_unmeasurable_impression")&&(a.h=!0)};
Zr.prototype.he=function(a){a.ke&&(a.Na()?Lr(this,a,"overlay_viewable_end_of_session_impression"):Lr(this,a,"overlay_unviewable_impression"),a.ke=!1)};
var gs=function(a,b,c,d){c=void 0===c?{}:c;var e={};Af(e,{opt_adElement:void 0,opt_fullscreen:void 0},c);var f=a.K(b,c);c=f?f.nd:a.Tc();if(e.opt_bounds)return c.h($q("ol",d));if(void 0!==d)if(void 0!==Zq(d))if(Tq)a=$q("ue",d);else if(Ir(a),"i"==Sq)a=$q("i",d),a["if"]=0;else if(b=a.K(b,e)){b:{"i"==Sq&&(b.Ma=!0,a.rd(b));f=e.opt_fullscreen;void 0!==f&&Vo(b,!!f);var g;if(f=!Pn().j&&!Kn())Jm(),f=0===th(Ml);if(g=f){switch(b.va()){case 1:Mr(b,"pv");break;case 2:a.qd(b)}Jr("pv")}f=d.toLowerCase();if(g=!g)c:{if(gm(P().R,
"ssmol")&&(g=a.l,"loaded"===f))break c;g=Pb(sn,f)}if(g&&0==b.ma){"i"!=Sq&&(Jq.done=!1);g=void 0!==e?e.opt_nativeTime:void 0;ln=g="number"===typeof g?g:nn();b.Kb=!0;var h=Qn();b.ma=1;b.la={};b.la.start=!1;b.la.firstquartile=!1;b.la.midpoint=!1;b.la.thirdquartile=!1;b.la.complete=!1;b.la.resume=!1;b.la.pause=!1;b.la.skip=!1;b.la.mute=!1;b.la.unmute=!1;b.la.viewable_impression=!1;b.la.measurable_impression=!1;b.la.fully_viewable_audible_half_duration_impression=!1;b.la.fullscreen=!1;b.la.exitfullscreen=
!1;b.Vc=0;h||(b.pa().I=g);Mq(Jq,[b],!h)}(g=b.nb[f])&&tp(b.ha,g);gm(P().R,"fmd")||Pb(tn,f)&&b.Pa&&b.Pa.j(b,null);switch(b.va()){case 1:var k=ar(f)?a.M.custom_metric_viewable:a.M[f];break;case 2:k=a.U[f]}if(k&&(d=k.call(a,b,e,d),gm(P().R,"fmd")&&Pb(tn,f)&&b.Pa&&b.Pa.j(b,null),void 0!==d)){e=$q(void 0,f);Af(e,d);d=e;break b}d=void 0}3==b.ma&&a.A(b);a=d}else a=$q("nf",d);else a=void 0;else Tq?a=$q("ue"):f?(a=$q(),Af(a,Zp(f,!0,!1,!1))):a=$q("nf");return"string"===typeof a?c.h():c.h(a)};
Zr.prototype.L=function(a){this.l&&1==a.va()&&hs(this,a)};Zr.prototype.rd=function(a){this.l&&1==a.va()&&hs(this,a)};var hs=function(a,b){var c;if(b.playerId&&ds(a)){var d=a.o[b.playerId];d?c=function(f,g){is(d,f,g)}:null!==d&&fn(379,Error())}else c=La("ima.common.triggerViewabilityMeasurementUpdate");if("function"===typeof c){var e=Up(b);e.nativeVolume=a.G;c(b.na,e)}},js=function(a,b,c){a.o[b]=c},ds=function(a){return(P(),"h"!=Kr(a)&&"m"!=Kr(a))?!1:0!=a.J};
Zr.prototype.C=function(a,b,c,d){if(Sm()){var e=gm(P().R,"mm"),f={};(e=(f[Ql.se]="ACTIVE_VIEW_TRAFFIC_TYPE_AUDIO",f[Ql.We]="ACTIVE_VIEW_TRAFFIC_TYPE_VIDEO",f)[e])&&e&&(this.I=e);"ACTIVE_VIEW_TRAFFIC_TYPE_UNSPECIFIED"===this.I&&fn(1044,Error())}a=Dr.prototype.C.call(this,a,b,c,d);this.F&&(b=this.H,null==a.o&&(a.o=new cp),b.h[a.na]=a.o,a.o.A=bq);return a};Zr.prototype.A=function(a){a&&1==a.va()&&this.F&&delete this.H.h[a.na];return Dr.prototype.A.call(this,a)};
Zr.prototype.Qd=function(){this.h||(this.h=this.Uc());return null==this.h||this.l?new Ep:"ACTIVE_VIEW_TRAFFIC_TYPE_AUDIO"===this.I?new Ur(this.h):new mr(this.h)};Zr.prototype.Tc=function(){return"ACTIVE_VIEW_TRAFFIC_TYPE_AUDIO"===this.I?new Vr:new hr};var ks=function(a){var b={};return b.viewability=a.h,b.googleViewability=a.j,b},ls=function(a,b,c){c=void 0===c?{}:c;a=gs(J(Zr),b,c,a);return ks(a)},ms=en(193,ls,void 0,Or);w("Goog_AdSense_Lidar_sendVastEvent",ms);
var ns=en(194,function(a,b){b=void 0===b?{}:b;a=gs(J(Zr),a,b);return ks(a)});w("Goog_AdSense_Lidar_getViewability",ns);var os=en(195,function(){return Lm()});w("Goog_AdSense_Lidar_getUrlSignalsArray",os);var ps=en(196,function(){return JSON.stringify(Lm())});w("Goog_AdSense_Lidar_getUrlSignalsList",ps);var qs=function(){this.h=Math.random()},ts=function(){var a=rs,b=window.google_srt;0<=b&&1>=b&&(a.h=b)},us=function(a,b,c,d,e){if(((void 0===d?0:d)?a.h:Math.random())<(e||.01))try{if(c instanceof wm)var f=c;else f=new wm,Qg(c,function(h,k){var m=f,n=m.o++;Am(m,n,xm(k,h))});var g=Dm(f,"https:","/pagead/gen_204?id="+b+"&");g&&lh(u,g)}catch(h){}};var ws=function(){var a=vs;this.B=rs;this.A="jserror";this.l=!0;this.j=null;this.C=this.Oa;this.h=void 0===a?null:a;this.o=!1};l=ws.prototype;l.Gc=function(a){this.j=a};l.td=function(a){this.A=a};l.ud=function(a){this.l=a};l.wd=function(a){this.o=a};
l.kb=function(a,b,c){try{if(this.h&&this.h.l){var d=this.h.start(a.toString(),3);var e=b();this.h.end(d)}else e=b()}catch(h){b=this.l;try{Fh(d),b=this.C(a,new oh(h,{message:xs(h)}),void 0,c)}catch(k){this.Oa(217,k)}if(b){var f,g;null==(f=window.console)||null==(g=f.error)||g.call(f,h)}else throw h;}return e};l.pd=function(a,b,c,d){var e=this;return function(){var f=Ha.apply(0,arguments);return e.kb(a,function(){return b.apply(c,f)},d)}};
l.Oa=function(a,b,c,d,e){e=e||this.A;try{var f=new wm;Bm(f,1,"context",a);ph(b)||(b=new oh(b,{message:xs(b)}));b.msg&&Bm(f,2,"msg",b.msg.substring(0,512));var g=b.meta||{};if(this.j)try{this.j(g)}catch(k){}if(d)try{d(g)}catch(k){}Am(f,3,[g]);var h=vm();h.j&&Bm(f,4,"top",h.j.url||"");Am(f,5,[{url:h.h.url||""},{url:h.h.url?zg(h.h.url):""}]);us(this.B,e,f,this.o,c)}catch(k){try{us(this.B,e,{context:"ecmserr",rctx:a,msg:xs(k),url:h&&h.h.url},this.o,c)}catch(m){}}return this.l};
var xs=function(a){var b=a.toString();a.name&&-1==b.indexOf(a.name)&&(b+=": "+a.name);a.message&&-1==b.indexOf(a.message)&&(b+=": "+a.message);if(a.stack){a=a.stack;var c=b;try{-1==a.indexOf(c)&&(a=c+"\n"+a);for(var d;a!=d;)d=a,a=a.replace(RegExp("((https?:/..*/)[^/:]*:\\d+(?:.|\n)*)\\2"),"$1");b=a.replace(RegExp("\n *","g"),"\n")}catch(e){b=c}}return b};var ys=function(){};var rs,zs,vs=new Eh(1,window);(function(a){rs=null!=a?a:new qs;"number"!==typeof window.google_srt&&(window.google_srt=Math.random());ts();zs=new ws;zs.Gc(function(){});zs.wd(!0);"complete"==window.document.readyState?window.google_measure_js_timing||vs.I():vs.l&&bf(window,"load",function(){window.google_measure_js_timing||vs.I()})})();var Bs=function(a){C.call(this,a,-1,As)};t(Bs,C);var As=[3];var Ds=function(a){C.call(this,a,-1,Cs)};t(Ds,C);var Es=function(a,b){return Nd(a,1,b)},Fs=function(a,b){return Nd(a,2,b)},Gs=function(a,b){return Md(a,3,b)},Hs=function(a,b){Md(a,4,b)},Cs=[1,2,3,4];var Is=function(a){C.call(this,a)};t(Is,C);var Ks=function(a){C.call(this,a,-1,Js)};t(Ks,C);Ks.prototype.getVersion=function(){return Zd(z(this,1),0)};
var Ls=function(a,b){return Od(a,1,b,0)},Ms=function(a,b){return Ud(a,2,b)},Ns=function(a,b){return Ud(a,3,b)},Os=function(a,b){return Od(a,4,b,0)},Ps=function(a,b){return Od(a,5,b,0)},Qs=function(a,b){return Od(a,6,b,0)},Rs=function(a,b){return Od(a,7,b,"")},Ss=function(a,b){return Od(a,8,b,0)},Ts=function(a,b){return Od(a,9,b,0)},Us=function(a,b){return Od(a,10,null==b?b:!!b,!1)},Vs=function(a,b){return Od(a,11,null==b?b:!!b,!1)},Ws=function(a,b){return Nd(a,12,b)},Xs=function(a,b){return Nd(a,
13,b)},Ys=function(a,b){return Nd(a,14,b)},Zs=function(a,b){return Od(a,15,null==b?b:!!b,!1)},$s=function(a,b){return Od(a,16,b,"")},at=function(a,b){return Md(a,17,b)},bt=function(a,b){return Md(a,18,b)},ct=function(a,b){return Vd(a,19,b)},Js=[12,13,14,17,18,19];var dt=function(a){C.call(this,a)};t(dt,C);var et="a".charCodeAt(),ft=pf({gh:0,fh:1,ah:2,Vg:3,bh:4,Wg:5,eh:6,Yg:7,Zg:8,Ug:9,Xg:10}),gt=pf({ih:0,jh:1,hh:2});var ht=function(a){if(/[^01]/.test(a))throw Error("Input bitstring "+a+" is malformed!");this.j=a;this.h=0},jt=function(a){a=it(a,36);var b=new Is;b=Od(b,1,Math.floor(a/10),0);return Od(b,2,a%10*1E8,0)},kt=function(a){return String.fromCharCode(et+it(a,6))+String.fromCharCode(et+it(a,6))},nt=function(a){var b=it(a,16);return!0===!!it(a,1)?(a=lt(a),a.forEach(function(c){if(c>b)throw Error("ID "+c+" is past MaxVendorId "+b+"!");}),a):mt(a,b)},ot=function(a){for(var b=[],c=it(a,12);c--;){var d=it(a,
6),e=it(a,2),f=lt(a),g=b,h=g.push,k=new Bs;d=Od(k,1,d,0);e=Od(d,2,e,0);f=Md(e,3,f);h.call(g,f)}return b},lt=function(a){for(var b=it(a,12),c=[];b--;){var d=!0===!!it(a,1),e=it(a,16);if(d)for(d=it(a,16);e<=d;e++)c.push(e);else c.push(e)}c.sort(function(f,g){return f-g});return c},mt=function(a,b,c){for(var d=[],e=0;e<b;e++)if(it(a,1)){var f=e+1;if(c&&-1===c.indexOf(f))throw Error("ID: "+f+" is outside of allowed values!");d.push(f)}return d},it=function(a,b){if(a.h+b>a.j.length)throw Error("Requested length "+
b+" is past end of string.");var c=a.j.substring(a.h,a.h+b);a.h+=b;return parseInt(c,2)};ht.prototype.skip=function(a){this.h+=a};var pt=function(a){try{var b=Gc(a).map(function(f){return f.toString(2).padStart(8,"0")}).join(""),c=new ht(b);if(3!==it(c,3))return null;var d=Fs(Es(new Ds,mt(c,24,ft)),mt(c,24,ft)),e=it(c,6);0!==e&&Hs(Gs(d,mt(c,e)),mt(c,e));return d}catch(f){return null}};var qt=function(a){try{var b=Gc(a).map(function(d){return d.toString(2).padStart(8,"0")}).join(""),c=new ht(b);return ct(bt(at($s(Zs(Ys(Xs(Ws(Vs(Us(Ts(Ss(Rs(Qs(Ps(Os(Ns(Ms(Ls(new Ks,it(c,6)),jt(c)),jt(c)),it(c,12)),it(c,12)),it(c,6)),kt(c)),it(c,12)),it(c,6)),!!it(c,1)),!!it(c,1)),mt(c,12,gt)),mt(c,24,ft)),mt(c,24,ft)),!!it(c,1)),kt(c)),nt(c)),nt(c)),ot(c))}catch(d){return null}};var tt=function(a){if(!a)return null;var b=a.split(".");if(4<b.length)return null;a=qt(b[0]);if(!a)return null;var c=new dt;a=Ud(c,1,a);b.shift();b=q(b);for(c=b.next();!c.done;c=b.next())switch(c=c.value,rt(c)){case 1:case 2:break;case 3:c=pt(c);if(!c)return null;Ud(a,2,c);break;default:return null}return a},rt=function(a){try{var b=Gc(a).map(function(c){return c.toString(2).padStart(8,"0")}).join("");return it(new ht(b),3)}catch(c){return-1}};var ut=function(a,b){var c={};if(Array.isArray(b)&&0!==b.length){b=q(b);for(var d=b.next();!d.done;d=b.next())d=d.value,c[d]=-1!==a.indexOf(d)}else for(a=q(a),d=a.next();!d.done;d=a.next())c[d.value]=!0;delete c[0];return c};var vt=function(a){this.h=a;this.defaultValue=!1},wt=function(a){var b=void 0===b?[]:b;this.h=a;this.defaultValue=b};var xt=new vt(471855283),yt=new vt(465118388),zt=new function(a,b){this.h=a;this.defaultValue=void 0===b?0:b}(494575051),At=new wt(489560439),Bt=new wt(505762507),Ct=new vt(478009624);var Dt=/^((market|itms|intent|itms-appss):\/\/)/i;var Et="ad_type vpos mridx pos vad_type videoad_start_delay".split(" ");var Ft=function(a){var b=a.Ta,c=a.height,d=a.width,e=void 0===a.Aa?!1:a.Aa;this.Za=a.Za;this.Ta=b;this.height=c;this.width=d;this.Aa=e};Ft.prototype.getHeight=function(){return this.height};Ft.prototype.getWidth=function(){return this.width};var Gt=function(a){var b=a.jg,c=a.Ze,d=a.ig,e=a.Ye;Ft.call(this,{Za:a.Za,Ta:a.Ta,height:a.height,width:a.width,Aa:void 0===a.Aa?!1:a.Aa});this.o=b;this.j=c;this.l=d;this.h=e};t(Gt,Ft);var Ht=function(a){var b=a.Hf;Ft.call(this,{Za:a.Za,Ta:a.Ta,height:a.height,width:a.width,Aa:void 0===a.Aa?!1:a.Aa});this.h=b};t(Ht,Ft);Ht.prototype.getMediaUrl=function(){return this.h};function It(a){return new (Function.prototype.bind.apply(a,[null].concat(ka(Ha.apply(1,arguments)))))};var Jt=function(a,b){this.j=this.B=this.o="";this.I=null;this.K=this.h="";this.A=!1;var c;a instanceof Jt?(this.A=void 0!==b?b:a.A,Kt(this,a.o),this.B=a.B,this.j=a.j,Lt(this,a.I),this.h=a.h,Mt(this,Nt(a.l)),this.K=a.F()):a&&(c=String(a).match(yg))?(this.A=!!b,Kt(this,c[1]||"",!0),this.B=Ot(c[2]||""),this.j=Ot(c[3]||"",!0),Lt(this,c[4]),this.h=Ot(c[5]||"",!0),Mt(this,c[6]||"",!0),this.K=Ot(c[7]||"")):(this.A=!!b,this.l=new Pt(null,this.A))};
Jt.prototype.toString=function(){var a=[],b=this.o;b&&a.push(Qt(b,Rt,!0),":");var c=this.j;if(c||"file"==b)a.push("//"),(b=this.B)&&a.push(Qt(b,Rt,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.I,null!=c&&a.push(":",String(c));if(c=this.h)this.j&&"/"!=c.charAt(0)&&a.push("/"),a.push(Qt(c,"/"==c.charAt(0)?St:Tt,!0));(c=this.l.toString())&&a.push("?",c);(c=this.F())&&a.push("#",Qt(c,Ut));return a.join("")};
Jt.prototype.resolve=function(a){var b=this.G(),c=!!a.o;c?Kt(b,a.o):c=!!a.B;c?b.B=a.B:c=!!a.j;c?b.j=a.j:c=null!=a.I;var d=a.h;if(c)Lt(b,a.I);else if(c=!!a.h){if("/"!=d.charAt(0))if(this.j&&!this.h)d="/"+d;else{var e=b.h.lastIndexOf("/");-1!=e&&(d=b.h.slice(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(gb(e,"./")||gb(e,"/.")){d=0==e.lastIndexOf("/",0);e=e.split("/");for(var f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&
g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?b.h=d:c=""!==a.l.toString();c?Mt(b,Nt(a.l)):c=!!a.K;c&&(b.K=a.F());return b};Jt.prototype.G=function(){return new Jt(this)};var Kt=function(a,b,c){a.o=c?Ot(b,!0):b;a.o&&(a.o=a.o.replace(/:$/,""))},Lt=function(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.I=b}else a.I=null},Mt=function(a,b,c){b instanceof Pt?(a.l=b,Vt(a.l,a.A)):(c||(b=Qt(b,Wt)),a.l=new Pt(b,a.A))},Xt=function(a,b,c){a.l.set(b,c);return a};
Jt.prototype.F=function(){return this.K};
var Yt=function(a){return a instanceof Jt?a.G():new Jt(a,void 0)},Ot=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},Qt=function(a,b,c){return"string"===typeof a?(a=encodeURI(a).replace(b,Zt),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Zt=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Rt=/[#\/\?@]/g,Tt=/[#\?:]/g,St=/[#\?]/g,Wt=/[#\?@]/g,Ut=/#/g,Pt=function(a,b){this.j=this.h=null;this.l=a||null;this.o=!!b},$t=
function(a){a.h||(a.h=new Map,a.j=0,a.l&&Ag(a.l,function(b,c){a.add(Xf(b),c)}))};Pt.prototype.add=function(a,b){$t(this);this.l=null;a=au(this,a);var c=this.h.get(a);c||this.h.set(a,c=[]);c.push(b);this.j+=1;return this};Pt.prototype.remove=function(a){$t(this);a=au(this,a);return this.h.has(a)?(this.l=null,this.j-=this.h.get(a).length,this.h.delete(a)):!1};Pt.prototype.clear=function(){this.h=this.l=null;this.j=0};Pt.prototype.isEmpty=function(){$t(this);return 0==this.j};
var bu=function(a,b){$t(a);b=au(a,b);return a.h.has(b)};l=Pt.prototype;l.forEach=function(a,b){$t(this);this.h.forEach(function(c,d){c.forEach(function(e){a.call(b,e,d,this)},this)},this)};l.qc=function(){$t(this);for(var a=Array.from(this.h.values()),b=Array.from(this.h.keys()),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
l.vb=function(a){$t(this);var b=[];if("string"===typeof a)bu(this,a)&&(b=b.concat(this.h.get(au(this,a))));else{a=Array.from(this.h.values());for(var c=0;c<a.length;c++)b=b.concat(a[c])}return b};l.set=function(a,b){$t(this);this.l=null;a=au(this,a);bu(this,a)&&(this.j-=this.h.get(a).length);this.h.set(a,[b]);this.j+=1;return this};l.get=function(a,b){if(!a)return b;a=this.vb(a);return 0<a.length?String(a[0]):b};
l.toString=function(){if(this.l)return this.l;if(!this.h)return"";for(var a=[],b=Array.from(this.h.keys()),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.vb(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}}return this.l=a.join("&")};
var Nt=function(a){var b=new Pt;b.l=a.l;a.h&&(b.h=new Map(a.h),b.j=a.j);return b},au=function(a,b){b=String(b);a.o&&(b=b.toLowerCase());return b},Vt=function(a,b){b&&!a.o&&($t(a),a.l=null,a.h.forEach(function(c,d){var e=d.toLowerCase();d!=e&&(this.remove(d),this.remove(e),0<c.length&&(this.l=null,this.h.set(au(this,e),Vb(c)),this.j+=c.length))},a));a.o=b};var cu,du,eu,fu=function(){return u.navigator?u.navigator.userAgent:""},gu=gb(fu(),"(iPad")||gb(fu(),"(Macintosh")||gb(fu(),"(iPod")||gb(fu(),"(iPhone");var hu="ad.doubleclick.net bid.g.doubleclick.net ggpht.com google.co.uk google.com googleads.g.doubleclick.net googleads4.g.doubleclick.net googleadservices.com googlesyndication.com googleusercontent.com gstatic.com gvt1.com prod.google.com pubads.g.doubleclick.net s0.2mdn.net static.doubleclick.net surveys.g.doubleclick.net youtube.com ytimg.com".split(" "),iu=["c.googlesyndication.com"];
function ju(a){var b=void 0===b?window.location.protocol:b;var c=!1;ku(a,iu)?c=!1:b.includes("https")&&ku(a,hu)&&(c=!0);if(c){b=new Jt(a);if("https"==b.o)return a;L(K.h(),"htp","1");Kt(b,"https");return b.toString()}return a}function lu(a){if(!a)return!1;try{var b=new Jt(a);return"gcache"==b.o&&!!b.l.get("url")}catch(c){return!1}}function mu(a){try{var b=new Jt(a);if("gcache"==b.o){var c=b.l.get("url");if(c&&!eb($f(c)))return c}}catch(d){}return a}
function ku(a,b){return(new RegExp("^https?://([a-z0-9-]{1,63}\\.)*("+b.join("|").replace(/\./g,"\\.")+")(:[0-9]+)?([/?#]|$)","i")).test(a)};var nu=-1;function ou(a,b){b=null!=b?b:"";ec&&(b="");if(!eb($f(a))){var c=a instanceof If||!Dt.test(a)?a:new If(a,Hf);if(c instanceof If)var d=c;else{d=void 0===d?Lg:d;a:{d=void 0===d?Lg:d;for(c=0;c<d.length;++c){var e=d[c];if(e instanceof Jg&&e.Gf(a)){a=new If(a,Hf);break a}}a=void 0}d=a||Mf}a=window;if(d instanceof If)var f=Jf(d);else{b:if(Fg){try{f=new URL(d)}catch(g){f="https:";break b}f=f.protocol}else c:{f=document.createElement("a");try{f.href=d}catch(g){f=void 0;break c}f=f.protocol;f=":"===f||""===
f?"https:":f}f="javascript:"!==f?d:void 0}void 0!==f&&a.open(f,"_blank",b)}};var pu=/OS (\S+) like/,qu=/Android ([\d\.]+)/;function ru(a,b){a=(a=a.exec(qb()))?a[1]:"";a=a.replace(/_/g,".");return 0<=kb(a,b)}var tu=function(){return ic&&"ontouchstart"in document.documentElement},uu=function(a){return nc&&ru(pu,a)},vu=function(a){return(a=void 0===a?null:a)&&"function"===typeof a.getAttribute?a.getAttribute("playsinline")?!0:!1:!1};var wu=function(a){N.call(this);this.h=a;this.A=this.B=!1;this.C=this.F=0;this.j=new Jk(1E3);ff(this,this.j);Uj(this.j,"tick",this.G,!1,this);Uj(this.h,"pause",this.l,!1,this);Uj(this.h,"playing",this.l,!1,this);Uj(this.h,"ended",this.l,!1,this);Uj(this.h,"timeupdate",this.l,!1,this)};t(wu,N);var xu=function(a){var b;return null!=(b=a.h.currentTime)?b:a.h.getCurrentTime()};
wu.prototype.l=function(a){switch(a.type){case "playing":yu(this);break;case "pause":case "ended":this.j.ob&&this.j.stop();break;case "timeupdate":!this.B&&0<xu(this)&&(this.B=!0,yu(this))}};var yu=function(a){!a.j.ob&&a.B&&(a.F=1E3*xu(a),a.C=Date.now(),a.A=!1,a.j.start())};wu.prototype.G=function(){var a=Date.now(),b=a-this.C,c=1E3*xu(this);c-this.F<.5*b?this.A||(this.A=!0,this.dispatchEvent("playbackStalled")):this.A=!1;this.F=c;this.C=a};var zu="://secure-...imrworldwide.com/ ://cdn.imrworldwide.com/ ://aksecure.imrworldwide.com/ ://[^.]*.moatads.com ://youtube[0-9]+.moatpixel.com ://pm.adsafeprotected.com/youtube ://pm.test-adsafeprotected.com/youtube ://e[0-9]+.yt.srs.doubleverify.com www.google.com/pagead/xsul www.youtube.com/pagead/slav".split(" "),Au=/\bocr\b/;
function Bu(a){if(eb($f(a))||ec&&2048<a.length)return!1;try{if((new Jt(a)).F().match(Au))return!0}catch(b){}return null!=zu.find(function(b){return null!=a.match(b)})};var Cu=new Map,Du=function(){this.j=this.h=null};function Eu(a,b,c,d){var e=fl(a);b.width<=e.width&&b.height<=e.height?(Fu(d),c(e)):(e=setTimeout(function(){return Eu(a,b,c,d)},200),d.j=e)}
function Gu(a,b){b=void 0===b?new E(1,1):b;var c=new Du,d=new Promise(function(e){var f=fl(a);if(b.width<=f.width&&b.height<=f.height)return e(f);"ResizeObserver"in window?(f=new ResizeObserver(function(g){window.requestAnimationFrame(function(){for(var h=new E(0,0),k=q(g),m=k.next();!m.done;m=k.next())if(m=m.value,m.contentBoxSize?(m=Array.isArray(m.contentBoxSize)?m.contentBoxSize[0]:m.contentBoxSize,h.width=Math.floor(m.inlineSize),h.height=Math.floor(m.blockSize)):(h.width=Math.floor(m.contentRect.width),
h.height=Math.floor(m.contentRect.height)),b.width<=h.width&&b.height<=h.height)return Fu(c),e(h)})}),c.h=f,f.observe(a)):Eu(a,b,e,c)});Cu.set(d,c);return d}function Fu(a){a.j&&window.clearTimeout(a.j);a.h&&(a.h.disconnect(),a.h=null)};function Hu(a,b){return eb(b)?!1:(new RegExp(a)).test(b)}function Iu(a){var b={};a.split(",").forEach(function(c){var d=c.split("=");2==d.length&&(c=fb(d[0]),d=fb(d[1]),0<c.length&&(b[c]=d))});return b}
function Ju(a){var b="af am ar_eg ar_sa ar_xb ar be bg bn ca cs da de_at de_cn de el en_au en_ca en_gb en_ie en_in en_sg en_xa en_xc en_za en es_419 es_ar es_bo es_cl es_co es_cr es_do es_ec es_gt es_hn es_mx es_ni es_pa es_pe es_pr es_py es_sv es_us es_uy es_ve es et eu fa fi fil fr_ca fr_ch fr gl gsw gu he hi hr hu id in is it iw ja kn ko ln lo lt lv ml mo mr ms nb ne nl no pl pt_br pt_pt pt ro ru sk sl sr_latn sr sv sw ta te th tl tr uk ur vi zh_cn zh_hk zh_tw zh zu".split(" ");if(!a)return null;
a=a.toLowerCase().replace("-","_");if(b.includes(a))return a;a=(a=a.match(/^\w{2,3}([-_]|$)/))?a[0].replace(/[_-]/g,""):"";return b.includes(a)?a:null};var Ku=function(){this.h=Date.now()};Ku.prototype.reset=function(){this.h=Date.now()};var Lu=function(a){a=a.h+5E3-Date.now();return 0<a?a:0};var Mu=function(a,b){this.url=a;this.h=void 0===b?null:b};var Nu=function(a){var b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.errorCode=a};t(Nu,Error);var Ou=function(){if(!ec)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}},Pu=ec&&Ou();var Qu=function(a){D.call(this);this.o=a;this.j={}};Xa(Qu,D);var Ru=[];Qu.prototype.O=function(a,b,c,d){return Su(this,a,b,c,d)};var Su=function(a,b,c,d,e,f){Array.isArray(c)||(c&&(Ru[0]=c.toString()),c=Ru);for(var g=0;g<c.length;g++){var h=Uj(b,c[g],d||a.handleEvent,e||!1,f||a.o||a);if(!h)break;a.j[h.key]=h}return a};Qu.prototype.Ob=function(a,b,c,d){return Tu(this,a,b,c,d)};
var Tu=function(a,b,c,d,e,f){if(Array.isArray(c))for(var g=0;g<c.length;g++)Tu(a,b,c[g],d,e,f);else{b=Tj(b,c,d||a.handleEvent,e,f||a.o||a);if(!b)return a;a.j[b.key]=b}return a};Qu.prototype.lb=function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)this.lb(a,b[f],c,d,e);else c=c||this.handleEvent,d=Na(d)?!!d.capture:!!d,e=e||this.o||this,c=Vj(c),d=!!d,b=Jj(a)?a.Lb(b,c,d,e):a?(a=Xj(a))?a.Lb(b,c,d,e):null:null,b&&(ck(b),delete this.j[b.key])};
var Uu=function(a){jf(a.j,function(b,c){this.j.hasOwnProperty(c)&&ck(b)},a);a.j={}};Qu.prototype.N=function(){Qu.Ba.N.call(this);Uu(this)};Qu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Vu=function(){};Vu.prototype.h=null;var Xu=function(a){var b;(b=a.h)||(b={},Wu(a)&&(b[0]=!0,b[1]=!0),b=a.h=b);return b};var Yu,Zu=function(){};Xa(Zu,Vu);var $u=function(a){return(a=Wu(a))?new ActiveXObject(a):new XMLHttpRequest},Wu=function(a){if(!a.j&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.j=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.j};Yu=new Zu;var av=function(a){N.call(this);this.headers=new Map;this.H=a||null;this.j=!1;this.G=this.h=null;this.M="";this.A=0;this.l=this.L=this.B=this.J=!1;this.F=0;this.C=null;this.aa="";this.U=this.V=!1;this.P=null};Xa(av,N);var bv=/^https?$/i,cv=["POST","PUT"];av.prototype.Y=function(a){this.P=a};
var gv=function(a,b,c,d){if(a.h)throw Error("[goog.net.XhrIo] Object is active with another request="+a.M+"; newUri="+b);c=c?c.toUpperCase():"GET";a.M=b;a.A=0;a.J=!1;a.j=!0;a.h=a.H?$u(a.H):$u(Yu);a.G=a.H?Xu(a.H):Xu(Yu);a.h.onreadystatechange=Ua(a.Z,a);try{a.L=!0,a.h.open(c,String(b),!0),a.L=!1}catch(g){dv(a);return}b=d||"";d=new Map(a.headers);var e=Array.from(d.keys()).find(function(g){return"content-type"==g.toLowerCase()}),f=u.FormData&&b instanceof u.FormData;!Pb(cv,c)||e||f||d.set("Content-Type",
"application/x-www-form-urlencoded;charset=utf-8");c=q(d);for(d=c.next();!d.done;d=c.next())e=q(d.value),d=e.next().value,e=e.next().value,a.h.setRequestHeader(d,e);a.aa&&(a.h.responseType=a.aa);"withCredentials"in a.h&&a.h.withCredentials!==a.V&&(a.h.withCredentials=a.V);if("setTrustToken"in a.h&&a.P)try{a.h.setTrustToken(a.P)}catch(g){}try{ev(a),0<a.F&&(a.U=fv(a.h),a.U?(a.h.timeout=a.F,a.h.ontimeout=Ua(a.da,a)):a.C=Kk(a.da,a.F,a)),a.B=!0,a.h.send(b),a.B=!1}catch(g){dv(a)}},fv=function(a){return ec&&
"number"===typeof a.timeout&&void 0!==a.ontimeout};av.prototype.da=function(){"undefined"!=typeof Ka&&this.h&&(this.A=8,this.dispatchEvent("timeout"),this.abort(8))};var dv=function(a){a.j=!1;a.h&&(a.l=!0,a.h.abort(),a.l=!1);a.A=5;hv(a);iv(a)},hv=function(a){a.J||(a.J=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))};av.prototype.abort=function(a){this.h&&this.j&&(this.j=!1,this.l=!0,this.h.abort(),this.l=!1,this.A=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),iv(this))};
av.prototype.N=function(){this.h&&(this.j&&(this.j=!1,this.l=!0,this.h.abort(),this.l=!1),iv(this,!0));av.Ba.N.call(this)};av.prototype.Z=function(){this.wa()||(this.L||this.B||this.l?jv(this):this.ka())};av.prototype.ka=function(){jv(this)};
var jv=function(a){if(a.j&&"undefined"!=typeof Ka&&(!a.G[1]||4!=kv(a)||2!=lv(a)))if(a.B&&4==kv(a))Kk(a.Z,0,a);else if(a.dispatchEvent("readystatechange"),4==kv(a)){a.j=!1;try{var b=lv(a);a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.M).match(yg)[1]||null;!f&&u.self&&u.self.location&&(f=u.self.location.protocol.slice(0,-1));e=!bv.test(f?f.toLowerCase():"")}d=e}d?(a.dispatchEvent("complete"),
a.dispatchEvent("success")):(a.A=6,hv(a))}finally{iv(a)}}},iv=function(a,b){if(a.h){ev(a);var c=a.h,d=a.G[0]?function(){}:null;a.h=null;a.G=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}},ev=function(a){a.h&&a.U&&(a.h.ontimeout=null);a.C&&(u.clearTimeout(a.C),a.C=null)};av.prototype.isActive=function(){return!!this.h};
var kv=function(a){return a.h?a.h.readyState:0},lv=function(a){try{return 2<kv(a)?a.h.status:-1}catch(b){return-1}},mv=function(a){if(a.h){a:{a=a.h.responseText;if(u.JSON)try{var b=u.JSON.parse(a);break a}catch(c){}b=Wh(a)}return b}};var nv=function(){};nv.prototype.get=function(a){return ov({url:a.url,timeout:a.timeout,withCredentials:void 0===a.withCredentials?!0:a.withCredentials,method:"GET",headers:void 0===a.headers?{}:a.headers,Sa:void 0===a.Sa?void 0:a.Sa})};
var ov=function(a){var b=a.url,c=a.timeout,d=a.withCredentials,e=a.method,f=void 0===a.content?void 0:a.content,g=void 0===a.Sa?void 0:a.Sa,h=void 0===a.headers?{}:a.headers;return pv({url:b,timeout:c,withCredentials:d,method:e,content:f,Sa:g,headers:h}).then(function(k){return Promise.resolve(k)},function(k){return k instanceof Error&&6==k.message&&d?pv({url:b,timeout:c,withCredentials:!d,method:e,content:f,Sa:g,headers:h}):Promise.reject(k)})},pv=function(a){var b=a.url,c=a.timeout,d=a.withCredentials,
e=a.method,f=void 0===a.content?void 0:a.content,g=void 0===a.Sa?void 0:a.Sa;a=void 0===a.headers?{}:a.headers;var h=new av;h.V=d;h.F=Math.max(0,Lu(c));h.Y&&g&&h.Y(g);for(var k in a)h.headers.set(k,a[k]);var m=new Qu;return new Promise(function(n,r){m.Ob(h,"success",function(){a:{if(Jn())try{mv(h);var v="application/json";break a}catch(F){v="application/xml";break a}h.h&&4==kv(h)?(v=h.h.getResponseHeader("Content-Type"),v=null===v?void 0:v):v=void 0;v=v||""}if(-1!=v.indexOf("application/json"))n(mv(h)||
{});else{try{var y=h.h?h.h.responseXML:null}catch(F){y=null}if(null==y){try{var B=h.h?h.h.responseText:""}catch(F){B=""}y=B;if("undefined"!=typeof DOMParser)B=new DOMParser,y=Tf(y),y=B.parseFromString(Sf(y),"application/xml");else if(Pu){B=new ActiveXObject("MSXML2.DOMDocument");B.resolveExternals=!1;B.validateOnParse=!1;try{B.setProperty("ProhibitDTD",!0),B.setProperty("MaxXMLSize",2048),B.setProperty("MaxElementDepth",256)}catch(F){}B.loadXML(y);y=B}else throw Error("Your browser does not support loading xml documents");
}n(y)}m.W();h.W()});m.Ob(h,["error","timeout"],function(){r(new Nu(h.A,lv(h)));m.W();h.W()});gv(h,ju(b),e,f)})};w("google.javascript.ads.imalib.common.UrlLoader",nv);var qv=["A74hxIFzJeCSMzGXiHP2rj8ODhRaHTTrp5DYE/IXxWzyLQZ4hXlYNZ7bgDa8U4EneMpCXcwQiXrAA18f9y2dZAIAAAB4eyJvcmlnaW4iOiJodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjg4MDgzMTk5LCJpc1RoaXJkUGFydHkiOnRydWV9","As0hBNJ8h++fNYlkq8cTye2qDLyom8NddByiVytXGGD0YVE+2CEuTCpqXMDxdhOMILKoaiaYifwEvCRlJ/9GcQ8AAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3MTk1MzI3OTksImlzU3ViZG9tYWluIjp0cnVlfQ=="];
function rv(){var a=void 0===a?document:a;var b;return!(null==(b=a.featurePolicy)||!b.features().includes("attribution-reporting"))};var uv=function(a,b,c,d){d=rv()?d:null;Jn()?(new nv).get({url:b,timeout:new Ku}):tv(a,b,c,d)},vv=function(a,b){var c={keepalive:!0,method:"get",redirect:"follow"};a&&(c.referrerPolicy="no-referrer");b?c.headers={"Attribution-Reporting-Eligible":"event-source"}:c.mode="no-cors";return c},wv=function(a,b,c,d){d=void 0===d?null:d;L(K.h(),"faa","1");var e=rv();fetch(b,vv(c,""===d&&e)).then(function(){L(K.h(),"fas","1")}).catch(function(){L(K.h(),"faf","1");a.j=!1;uv(a,b,c,d)});e&&d&&fetch(d,vv(c,!0))},
tv=function(a,b,c,d){var e=new Image,f=(a.l++).toString();a.h.set(f,e);e.onload=e.onerror=function(){a.h.delete(f)};c&&(e.referrerPolicy="no-referrer");null!=d&&(e.attributionSrc=d);e.src=b};var xv={AUTOPLAY_DISALLOWED:"autoplayDisallowed",rg:"beginFullscreen",sg:"canPlay",tg:"canPlayThrough",CLICK:"click",DURATION_CHANGE:"durationChange",Eg:"end",Fg:"endFullscreen",Ce:"error",Jg:"focusSkipButton",He:"loadStart",LOADED:"loaded",ph:"mediaLoadTimeout",qh:"mediaPlaybackTimeout",Id:"pause",zh:"play",Ah:"playing",Ih:"seeked",Jh:"seeking",Kh:"skip",Se:"skipShown",Mh:"stalled",Jd:"start",Th:"timeUpdate",Rh:"timedMetadata",di:"volumeChange",ei:"waiting",Kg:"fullyLoaded"};var zv=function(a){this.h=a;this.j=yv(a)},yv=function(a){return new Map(a.h.split("/").reduce(function(b,c,d){d%2?b[b.length-1].push(c):b.push([c]);return b},[]))};zv.prototype.getId=function(){return Av(this,"id")};var Av=function(a,b){var c=a.h.l.get(b);return c?c:(a=a.j.get(b))?a:null};var Bv=function(){};var Q={},Cv=(Q[18]=-1,Q[22]=-1,Q[43]=350,Q[44]=350,Q[45]=350,Q[59]=-1,Q[133]=350,Q[134]=350,Q[135]=350,Q[136]=350,Q[139]=50,Q[140]=50,Q[141]=50,Q[160]=350,Q[242]=150,Q[243]=150,Q[244]=150,Q[245]=150,Q[247]=150,Q[249]=50,Q[250]=50,Q[251]=50,Q[278]=150,Q[342]=-1,Q[343]=-1,Q[344]=-1,Q[345]=-1,Q[346]=-1,Q[347]=-1,Q[396]=-1,Q[398]=-1,Q),R={},Dv=(R[18]=!1,R[22]=!1,R[43]=!0,R[44]=!0,R[45]=!0,R[59]=!1,R[133]=!0,R[134]=!0,R[135]=!0,R[136]=!0,R[139]=!0,R[140]=!0,R[141]=!0,R[160]=!0,R[242]=!0,R[243]=!0,R[244]=
!0,R[245]=!0,R[247]=!0,R[249]=!0,R[250]=!0,R[251]=!0,R[278]=!0,R[342]=!1,R[343]=!1,R[344]=!1,R[345]=!1,R[346]=!1,R[347]=!1,R[396]=!0,R[398]=!0,R),S={},Ev=(S[18]="video/mp4",S[22]="video/mp4",S[43]="video/webm",S[44]="video/webm",S[45]="video/webm",S[59]="video/mp4",S[133]="video/mp4",S[134]="video/mp4",S[135]="video/mp4",S[136]="video/mp4",S[139]="audio/mp4",S[140]="audio/mp4",S[141]="audio/mp4",S[160]="video/mp4",S[242]="video/webm",S[243]="video/webm",S[244]="video/webm",S[245]="video/webm",S[247]=
"video/webm",S[249]="audio/webm",S[250]="audio/webm",S[251]="audio/webm",S[278]="video/webm",S[342]="video/mp4",S[343]="video/mp4",S[344]="video/mp4",S[345]="video/mp4",S[346]="video/mp4",S[347]="video/mp4",S[396]="video/mp4",S[398]="video/mp4",S),Fv={},Gv=(Fv[18]="avc1.42001E, mp4a.40.2",Fv[22]="avc1.64001F, mp4a.40.2",Fv[43]="vp8, vorbis",Fv[44]="vp8, vorbis",Fv[45]="vp8, vorbis",Fv[59]="avc1.4D001F, mp4a.40.2",Fv[133]="avc1.4D401E",Fv[134]="avc1.4D401E",Fv[135]="avc1.4D401E",Fv[136]="avc1.4D401E",
Fv[139]="mp4a.40.2",Fv[140]="mp4a.40.2",Fv[141]="mp4a.40.2",Fv[160]="avc1.4D401E",Fv[242]="vp9",Fv[243]="vp9",Fv[244]="vp9",Fv[245]="vp9",Fv[247]="vp9",Fv[249]="opus",Fv[250]="opus",Fv[251]="opus",Fv[278]="vp9",Fv[342]="avc1.42E01E, mp4a.40.2",Fv[343]="avc1.42E01E, mp4a.40.2",Fv[344]="avc1.42E01E, mp4a.40.2",Fv[345]="avc1.42E01E, mp4a.40.2",Fv[346]="avc1.42E01E, mp4a.40.2",Fv[347]="avc1.4D001F, mp4a.40.2",Fv[396]="av01.0.05M.08",Fv[398]="av01.0.05M.08",Fv);var Hv=RegExp("/itag/(\\d+)/");function Iv(a){var b=parseInt(Cg(a,"itag"),10);return b?b:(a=a.match(Hv))&&2==a.length?parseInt(a[1],10):null}function Jv(a){var b=Ev[a];a=Gv[a];b?(b=$f(b).toLowerCase(),b=a?b+'; codecs="'+$f(a)+'"':b):b="";return b}function Kv(a,b){if("function"===typeof CustomEvent)return new CustomEvent(a,{detail:b});var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!1,!0,b);return c};var Lv=["doubleclick.net"];
function Mv(){if(Db()||x("iPad")||x("iPod"))return!1;if(Cb()){if(void 0===eu){a:{if(void 0===cu){if(gu){var a=gb(fu(),"Safari");var b=(new Jt(window.location.href)).l.vb("js");b:{if((b=b.length?b[0]:"")&&0==b.lastIndexOf("afma-",0)){var c=b.lastIndexOf("v");if(-1<c&&(b=b.substr(c+1).match(/^(\d+\.\d+\.\d+|^\d+\.\d+|^\d+)(-.*)?$/))){b=b[1];break b}}b="0.0.0"}if(!a||"0.0.0"!==b){a=cu=!0;break a}}cu=!1}a=cu}a||(void 0===du&&(du=gb(fu(),"afma-sdk-a")?!0:!1),a=du);eu=a}return eu?!0:wg()?!1:Nv()}a=Eb()||
(Bb()?"Linux"===sb.platform:x("Linux"))||(Bb()?"Windows"===sb.platform:x("Windows"))||(Bb()?"Chrome OS"===sb.platform:x("CrOS"));return(ji(nj)||ji(lj)||ji(mj))&&a&&Ab()?Nv():!1}function Nv(){var a=!1,b=(new Jt(window.location.href)).j;Lv.forEach(function(c){b.includes(c)&&(a=!0)});return a}function Ov(a){for(var b=0,c=0;c<a.length;c++)b=Math.imul(31,b)+a.charCodeAt(c)|0;return b.toString()};var Pv,Sv=function(a,b,c){if("number"===typeof a)var d={name:Qv(a)};else d=a,a=Rv(a.name);this.code=a;this.h=d;b="Error "+b+": "+this.getName();c&&(b+=", "+c);Za.call(this,b)};Xa(Sv,Za);Sv.prototype.getName=function(){return this.h.name||""};
var Tv={Ue:1,uh:2,NOT_FOUND_ERR:3,ye:4,Be:5,vh:6,Te:7,ABORT_ERR:8,Qe:9,Vh:10,TIMEOUT_ERR:11,Pe:12,INVALID_ACCESS_ERR:13,INVALID_STATE_ERR:14},Vv=(u.h||u.j||Tv).Ue,Wv=(u.h||u.j||Tv).NOT_FOUND_ERR,Xv=(u.h||u.j||Tv).ye,Yv=(u.h||u.j||Tv).Be,Zv=(u.h||u.j||Tv).Te,$v=(u.h||u.j||Tv).ABORT_ERR,aw=(u.h||u.j||Tv).Qe,bw=(u.h||u.j||Tv).TIMEOUT_ERR,cw=(u.h||u.j||Tv).Pe,dw=(u.DOMException||Tv).INVALID_ACCESS_ERR,ew=(u.DOMException||Tv).INVALID_STATE_ERR,Rv=function(a){switch(a){case "UnknownError":return Vv;case "NotFoundError":return Wv;
case "ConstraintError":return Xv;case "DataError":return Yv;case "TransactionInactiveError":return Zv;case "AbortError":return $v;case "ReadOnlyError":return aw;case "TimeoutError":return bw;case "QuotaExceededError":return cw;case "InvalidAccessError":return dw;case "InvalidStateError":return ew;default:return Vv}},Qv=function(a){switch(a){case Vv:return"UnknownError";case Wv:return"NotFoundError";case Xv:return"ConstraintError";case Yv:return"DataError";case Zv:return"TransactionInactiveError";
case $v:return"AbortError";case aw:return"ReadOnlyError";case bw:return"TimeoutError";case cw:return"QuotaExceededError";case dw:return"InvalidAccessError";case ew:return"InvalidStateError";default:return"UnknownError"}},fw=function(a,b){return"error"in a?new Sv(a.error,b):new Sv({name:"UnknownError"},b)},gw=function(a,b){return"name"in a?new Sv(a,b+": "+a.message):new Sv({name:"UnknownError"},b)};var hw=function(a){this.h=a},iw=u.IDBKeyRange||u.webkitIDBKeyRange;function jw(){};/*

 Copyright 2005, 2007 Bob Ippolito. All Rights Reserved.
 Copyright The Closure Library Authors.
 SPDX-License-Identifier: MIT
*/
var kw=function(a,b){this.A=[];this.H=a;this.G=b||null;this.o=this.l=!1;this.j=void 0;this.K=this.J=this.C=!1;this.B=0;this.h=null;this.I=0};Xa(kw,jw);kw.prototype.cancel=function(a){if(this.l)this.j instanceof kw&&this.j.cancel();else{if(this.h){var b=this.h;delete this.h;a?b.cancel(a):(b.I--,0>=b.I&&b.cancel())}this.H?this.H.call(this.G,this):this.K=!0;this.l||lw(this,new mw(this))}};kw.prototype.F=function(a,b){this.C=!1;nw(this,a,b)};
var nw=function(a,b,c){a.l=!0;a.j=c;a.o=!b;ow(a)},qw=function(a){if(a.l){if(!a.K)throw new pw(a);a.K=!1}};kw.prototype.callback=function(a){qw(this);nw(this,!0,a)};var lw=function(a,b){qw(a);nw(a,!1,b)};kw.prototype.Pc=function(a){return rw(this,a,null)};var rw=function(a,b,c,d){a.A.push([b,c,d]);a.l&&ow(a);return a};kw.prototype.then=function(a,b,c){var d,e,f=new uk(function(g,h){e=g;d=h});rw(this,e,function(g){g instanceof mw?f.cancel():d(g);return tw},this);return f.then(a,b,c)};
kw.prototype.$goog_Thenable=!0;
var uw=function(a){return Lb(a.A,function(b){return"function"===typeof b[1]})},tw={},ow=function(a){if(a.B&&a.l&&uw(a)){var b=a.B,c=vw[b];c&&(u.clearTimeout(c.h),delete vw[b]);a.B=0}a.h&&(a.h.I--,delete a.h);b=a.j;for(var d=c=!1;a.A.length&&!a.C;){var e=a.A.shift(),f=e[0],g=e[1];e=e[2];if(f=a.o?g:f)try{var h=f.call(e||a.G,b);h===tw&&(h=void 0);void 0!==h&&(a.o=a.o&&(h==b||h instanceof Error),a.j=b=h);if(sk(b)||"function"===typeof u.Promise&&b instanceof u.Promise)d=!0,a.C=!0}catch(k){b=k,a.o=!0,uw(a)||
(c=!0)}}a.j=b;d&&(h=Ua(a.F,a,!0),d=Ua(a.F,a,!1),b instanceof kw?(rw(b,h,d),b.J=!0):b.then(h,d));c&&(b=new ww(b),vw[b.h]=b,a.B=b.h)},pw=function(){Za.call(this)};Xa(pw,Za);pw.prototype.message="Deferred has already fired";pw.prototype.name="AlreadyCalledError";var mw=function(){Za.call(this)};Xa(mw,Za);mw.prototype.message="Deferred was canceled";mw.prototype.name="CanceledError";var ww=function(a){this.h=u.setTimeout(Ua(this.l,this),0);this.j=a};
ww.prototype.l=function(){delete vw[this.h];throw this.j;};var vw={};var xw=function(){N.call(this)};Xa(xw,N);xw.prototype.h=null;xw.prototype.next=function(a){if(a)this.h["continue"](a);else this.h["continue"]()};xw.prototype.remove=function(){var a=new kw;try{var b=this.h["delete"]()}catch(c){return lw(a,gw(c,"deleting via cursor")),a}b.onsuccess=function(){a.callback()};b.onerror=function(c){lw(a,fw(c.target,"deleting via cursor"))};return a};
var yw=function(a,b){var c=new xw;try{var d=a.openCursor(b?b.h:null)}catch(e){throw c.W(),gw(e,a.name);}d.onsuccess=function(e){c.h=e.target.result||null;c.h?c.dispatchEvent("n"):c.dispatchEvent("c")};d.onerror=function(){c.dispatchEvent("e")};return c};var zw=function(a){this.h=a};zw.prototype.getName=function(){return this.h.name};var Aw=function(a,b,c){var d=new kw;try{var e=a.h.get(c)}catch(f){return b+=" with key "+Dg(c),lw(d,gw(f,b)),d}e.onsuccess=function(f){d.callback(f.target.result)};e.onerror=function(f){b+=" with key "+Dg(c);lw(d,fw(f.target,b))};return d};zw.prototype.get=function(a){return Aw(this,"getting from index "+this.getName(),a)};var Bw=function(a,b){return yw(a.h,b)};var Cw=function(a){this.h=a};Cw.prototype.getName=function(){return this.h.name};var Dw=function(a,b,c,d,e){var f=new kw;try{var g=e?a.h[b](d,e):a.h[b](d)}catch(h){return c+=Dg(d),e&&(c+=", with key "+Dg(e)),lw(f,gw(h,c)),f}g.onsuccess=function(h){f.callback(h.target.result)};g.onerror=function(h){c+=Dg(d);e&&(c+=", with key "+Dg(e));lw(f,fw(h.target,c))};return f},Ew=function(a,b){return Dw(a,"put","putting into "+a.getName()+" with value",b)};
Cw.prototype.add=function(a,b){return Dw(this,"add","adding into "+this.getName()+" with value ",a,b)};Cw.prototype.remove=function(a){var b=new kw;try{var c=this.h["delete"](a instanceof hw?a.h:a)}catch(e){return c="removing from "+this.getName()+" with key "+Dg(a),lw(b,gw(e,c)),b}c.onsuccess=function(){b.callback()};var d=this;c.onerror=function(e){var f="removing from "+d.getName()+" with key "+Dg(a);lw(b,fw(e.target,f))};return b};
Cw.prototype.get=function(a){var b=new kw;try{var c=this.h.get(a)}catch(e){return c="getting from "+this.getName()+" with key "+Dg(a),lw(b,gw(e,c)),b}c.onsuccess=function(e){b.callback(e.target.result)};var d=this;c.onerror=function(e){var f="getting from "+d.getName()+" with key "+Dg(a);lw(b,fw(e.target,f))};return b};
Cw.prototype.clear=function(){var a="clearing store "+this.getName(),b=new kw;try{var c=this.h.clear()}catch(d){return lw(b,gw(d,a)),b}c.onsuccess=function(){b.callback()};c.onerror=function(d){lw(b,fw(d.target,a))};return b};var Fw=function(a){try{return new zw(a.h.index("timestamp"))}catch(b){throw gw(b,"getting index timestamp");}};var Gw=function(a,b){N.call(this);this.h=a;this.l=b;this.j=new Qu(this);this.j.O(this.h,"complete",Ua(this.dispatchEvent,this,"complete"));this.j.O(this.h,"abort",Ua(this.dispatchEvent,this,"abort"));this.j.O(this.h,"error",this.Ee)};Xa(Gw,N);l=Gw.prototype;l.Ee=function(a){a.target instanceof Sv?this.dispatchEvent({type:"error",target:a.target}):this.dispatchEvent({type:"error",target:fw(a.target,"in transaction")})};
l.objectStore=function(a){try{return new Cw(this.h.objectStore(a))}catch(b){throw gw(b,"getting object store "+a);}};l.commit=function(a){if(this.h.commit||!a)try{this.h.commit()}catch(b){throw gw(b,"cannot commit the transaction");}};l.wait=function(){var a=new kw;Tj(this,"complete",Ua(a.callback,a));var b=Tj(this,"abort",function(){ck(c);lw(a,new Sv($v,"waiting for transaction to complete"))});var c=Tj(this,"error",function(e){ck(b);lw(a,e.target)});var d=this.l;return a.Pc(function(){return d})};
l.abort=function(){this.h.abort()};l.N=function(){Gw.Ba.N.call(this);this.j.W()};var Hw=function(a){N.call(this);this.h=a;this.j=new Qu(this);this.j.O(this.h,"abort",Ua(this.dispatchEvent,this,"abort"));this.j.O(this.h,"error",this.Fe);this.j.O(this.h,"versionchange",this.jf);this.j.O(this.h,"close",Ua(this.dispatchEvent,this,"close"))};Xa(Hw,N);l=Hw.prototype;l.kd=!0;l.Fe=function(a){a=(a=a.target)&&a.error;this.dispatchEvent({type:"error",errorCode:a&&a.severity})};l.jf=function(a){this.dispatchEvent(new Iw(a.oldVersion,a.newVersion))};
l.close=function(){this.kd&&(this.h.close(),this.kd=!1)};l.getName=function(){return this.h.name};l.getVersion=function(){return Number(this.h.version)};var Jw=function(a){var b=["MediaSourceVideoChunk"];try{var c=a.h.transaction(b,"readwrite");return new Gw(c,a)}catch(d){throw gw(d,"creating transaction");}};Hw.prototype.N=function(){Hw.Ba.N.call(this);this.j.W()};var Iw=function(a,b){Ej.call(this,"versionchange");this.oldVersion=a;this.newVersion=b};Xa(Iw,Ej);var Kw=function(a){var b=new kw;void 0==Pv&&(Pv=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.moz_indexedDB);var c=Pv.open("VideoChunkPersistentStorage",5);c.onsuccess=function(d){d=new Hw(d.target.result);b.callback(d)};c.onerror=function(d){lw(b,fw(d.target,"opening database VideoChunkPersistentStorage"))};c.onupgradeneeded=function(d){if(a){var e=new Hw(d.target.result);a(new Iw(d.oldVersion,d.newVersion),e,new Gw(d.target.transaction,e))}};c.onblocked=function(){};return b};var Lw={bi:"videoId",mh:"itag",Lh:"source",Nh:"startIndex"},Mw=function(){N.call(this);this.h=null};t(Mw,N);Mw.prototype.initialize=function(){var a=this;return Promise.resolve(Kw(this.j)).then(function(b){return a.h=b},function(b){L(K.h(),"codf",b.message)})};var Nw=function(a){return null!==a.h&&a.h.kd};Mw.prototype.close=function(){var a=this;return(new Promise(function(b){return Ow(a,b)})).then(function(){return Pw()}).then(function(){return a.h.close()})};
var Pw=function(){return"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate().then(function(a){L(K.h(),"csue",String(a.usage))}):Promise.resolve(void 0)},Tw=function(a,b){b=Qw(b);if(!b)return Promise.resolve(null);var c=Rw(b);return Sw(a,c,b.lmt)},Vw=function(a,b,c,d){if(c=Qw(c)){var e=Rw(c),f=c.startIndex;Uw(a,{cacheId:e,startIndex:f,endIndex:f+b.byteLength-1,lmt:c.lmt,timestamp:new Date(Date.now()),isLastVideoChunk:d,video:b})}else Promise.resolve(void 0)};
Mw.prototype.j=function(a,b){if(b.h.objectStoreNames.contains("MediaSourceVideoChunk"))try{b.h.deleteObjectStore("MediaSourceVideoChunk")}catch(d){throw gw(d,"deleting object store MediaSourceVideoChunk");}a={keyPath:"cacheId"};try{var c=new Cw(b.h.createObjectStore("MediaSourceVideoChunk",a))}catch(d){throw gw(d,"creating object store MediaSourceVideoChunk");}b={unique:!1};try{c.h.createIndex("timestamp","timestamp",b)}catch(d){throw gw(d,"creating new index timestamp with key path timestamp");}};
var Ow=function(a,b){var c=new Date(Date.now());c.setDate(c.getDate()-30);c=new hw(iw.upperBound(c,void 0));var d=Bw(Fw(Jw(a.h).objectStore("MediaSourceVideoChunk")),c),e=d.O("n",function(){d.remove();d.next()});Tj(d,"c",function(){ck(e);b()})},Qw=function(a){var b=new zv(a);a=b.getId();var c=Av(b,"itag"),d=Av(b,"source"),e=Av(b,"lmt");(b=b.h.l.get("range"))?(b=b.split("-")[0],b=!b||isNaN(b)?null:parseInt(b,10)):b=null;var f=[];a?c?d?e?null===b&&f.push("startIndex"):f.push("lmt"):f.push("source"):
f.push("itag"):f.push("videoId");return 0<f.length?(L(K.h(),"civp",f.join("-")),null):{videoId:a,itag:c,source:d,lmt:e,startIndex:b+0}},Rw=function(a){var b=Object.keys(Lw).sort().map(function(c){return a[Lw[c]]}).join(",");return Ov(b)},Sw=function(a,b,c){var d=Jw(a.h).objectStore("MediaSourceVideoChunk");return Promise.resolve(d.get(b)).then(function(e){if(!e)return L(K.h(),"cenf","1"),null;if(e.lmt!==c)return L(K.h(),"cdl","1"),d.remove(b).then(null,function(f){L(K.h(),"crdlvf",f.message)}),null;
L(K.h(),"cefml","1");return{endIndex:e.endIndex,isLastVideoChunk:e.isLastVideoChunk,video:e.video}},function(e){L(K.h(),"cgvf",e.message)})},Uw=function(a,b){a=Jw(a.h).objectStore("MediaSourceVideoChunk");Promise.resolve(Ew(a,b)).then(function(){L(K.h(),"cavs","1")},function(c){L(K.h(),"cavf",c.message)})};var Ww=function(a){N.call(this);var b=this;this.F=new Jt(a);this.G=this.h=this.l=this.j=0;this.A=(this.C=Mv())?It(Mw):null;ef(this,function(){df(b.A)});this.H=this.C?this.A.initialize():null;this.B=null};t(Ww,N);
var Yw=function(a){Ga(function(b){if(1==b.h)return 2===a.h&&(a.h=1),ya(b,Xw(a),4);var c=3<a.G;if(c&&null!==a.B){var d=Kv("media_source_error",{code:0<a.l?MediaError.MEDIA_ERR_NETWORK:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,message:'Response code "'+a.B+'" with '+a.j+" bytes requested and "+a.l+" bytes loaded"});a.dispatchEvent(d)}a.l<a.j&&3!==a.h&&!c?b.h=1:(3!==a.h&&(a.h=0),b.h=0)})},Xw=function(a){var b;return Ga(function(c){switch(c.h){case 1:b=a.l+"-"+(a.j-1);Xt(a.F,"range",b);if(!a.C){c.h=2;break}return ya(c,
a.H,3);case 3:return c.return(Zw(a));case 2:return c.l=4,ya(c,$w(a),6);case 6:c.h=0;c.l=0;break;case 4:za(c),a.G++,c.h=0}})},Zw=function(a){var b;return Ga(function(c){switch(c.h){case 1:return ya(c,Tw(a.A,a.F),2);case 2:if(b=c.j){b.isLastVideoChunk&&(a.h=3);ax(a,b.video,0);c.h=0;break}c.l=4;return ya(c,$w(a),6);case 6:c.h=0;c.l=0;break;case 4:za(c),a.G++,c.h=0}})},$w=function(a){return new Promise(function(b,c){var d=new XMLHttpRequest,e=0,f=a.j-a.l;d.addEventListener("load",function(){Uh("lvlcl");
if(400<=d.status)return L(K.h(),"lvlxes",d.status.toString()),a.B=d.status,c();var g=d.response;g.byteLength<f&&(a.h=3);var h=ax(a,g,e);e+=h;a.C&&0<g.byteLength&&Vw(a.A,g,a.F,g.byteLength<f);b()});d.addEventListener("timeout",function(){Uh("lvlct");a.B=d.status;c()});d.addEventListener("error",function(){Uh("lvlce");a.B=d.status;c()});d.addEventListener("progress",function(){if(400<=d.status)a.B=d.status;else{var g=ax(a,d.response,e);e+=g}});d.responseType="arraybuffer";d.open("get",a.F.toString());
d.send(null)})},ax=function(a,b,c){if(null===b)return 0;b=b.slice(c);a.l+=b.byteLength;a.dispatchEvent({type:"progress",bf:b});return b.byteLength};Ww.prototype.N=function(){this.C&&Nw(this.A)&&this.A.close();N.prototype.N.call(this)};function bx(){return!!window.MediaSource}function cx(a){return[43,44,45].includes(a)&&yc?!1:Dv[a]?(a=Jv(a),!!a&&bx()&&MediaSource.isTypeSupported(a)):!1};var dx=function(){};dx.prototype.h=function(a,b,c){return 0===c?1E6:5E3>b-a?3E5:0};var ex=function(a,b,c,d){this.url=a;this.mimeType=b;this.h=c;this.j=void 0===d?null:d};var hx=function(a){N.call(this);var b=this;this.j=a;this.A=this.j.map(function(c){return It(Ww,c.url)});this.ga=It(MediaSource);this.h=[];this.l=window.URL.createObjectURL(this.ga);this.G=0;this.F=!1;this.C=function(){return fx(b)};this.ga.addEventListener("sourceopen",this.C);this.H=gx(this);this.B=0};t(hx,N);
var gx=function(a){for(var b=[],c=0;c<a.j.length;++c)b.push(new dx);return b},fx=function(a){Uh("msms_oso");for(var b={},c=0;c<a.j.length;b={Fb:b.Fb,Eb:b.Eb},++c){var d=a.j[c];L(K.h(),"msms_mime"+c,d.mimeType);L(K.h(),"msms_cs"+c,d.h.toString());b.Fb=a.ga.addSourceBuffer(d.mimeType);b.Eb=a.A[c];b.Eb.O("progress",function(e){return function(f){var g=e.Eb;f=f.bf;0!==f.byteLength&&e.Fb.appendBuffer(f);3===g.h&&(a.G++,a.G===a.h.length&&ix(a))}}(b));b.Eb.O("media_source_error",function(e){a.dispatchEvent(e)});
b.Fb?a.h.push(b.Fb):Uh("msms_sbf"+c)}L(K.h(),"msms_ns",a.h.length.toString());a.F=!0;jx(a)},ix=function(a){Promise.all(a.h.map(function(b){return new Promise(function(c){b.updating?b.addEventListener("updateend",function(){c()}):c()})})).then(function(){return a.ga.endOfStream()})},jx=function(a){if(a.F)for(var b=0;b<a.j.length;++b){var c=a.A[b],d=a.h[b];d=0===d.buffered.length?0:1E3*d.buffered.end(0);d=a.H[b].h(a.B,d,c.j);0!==d&&(1===c.h?(c.j+=d,c.h=2):0===c.h&&(c.j+=d,c.h=1,Yw(c)))}};
hx.prototype.N=function(){this.l&&window.URL.revokeObjectURL(this.l);for(var a=q(this.A),b=a.next();!b.done;b=a.next())b.value.W();this.ga.removeEventListener("sourceopen",this.C);N.prototype.N.call(this)};var kx=RegExp("/pagead/conversion|/pagead/adview|/pagead/gen_204|/activeview?|csi.gstatic.com/csi|google.com/pagead/xsul|google.com/ads/measurement/l|googleads.g.doubleclick.net/pagead/ide_cookie|googleads.g.doubleclick.net/xbbe/pixel"),lx=RegExp("outstream.min.js"),mx=RegExp("outstream.min.css"),nx=RegExp("fonts.gstatic.com"),ox=RegExp("googlevideo.com/videoplayback|c.2mdn.net/videoplayback|gcdn.2mdn.net/videoplayback"),px=RegExp("custom.elements.min.js");
function qx(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,k=0,m=!1,n=!1;if("function"===typeof La("performance.getEntriesByType",u)&&"transferSize"in u.PerformanceResourceTiming.prototype){var r=u.performance.getEntriesByType("resource");r=q(r);for(var v=r.next();!v.done;v=r.next())v=v.value,kx.test(v.name)||(f+=1,v.transferSize?(c+=v.transferSize,v.encodedBodySize&&v.transferSize<v.encodedBodySize&&(h+=1,e+=v.encodedBodySize,lx.test(v.name)&&(m=!0),mx.test(v.name)&&(n=!0)),ox.test(v.name)&&(d+=v.transferSize)):
0==v.transferSize&&0==v.encodedBodySize?px.test(v.name)?c+=6686:nx.test(v.name)||(k+=1,Th(K.h(),{event_name:"unmeasurable_asset",resource_name:v.name,encoded_body_size:v.encodedBodySize,transfer_size:v.transferSize})):(g+=1,e+=v.encodedBodySize,lx.test(v.name)&&(m=!0),mx.test(v.name)&&(n=!0)));r=0;if(a.duration){for(v=0;v<a.buffered.length;v++)r+=a.buffered.end(v)-a.buffered.start(v);r=Math.min(r,a.duration)}Th(K.h(),{event_name:b,asset_bytes:c,video_bytes:d,cached_data_bytes:e,js_cached:m,css_cached:n,
num_assets:f,num_assets_cached:g,num_assets_cache_validated:h,num_assets_unmeasurable:k,video_played_seconds:a.currentTime.toFixed(2),video_muted:a.muted,video_seconds_loaded:r.toFixed(2)})}else L(K.h(),"error","reporting_timing_not_supported")};function rx(a){var b=K.h(),c=a.getVideoPlaybackQuality&&a.getVideoPlaybackQuality();c?(a=a.currentTime,L(b,"vqdf",String(c.droppedVideoFrames)),L(b,"vqtf",String(c.totalVideoFrames)),L(b,"vqfr",String(Math.round(c.totalVideoFrames/a)))):L(b,"vqu","1")};var sx=function(){};sx.prototype.toString=function(){return"video_mute"};var tx=new sx;var ux=function(a){D.call(this);this.B=1;this.l=[];this.o=0;this.h=[];this.j={};this.F=!!a};Xa(ux,D);var vx=function(a,b,c){var d=tx.toString(),e=a.j[d];e||(e=a.j[d]=[]);var f=a.B;a.h[f]=d;a.h[f+1]=b;a.h[f+2]=c;a.B=f+3;e.push(f)},wx=function(a,b,c){var d=a.j[tx.toString()];if(d){var e=a.h;(d=d.find(function(f){return e[f+1]==b&&e[f+2]==c}))&&a.A(d)}};
ux.prototype.A=function(a){var b=this.h[a];if(b){var c=this.j[b];0!=this.o?(this.l.push(a),this.h[a+1]=function(){}):(c&&Qb(c,a),delete this.h[a],delete this.h[a+1],delete this.h[a+2])}return!!b};
ux.prototype.C=function(a,b){var c=this.j[a];if(c){for(var d=Array(arguments.length-1),e=1,f=arguments.length;e<f;e++)d[e-1]=arguments[e];if(this.F)for(e=0;e<c.length;e++){var g=c[e];xx(this.h[g+1],this.h[g+2],d)}else{this.o++;try{for(e=0,f=c.length;e<f&&!this.wa();e++)g=c[e],this.h[g+1].apply(this.h[g+2],d)}finally{if(this.o--,0<this.l.length&&0==this.o)for(;c=this.l.pop();)this.A(c)}}}};var xx=function(a,b,c){qk(function(){a.apply(b,c)})};
ux.prototype.clear=function(a){if(a){var b=this.j[a];b&&(b.forEach(this.A,this),delete this.j[a])}else this.h.length=0,this.j={}};ux.prototype.N=function(){ux.Ba.N.call(this);this.clear();this.l.length=0};var yx=function(a){D.call(this);this.h=new ux(a);ff(this,this.h)};Xa(yx,D);yx.prototype.clear=function(a){this.h.clear(void 0!==a?a.toString():void 0)};var zx=function(a){a=void 0===a?null:a;D.call(this);this.h=new Qu(this);ff(this,this.h);this.Ab=a};t(zx,D);var Ax=function(a,b,c){a.Ab&&(vx(a.Ab.h,b,c),ef(a,function(){wx(a.Ab.h,b,c)}))};var Bx=function(a,b){zx.call(this,b);Ax(this,function(c){a.h.mode=c?"showing":"hidden"},this)};t(Bx,zx);var Cx=function(){N.call(this);this.j=new Qu(this);ff(this,this.j)};t(Cx,N);var Ex=function(a,b,c){c=void 0===c?!0:c;Cx.call(this);a.setAttribute("crossorigin","anonymous");var d=qg("TRACK");d.setAttribute("kind","captions");d.setAttribute("src",b);d.setAttribute("default","");a.appendChild(d);this.h=a.textTracks[0];Dx(this);this.h.mode=c?"showing":"hidden"};t(Ex,Cx);var Dx=function(a){var b=a.h;b.addEventListener("cuechange",function(){for(var c=b.cues,d=0;d<c.length;d++){var e=c[d];e.align="center";e.position="auto"}},{once:!0})};function Fx(a,b){if("undefined"!==typeof ReportingObserver){var c=function(e){e=q(e);for(var f=e.next();!f.done;f=e.next())f=f.value,a(f)&&b(f)},d=new ReportingObserver(c,{buffered:!0});u.addEventListener("pagehide",function(){c(d.takeRecords(),d);d.disconnect()});d.observe()}}
function Gx(a){a=void 0===a?null:a;Fx(function(b){return b.body&&"HeavyAdIntervention"===b.body.id},function(b){var c=b.body.message,d=K.h();L(d,"ham",c);c.includes("CPU")?L(d,"hacpu","true"):c.includes("network")&&L(d,"habytes","true");a&&a(b)})};var Hx="autoplay controls crossorigin demuxedaudiosrc demuxedvideosrc loop muted playsinline poster preload src webkit-playsinline x-webkit-airplay".split(" "),Ix="autoplay buffered controls crossOrigin currentSrc currentTime defaultMuted defaultPlaybackRate disableRemotePlayback duration ended loop muted networkState onerror onwaitingforkey paused played playsinline poster preload preservesPitch mozPreservesPitch webkitPreservesPitch readyState seekable videoWidth videoHeight volume textTracks canPlayType captureStream getVideoPlaybackQuality load pause play setSinkId oncanplay oncanplaythrough onload onplay onpause onended onfullscreenchange onfullscreenerror addEventListener dispatchEvent removeEventListener requestFullscreen".split(" "),
Jx={childList:!0},Kx=!RegExp("^\\s*class\\s*\\{\\s*\\}\\s*$").test(function(){}.toString()),Lx=HTMLElement;Kx&&(Lx=function(){var a=Object.getPrototypeOf(this).constructor;return u.Reflect.construct(HTMLElement,[],a)},Object.setPrototypeOf(Lx,HTMLElement),Object.setPrototypeOf(Lx.prototype,HTMLElement.prototype));
var Mx=function(a){if(null!==a){a=q(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,b.nodeName==="TRACK".toString())return b}return null},Nx=function(a,b){this.code=a;this.message=void 0===b?"":b},Ox=function(a){Nx.call(this,MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,void 0===a?"":a)};t(Ox,Nx);
var Sx=function(){var a=Lx.call(this)||this;L(K.h(),"ulv","1");a.ga=null;a.fe=null;a.Ld=null;a.T=qg("VIDEO");Px(a);a.Ab=new yx;Qx(a);a.fc=null;Rx(a);a.attachShadow({mode:"open"});a.shadowRoot.appendChild(a.T);Gx(function(){L(K.h(),"has",a.src||a.tb);L(K.h(),"hat",String(a.T.currentTime))});a.Fc=!1;a.ie=!1;a.Pb=null;a.Ra=null;a.gg=!1;a.ag=!1;return a};t(Sx,Lx);
Sx.prototype.attributeChangedCallback=function(a,b,c){switch(a){case "src":Tx(this,c);break;case "demuxedaudiosrc":case "demuxedvideosrc":Ux(this);break;case "muted":this.T[a]=""===c?!0:!!c;Vx(this,a,c);break;default:Vx(this,a,c)}};
var Vx=function(a,b,c){c!==a.T.getAttribute(b)&&(null===c?a.T.removeAttribute(b):a.T.setAttribute(b,c))},Wx=function(a){a.ga&&(a.T.removeEventListener("timeupdate",a.Pb),a.ga.W(),a.ga=null)},Xx=function(a,b){a.Ld=b;a.T.dispatchEvent(new Event("error"))},Px=function(a){Yx(a);Zx(a);a.T.addEventListener("loadedmetadata",function(){a.Ra=Gu(a);a.Ra.then(function(b){var c=a.T.videoWidth,d=a.T.videoHeight,e=b.width,f=b.height;0<c&&0<d&&0<e&&0<f&&(b=b.width/b.height,c/=d,.97<=Math.min(c,b)/Math.max(c,b)?
Xk(a.T,{"object-fit":"cover"}):Xk(a.T,{"object-fit":"contain"}))})});a.T.addEventListener("play",function(){a.ie||(qx(a.T,"first_play"),a.ie=!0)});a.T.addEventListener("pause",function(){a.Fc||(qx(a.T,"first_pause"),rx(a.T),a.Fc=!0)});Uj(u,"pagehide",function(){a.Fc||(qx(a.T,"first_pause"),rx(a.T),a.Fc=!0)});a.T.addEventListener("stalled",function(){L(K.h(),"ves","1")});(new wu(a.T)).O("playbackStalled",function(){return L(K.h(),"pbs","1")});a.T.addEventListener("media_source_error",function(b){Wx(a);
b=b.detail;Xx(a,new Nx(b.code,b.message))});$x(a)},Rx=function(a){var b=Mx(a.childNodes);b&&ay(a,b);null===a.fc&&by(a)},by=function(a){if(u.MutationObserver){var b=new MutationObserver(function(c){c=q(c);for(var d=c.next();!d.done;d=c.next())if(d=d.value,"childList"===d.type&&(d=Mx(d.addedNodes))){ay(a,d);b.disconnect();break}});b.observe(a,Jx)}},Qx=function(a){a.T.addEventListener("volumechange",function(){a.Ab.h.C(tx.toString(),a.T.muted)})},ay=function(a,b){if(null===a.fc&&b.hasAttribute("src")){var c=
b.getAttribute("src");a.fc=new Ex(a.T,c,b.hasAttribute("default"));new Bx(a.fc,a.Ab);c.includes("kind=asr")&&L(K.h(),"act","1")}},Tx=function(a,b){if(b!==a.fe){a.fe=b;a.gg&&b&&lu(b)&&(b=mu(b));var c=b?Iv(b):null,d=!!c&&cx(c);L(K.h(),"umsem",d?"1":"0");d?(b=It(ex,b,Jv(c),1E3*Cv[c],null),a.ga=It(hx,[b]),a.ga.O("media_source_error",function(e){e=Kv("media_source_error",e.detail);a.T.dispatchEvent(e)}),a.Pb=function(){var e=a.ga;e.B=1E3*a.T.currentTime;jx(e)},a.T.addEventListener("timeupdate",a.Pb),Vx(a,
"src",a.ga.l)):(Wx(a),Vx(a,"src",b));a.T.load()}},Ux=function(a){a.src&&Xx(a,new Nx(MediaError.MEDIA_ERR_ABORTED,"Setting demuxed src after src is already set."));if(!a.Jb&&!a.tb&&a.ga)Wx(a),Vx(a,"src",null),a.T.load();else if(a.Jb&&a.tb){var b=Iv(a.Jb),c=Iv(a.tb);if(c&&cx(c))if(b&&cx(b)){var d=!!c&&cx(c)&&!!b&&cx(b);L(K.h(),"umsed",d?"1":"0");c=It(ex,a.tb,Jv(c),-1,null);b=It(ex,a.Jb,Jv(b),-1,null);a.ga=It(hx,[c,b]);a.ga.O("media_source_error",function(e){e=Kv("media_source_error",e.detail);a.T.dispatchEvent(e)});
a.Pb=function(){var e=a.ga;e.B=1E3*a.T.currentTime;jx(e)};a.T.addEventListener("timeupdate",a.Pb);Vx(a,"src",a.ga.l);a.ag||a.T.load()}else Xx(a,new Ox('Audio itag "'+b+'" not supported.'));else Xx(a,new Ox('Video itag "'+c+'" not supported.'))}},Yx=function(a){for(var b={},c=q(Ix),d=c.next();!d.done;b={Ca:b.Ca,Lc:b.Lc},d=c.next())b.Ca=d.value,b.Ca in a.T&&("function"===typeof a.T[b.Ca]?(b.Lc=a.T[b.Ca].bind(a.T),Object.defineProperty(a,b.Ca,{set:function(e){return function(f){a.T[e.Ca]=f}}(b),get:function(e){return function(){return e.Lc}}(b)})):
Object.defineProperty(a,b.Ca,{set:function(e){return function(f){a.T[e.Ca]=f}}(b),get:function(e){return function(){return a.T[e.Ca]}}(b)}))},Zx=function(a){Object.defineProperty(a,"error",{set:function(){},get:function(){return a.T.error?a.T.error:a.Ld}})},$x=function(a){a.T.style.width=dl();a.T.style.height=dl()};Sx.prototype.disconnectedCallback=function(){if(this.Ra){var a=Cu.get(this.Ra);Fu(a)}Lx.prototype.disconnectedCallback&&Lx.prototype.disconnectedCallback.call(this)};
fa.Object.defineProperties(Sx.prototype,{Jb:{configurable:!0,enumerable:!0,set:function(a){this.setAttribute("demuxedaudiosrc",a)},get:function(){return this.getAttribute("demuxedaudiosrc")}},tb:{configurable:!0,enumerable:!0,set:function(a){this.setAttribute("demuxedvideosrc",a)},get:function(){return this.getAttribute("demuxedvideosrc")}},src:{configurable:!0,enumerable:!0,set:function(a){this.setAttribute("src",a)},get:function(){return this.getAttribute("src")}}});
fa.Object.defineProperties(Sx,{observedAttributes:{configurable:!0,enumerable:!0,get:function(){return Hx}}});u.customElements&&(u.customElements.get("lima-video")||u.customElements.define("lima-video",Sx));function cy(){var a=It(Mw);a.initialize().then(function(b){b&&(b=Kv("initialized"),a.dispatchEvent(b))});return a}
var ey=function(a,b,c,d,e){D.call(this);this.J=a;this.P=new Jt(b.url);this.j=c;this.o=e;this.H=b.h;this.ua=d;(this.V=b.j)||this.P.l.remove("alr");L(K.h(),"sl_dv"+this.o,(null!=this.V).toString());this.Y=!this.V;this.bc=0;this.h=new XMLHttpRequest;this.aa=this.U=this.sb=this.F=this.l=0;this.Z=.1;this.C=[];this.M=!1;this.da=this.ka=this.ia=null;this.Ja=!1;this.kc=this.L=this.B=this.pb=this.rb=null;this.G=!1;if(this.A=Mv())this.B=cy(),ff(this,this.B);dy(this)};t(ey,D);
var fy=function(a,b){b=Kv("media_source_error",b);a.J.dispatchEvent(b)},gy=function(a,b){fy(a,{code:1<a.l?MediaError.MEDIA_ERR_NETWORK:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,message:b})},dy=function(a){a.ia=function(){hy(a);if(a.Y){var b=a.h.responseText;a.M=!b||b.length<a.H;a.U=0;Uh("sl_cc"+a.o+"_"+a.l);a.F++;iy(a)}};a.ka=function(){return hy(a)};a.da=function(){Uh("sl_ec"+a.o+"_"+a.l);gy(a,"Failed to load chunk "+a.l+" for stream "+a.o)};a.h.addEventListener("load",a.ia);a.h.addEventListener("progress",
a.ka);a.h.addEventListener("error",a.da);a.j.addEventListener("updateend",function(){a.j.buffered.length&&(a.sb=a.j.buffered.end(0),a.A?a.G&&!a.j.updating&&a.l===a.F&&(Uh("sl_lc"+a.o),a.ua()):a.M&&!a.j.updating&&a.l===a.F&&(Uh("sl_lc"+a.o),a.ua()));!a.Ja&&1<a.J.buffered.length&&(L(K.h(),"dbr","1"),a.Ja=!0)});a.j.addEventListener("update",function(){a.C.length&&!a.j.updating&&a.j.appendBuffer(a.C.shift())});a.j.addEventListener("error",function(){Uh("msb_err"+a.o);fy(a,{code:MediaError.MEDIA_ERR_DECODE,
message:"Error on SourceBuffer "+a.o})});a.A?(Nw(a.B)?jy(a):a.rb=Uj(a.B,"initialized",function(){jy(a)}),a.pb=Uj(a.B,"get_video_succeeded",function(){iy(a)})):jy(a)},ly=function(a){Uh("sl_rc"+a.o+"-"+a.l);var b=ky(a);a.h.open("get",b);a.h.overrideMimeType("text/plain; charset=x-user-defined");a.h.send(null);a.A&&(a.L=null,a.kc=b)},hy=function(a){if(400<=a.h.status)gy(a,'Response code "'+a.h.status+'" on loading chunk '+a.l+" for stream "+a.o);else{if(!a.Y){var b=a.h.getResponseHeader("content-type");
if(b&&0<=b.indexOf("text/plain")){a.h.readyState===XMLHttpRequest.DONE&&(a.P=new Jt(a.h.response),a.l=0,a.F=0,a.bc++,jy(a));return}a.Y=!0;Uh("sl_redc"+a.o);L(K.h(),"sl_tr"+a.o,a.bc.toString())}a.P.l.remove("alr");if(a.h.readyState===XMLHttpRequest.LOADING||a.h.readyState===XMLHttpRequest.DONE)b=my(a,a.U),a.U=a.h.response.length,a.aa+=b.byteLength,ny(a,b);if(a.A&&a.h.readyState===XMLHttpRequest.DONE&&(b=my(a,0),0<b.byteLength)){var c=a.h.responseText;a.G=!c||c.length<a.H;Vw(a.B,b,new Jt(a.kc),a.G)}}},
ny=function(a,b){0<b.byteLength&&(a.j.updating||a.C.length?a.C.push(b):a.j.appendBuffer(b))},my=function(a,b){a=a.h.response;for(var c=new Uint8Array(a.length-b),d=0;d<c.length;d++)c[d]=a.charCodeAt(d+b)&255;return c.buffer},iy=function(a){var b=nu;-1!=b&&b<a.aa+a.H?(a.J.pause(),nu=-1,b=!1):(b=a.F===a.l&&!a.j.updating&&!a.C.length,b=a.A?!a.G&&b&&a.J.currentTime>=a.Z:!a.M&&b&&a.J.currentTime>=a.Z);b&&(a.Z=a.sb+.1,jy(a))},ky=function(a){var b=a.A&&a.L?a.L+1:a.l*a.H;return Xt(a.P,"range",b+"-"+(b+a.H-
1)).toString()},jy=function(a){if(a.A){var b=new Jt(ky(a));Tw(a.B,b).then(function(c){c?(a.L=parseInt(c.endIndex,10),a.G=c.isLastVideoChunk,ny(a,c.video),c=Kv("get_video_succeeded"),a.B.dispatchEvent(c),a.F++):ly(a);a.l++})}else ly(a),a.l++};ey.prototype.N=function(){this.A&&Nw(this.B)&&this.B.close();this.h.removeEventListener("load",this.ia);this.h.removeEventListener("progress",this.ka);this.h.removeEventListener("error",this.da);ck(this.rb);ck(this.pb);D.prototype.N.call(this)};var py=function(a,b){D.call(this);var c=this;this.o=a;this.F=b;this.ga=new MediaSource;this.C=[];this.j=[];this.h=this.l=null;this.A=!1;this.B=function(){return oy(c)};this.ga.addEventListener("sourceopen",this.B)};t(py,D);
var qy=function(a){a.l&&a.o.removeEventListener("timeupdate",a.l)},oy=function(a){Uh("msmsw_oso");a.l=function(){if(!a.A)for(var e=q(a.j),f=e.next();!f.done;f=e.next())iy(f.value)};a.o.addEventListener("timeupdate",a.l);for(var b=0;b<a.F.length;b++){var c=a.F[b];L(K.h(),"msmsw_mime"+b,c.mimeType);L(K.h(),"msmsw_cs"+b,c.h.toString());var d=a.ga.addSourceBuffer(c.mimeType);d?(a.C.push(d),c=It(ey,a.o,c,d,function(){a:if(!a.A){for(var e=q(a.j),f=e.next();!f.done;f=e.next())if(f=f.value,f.A?!f.G||f.j.updating||
f.C.length:!f.M||f.j.updating||f.C.length)break a;a.ga.endOfStream();a.A=!0;qy(a)}},b),a.j.push(c)):Uh("msmsw_sbf"+b)}L(K.h(),"msmsw_ns",a.C.length.toString())};py.prototype.N=function(){this.h&&window.URL.revokeObjectURL(this.h);for(var a=q(this.j),b=a.next();!b.done;b=a.next())b.value.W();qy(this);this.ga.removeEventListener("sourceopen",this.B);D.prototype.N.call(this)};var ry=function(){throw Error("Do not instantiate directly");};ry.prototype.h=null;ry.prototype.getContent=function(){return this.content};ry.prototype.toString=function(){return this.content};var sy=function(){ry.call(this)};Xa(sy,ry);var ty=function(a){function b(c){this.content=c}b.prototype=a.prototype;return function(c,d){c=new b(String(c));void 0!==d&&(c.h=d);return c}}(sy);/*

Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com
Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
var uy="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),vy=function(){for(var a=Array(36),b=0,c,d=0;36>d;d++)8==d||13==d||18==d||23==d?a[d]="-":14==d?a[d]="4":(2>=b&&(b=33554432+16777216*Math.random()|0),c=b&15,b>>=4,a[d]=uy[19==d?c&3|8:c]);return a.join("")};var yy=function(a){Jt.call(this,a);this.C=new Map;a=this.h;var b=a.indexOf(";"),c=null;0<=b?(this.h=a.substring(0,b),c=a.substring(b+1)):this.h=a;wy(this,c)};t(yy,Jt);yy.prototype.toString=function(){return zy(this,Jt.prototype.toString.call(this))};yy.prototype.F=function(){return""};
var wy=function(a,b){eb($f(b))||b.split(";").forEach(function(c){var d=c.indexOf("=");if(!(0>=d)){var e=Xf(c.substring(0,d));c=Xf(c.substring(d+1));d=a.C.get(e);null!=d?d.includes(c)||d.push(c):d=[$f(c)];a.C.set(e,d)}},a)},Ay=function(a){if(eb($f("ord")))return null;a=a.C.get("ord");return null!=a?a:null},By=function(a,b){eb($f("ord"))||(b=b.map($f),a.C.set("ord",b))},zy=function(a,b){b=[$f(b)];b.push.apply(b,ka(Cy(a)));return b.join(";")},Cy=function(a){var b=Ay(a);null==b?b=[$f(Date.now())]:eb($f("ord"))||
a.C.delete("ord");var c=[];a.C.forEach(function(d,e){d.forEach(function(f){c.push(e+"="+f)})});c.push("ord="+b[0]);By(a,b);return c};yy.prototype.G=function(){return new yy(this.toString())};var T={DEPRECATED_ERROR_CODE:-1,VAST_MALFORMED_RESPONSE:100,VAST_SCHEMA_VALIDATION_ERROR:101,VAST_UNSUPPORTED_VERSION:102,VAST_TRAFFICKING_ERROR:200,VAST_UNEXPECTED_LINEARITY:201,VAST_UNEXPECTED_DURATION_ERROR:202,VAST_WRAPPER_ERROR:300,VAST_LOAD_TIMEOUT:301,VAST_TOO_MANY_REDIRECTS:302,VAST_NO_ADS_AFTER_WRAPPER:303,VIDEO_PLAY_ERROR:400,VAST_MEDIA_LOAD_TIMEOUT:402,VAST_LINEAR_ASSET_MISMATCH:403,VAST_PROBLEM_DISPLAYING_MEDIA_FILE:405,OVERLAY_AD_PLAYING_FAILED:500,NONLINEAR_DIMENSIONS_ERROR:501,OVERLAY_AD_LOADING_FAILED:502,
VAST_NONLINEAR_ASSET_MISMATCH:503,COMPANION_REQUIRED_ERROR:602,COMPANION_AD_LOADING_FAILED:603,UNKNOWN_ERROR:900,VPAID_ERROR:901,FAILED_TO_REQUEST_ADS:1005,VAST_ASSET_NOT_FOUND:1007,VAST_EMPTY_RESPONSE:1009,UNKNOWN_AD_RESPONSE:1010,UNSUPPORTED_LOCALE:1011,ADS_REQUEST_NETWORK_ERROR:1012,INVALID_AD_TAG:1013,STREAM_INITIALIZATION_FAILED:1020,ASSET_FALLBACK_FAILED:1021,INVALID_ARGUMENTS:1101,NATIVE_MESSAGE_ERROR:1204,AUTOPLAY_DISALLOWED:1205,CONSENT_MANAGEMENT_PROVIDER_NOT_READY:1300,Oh:2002};T[-1]="DEPRECATED_ERROR_CODE";
T[100]="VAST_MALFORMED_RESPONSE";T[101]="VAST_SCHEMA_VALIDATION_ERROR";T[102]="VAST_UNSUPPORTED_VERSION";T[200]="VAST_TRAFFICKING_ERROR";T[201]="VAST_UNEXPECTED_LINEARITY";T[202]="VAST_UNEXPECTED_DURATION_ERROR";T[300]="VAST_WRAPPER_ERROR";T[301]="VAST_LOAD_TIMEOUT";T[302]="VAST_TOO_MANY_REDIRECTS";T[303]="VAST_NO_ADS_AFTER_WRAPPER";T[400]="VIDEO_PLAY_ERROR";T[402]="VAST_MEDIA_LOAD_TIMEOUT";T[403]="VAST_LINEAR_ASSET_MISMATCH";T[405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE";T[500]="OVERLAY_AD_PLAYING_FAILED";
T[501]="NONLINEAR_DIMENSIONS_ERROR";T[502]="OVERLAY_AD_LOADING_FAILED";T[503]="VAST_NONLINEAR_ASSET_MISMATCH";T[602]="COMPANION_REQUIRED_ERROR";T[603]="COMPANION_AD_LOADING_FAILED";T[900]="UNKNOWN_ERROR";T[901]="VPAID_ERROR";T[1005]="FAILED_TO_REQUEST_ADS";T[1007]="VAST_ASSET_NOT_FOUND";T[1009]="VAST_EMPTY_RESPONSE";T[1010]="UNKNOWN_AD_RESPONSE";T[1011]="UNSUPPORTED_LOCALE";T[1012]="ADS_REQUEST_NETWORK_ERROR";T[1013]="INVALID_AD_TAG";T[1020]="STREAM_INITIALIZATION_FAILED";T[1021]="ASSET_FALLBACK_FAILED";
T[1101]="INVALID_ARGUMENTS";T[1204]="NATIVE_MESSAGE_ERROR";T[1205]="AUTOPLAY_DISALLOWED";T[1300]="CONSENT_MANAGEMENT_PROVIDER_NOT_READY";T[2002]="SUPPORTED_ADS_NOT_FOUND";var Dy=function(a,b,c){var d=Error.call(this);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.type=a;this.errorMessage=b;this.errorCode=c;this.ad=this.h=null};t(Dy,Error);l=Dy.prototype;l.getAd=function(){return this.ad};l.getInnerError=function(){return this.h};l.getMessage=function(){return this.errorMessage};l.getErrorCode=function(){return this.errorCode};l.getVastErrorCode=function(){return 1E3>this.errorCode?this.errorCode:900};l.getType=function(){return this.type};
l.toString=function(){return"AdError "+this.getErrorCode()+": "+this.getMessage()+(null!=this.getInnerError()?" Caused by: "+this.getInnerError():"")};function Ey(a){var b={};a=(b["x-afma-token-requester-type"]=a,b);return(new nv).get({url:"https://pubads.g.doubleclick.net/adsid/integrator.json",withCredentials:!0,timeout:new Ku,headers:a}).then(function(c){return new Fy(c.newToken||"")}).catch(function(){return Promise.resolve(Gy)})}var Hy=function(){N.call(this);this.h=null;this.A=new Qu(this);ff(this,this.A);this.j=new Jk(72E5);this.l=Promise.resolve(Gy)};t(Hy,N);
var Iy=function(a){var b="requester_type_8";b=void 0===b?"requester_type_9":b;var c=function(d){a.h=d;return a.h};a.l=Ey(b).then(c);a.j=new Jk(72E5);a.A.O(a.j,"tick",function(){a.l=Ey(b).then(c)});a.j.start();ef(a,function(){a.j.stop()})};Hy.prototype.getId=function(){var a=this,b;return Ga(function(c){if(1==c.h){if(null!=a.h&&a.h!==Gy){c.h=2;return}b=a;return ya(c,a.l,3)}2!=c.h&&(b.h=c.j);return c.return(a.h)})};var Fy=function(a){this.id=a},Gy=new Fy("");var Jy=function(a){N.call(this);this.A=[];this.j=!1;this.l=a||"goog_"+ag++};t(Jy,N);Jy.prototype.connect=function(){for(this.j=!0;0!==this.A.length;){var a=this.A.shift();a&&this.sendMessage(a.name,a.type,a.data)}};var Ky=function(a,b,c,d){a.j?a.sendMessage(b,c,d):a.A.push({name:b,type:c,data:d})};Jy.prototype.sendMessage=function(){};var Ly=function(a,b,c,d,e){e=void 0===e?"":e;Ej.call(this,a);this.messageType=b;this.ra=c;this.Xb=d;this.origin=e};t(Ly,Ej);Ly.prototype.toString=function(){return""};var My={IMAGE:"Image",FLASH:"Flash",ALL:"All"},Ny={HTML:"Html",IFRAME:"IFrame",STATIC:"Static",ALL:"All"},Oy={IGNORE:"IgnoreSize",SELECT_EXACT_MATCH:"SelectExactMatch",SELECT_NEAR_MATCH:"SelectNearMatch",SELECT_FLUID:"SelectFluid"},Py=function(){this.allowCustom=!0;this.creativeType=this.resourceType="All";this.sizeCriteria="SelectExactMatch";this.nearMatchPercent=90;this.adSlotIds=[]};
w("module$exports$google3$javascript$ads$interactivemedia$sdk$clientside$api$companion_ad_selection_settings.CompanionAdSelectionSettings.CreativeType",My);w("module$exports$google3$javascript$ads$interactivemedia$sdk$clientside$api$companion_ad_selection_settings.CompanionAdSelectionSettings.ResourceType",Ny);w("module$exports$google3$javascript$ads$interactivemedia$sdk$clientside$api$companion_ad_selection_settings.CompanionAdSelectionSettings.SizeCriteria",Oy);var Ry=function(a,b){b=void 0===b?new Py:b;this.h=a;this.settings=b?b:new Py;this.resourceType=Qy(Ny,this.settings.resourceType)?this.settings.resourceType:"All";this.creativeType=Qy(My,this.settings.creativeType)?this.settings.creativeType:"All";this.sizeCriteria=Qy(Oy,this.settings.sizeCriteria)?this.settings.sizeCriteria:"SelectExactMatch";this.adSlotIds=null!=this.settings.adSlotIds?this.settings.adSlotIds:[];this.nearMatchPercent="number"===typeof this.settings.nearMatchPercent&&0<this.settings.nearMatchPercent&&
100>=this.settings.nearMatchPercent?this.settings.nearMatchPercent:90},Uy=function(a,b){var c=[];b.forEach(function(d){a.settings.allowCustom&&(!eb(d.getContent())&&(isNaN(d.xa.sequenceNumber)||isNaN(d.xa.mainAdSequenceNumber)||d.xa.mainAdSequenceNumber===d.xa.sequenceNumber)&&Sy(a,d)?c.push(d):(d=Ty(a,d),null!=d&&!eb(d.getContent())&&c.push(d)))});return c};Ry.prototype.Xd=function(){return this.resourceType};
var Sy=function(a,b){var c;if(c="Flash"!==b.getContentType()){if(c="All"===a.resourceType||a.resourceType===b.Xd())c=b.getContentType(),c=null==c?!0:"All"===a.creativeType||a.creativeType===c;c&&(c=b.getAdSlotId(),c=0===a.adSlotIds.length?!0:null!=c?a.adSlotIds.includes(c):!1)}if(c)if(c=b.getSize(),(b=!!b.xa.fluidSize)||a.h.Ud)a=b&&a.h.Ud;else if((b="IgnoreSize"===a.sizeCriteria)||(b=a.h.size,b=b==c?!0:b&&c?b.width==c.width&&b.height==c.height:!1),b)a=!0;else{if(b="SelectNearMatch"===a.sizeCriteria)b=
c.width,c=c.height,b=b>a.h.size.width||c>a.h.size.height||b<a.nearMatchPercent/100*a.h.size.width||c<a.nearMatchPercent/100*a.h.size.height?!1:!0;a=b}else a=!1;return a},Ty=function(a,b){b=Vy(b);return null==b?null:b.find(function(c){return Sy(a,c)})||null},Qy=function(a,b){return null!=b&&tf(a,b)};var Wy=function(a){var b={};b=(b.IABUSPrivacy_String="uspString",b.IABTCF_gdprApplies="gdprApplies",b.IABTCF_TCString="tcString",b.IABTCF_AddtlConsent="addtlConsent",b);for(var c in b)null!=a[c]&&(a[b[c]]=a[c],delete a[c]);this.be=!!a.isGdprLoader;c=a.uspString;this.uspString="string"===typeof c?c:"";c=a.gdprApplies;this.j="boolean"===typeof c?c?"1":"0":"number"!==typeof c||1!==c&&0!==c?"string"!==typeof c||"1"!==c&&"0"!==c?"":"1"===c?"1":"0":1===c?"1":"0";c=a.tcString;this.h="string"===typeof c?
c:"";/^[\.\w_-]*$/.test(this.h)||(this.h=encodeURIComponent(this.h))};var Xy=function(a){this.h=a},Yy=function(a,b){return sf(a.h,b)&&(a=a.h[b],"boolean"===typeof a)?a:!1},Zy=function(a){if(sf(a.h,"forceExperimentIds")){a=a.h.forceExperimentIds;var b=[],c=0;Array.isArray(a)&&a.forEach(function(d){"number"===typeof d&&(b[c++]=d)});return b}return null};var V=function(){this.H="always";this.U=4;this.K=null;this.A=1;this.h=0;this.l=!0;this.locale="en";this.o=null;this.j=!1;this.Y=this.V="";this.C=null;this.G=this.I=-1;this.Z=this.P=this.B="";this.L=!1;this.J=!0;this.F=vy();this.M={};try{this.aa=Gm()[0]}catch(a){}},$y=function(a){a=$f(a);eb(a)||(a=a.substring(0,20));return a};l=V.prototype;l.setCompanionBackfill=function(a){this.H=a};l.getCompanionBackfill=function(){return this.H};l.setNumRedirects=function(a){this.U=a};l.getNumRedirects=function(){return this.U};
l.setPpid=function(a){this.K=a};l.getPpid=function(){return this.K};l.setVpaidAllowed=function(a){"boolean"===typeof a&&(this.A=a?1:0)};l.setVpaidMode=function(a){this.A=a};l.rf=function(){return this.A};l.setAutoPlayAdBreaks=function(a){this.l=a};l.Cf=function(){return this.l};l.Wf=function(a){this.j=a};l.qf=function(){return this.j};l.setLocale=function(a){if(a=Ju(a))this.locale=a};l.getLocale=function(){return this.locale};l.setPlayerType=function(a){this.V=$y(a)};l.getPlayerType=function(){return this.V};
l.setPlayerVersion=function(a){this.Y=$y(a)};l.getPlayerVersion=function(){return this.Y};var az=function(a){if(null==a.C){var b={},c=(new Jt(G().location.href)).l;if(bu(c,"tcnfp"))try{b=JSON.parse(c.get("tcnfp"))}catch(d){}a.C=new Xy(b)}return a.C};l=V.prototype;l.Xf=function(a){this.I=a};l.Yf=function(a){this.G=a};l.setDisableCustomPlaybackForIOS10Plus=function(a){this.L=a};l.getDisableCustomPlaybackForIOS10Plus=function(){return this.L};l.isCookiesEnabled=function(){return this.J};
l.setCookiesEnabled=function(a){null!=a&&(this.J=a)};l.setSessionId=function(a){this.F=a};l.Vf=function(){};l.nf=function(){return!0};l.setFeatureFlags=function(a){this.M=a};l.getFeatureFlags=function(){return this.M};V.prototype.getFeatureFlags=V.prototype.getFeatureFlags;V.prototype.setFeatureFlags=V.prototype.setFeatureFlags;V.prototype.getDisableFlashAds=V.prototype.nf;V.prototype.setDisableFlashAds=V.prototype.Vf;V.prototype.setSessionId=V.prototype.setSessionId;
V.prototype.setCookiesEnabled=V.prototype.setCookiesEnabled;V.prototype.isCookiesEnabled=V.prototype.isCookiesEnabled;V.prototype.getDisableCustomPlaybackForIOS10Plus=V.prototype.getDisableCustomPlaybackForIOS10Plus;V.prototype.setDisableCustomPlaybackForIOS10Plus=V.prototype.setDisableCustomPlaybackForIOS10Plus;V.prototype.setStreamCorrelator=V.prototype.Yf;V.prototype.setPageCorrelator=V.prototype.Xf;V.prototype.getPlayerVersion=V.prototype.getPlayerVersion;V.prototype.setPlayerVersion=V.prototype.setPlayerVersion;
V.prototype.getPlayerType=V.prototype.getPlayerType;V.prototype.setPlayerType=V.prototype.setPlayerType;V.prototype.getLocale=V.prototype.getLocale;V.prototype.setLocale=V.prototype.setLocale;V.prototype.getIsVpaidAdapter=V.prototype.qf;V.prototype.setIsVpaidAdapter=V.prototype.Wf;V.prototype.isAutoPlayAdBreaks=V.prototype.Cf;V.prototype.setAutoPlayAdBreaks=V.prototype.setAutoPlayAdBreaks;V.prototype.getVpaidMode=V.prototype.rf;V.prototype.setVpaidMode=V.prototype.setVpaidMode;
V.prototype.setVpaidAllowed=V.prototype.setVpaidAllowed;V.prototype.getPpid=V.prototype.getPpid;V.prototype.setPpid=V.prototype.setPpid;V.prototype.getNumRedirects=V.prototype.getNumRedirects;V.prototype.setNumRedirects=V.prototype.setNumRedirects;V.prototype.getCompanionBackfill=V.prototype.getCompanionBackfill;V.prototype.setCompanionBackfill=V.prototype.setCompanionBackfill;var bz=new V;var cz=function(a){C.call(this,a)};t(cz,C);var dz=function(a){void 0!==a.addtlConsent&&"string"!==typeof a.addtlConsent&&(a.addtlConsent=void 0);void 0!==a.gdprApplies&&"boolean"!==typeof a.gdprApplies&&(a.gdprApplies=void 0);return void 0!==a.tcString&&"string"!==typeof a.tcString||void 0!==a.listenerId&&"number"!==typeof a.listenerId?2:a.cmpStatus&&"error"!==a.cmpStatus?0:3},ez=function(a,b){b=void 0===b?{}:b;D.call(this);this.j=a;this.h=null;this.B={};this.C=0;var c;this.o=null!=(c=b.Jc)?c:500;var d;this.A=null!=(d=b.ji)?d:!1;this.l=null};
t(ez,D);ez.prototype.N=function(){this.B={};this.l&&(cf(this.j,"message",this.l),delete this.l);delete this.B;delete this.j;delete this.h;D.prototype.N.call(this)};
var gz=function(a){return"function"===typeof a.j.__tcfapi||null!=fz(a)},jz=function(a,b){var c={internalErrorState:0,internalBlockOnErrors:a.A},d=Ye(function(){return b(c)}),e=0;-1!==a.o&&(e=setTimeout(function(){e=0;c.tcString="tcunavailable";c.internalErrorState=1;d()},a.o));hz(a,"addEventListener",function(f){f&&(c=f,c.internalErrorState=dz(c),c.internalBlockOnErrors=a.A,iz(c)?(0!=c.internalErrorState&&(c.tcString="tcunavailable"),hz(a,"removeEventListener",null,c.listenerId),(f=e)&&clearTimeout(f),
d()):("error"===c.cmpStatus||0!==c.internalErrorState)&&(f=e)&&clearTimeout(f))})};
ez.prototype.addEventListener=function(a){var b=this,c={internalBlockOnErrors:this.A},d=Ye(function(){return a(c)}),e=0;-1!==this.o&&(e=setTimeout(function(){c.tcString="tcunavailable";c.internalErrorState=1;d()},this.o));var f=function(g,h){clearTimeout(e);g?(c=g,c.internalErrorState=dz(c),c.internalBlockOnErrors=b.A,h&&0===c.internalErrorState||(c.tcString="tcunavailable",h||(c.internalErrorState=3))):(c.tcString="tcunavailable",c.internalErrorState=3);a(c)};try{hz(this,"addEventListener",f)}catch(g){c.tcString=
"tcunavailable",c.internalErrorState=3,e&&(clearTimeout(e),e=0),d()}};ez.prototype.removeEventListener=function(a){a&&a.listenerId&&hz(this,"removeEventListener",null,a.listenerId)};
var hz=function(a,b,c,d){c||(c=function(){});if("function"===typeof a.j.__tcfapi)a=a.j.__tcfapi,a(b,2,c,d);else if(fz(a)){kz(a);var e=++a.C;a.B[e]=c;a.h&&(c={},a.h.postMessage((c.__tcfapiCall={command:b,version:2,callId:e,parameter:d},c),"*"))}else c({},!1)},fz=function(a){if(a.h)return a.h;a.h=Vg(a.j,"__tcfapiLocator");return a.h},kz=function(a){a.l||(a.l=function(b){try{var c=("string"===typeof b.data?JSON.parse(b.data):b.data).__tcfapiReturn;a.B[c.callId](c.returnValue,c.success)}catch(d){}},bf(a.j,
"message",a.l))},iz=function(a){if(!1===a.gdprApplies)return!0;void 0===a.internalErrorState&&(a.internalErrorState=dz(a));return"error"===a.cmpStatus||0!==a.internalErrorState?a.internalBlockOnErrors?(nh({e:String(a.internalErrorState)},"tcfe"),!1):!0:"loaded"!==a.cmpStatus||"tcloaded"!==a.eventStatus&&"useractioncomplete"!==a.eventStatus?!1:!0};function lz(a){var b={};(new Jt(a)).l.forEach(function(c,d){b[d]=c});return b}
var mz=function(a,b){a=void 0===a?{}:a;b=void 0===b?{}:b;var c={};a=q(Object.entries(a));for(var d=a.next();!d.done;d=a.next()){var e=q(d.value);d=e.next().value;e=e.next().value;null!=e&&(c[d]=String(e))}this.h=c;this.j=new Wy(b)},nz=function(a,b){var c=new Jt(a);var d=c.h;(c=db(c.j,"googleads.g.doubleclick.net")&&Hu("/pagead/(live/)?ads",d))||(d=new yy(a),c=d.j,d=zy(d,d.h),c=!db(c,".g.doubleclick.net")&&db(c,"doubleclick.net")&&Hu("/(ad|pfad)[x|i|j]?/",d));c||(c=new Jt(a),d=c.h,c=db(c.j,"doubleclick.net")&&
Hu("/gampad/(live/)?ads",d));(c=c||"bid.g.doubleclick.net"==(new Jt(a)).j)||(c=new Jt(a),d=c.h,c="ad.doubleclick.net"===c.j&&Hu("/dv3/adv",d));c||(c=new Jt(a),d=c.h,"pubads.g.doubleclick.net"===c.j&&(Hu("/ssai/",d)||Hu("/ondemand/",d)));return new mz(lz(a),b)},oz=function(a,b){if(a.h.hasOwnProperty(b))return a.h[b]},pz=function(a){var b=oz(a,"ltd");if(!(b="1"===b||"true"===b)){b=oz(a,"gdpr");var c=a.j.j;b=("1"===c||"0"===c?c:void 0!==b?b:"").toLowerCase();if("true"===b||"1"===b)if(b=a.j.h,a=oz(a,
"gdpr_consent"),a=b&&"tcunavailable"!==b?b:"tcunavailable"===b?a||b:a||"","tcunavailable"===a)var d=!1;else{if((b=tt(a))&&a){var e=Rd(b,Ks,1);b=Rd(b,Ds,2)||new Ds;c=Zd(z(e,9),0);var f=Zd(z(e,4),0),g=Zd(z(e,5),0),h=Zd(Kd(e,10),!1),k=Zd(Kd(e,11),!1),m=Zd(z(e,16),""),n=Zd(Kd(e,15),!1),r={consents:ut(Yd(e,13),ft),legitimateInterests:ut(Yd(e,14),ft)},v={consents:ut(Ld(e,17,Bd)),legitimateInterests:ut(Ld(e,18,Bd))},y=ut(Yd(e,12),gt),B=Td(e,Bs,19);e={};B=q(B);for(var F=B.next();!F.done;F=B.next()){F=F.value;
var rb=$d(F,1);e[rb]=e[rb]||{};for(var pa=q(Ld(F,3,Bd)),U=pa.next();!U.done;U=pa.next())e[rb][U.value]=$d(F,2)}a={tcString:a,tcfPolicyVersion:c,gdprApplies:!0,cmpId:f,cmpVersion:g,isServiceSpecific:h,useNonStandardStacks:k,publisherCC:m,purposeOneTreatment:n,purpose:r,vendor:v,specialFeatureOptins:y,publisher:{restrictions:e,consents:ut(Yd(b,1),ft),legitimateInterests:ut(Yd(b,2),ft),customPurposes:{consents:ut(Ld(b,3,Bd)),legitimateInterests:ut(Ld(b,4,Bd))}}}}else a=null;if(a){var ca=void 0===ca?
!1:ca;if(iz(a))if(!1===a.gdprApplies||"tcunavailable"===a.tcString||void 0===a.gdprApplies&&!ca||"string"!==typeof a.tcString||!a.tcString.length)d=!0;else{d=void 0===d?"755":d;c:{if(a.publisher&&a.publisher.restrictions&&(ca=a.publisher.restrictions["1"],void 0!==ca)){ca=ca[void 0===d?"755":d];break c}ca=void 0}0===ca?d=!1:a.purpose&&a.vendor?(ca=a.vendor.consents,(d=!(!ca||!ca[void 0===d?"755":d]))&&a.purposeOneTreatment&&"CH"===a.publisherCC?d=!0:d&&(d=a.purpose.consents,d=!(!d||!d["1"]))):d=!0}else d=
!1}else d=!1}else d=!0;b=!d}return b},qz=function(a){var b=new cz;a=!pz(a);A(b,5,a);return b};var rz=function(a,b){this.message=a;this.errorCode=b};rz.prototype.getErrorCode=function(){return this.errorCode};rz.prototype.getMessage=function(){return this.message};var sz=new rz("Failed to initialize ad playback element before starting ad playback.",400),tz=new rz("The provided {0} information: {1} is invalid.",1101);function uz(a,b){var c=void 0===b?null:b;var d=Ha.apply(2,arguments);if(!(c instanceof Dy)){var e=a.getErrorCode(),f=a.getMessage();if(0<d.length)for(var g=0;g<d.length;g++)f=f.replace(new RegExp("\\{"+g+"\\}","ig"),d[g]);d=new Dy("adPlayError",f,e);d.h=c;c=d}return c};var vz=function(){};vz.h=function(){throw Error("Must be overridden");};var wz=function(){this.h=0};t(wz,vz);wz.ib=void 0;wz.h=function(){return wz.ib?wz.ib:wz.ib=new wz};
function W(a,b,c,d){c=void 0===c?null:c;d=void 0===d?{}:d;var e=wz.h();0===e.h&&(e.h=.001>Math.random()?2:1);if(2===e.h){e={};var f=Object,g=f.assign;e.c=String(a);a=String;var h=window;if("number"!==typeof h.goog_pvsid)try{Object.defineProperty(h,"goog_pvsid",{value:Math.floor(Math.random()*Math.pow(2,52)),configurable:!1})}catch(k){}e.pc=a(Number(h.goog_pvsid)||-1);e.em=c;e.lid=b;J(ys);nh(g.call(f,{},(e.eids="",e),d),"esp")}};var xz=function(){this.cache={}},zz=function(){yz||(yz=new xz);return yz},Az=function(a){var b=z(a,3);if(!b)return 3;if(void 0===z(a,2))return 4;a=Date.now();return a>b+2592E5?2:a>b+432E5?1:0};
xz.prototype.get=function(a,b){if(this.cache[a])return{zb:this.cache[a],success:!0};var c="";try{c=b.getItem("_GESPSK-"+a)}catch(g){var d;W(6,a,null==(d=g)?void 0:d.message);return{zb:null,success:!1}}if(!c)return{zb:null,success:!0};try{var e=yl(c);this.cache[a]=e;return{zb:e,success:!0}}catch(g){var f;W(5,a,null==(f=g)?void 0:f.message);return{zb:null,success:!1}}};
xz.prototype.set=function(a,b){var c=z(a,1),d="_GESPSK-"+c;A(a,3,Date.now());try{b.setItem(d,ne(a))}catch(f){var e;W(7,c,null==(e=f)?void 0:e.message);return!1}this.cache[c]=a;return!0};xz.prototype.remove=function(a,b){a=z(a,1);try{b.removeItem("_GESPSK-"+a),delete this.cache[a]}catch(d){var c;W(8,a,null==(c=d)?void 0:c.message)}};var yz=null;function Bz(a,b,c,d){W(18,a);try{var e=wh();return c().then(function(f){W(29,a,null,{delta:String(wh()-e)});if(null==f)return W(41,a),Cz(b,111,d),b;null!=f&&("string"!==typeof f?W(21,a):f.length||W(20,a));f=A(b,2,f);A(f,10,void 0,!1);zz().set(b,d)&&W(27,a);return b}).catch(function(f){Cz(b,106,d);W(28,a,Dz(f));return b})}catch(f){return Cz(b,107,d),W(1,a,Dz(f)),Promise.resolve(b)}}function Cz(a,b,c){var d;a.Ha(ul(null!=(d=a.getError())?d:new tl,b));zz().set(a,c)}
var Dz=function(a){return"string"===typeof a?a:a instanceof Error?a.message:null};function Ez(){var a=window;var b=void 0===b?function(){}:b;return new Promise(function(c){var d=function(){c(b());cf(a,"load",d)};bf(a,"load",d)})};var Fz=function(){var a={};this.j=function(b,c){return null!=a[b]?a[b]:c};this.l=function(){var b=zt.h,c=zt.defaultValue;return null!=a[b]?a[b]:c};this.h=function(b,c){return null!=a[b]?a[b]:c}};function Gz(a){return J(Fz).j(a.h,a.defaultValue)};function Hz(a){var b=new Hl,c=[].flatMap(function(d){return Td(d,sl,2)}).map(function(d){return Zd(z(d,1),"")});Iz(b,a,c);if(!Td(b,wl,2).length)return null;W(50,"");return Ec(b.o(),3)}
function Iz(a,b,c){if(b){var d=[],e=RegExp("^_GESPSK-(.+)$");try{for(var f=0;f<b.length;f++){var g=(e.exec(b.key(f))||[])[1];g&&d.push(g)}}catch(k){}d=q(d);for(e=d.next();!e.done;e=d.next())if(e=e.value,f=void 0,null==(f=c)||!f.includes(e))if(f=zz().get(e,b).zb)if(g=Az(f),2!==g&&3!==g){A(f,9,!1);g=z(f,2);if(!Gz(Ct)&&g&&300<g.length){var h={};W(12,e,null,(h.sl=String(g.length),h));Cz(f,108,b);A(f,2,void 0,!1)}Wd(a,2,wl,f);f={};W(19,e,null,(f.hs=g?"1":"0",f))}}};var Jz=function(a){D.call(this);this.A=a;this.h=[];this.j=[];this.l=[];this.o=[]};t(Jz,D);var Kz=function(a,b){a.j.push({ac:!1,Ka:b});Gz(xt)&&b.Pc(a.A)};Jz.prototype.N=function(){this.h.length=0;this.l.length=0;if(Gz(xt))for(var a=q(this.j),b=a.next();!b.done;b=a.next())b.value.Ka.ec.length=0;this.j.length=0;this.o.length=0;D.prototype.N.call(this)};var Lz=function(){var a=this;this.promise=new Promise(function(b,c){a.resolve=b;a.reject=c})};var Mz=function(a){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);Object.setPrototypeOf(this,Mz.prototype);this.name="InputError"};t(Mz,Error);var Nz=function(){this.Xa=!1},Oz=function(){Nz.apply(this,arguments);this.ec=[];this.Ec=new Lz};t(Oz,Nz);var Qz=function(a,b){a.Xa||(a.Xa=!0,a.Qb=b,a.Ec.resolve(b),Gz(xt)&&Pz(a))},Pz=function(a){for(var b=q(a.ec),c=b.next();!c.done;c=b.next())c=c.value,c(a.Qb);a.ec.length=0};Oz.prototype.Pc=function(a){Gz(xt)&&this.ec.push(a)};
fa.Object.defineProperties(Oz.prototype,{promise:{configurable:!0,enumerable:!0,get:function(){return this.Ec.promise}},Sb:{configurable:!0,enumerable:!0,get:function(){return this.Xa}},error:{configurable:!0,enumerable:!0,get:function(){return this.ld}}});var Rz=function(){Oz.apply(this,arguments)};t(Rz,Oz);var Sz=function(a,b){Qz(a,b)},Tz=function(a,b){b.then(function(c){Qz(a,c)})};Rz.prototype.Ha=function(a){this.Xa||(this.Xa=!0,this.Qb=null,this.ld=a,this.Ec.reject(a),Gz(xt)&&Pz(this))};
var Uz=function(a){this.Xa=!1;this.h=a};t(Uz,Nz);Uz.prototype.Sb=function(){return this.h.Xa};fa.Object.defineProperties(Uz.prototype,{error:{configurable:!0,enumerable:!0,get:function(){return this.h.ld}}});var Vz=function(a){Uz.call(this,a);this.h=a};t(Vz,Uz);fa.Object.defineProperties(Vz.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.h.Qb}}});var Wz=function(a){Uz.call(this,a);this.h=a};t(Wz,Uz);
fa.Object.defineProperties(Wz.prototype,{value:{configurable:!0,enumerable:!0,get:function(){var a;return null!=(a=this.h.Qb)?a:null}}});var Xz=function(){Oz.apply(this,arguments)};t(Xz,Oz);Xz.prototype.notify=function(){Qz(this,null)};function Yz(a,b,c){var d,e,f,g,h,k;return Ga(function(m){if(1==m.h)return d=c?a.filter(function(n){return!n.ac}):a,ya(m,Promise.all(d.map(function(n){return n.Ka.promise})),2);if(4!=m.h){if(a.length===d.length)return m.return(0);e=a.filter(function(n){return n.ac});f=wh();if(Gz(yt)){g=q(b);for(h=g.next();!h.done;h=g.next())k=h.value,k.h();return ya(m,Promise.all(e.map(function(n){return n.Ka.promise})),4)}return ya(m,Promise.race([Promise.all(e.map(function(n){return n.Ka.promise})),new Promise(function(n){return void setTimeout(n,
c)})]),4)}return m.return(wh()-f)})}var $z=function(a,b){D.call(this);var c=this;this.id=a;this.Jc=b;this.G=this.F=this.C=this.o=!1;this.L=-1;this.h=new Jz(function(){Zz(c)});ff(this,this.h)};t($z,D);
$z.prototype.start=function(){var a=this,b,c;return Ga(function(d){switch(d.h){case 1:if(a.o)return d.return();a.o=!0;d.l=2;b=a;return ya(d,Yz(a.h.j,a.h.o,a.Jc),4);case 4:b.L=d.j;if(a.wa()){d.h=5;break}for(var e=0,f=q(a.h.l),g=f.next();!g.done;g=f.next()){if(null==g.value.h.Qb)throw Error("missing input: "+a.id+"/"+e);++e}return ya(d,a.j(),5);case 5:d.h=0;d.l=0;break;case 2:c=za(d);if(a.wa())return d.return();!(c instanceof Mz)&&c instanceof Error&&(a.A(a.id,c),a.h.h.length&&aA(a,new Mz(c.message)));
d.h=0}})};
var Zz=function(a){if(!a.o&&a.C)try{var b=a.h.j,c=a.Jc?b.filter(function(k){return!k.ac}):b,d=b.filter(function(k){return k.ac}),e,f=null==(e=b.find(function(k){return void 0!==k.Ka.error}))?void 0:e.Ka.error;if(f)throw a.o=!0,f;if(!c.some(function(k){return!k.Ka.Sb})){if(d.length)if(Gz(yt)){for(var g=q(a.h.o),h=g.next();!h.done;h=g.next())h.value.h();if(d.some(function(k){return!k.Ka.Sb}))return}else if(a.F||(a.F=!0,setTimeout(function(){a.G=!0;Zz(a)},a.Jc)),d.some(function(k){return!k.Ka.Sb})&&!a.G)return;
a.o=!0;a.j()}}catch(k){!(a.wa()||k instanceof Mz)&&k instanceof Error&&(a.A(a.id,k),a.h.h.length&&aA(a,new Mz(k.message)))}},bA=function(a){var b=new Rz;a.h.h.push(b);return b},cA=function(a,b){Kz(a.h,b);b=new Vz(b);a.h.l.push(b);return b},dA=function(a,b){Kz(a.h,b);return new Wz(b)},aA=function(a,b){a=q(a.h.h);for(var c=a.next();!c.done;c=a.next())if(c=c.value,!c.Sb){var d=b;c.Xa=!0;c.ld=d;c.Ec.reject(d);Gz(xt)&&Pz(c)}};var eA=function(a,b){$z.call(this,a);this.id=a;this.A=b};t(eA,$z);var fA=function(a,b,c,d){eA.call(this,1041,d);this.storage=b;this.l=c;this.H=cA(this,a);this.l&&(this.B=cA(this,this.l))};t(fA,eA);fA.prototype.j=function(){var a=this.H.value,b,c,d=null!=(c=null==(b=this.B)?void 0:b.value)?c:this.storage;zz().set(a,d)&&null!=z(a,2)&&W(27,z(a,1))};var gA=function(a,b,c){eA.call(this,1094,c);this.storage=a;a=new Xz;this.h.h.push(a);this.l=a;b&&(this.B=cA(this,b))};t(gA,eA);gA.prototype.j=function(){var a,b,c=null!=(b=null==(a=this.B)?void 0:a.value)?b:this.storage;if(void 0!==c)for(a=q(Object.keys(c)),b=a.next();!b.done;b=a.next())if(b=b.value,b.startsWith("_GESPSK"))try{c.removeItem(b)}catch(d){}yz=new xz;this.l.notify()};var hA=function(a,b){eA.call(this,1048,b);this.l=bA(this);this.B=bA(this);this.H=cA(this,a)};t(hA,eA);hA.prototype.j=function(){var a=this.H.value,b=function(c){var d={};W(c,z(a,1),null,(d.tic=String(Math.round((Date.now()-z(a,3))/6E4)),d))};switch(Az(a)){case 0:b(24);break;case 1:b(25);Qz(this.B,a);break;case 2:b(26);Qz(this.l,a);break;case 3:W(9,z(a,1));Qz(this.l,a);break;case 4:b(23),Qz(this.l,a)}};function iA(a){var b=function(c){var d={};W(c,z(a,1),null,(d.tic=String(Math.round((Date.now()-z(a,3))/6E4)),d))};switch(Az(a)){case 0:b(24);break;case 1:b(25);break;case 2:b(26);break;case 3:W(9,z(a,1));break;case 4:b(23)}};var jA=function(a,b,c,d,e){eA.call(this,658,e);this.collectorFunction=a;this.storage=c;this.l=bA(this);this.H=bA(this);this.B=dA(this,b);d&&(this.J=cA(this,d))};t(jA,eA);
jA.prototype.j=function(){var a=this,b,c,d=null!=(c=null==(b=this.J)?void 0:b.value)?c:this.storage;if(this.B.value){b=function(g){Qz(a.l,{id:z(g,1),collectorGeneratedData:z(g,2)})};c=this.B.value;var e=z(c,1),f=Az(c);iA(c);switch(f){case 0:b(c);break;case 1:b(c);Qz(this.H,c);break;case 3:case 2:case 4:A(c,2,null),Bz(e,c,this.collectorFunction,d).then(b)}}else Qz(this.l,null)};var kA=function(a,b,c,d){eA.call(this,1027,d);this.hc=a;this.storage=b;this.l=bA(this);this.B=bA(this);c&&(this.H=cA(this,c))};t(kA,eA);kA.prototype.j=function(){var a,b,c=null!=(b=null==(a=this.H)?void 0:a.value)?b:this.storage;a=zz().get(this.hc,c).zb;a||(a=xl(this.hc),a=A(a,3,Date.now()),b=a.Ha(ul(new tl,100)),Qz(this.B,b));Qz(this.l,a)};var lA=function(a,b,c){eA.call(this,1047,c);this.collectorFunction=a;this.B=bA(this);this.l=bA(this);this.H=bA(this);this.J=cA(this,b)};t(lA,eA);lA.prototype.j=function(){var a=this,b=this.J.value,c=z(b,1);W(18,c);try{var d=wh();this.collectorFunction().then(function(e){W(29,c,null,{delta:String(wh()-d)});var f=A(b,2,e);Qz(a.B,f);Qz(a.H,null!=e?e:null)}).catch(function(e){W(28,c,mA(e));e=b.Ha(ul(new tl,106));Qz(a.l,e)})}catch(e){W(1,c,mA(e)),Sz(this.l,b.Ha(ul(new tl,107)))}};
function mA(a){return"string"===typeof a?a:a instanceof Error?a.message:null};var nA=function(a,b,c,d,e){eA.call(this,662,e);this.B=a;this.storage=c;this.H=cA(this,b);d&&(this.l=cA(this,d))};t(nA,eA);nA.prototype.j=function(){var a=this,b,c,d=null!=(c=null==(b=this.l)?void 0:b.value)?c:this.storage;Ez().then(function(){var e=a.H.value;Bz(z(e,1),e,a.B,d)})};var oA=function(a,b){eA.call(this,1028,b);this.l=bA(this);this.B=cA(this,a)};t(oA,eA);oA.prototype.j=function(){var a=this.B.value,b=z(a,1);null!=z(a,3)||W(35,b);Qz(this.l,a)};var pA=function(a,b,c,d,e){eA.call(this,1050,e);this.J=c;this.H=d;this.l=bA(this);this.B=cA(this,a);this.M=dA(this,b)};t(pA,eA);
pA.prototype.j=function(){var a=this.B.value,b=z(a,1),c=this.M.value;if(null==c)W(41,b),a.Ha(ul(new tl,111)),Qz(this.l,a);else if("string"!==typeof c)W(21,b),a=a.Ha(ul(new tl,113)),Qz(this.l,a);else{if(c.length>(/^(\d+)$/.test(b)?this.H:this.J)){var d={};W(12,b,null,(d.sl=String(c.length),d));b=a.Ha(ul(new tl,108));A(b,2,void 0,!1)}else c.length||W(20,b),A(a,10,void 0,!1);Qz(this.l,a)}};var qA=function(){D.apply(this,arguments);this.o=[];this.B=[];this.A={};this.h=[];this.j=new Lz};t(qA,D);
var rA=function(a,b){ff(a,b);a.o.push(b)},sA=function(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())rA(a,c.value)},tA=function(a){var b,c,d,e,f,g,h,k,m,n,r,v;Ga(function(y){switch(y.h){case 1:if(!a.h.length){y.h=2;break}return ya(y,Promise.all(a.h.map(function(B){return B.j.promise})),2);case 2:b=q(a.o);for(c=b.next();!c.done;c=b.next())d=c.value,Gz(xt)?(d.C=!0,Zz(d)):d.start();e=q(a.B);for(f=e.next();!f.done;f=e.next())g=f.value,tA(g);if(!a.l||!Object.keys(a.l).length){y.h=4;break}h=Object.keys(a.l);
return ya(y,Promise.all(Object.values(a.l).map(function(B){return B.promise})),5);case 5:for(k=y.j,m=0,n=q(h),r=n.next();!r.done;r=n.next())v=r.value,a.A[v]=k[m++];case 4:return a.j.resolve(a.A),y.return(a.j.promise)}})};qA.prototype.N=function(){D.prototype.N.call(this);this.o.length=0;this.B.length=0;this.h.length=0};function uA(a,b,c,d,e){var f,g,h,k,m,n,r,v,y,B,F;return Ga(function(rb){f=new qA;g=new kA(a,c,d,e);h=new fA(g.B,c,d,e);k=new oA(g.l,e);n=m=null;Gz(Ct)?(r=new hA(k.l,e),rA(f,r),m=r.B,v=new lA(b,r.l,e),rA(f,v),rA(f,new fA(v.l,c,d,e)),y=new pA(v.B,v.H,300,1E3,e),rA(f,y),rA(f,new fA(y.l,c,d,e)),n=function(){var pa,U,ca;return Ga(function(lb){if(1==lb.h)return ca=a,ya(lb,y.l.promise,2);var Rb=lb.return;if(null==(pa=lb.j))var Oc=void 0;else Oc=z(pa,2),Oc=null==Oc?void 0:Oc;return Rb.call(lb,{id:ca,collectorGeneratedData:null!=
(U=Oc)?U:null})})}):(B=new jA(b,k.l,c,d,e),rA(f,B),m=B.H,n=function(){var pa;return Ga(function(U){return 1==U.h?ya(U,B.l.promise,2):U.return(null!=(pa=U.j)?pa:{id:a,collectorGeneratedData:null})})});F=new nA(b,m,c,d,e);sA(f,[g,h,k,F]);tA(f);return rb.return(n())})};var vA=function(a,b,c,d,e){eA.call(this,1059,e);this.J=b;this.storage=c;this.H=d;this.l=bA(this);this.M=cA(this,a);d&&(this.B=dA(this,d))};t(vA,eA);vA.prototype.j=function(){var a,b,c=null!=(b=this.storage)?b:null==(a=this.B)?void 0:a.value;if(c){var d=this.M.value;b=d.id;a=d.collectorFunction;var e;d=null!=(e=d.networkCode)?e:b;e={};W(42,d,null,(e.ea=String(Number(this.J)),e));Tz(this.l,uA(d,a,c,this.H,this.A))}};var wA=function(a,b){eA.call(this,1057,b);this.l=a;this.B=bA(this);this.H=bA(this)};t(wA,eA);
wA.prototype.j=function(){if(this.l)if("object"!==typeof this.l)W(46,"UNKNOWN_COLLECTOR_ID"),xA(this,"UNKNOWN_COLLECTOR_ID",112);else{var a=this.l.id,b=this.l.networkCode;a&&b&&(delete this.l.id,W(47,a+";"+b));a=null!=b?b:a;"string"!==typeof a?(b={},W(37,"INVALID_COLLECTOR_ID",null,(b.ii=JSON.stringify(a),b)),xA(this,"INVALID_COLLECTOR_ID",102)):"function"!==typeof this.l.collectorFunction?(W(14,a),xA(this,a,105)):J(Fz).h(Bt.h,Bt.defaultValue).includes(a)?(W(22,a),xA(this,a,104)):Qz(this.H,this.l)}else W(39,
"UNKNOWN_COLLECTOR_ID"),xA(this,"UNKNOWN_COLLECTOR_ID",110)};var xA=function(a,b,c){b=xl(b).Ha(ul(new tl,c));Qz(a.B,b)};var yA=function(a,b,c,d){var e=void 0===e?document:e;this.storage=b;this.C=c;this.o=d;this.j=e;this.B=[];this.A=[];this.l=[];this.h=0;a=q(a);for(b=a.next();!b.done;b=a.next())this.push(b.value)};l=yA.prototype;l.push=function(a){var b=this,c=this.o.pe?function(f,g){return void b.Yb(f,g)}:this.Yb;a=new wA(a,c);var d=new fA(a.B,this.storage,void 0,c);c=new vA(a.H,this.C,this.storage,void 0,c);var e=new qA;sA(e,[a,d,c]);tA(e);a=c.l.promise;this.B.push(a);d=q(this.A);for(c=d.next();!c.done;c=d.next())a.then(c.value)};
l.addOnSignalResolveCallback=function(a){this.A.push(a);for(var b=q(this.B),c=b.next();!c.done;c=b.next())c.value.then(a)};l.addErrorHandler=function(a){this.l.push(a)};
l.clearAllCache=function(){var a=this,b=this.j.currentScript instanceof HTMLScriptElement?this.j.currentScript.src:"";if(1===this.h){var c={};W(49,"",null,(c.url=b,c))}else if(c=String(Rg(null!=b?b:"")),J(Fz).h(At.h,At.defaultValue).includes(c))c={},W(48,"",null,(c.url=b,c));else{var d=new qA;c=new gA(this.storage,void 0,this.o.pe?function(e,f){return void a.Yb(e,f)}:this.Yb);rA(d,c);tA(d);this.h=1;setTimeout(function(){a.h=0},1E3*J(Fz).l());d={};W(43,"",null,(d.url=b,d));return c.l.promise}};
l.Yb=function(a,b){for(var c=q(this.l),d=c.next();!d.done;d=c.next())d=d.value,d(a,b)};var zA=function(a){this.push=function(b){a.push(b)};this.addOnSignalResolveCallback=function(b){a.addOnSignalResolveCallback(b)};this.addErrorHandler=function(b){a.addErrorHandler(b)};this.clearAllCache=function(){a.clearAllCache()}};var AA={pe:!1};function BA(a,b,c,d){var e=void 0===e?AA:e;if(b){var f=Pg();var g=window;g=Mg(g.top)?g.top:null;f!==g?W(16,""):CA(a,"encryptedSignalProviders",c,d)&&CA(a,"secureSignalProviders",c,d)||(W(38,""),DA(a,"encryptedSignalProviders",b,c,e,d),DA(a,"secureSignalProviders",b,c,e,d))}else W(15,"")}function CA(a,b,c,d){if(void 0===a[b]||a[b]instanceof Array)return!1;a=a[b];d&&a.addOnSignalResolveCallback(d);a.addErrorHandler(c);return!0}
function DA(a,b,c,d,e,f){var g,h=new yA(null!=(g=a[b])?g:[],c,"secureSignalProviders"===b,e);a[b]=new zA(h);f&&h.addOnSignalResolveCallback(f);h.addErrorHandler(d)}function EA(a,b,c,d){var e=new Map;b=b.map(function(f){var g=f.hc;return new Promise(function(h){e.set(g,h)})});BA(a,c,d,function(f){var g=f.collectorGeneratedData;f=f.id;var h;return void(null==(h=e.get(f))?void 0:h({collectorGeneratedData:g,id:f}))});return b};function FA(){var a;return null!=(a=u.googletag)?a:u.googletag={cmd:[]}};function GA(a){if(!a||pz(a))return null;try{return window.localStorage}catch(b){return null}}function HA(a,b){a=GA(a);BA(FA(),a,function(){},b)}function IA(a,b){return(b=GA(b))&&0!=a.length?EA(FA(),a,b,function(){}):null};var X={},JA=(X.creativeView="creativeview",X.start="start",X.midpoint="midpoint",X.firstQuartile="firstquartile",X.thirdQuartile="thirdquartile",X.complete="complete",X.mute="mute",X.unmute="unmute",X.pause="pause",X.rewind="rewind",X.resume="resume",X.fullscreen="fullscreen",X.exitFullscreen="exitfullscreen",X.expand="expand",X.collapse="collapse",X.close="close",X.acceptInvitation="acceptinvitation",X.adCanPlay="adCanPlay",X.adStarted="adStarted",X.abandon="abandon",X.acceptInvitationLinear="acceptinvitationlinear",
X.engagedView="engagedview",X.instreamAdComplete="instreamAdComplete",X.skipShown="skipshown",X.skippableStateChanged="skippableStateChanged",X.skip="skip",X.progress="progress",X.publisher_invoked_skip="PUBLISHER_INVOKED_SKIP",X.annotation_start="annotation_start",X.annotation_click="annotation_click",X.annotation_close="annotation_close",X.cta_annotation_shown="cta_annotation_shown",X.cta_annotation_clicked="cta_annotation_clicked",X.cta_annotation_closed="cta_annotation_closed",X.replay="replay",
X.stop="stop",X.autoplayDisallowed="autoplayDisallowed",X.error="error",X.mediaLoadTimeout="mediaLoadTimeout",X.linearChanged="linearChanged",X.click="click",X.contentPauseRequested="contentPauseRequested",X.contentResumeRequested="contentResumeRequested",X.discardAdBreak="discardAdBreak",X.updateAdsRenderingSettings="updateAdsRenderingSettings",X.durationChange="durationChange",X.expandedChanged="expandedChanged",X.autoClose="autoClose",X.userClose="userClose",X.userRecall="userRecall",X.prefetched=
"prefetched",X.loaded="loaded",X.init="init",X.allAdsCompleted="allAdsCompleted",X.adMetadata="adMetadata",X.adBreakReady="adBreakReady",X.adBreakFetchError="adBreakFetchError",X.log="log",X.volumeChange="volumeChange",X.companionBackfill="companionBackfill",X.companionInitialized="companionInitialized",X.companionImpression="companionImpression",X.companionClick="companionClick",X.impression="impression",X.interaction="interaction",X.adProgress="adProgress",X.adBuffering="adBuffering",X.trackingUrlPinged=
"trackingUrlPinged",X.measurable_impression="measurable_impression",X.custom_metric_viewable="custom_metric_viewable",X.viewable_impression="viewable_impression",X.fully_viewable_audible_half_duration_impression="fully_viewable_audible_half_duration_impression",X.audio_audible="audio_audible",X.audio_measurable="audio_measurable",X.overlay_resize="overlay_resize",X.overlay_unmeasurable_impression="overlay_unmeasurable_impression",X.overlay_unviewable_impression="overlay_unviewable_impression",X.overlay_viewable_immediate_impression=
"overlay_viewable_immediate_impression",X.overlay_viewable_end_of_session_impression="overlay_viewable_end_of_session_impression",X.externalActivityEvent="externalActivityEvent",X.adEvent="adEvent",X.configure="configure",X.remainingTime="remainingTime",X.destroy="destroy",X.resize="resize",X.volume="volume",X.authorIconClicked="videoAuthorIconClicked",X.authorNameClicked="videoAuthorClicked",X.videoClicked="videoClicked",X.videoIconClicked="videoIconClicked",X.learnMoreClicked="videoLearnMoreClicked",
X.muteClicked="videoMuteClicked",X.titleClicked="videoTitleClicked",X.videoSkipClicked="SKIPPED",X.unmuteClicked="videoUnmuteClicked",X.vpaidEvent="vpaidEvent",X.show_ad="show_ad",X.video_card_endcap_collapse="video_card_endcap_collapse",X.video_card_endcap_dismiss="video_card_endcap_dismiss",X.video_card_endcap_impression="video_card_endcap_impression",X.mediaUrlPinged="mediaUrlPinged",X.breakStart="breakstart",X.breakEnd="breakend",X.omidReady="omidReady",X.omidUnavailable="omidUnavailable",X.omidAdSessionCompleted=
"omidAdSessionCompleted",X.omidAdSessionAbandoned="omidAdSessionAbandoned",X.verificationNotExecuted="verificationNotExecuted",X.loadStart="loadStart",X.seeked="seeked",X.seeking="seeking",X);var KA=function(a){C.call(this,a)};t(KA,C);KA.prototype.getVersion=function(){return Zd(z(this,2),"")};var MA=function(a){C.call(this,a,-1,LA)};t(MA,C);var NA=function(a,b){return A(a,2,b)},OA=function(a,b){return A(a,3,b)},PA=function(a,b){return A(a,4,b)},QA=function(a,b){return A(a,5,b)},RA=function(a,b){return A(a,9,b)},SA=function(a,b){return Vd(a,10,b)},TA=function(a,b){return A(a,11,b)},UA=function(a,b){return A(a,1,b)},VA=function(a,b){return A(a,7,b)},LA=[10,6];var WA="platform platformVersion architecture model uaFullVersion bitness fullVersionList wow64".split(" ");function XA(a){var b;return null!=(b=a.google_tag_data)?b:a.google_tag_data={}}function YA(a){var b,c;return"function"===typeof(null==(b=a.navigator)?void 0:null==(c=b.userAgentData)?void 0:c.getHighEntropyValues)}
function ZA(){var a=window;if(!YA(a))return null;var b=XA(a);if(b.uach_promise)return b.uach_promise;a=a.navigator.userAgentData.getHighEntropyValues(WA).then(function(c){null!=b.uach||(b.uach=c);return c});return b.uach_promise=a}
function $A(a){var b;return TA(SA(QA(NA(UA(PA(VA(RA(OA(new MA,a.architecture||""),a.bitness||""),a.mobile||!1),a.model||""),a.platform||""),a.platformVersion||""),a.uaFullVersion||""),(null==(b=a.fullVersionList)?void 0:b.map(function(c){var d=new KA;d=A(d,1,c.brand);return A(d,2,c.version)}))||[]),a.wow64||!1)}function aB(){var a,b;return null!=(b=null==(a=ZA())?void 0:a.then(function(c){return $A(c)}))?b:null};var cB=function(){new mz;vy();this.deviceId="";this.h=this.referrer=null;bB(this)},dB=function(){cB.h();var a="h.3.566.2";bz.j&&(a+="/vpaid_adapter");return a},bB=function(a){var b=aB();b&&b.then(function(c){if(null==c)c=null;else{c=ne(c);for(var d=[],e=0,f=0;f<c.length;f++){var g=c.charCodeAt(f);255<g&&(d[e++]=g&255,g>>=8);d[e++]=g}c=Ec(d,3)}a.h=c})};cB.h=function(){return J(cB)};var fB=function(a){var b=az(bz);if(b&&Yy(b,"forceCustomPlayback")||bz.j)return!0;if((lc||tu())&&a)return!1;a=a&&(lc||tu()||uu(10))&&bz.getDisableCustomPlaybackForIOS10Plus();return(kc||mc)&&!a||jc&&(!jc||!ru(qu,4))||eB()?!0:!1},gB=function(a){return null==a?!1:bz.j?!0:nc||lc||tu()?vu(a)?lc||tu()||uu(10)&&bz.getDisableCustomPlaybackForIOS10Plus()?!1:!0:!0:jc&&(!jc||!ru(qu,4))||eB()?!0:!1},hB=function(){var a=az(bz);return a&&Yy(a,"disableOnScreenDetection")?!1:!Jn()},eB=function(){return 1==iB()||
2==iB()},iB=function(){return(cB.h(),cB.h(),"tvos"==(cB.h(),null))?1:Kn()?2:0};var jB=function(a,b){return 0==a.indexOf(b)?a.substr(b.length):null};function kB(){var a=G(),b=document;return new Jt(a.parent===a?a.location.href:b.referrer)}function lB(a,b){Xt(a,"url","");try{var c=2083-a.toString().length-1;if(0>=c)return a.toString();for(var d=b.slice(0,c),e=encodeURIComponent(d),f=c;0<f&&e.length>c;)d=b.slice(0,f--),e=encodeURIComponent(d);Xt(a,"url",d)}catch(g){}return a.toString()};var mB=new function(){this.h=new Map;this.l=0;this.j=null!=window.fetch};function nB(a){var b=void 0===b?mB:b;var c=void 0===c?null:c;c=new Mu(a,c?c:c);a=c.url;c=c.h;var d=!1;d=void 0===d?!1:d;c=void 0===c?null:c;try{a=ju(a),d=d||Bu(a),b.j?wv(b,a,d,c):uv(b,a,d,c)}catch(e){}};var oB=function(){this.j=.01>Math.random();this.h=Math.floor(4503599627370496*Math.random())};
oB.prototype.report=function(a,b,c){b=void 0===b?{}:b;if(null==u.G_testRunner&&(this.j||(void 0===c?0:c))){b.lid=a;b.sdkv=dB();a=ni().sort().join(",");eb($f(a))||(b.e=a);b=pB(this,b);var d=new Jt("http://pagead2.googlesyndication.com/pagead/gen_204");jf(b,function(e,f){Xt(d,f,null==e?"":"boolean"===typeof e?e?"t":"f":""+e)},this);b=kB();Kt(d,b.o);b=d.toString();a=d.l.get("url");null!=a&&xb()&&2083<b.length&&(b=lB(d,a));nB(b)}};
var pB=function(a,b){b.id="ima_html5";var c=kB();b.c=a.h;b.domain=c.j;return b};oB.h=function(){return J(oB)};function Xh(a,b){return b instanceof RegExp?"__REGEXP"+b.toString():b}function qB(a,b){return b&&0==b.toString().indexOf("__REGEXP")?(a=b.split("__REGEXP")[1].match(/\/(.*)\/(.*)?/),new RegExp(a[1],a[2]||"")):b}var rB=function(a,b){Jy.call(this,b);this.B=a;this.h=null;this.C=new Qu(this);this.C.O(G(),"message",this.F)};t(rB,Jy);var sB=function(a){if(null==a||"string"!==typeof a||0!=a.lastIndexOf("ima://",0))return null;a=a.substr(6);try{return JSON.parse(a,qB)}catch(b){return null}};
rB.prototype.sendMessage=function(a,b,c){if(null!=this.h&&null!=this.h.postMessage){var d=this.h,e=d.postMessage,f={};f.name=a;f.type=b;null!=c&&(f.data=c);f.sid=this.l;f.channel=this.B;a=[];Zh(new Yh,f,a);e.call(d,"ima://"+a.join(""),"*")}null!=this.h&&null==this.h.postMessage&&oB.h().report(11)};rB.prototype.N=function(){df(this.C);this.h=null;Jy.prototype.N.call(this)};
rB.prototype.F=function(a){a=a.h;var b=sB(a.data);if(tB(this,b)){if(null==this.h)this.h=a.source,this.j||this.connect();else if(this.h!=a.source)return;tB(this,b)&&this.dispatchEvent(new Ly(b.name,b.type,b.data||{},b.sid,a.origin))}};var tB=function(a,b){if(null==b)return!1;var c=b.channel;if(null==c||c!=a.B)return!1;b=b.sid;return null==b||"*"!=a.l&&b!=a.l?!1:!0};var uB=function(){N.call(this);this.G=!1;this.h=null;this.B=this.F=this.L=!1;this.j=0;this.A=[];this.C=!1;this.P=this.M=Infinity;this.l=0;this.J=new Qu(this);ff(this,this.J);this.H={}};t(uB,N);
var wB=function(a,b){null==b||a.G||(a.h=b,vB(a),a.G=!0)},yB=function(a){null!=a.h&&a.G&&(xB(a),a.G=!1,a.F=!1,a.B=!1,a.j=0,a.A=[],a.C=!1)},vB=function(a){xB(a);!(a.h instanceof N)&&"ontouchstart"in document.documentElement&&nc?(a.H={touchstart:function(b){a.F=!0;a.j=b.touches.length;a.l&&(window.clearTimeout(a.l),a.l=0,a.L=!0);a.C=zB(a,b.touches)||1!=b.touches.length;a.C?(a.M=Infinity,a.P=Infinity):(a.M=b.touches[0].clientX,a.P=b.touches[0].clientY);b=b.touches;a.A=[];for(var c=0;c<b.length;c++)a.A.push(b[c].identifier)},
touchmove:function(b){a.j=b.touches.length;if(!uu(8)||Math.pow(b.changedTouches[0].clientX-a.M,2)+Math.pow(b.changedTouches[0].clientY-a.P,2)>Math.pow(5,2))a.B=!0},touchend:function(b){return void AB(a,b)}},jf(a.H,function(b,c){a.h.addEventListener(c,b,!1)})):a.J.O(a.h,"click",a.U)},xB=function(a){a.J.lb(a.h,"click",a.U);jf(a.H,function(b,c){this.h.removeEventListener(c,b,!1)},a);a.H={}},AB=function(a,b){!a.F||1!=a.j||a.B||a.L||a.C||!zB(a,b.changedTouches)||(a.l=window.setTimeout(function(){return void BB(a)},
300));a.j=b.touches.length;0==a.j&&(a.F=!1,a.B=!1,a.A=[]);a.L=!1};uB.prototype.U=function(){BB(this)};var zB=function(a,b){for(var c=0;c<b.length;c++)if(a.A.includes(b[c].identifier))return!0;return!1},BB=function(a){a.l=0;a.dispatchEvent(new Ej("click"))};uB.prototype.N=function(){yB(this);N.prototype.N.call(this)};var CB=function(a,b,c){this.j=c;0===b.length&&(b=[[]]);this.h=b.map(function(d){d=a.concat(d);for(var e=[],f=0,g=0;f<d.length;){var h=d[f++];if(128>h)e[g++]=String.fromCharCode(h);else if(191<h&&224>h){var k=d[f++];e[g++]=String.fromCharCode((h&31)<<6|k&63)}else if(239<h&&365>h){k=d[f++];var m=d[f++],n=d[f++];h=((h&7)<<18|(k&63)<<12|(m&63)<<6|n&63)-65536;e[g++]=String.fromCharCode(55296+(h>>10));e[g++]=String.fromCharCode(56320+(h&1023))}else k=d[f++],m=d[f++],e[g++]=String.fromCharCode((h&15)<<12|
(k&63)<<6|m&63)}return new RegExp(e.join(""))})};CB.prototype.match=function(a){var b=this;return this.h.some(function(c){c=a.match(c);return null==c?!1:!b.j||1<=c.length&&"3.566.2"===c[1]||2<=c.length&&"3.566.2"===c[2]?!0:!1})};
var DB=[104,116,116,112,115,63,58,47,47,105,109,97,115,100,107,92,46,103,111,111,103,108,101,97,112,105,115,92,46,99,111,109,47,106,115,47,40,115,100,107,108,111,97,100,101,114,124,99,111,114,101,41,47],EB=[104,116,116,112,115,63,58,47,47,115,48,92,46,50,109,100,110,92,46,110,101,116,47,105,110,115,116,114,101,97,109,47,104,116,109,108,53,47],FB=[[105,109,97,51,92,46,106,115],[105,109,97,51,95,100,101,98,117,103,92,46,106,115],[105,109,97,51,95,101,97,112,46,106,115]],GB=[[98,114,105,100,103,101,
40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[98,114,105,100,103,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,95,100,101,98,117,103,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[98,114,105,100,103,101,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108]],HB=[[111,117,116,115,116,114,101,
97,109,92,46,106,115],[111,117,116,115,116,114,101,97,109,95,100,101,98,117,103,92,46,106,115]],mf={Sg:new CB(DB,FB,!1),Qg:new CB(DB,GB,!0),oh:new CB(EB,FB,!1),nh:new CB(EB,GB,!0),Tg:new CB([104,116,116,112,115,63,58,47,47,105,109,97,115,100,107,92,46,103,111,111,103,108,101,97,112,105,115,92,46,99,111,109,47,112,114,101,114,101,108,101,97,115,101,47,106,115,47,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,47],FB,!1),Ph:new CB([104,116,116,112,115,63,58,47,47,40,112,97,103,101,97,100,50,124,116,
112,99,41,92,46,103,111,111,103,108,101,115,121,110,100,105,99,97,116,105,111,110,92,46,99,111,109,47,112,97,103,101,97,100,47,40,103,97,100,103,101,116,115,124,106,115,41,47],[],!1),Rg:new CB(DB,[[100,97,105,95,105,102,114,97,109,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[100,97,105,95,105,102,114,97,109,101,40,91,48,45,57,93,43,92,46,91,48,45,57,92,46,93,43,41,95,100,101,98,117,103,40,
95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108],[100,97,105,95,105,102,114,97,109,101,40,95,40,91,97,45,122,48,45,57,93,41,123,50,44,51,125,41,123,48,44,50,125,92,46,104,116,109,108]],!0),xh:new CB(DB,HB,!1),yh:new CB(DB,HB,!1)};function IB(a){for(var b={},c=0;c<a.length;b={Ub:b.Ub},c++)if(b.Ub=a[c],lf(function(d){return function(e){return e.match(d.Ub.src)}}(b)))return b.Ub;return null};var JB="abort canplay canplaythrough durationchange emptied loadstart loadeddata loadedmetadata progress ratechange seeked seeking stalled suspend waiting".split(" ");var KB=Gf(Ve(new Ue(Se,"https://pagead2.googlesyndication.com/omsdk/releases/live/omweb-v1.js"))),LB=Gf(Ve(new Ue(Se,"https://pagead2.googlesyndication.com/omsdk/releases/canary/omweb-v1.js"))),MB=Gf(Ve(new Ue(Se,"https://pagead2.googlesyndication.com/omsdk/releases/experimental/omweb-v1.js")));var PB=function(a,b){NB?a.srcdoc=b:(a=a.contentWindow)&&OB(a.document,b)},NB=hc&&"srcdoc"in og(document,"IFRAME"),OB=function(a,b){a.open("text/html","replace");Ig(a,Tf(b));a.close()};function QB(a){return(a=ug(a))&&a.omidSessionInterface?a.omidSessionInterface:null}
function RB(a,b){var c=qg("IFRAME",{sandbox:"allow-scripts allow-same-origin",style:"display: none"});a.appendChild(c);a=KB;ji(jj)?a=LB:ji(kj)&&(a=MB);a="<script src="+a.gb()+">\x3c/script>";b&&(a+="\n      <script>\n        window.addEventListener('message', function(e) {\n          if (e.data.type === 'innerBridgeIframeLoaded') {\n            window.frameElement.parentElement\n              .querySelector('#"+b+"').contentWindow\n              .postMessage({type: 'omidIframeLoaded'}, '*');\n          }\n        });\n      \x3c/script>\n    ");b=
new Promise(function(d,e){c.addEventListener("load",function(){QB(c)?d(c):e()})});PB(c,a);return b};var SB=function(a,b){N.call(this);this.j=QB(a);this.h=b};t(SB,N);var UB=function(a){try{a.j.registerSessionObserver(function(b){"sessionStart"==b.type?TB(a,a.h):"sessionFinish"==b.type&&UB(a)})}catch(b){a.dispatchEvent(new Event("error"))}},TB=function(a,b){b instanceof Sx&&(b=b.T);try{a.j.setVideoElement(b)}catch(c){a.dispatchEvent(new Event("error"))}};var VB=function(a){this.data=a};l=VB.prototype;l.getTotalAds=function(){return this.data.totalAds};l.getMaxDuration=function(){return this.data.maxDuration};l.getAdPosition=function(){return this.data.adPosition};l.getPodIndex=function(){return this.data.podIndex};l.getTimeOffset=function(){return this.data.timeOffset};l.getIsBumper=function(){return this.data.isBumper};VB.prototype.getIsBumper=VB.prototype.getIsBumper;VB.prototype.getTimeOffset=VB.prototype.getTimeOffset;
VB.prototype.getPodIndex=VB.prototype.getPodIndex;VB.prototype.getAdPosition=VB.prototype.getAdPosition;VB.prototype.getMaxDuration=VB.prototype.getMaxDuration;VB.prototype.getTotalAds=VB.prototype.getTotalAds;var WB=function(a){this.xa=a};l=WB.prototype;l.getContent=function(){return this.xa.content};l.getContentType=function(){return this.xa.contentType};l.getWidth=function(){return this.getSize().width};l.getHeight=function(){return this.getSize().height};l.getAdSlotId=function(){return this.xa.adSlotId};l.getSize=function(){return this.xa.size};l.Xd=function(){return this.xa.resourceType};var Vy=function(a){return(a=a.xa.backupCompanions)?a.map(function(b){return new WB(b)}):[]};
WB.prototype.getAdSlotId=WB.prototype.getAdSlotId;WB.prototype.getHeight=WB.prototype.getHeight;WB.prototype.getWidth=WB.prototype.getWidth;WB.prototype.getContentType=WB.prototype.getContentType;WB.prototype.getContent=WB.prototype.getContent;var XB=function(a,b){this.j=a;this.h=b};XB.prototype.getAdIdValue=function(){return this.j};XB.prototype.getAdIdRegistry=function(){return this.h};XB.prototype.getAdIdRegistry=XB.prototype.getAdIdRegistry;XB.prototype.getAdIdValue=XB.prototype.getAdIdValue;var Y=function(a){this.h=a};Y.prototype.getAdId=function(){return this.h.adId};Y.prototype.getCreativeAdId=function(){return this.h.creativeAdId};Y.prototype.getCreativeId=function(){return this.h.creativeId};var YB=function(a){return a.h.adQueryId};l=Y.prototype;l.getAdSystem=function(){return this.h.adSystem};l.getAdvertiserName=function(){return this.h.advertiserName};l.getApiFramework=function(){return this.h.apiFramework};l.getWrapperAdIds=function(){return this.h.adWrapperIds};
l.getWrapperCreativeIds=function(){return this.h.adWrapperCreativeIds};l.getWrapperAdSystems=function(){return this.h.adWrapperSystems};l.isLinear=function(){return this.h.linear};l.isSkippable=function(){return this.h.skippable};l.getContentType=function(){return this.h.contentType};l.getDescription=function(){return this.h.description};l.getTitle=function(){return this.h.title};l.getDuration=function(){return this.h.duration};l.getVastMediaWidth=function(){return this.h.vastMediaWidth};
l.getVastMediaHeight=function(){return this.h.vastMediaHeight};l.getWidth=function(){return this.h.width};l.getHeight=function(){return this.h.height};l.getUiElements=function(){return this.h.uiElements};l.getMinSuggestedDuration=function(){return this.h.minSuggestedDuration};l.getAdPodInfo=function(){return new VB(this.h.adPodInfo)};
l.getCompanionAds=function(a,b,c){if(!this.h.companions)return[];var d=this.h.companions.map(function(e){return new WB(e)});return Uy(new Ry({size:new E(a,b),Ud:c?"SelectFluid"==c.sizeCriteria:!1},c),d)};l.getTraffickingParameters=function(){return Iu($f(this.h.traffickingParameters))};l.getTraffickingParametersString=function(){return this.h.traffickingParameters};l.getVastMediaBitrate=function(){return this.h.vastMediaBitrate};l.getMediaUrl=function(){return this.h.mediaUrl};l.getSurveyUrl=function(){return this.h.surveyUrl};
l.getDealId=function(){return this.h.dealId};l.getUniversalAdIds=function(){return(this.h.universalAdIds||[]).map(function(a){return new XB(a.adIdValue,a.adIdRegistry)})};l.getUniversalAdIdValue=function(){return this.h.universalAdIdValue};l.getUniversalAdIdRegistry=function(){return this.h.universalAdIdRegistry};l.getSkipTimeOffset=function(){return this.h.skipTimeOffset};l.ce=function(){return this.h.disableUi};Y.prototype.isUiDisabled=Y.prototype.ce;Y.prototype.getSkipTimeOffset=Y.prototype.getSkipTimeOffset;
Y.prototype.getUniversalAdIdRegistry=Y.prototype.getUniversalAdIdRegistry;Y.prototype.getUniversalAdIdValue=Y.prototype.getUniversalAdIdValue;Y.prototype.getUniversalAdIds=Y.prototype.getUniversalAdIds;Y.prototype.getDealId=Y.prototype.getDealId;Y.prototype.getSurveyUrl=Y.prototype.getSurveyUrl;Y.prototype.getMediaUrl=Y.prototype.getMediaUrl;Y.prototype.getVastMediaBitrate=Y.prototype.getVastMediaBitrate;Y.prototype.getTraffickingParametersString=Y.prototype.getTraffickingParametersString;
Y.prototype.getTraffickingParameters=Y.prototype.getTraffickingParameters;Y.prototype.getCompanionAds=Y.prototype.getCompanionAds;Y.prototype.getAdPodInfo=Y.prototype.getAdPodInfo;Y.prototype.getMinSuggestedDuration=Y.prototype.getMinSuggestedDuration;Y.prototype.getUiElements=Y.prototype.getUiElements;Y.prototype.getHeight=Y.prototype.getHeight;Y.prototype.getWidth=Y.prototype.getWidth;Y.prototype.getVastMediaHeight=Y.prototype.getVastMediaHeight;Y.prototype.getVastMediaWidth=Y.prototype.getVastMediaWidth;
Y.prototype.getDuration=Y.prototype.getDuration;Y.prototype.getTitle=Y.prototype.getTitle;Y.prototype.getDescription=Y.prototype.getDescription;Y.prototype.getContentType=Y.prototype.getContentType;Y.prototype.isSkippable=Y.prototype.isSkippable;Y.prototype.isLinear=Y.prototype.isLinear;Y.prototype.getWrapperAdSystems=Y.prototype.getWrapperAdSystems;Y.prototype.getWrapperCreativeIds=Y.prototype.getWrapperCreativeIds;Y.prototype.getWrapperAdIds=Y.prototype.getWrapperAdIds;
Y.prototype.getApiFramework=Y.prototype.getApiFramework;Y.prototype.getAdvertiserName=Y.prototype.getAdvertiserName;Y.prototype.getAdSystem=Y.prototype.getAdSystem;Y.prototype.getCreativeId=Y.prototype.getCreativeId;Y.prototype.getCreativeAdId=Y.prototype.getCreativeAdId;Y.prototype.getAdId=Y.prototype.getAdId;var ZB=function(a){this.h=a};ZB.prototype.getCuePoints=function(){return this.h};ZB.prototype.getCuePoints=ZB.prototype.getCuePoints;var $B=function(){this.autoAlign=!0;this.bitrate=-1;this.enablePreloading=this.disableUi=this.disableClickThrough=!1;this.loadVideoTimeout=8E3;this.mimeTypes=null;this.playAdsAfterTime=-1;this.restoreCustomPlaybackStateOnAdBreakComplete=!1;this.uiElements=null;this.useStyledNonLinearAds=this.useStyledLinearAds=this.useLearnMoreButton=!1;this.useVideoAdUi=!0},aC=function(a,b){var c={};Object.assign(c,a);b&&(c.disableClickThrough=!0);return c};
$B.prototype.append=function(a){if(a){null!=a.autoAlign&&(this.autoAlign=a.autoAlign);var b=eg(a.bitrate);"number"===typeof b&&!isNaN(b)&&0<b&&(this.bitrate=b);this.disableClickThrough=a.disableClickThrough||this.disableClickThrough;this.disableUi=a.disableUi||this.disableUi;this.enablePreloading=a.enablePreloading||this.enablePreloading;a.mimeTypes&&0!=a.mimeTypes.length&&(this.mimeTypes=a.mimeTypes);b=eg(a.playAdsAfterTime);"number"===typeof b&&!isNaN(b)&&0<b&&(this.playAdsAfterTime=b);this.restoreCustomPlaybackStateOnAdBreakComplete=
a.restoreCustomPlaybackStateOnAdBreakComplete||this.restoreCustomPlaybackStateOnAdBreakComplete;b=eg(a.loadVideoTimeout);"number"===typeof b&&!isNaN(b)&&0<b&&(this.loadVideoTimeout=b);this.uiElements=a.uiElements||this.uiElements;this.useLearnMoreButton=a.useLearnMoreButton||this.useLearnMoreButton;this.useStyledLinearAds=a.useStyledLinearAds||this.useStyledLinearAds;this.useStyledNonLinearAds=a.useStyledNonLinearAds||this.useStyledNonLinearAds;this.useVideoAdUi=!1===a.useVideoAdUi?!1:this.useVideoAdUi}};
w("module$contents$ima$AdsRenderingSettings_AdsRenderingSettings.AUTO_SCALE",-1);var bC=null,cC=function(){N.call(this);this.h=null;this.B=new Qu(this);ff(this,this.B);this.j=new Map;this.A=new Map;this.l=this.F=!1;this.C=null},dC;t(cC,N);var eC=function(){null==bC&&(bC=new cC);return bC},is=function(a,b,c){var d={};d.queryId=b;d.viewabilityData=c;a.h&&Ky(a.h,"activityMonitor","viewabilityMeasurement",d)};cC.prototype.destroy=function(){this.B.lb(this.h,"activityMonitor",this.G);this.l=!1;this.j.clear();this===dC&&(dC=null)};cC.prototype.N=function(){this.destroy();N.prototype.N.call(this)};
cC.prototype.init=function(a){if(!this.l){if(this.h=a||null)this.B.O(this.h,"activityMonitor",this.G),fC(this);if(!(u.ima&&u.ima.video&&u.ima.video.client&&u.ima.video.client.tagged)){w("ima.video.client.sdkTag",!0);var b=u.document;a=og(document,"SCRIPT");var c=Gf(Ve(new Ue(Se,"https://s0.2mdn.net/instream/video/client.js")));a.src=Ff(c);Hg(a);a.async=!0;a.type="text/javascript";b=b.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}jm();J(Zr).J=bz.h;this.F=!0;J(Zr).l=!0;this.C=null;
a=J(Zr);b="h"==Kr(a)||"b"==Kr(a);c=!(P(),!1);b&&c&&(a.F=!0,a.H=new eq);this.l=!0}};
var hC=function(a){if(null==a)return!1;if((kc||mc)&&null!=a.webkitDisplayingFullscreen)return a.webkitDisplayingFullscreen;a=gC(a);var b=window.screen.availHeight||window.screen.height;return 0>=(window.screen.availWidth||window.screen.width)-a.width&&42>=b-a.height},gC=function(a){var b={left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight};try{"function"===typeof a.getBoundingClientRect&&tg(gg(a),a)&&(b=a.getBoundingClientRect())}catch(c){}return b},iC=function(a,b,c,d,e){e=
void 0===e?{}:e;if(a.l){d&&null==e.opt_osdId&&(e.opt_osdId=d);if(a.C)return a.C(b,c,e);if(a=d?a.A.get(d):bz.o)null==e.opt_fullscreen&&(e.opt_fullscreen=hC(a)),null==e.opt_adElement&&(e.opt_adElement=a);return zs.kb(469,Va(ls,b,c,e))||{}}return{}},jC=function(a){var b;0!=bz.h?b=J(Zr).l:b=a.F;return b},kC=function(a,b){var c=String(Math.floor(1E9*Math.random()));a.A.set(c,b);if(ji(sj))try{rl(function(d){if(a.h){var e={};e.engagementString=d;Ky(a.h,"activityMonitor","engagementData",e)}},function(){return b})}catch(d){}0!=
bz.h&&js(J(Zr),c,a);return c},lC=function(a,b,c){if(c)a.j.get(c)==b&&a.j.delete(c);else{var d=[];a.j.forEach(function(e,f){e==b&&d.push(f)});d.forEach(a.j.delete,a.j)}},es=function(a,b){a=a.j.get(b);return"function"===typeof a?a():{}},fC=function(a){if("function"===typeof window.Goog_AdSense_Lidar_getUrlSignalsArray){var b={};b.pageSignals=window.Goog_AdSense_Lidar_getUrlSignalsArray();Ky(a.h,"activityMonitor","pageSignals",b)}};
cC.prototype.G=function(a){var b=a.ra,c=b.queryId,d={},e=null;d.eventId=b.eventId;switch(a.messageType){case "getPageSignals":fC(this);break;case "reportVastEvent":e=b.vastEvent;a=b.osdId;var f={};f.opt_fullscreen=b.isFullscreen;b.isOverlay&&(f.opt_bounds=b.overlayBounds);d.viewabilityData=iC(this,e,c,a,f);Ky(this.h,"activityMonitor","viewability",d);break;case "fetchAdTagUrl":c={},c.eventId=b.eventId,a=b.osdId,sf(b,"isFullscreen")&&(e=b.isFullscreen),sf(b,"loggingId")&&(b=b.loggingId,c.loggingId=
b,oB.h().report(43,{step:"beforeLookup",logid:b,time:Date.now()})),c.engagementString=mC(this,a,e),this.h&&Ky(this.h,"activityMonitor","engagement",c)}};var mC=function(a,b,c){var d=b?a.A.get(b):bz.o;a={};null!=c&&(a.fullscreen=c);c="";try{c=ql(function(){return d},a)}catch(e){c="sdktle;"+Yf(e.name,12)+";"+Yf(e.message,40)}return c};w("ima.common.getVideoMetadata",function(a){return es(eC(),a)});w("ima.common.triggerViewabilityMeasurementUpdate",function(a,b){is(eC(),a,b)});var nC=function(a){this.h=a;this.l="";this.j=-1;this.o=!1},pC=function(a,b){if(0<=a.j){var c=null==b?function(){}:b,d=function(){oC(a,c);a.h.removeEventListener("loadedmetadata",d,!1)};a.h.addEventListener("loadedmetadata",d,!1);a.h.src=a.l;a.h.load()}else null!=b&&b()},oC=function(a,b){var c=0<a.h.seekable.length;a.o?c?(a.h.currentTime=a.j,qC(a),b()):setTimeout(function(){return void oC(a,b)},100):(qC(a),b())},qC=function(a){a.j=-1;a.l="";a.o=!1};var rC=new E(5,5),sC=function(a){N.call(this);this.h=a;this.aa=null;this.B=new nC(a);this.j=new Qu(this);ff(this,this.j);this.A=0;this.J=this.F=this.M=this.Z=this.H=!1;this.L=this.l=null;this.U=new E(this.h.offsetWidth,this.h.offsetHeight);this.Ra=null;this.V=hC(this.h);this.Y=!1};t(sC,N);l=sC.prototype;l.Gd=function(){var a=this.B;a.l=a.h.currentSrc;a.o=0<a.h.seekable.length;a.j=a.h.ended?-1:a.h.currentTime};l.Zb=function(a){pC(this.B,a)};
l.load=function(a,b){var c=K.h().h;c.V=!0;Jh(c);Uh("hvd_lc");tC(this);this.M=!1;if(b)if(Uh("hvd_ad"),b instanceof Ht){if(Uh("hvd_mad"),c=b.getMediaUrl()){Uh("hvd_admu");Uh("hvd_src");this.h.src=c;this.h.load();return}}else if(b instanceof Gt){Uh("hvd_dad");c=b.o;var d=b.j,e=b.l,f=b.h,g=b.Za,h=b.Ta;if(c&&d&&e&&f&&g&&h&&(Uh("hvd_addu"),b.Aa)){Uh("hvd_admse");b=e+'; codecs="'+g+'"';f=f+'; codecs="'+h+'"';if(bx()&&bx()&&MediaSource.isTypeSupported(b)&&bx()&&MediaSource.isTypeSupported(f)){Uh("hvd_ymse");
Uh("hvd_mse");a=!1;try{-1!=window.location.search.indexOf("goog_limavideo=true")&&(a=!0)}catch(k){}u.customElements?a?a=!0:(ji(tj)&&oB.h().report(153,{limvid:"vd"}),a=ji(tj)||ji(nj)||ji(rj)||ji(qj)||ji(oj)||ji(pj)||ji(lj)||ji(mj)?!0:!1):a=!1;a&&this.h instanceof Sx?(a=this.h,a.tb=c,a.Jb=d):(this.aa=new py(this.h,[new ex(c,b,35E4,new Bv),new ex(d,f,82E3,new Bv)]),ff(this,this.aa),c=this.h,d=this.aa,d.h||(d.h=window.URL.createObjectURL(d.ga)),d=d.h,c.src=d);this.h.load();return}Uh("hvd_nmse")}}else Uh("hvd_uad");
a?(Uh("hvd_src"),this.h.src=a):Uh("hvd_vn");this.h.load()};l.setVolume=function(a){this.h.volume=Math.max(a,0);this.h.muted=0==a?!0:!1};l.getVolume=function(){return this.h.muted?0:this.h.volume};var uC=function(a){a.Y=!1;a.M||xb()?(a.J=!1,a.l=a.h.play(),null!=a.l&&(a.L=null,a.l.then(function(){a.l=null;a.ee(a.L);a.L=null}).catch(function(b){a.l=null;var c="";null!=b&&null!=b.name&&(c=b.name);"AbortError"==c||"NotAllowedError"==c?a.dispatchEvent("autoplayDisallowed"):a.da()}))):a.J=!0};
sC.prototype.pause=function(){null==this.l&&(this.Y=!0,this.h.pause())};sC.prototype.getCurrentTime=function(){return this.h.currentTime};sC.prototype.getDuration=function(){return isNaN(this.h.duration)?-1:this.h.duration};sC.prototype.N=function(){if(this.Ra){var a=Cu.get(this.Ra);Fu(a)}vC(this);N.prototype.N.call(this)};var vC=function(a){null!=a.C&&(yB(a.C),a.C=null);null!=a.P&&a.P.W();Uu(a.j);tC(a)},tC=function(a){a.Z=!1;a.F=!1;a.H=!1;a.J=!1;a.A=0;a.l=null;a.L=null;df(a.G)};sC.prototype.rb=function(a){this.dispatchEvent(a.type)};
var xC=function(a){if(!a.F){a.F=!0;a.dispatchEvent("start");try{if(ji(tj)&&u.customElements){var b=u.customElements.get("lima-video");a.h instanceof b?oB.h().report(153,{limvid:"limastart"}):oB.h().report(153,{limvid:"videostart"})}}catch(c){oB.h().report(153,{limvid:"startfail"})}b="function"===typeof a.h.getAttribute&&null!=a.h.getAttribute("playsinline");b=void 0===b?!1:b;(lc||tu()||uu(10))&&(b||(cB.h(),1))||(cB.h(),ib(qb(),"Xbox"))||(kc||mc?0:(!jc||jc&&ru(qu,4))&&(Jn()?(cB.h(),!1):!eB()))||!jc||
jc&&ru(qu,3)||(kc||mc)&&!uu(4)||wC(a)}};l=sC.prototype;l.Kf=function(){this.M=!0;this.J&&uC(this);this.J=!1;yC(this)};l.Lf=function(){this.Z||(this.Z=!0,this.dispatchEvent("loaded"))};l.ee=function(a){null!=this.l?this.L=a:(this.dispatchEvent("play"),nc||lc||tu()||zc||xC(this))};
l.Of=function(a){if(!this.F&&(nc||lc||tu()||zc)){if(0>=this.getCurrentTime())return;if(zc&&this.h.ended&&1==this.getDuration()){this.da(a);return}xC(this)}if(nc||ib(qb(),"Nintendo WiiU")){if(1.5<this.getCurrentTime()-this.A){this.H=!0;this.h.currentTime=this.A;return}this.H=!1;this.getCurrentTime()>this.A&&(this.A=this.getCurrentTime())}this.dispatchEvent("timeUpdate")};l.Pf=function(){this.dispatchEvent("volumeChange")};
l.Nf=function(){if(this.F&&nc&&!this.Y&&(2>zC(this)||this.H)){this.G=new Jk(250);this.j.O(this.G,"tick",this.Ja);this.G.start();var a=!0}else a=!1;a||this.l||this.dispatchEvent("pause")};l.Jf=function(){var a=!0;if(nc||ib(qb(),"Nintendo WiiU"))a=this.A>=this.h.duration-1.5;!this.H&&a&&this.dispatchEvent("end")};var wC=function(a){a.dispatchEvent("beginFullscreen")};sC.prototype.ka=function(){this.dispatchEvent("endFullscreen")};sC.prototype.da=function(){this.dispatchEvent("error")};
sC.prototype.ua=function(){this.dispatchEvent("click")};var yC=function(a){a.h instanceof HTMLElement&&(a.Ra=Gu(a.h,rC),a.Ra.then(function(b){a.wa()||L(K.h(),"ps",b.width+"x"+b.height)}))};sC.prototype.pb=function(){var a=new E(this.h.offsetWidth,this.h.offsetHeight),b=hC(this.h);if(a.width!=this.U.width||a.height!=this.U.height)!this.V&&b?wC(this):this.V&&!b&&this.ka(),this.U=a,this.V=b};
sC.prototype.Ja=function(){if(!this.h.ended&&this.h.paused&&(nc||Ac?this.h.currentTime<this.h.duration:1)){var a=this.h.duration-this.h.currentTime,b=zC(this);0<b&&(2<=b||2>a)&&(df(this.G),uC(this))}else df(this.G)};var zC=function(a){var b;a:{for(b=a.h.buffered.length-1;0<=b;){if(a.h.buffered.start(b)<=a.h.currentTime){b=a.h.buffered.end(b);break a}b--}b=0}return b-a.h.currentTime};sC.prototype.sb=function(){oB.h().report(139);wC(this)};var BC=function(a,b,c,d){D.call(this);this.B=a;this.A=b;this.l=c;this.C=d;this.o=!1;a=new Qu(this);ff(this,a);this.h=this.j=null;AC(this)};t(BC,D);
var DC=function(a){a.o=!0;CC(a)},AC=function(a){RB(a.B,a.C).then(function(b){return void EC(a,b)}).catch(function(){return void FC(a)})},CC=function(a){a.j&&a.o&&ug(a.j).postMessage({type:"innerBridgeIframeLoaded"},"*")},EC=function(a,b){a.j=b;a.h=new SB(b,a.l);a.h.O("error",function(){return void FC(a)});UB(a.h);CC(a)},FC=function(a){Ky(a.A,"omid","iframeFailed");a.W()};BC.prototype.N=function(){this.j&&(rg(this.j),this.j=null);D.prototype.N.call(this)};var GC=function(a,b,c,d){D.call(this);this.o=a;this.l=b;this.h=c;this.C=d;this.j=new Qu(this);ff(this,this.j);this.j.O(this.o,d,this.B)};t(GC,D);
var IC=function(a,b){var c=b.ra;switch(b.messageType){case "showVideo":c=a.l;null!=c.j&&HC(c.j.h,!0);break;case "hide":c=a.l;null!=c.j&&HC(c.j.h,!1);break;case "resizeAndPositionVideo":a=a.l.h;c=new $g(c.x,c.y,c.width,c.height);a.h.style.left=String(c.left)+"px";a.h.style.top=String(c.top)+"px";a.h.style.width=String(c.width)+"px";a.h.style.height=String(c.height)+"px";break;case "restoreSizeAndPositionVideo":c=a.l.h,c.h.style.width="100%",c.h.style.height="100%",c.h.style.left="0",c.h.style.right=
"0"}};
GC.prototype.B=function(a){var b=a.ra;switch(a.messageType){case "activate":a=this.l;var c=this.h;a.h!=c&&a.j&&a.o&&a.l&&(c.setVolume(a.h.getVolume()),c=a.h,a.h=a.l,a.l=c,c=a.j,a.j=a.o,a.o=c,HC(a.o.h,!1),null!=(c=a.K.F)&&(a=a.h.B.h,c.l=a,c.h&&(c=c.h,c.h=a,TB(c,a))));break;case "startTracking":a=this.h;c=this.A;this.j.O(a,pf(xv),c);this.j.O(a,JB,c);a=this.h;vC(a);a.j.O(a.h,JB,a.rb);a.j.O(a.h,"ended",a.Jf);a.j.O(a.h,"webkitbeginfullscreen",a.sb);a.j.O(a.h,"webkitendfullscreen",a.ka);a.j.O(a.h,"loadedmetadata",
a.Kf);a.j.O(a.h,"pause",a.Nf);a.j.O(a.h,"playing",a.ee);a.j.O(a.h,"timeupdate",a.Of);a.j.O(a.h,"volumechange",a.Pf);a.j.O(a.h,"error",a.da);a.j.O(a.h,zc||nc&&!uu(8)?"loadeddata":"canplay",a.Lf);a.C=new uB;a.j.O(a.C,"click",a.ua);wB(a.C,a.h);a.P=new Jk(1E3);a.j.O(a.P,"tick",a.pb);a.P.start();break;case "stopTracking":a=this.h;c=this.A;this.j.lb(a,pf(xv),c);this.j.lb(a,JB,c);vC(this.h);break;case "exitFullscreen":a=this.h;(kc||mc)&&a.h.webkitDisplayingFullscreen&&a.h.webkitExitFullscreen();break;case "play":uC(this.h);
break;case "pause":this.h.pause();break;case "load":a=this.h;c=b.videoUrl;var d=b.muxedMediaUrl,e=b.muxedMimeType,f=b.muxedAudioCodec,g=b.muxedVideoCodec,h=b.demuxedAudioUrl,k=b.demuxedVideoUrl,m=b.demuxedAudioMimeType,n=b.demuxedVideoMimeType,r=b.demuxedAudioCodec,v=b.demuxedVideoCodec;b=b.mseCompatible;var y=null;k&&h&&b&&n&&m&&v&&r&&(y=new Gt({jg:k,Ze:h,yi:null,gi:null,ig:n,Ye:m,Za:v,Ta:r,height:null,width:null,Aa:b,xi:null,fi:null}));h=null;d&&e&&g&&f&&(h=new Ht({Hf:d,mi:null,mimeType:e,Za:g,
Ta:f,height:null,width:null,Aa:b,ki:null}));y?a.load(c,y):h?a.load(c,h):a.load(c,null);break;case "unload":a=this.h;tC(a);a.M=!1;"removeAttribute"in a.h?a.h.removeAttribute("src"):a.h.src="";a.h.load();break;case "setCurrentTime":this.h.h.currentTime=b.currentTime;break;case "setVolume":this.h.setVolume(b.volume)}};
GC.prototype.A=function(a){var b={};switch(a.type){case "autoplayDisallowed":a="autoplayDisallowed";break;case "beginFullscreen":a="fullscreen";break;case "endFullscreen":a="exitFullscreen";break;case "click":a="click";break;case "end":a="end";break;case "error":a="error";break;case "loaded":a="loaded";break;case "mediaLoadTimeout":a="mediaLoadTimeout";break;case "pause":a="pause";b.ended=this.h.h.ended;break;case "play":a="play";break;case "skip":a="skip";break;case "start":a="start";b.volume=this.h.getVolume();
break;case "timeUpdate":a="timeupdate";b.currentTime=this.h.getCurrentTime();b.duration=this.h.getDuration();break;case "volumeChange":a="volumeChange";b.volume=this.h.getVolume();break;case "loadedmetadata":a=a.type;b.duration=this.h.getDuration();break;case "abort":case "canplay":case "canplaythrough":case "durationchange":case "emptied":case "loadstart":case "loadeddata":case "progress":case "ratechange":case "seeked":case "seeking":case "stalled":case "suspend":case "waiting":a=a.type;break;default:return}Ky(this.o,
this.C,a,b)};var JC=function(a,b){D.call(this);this.j=b;this.l=new GC(a,b,this.j.h,"videoDisplay1");ff(this,this.l);this.h=null;var c=this.j.l;null!=c&&(this.h=new GC(a,b,c,"videoDisplay2"),ff(this,this.h))};t(JC,D);var KC=function(a,b,c,d){var e=Wg("IFRAME");e.id=b;e.name=b;e.width=String(c);e.height=String(d);e.allowTransparency="true";e.scrolling="no";e.marginWidth="0";e.marginHeight="0";e.frameBorder="0";e.style.border="0";e.style.verticalAlign="bottom";e.src="about:blank";e.setAttribute("role","region");e.setAttribute("aria-label","Advertisement");e.title="3rd party ad content";e.tabIndex=0;a.appendChild(e);return e};function LC(a){return Tf(null===a?"null":void 0===a?"undefined":a)};function MC(){var a;var b=G();b=void 0===b?window:b;b=void 0===b?window:b;b=b.googletag;b=(null==b?0:b.apiReady)?b:void 0;return null==b?void 0:null==(a=b.companionAds)?void 0:a.call(b)}function NC(a){var b={};b.slotId=a.getSlotId().getId();var c=[];a=q(a.getSizes()||[]);for(var d=a.next();!d.done;d=a.next())if(d=d.value,"string"!==typeof d){var e={};c.push((e.adWidth=d.getWidth(),e.adHeight=d.getHeight(),e))}else"fluid"===d&&(d={},c.push((d.fluidSize=!0,d)));return b.adSizes=c,b}
function OC(a){var b=MC();if(b&&a&&Array.isArray(a)){var c=new Map(b.getSlots().map(function(v){return[v.getSlotId().getId(),v]}));a=q(a);for(var d=a.next();!d.done;d=a.next()){var e=d.value,f=c.get(e.slotId);if(f&&!b.isSlotAPersistentRoadblock(f)){var g=e.adContent;if(g&&(d=ig(f.getSlotId().getDomId()))){d.style.display="";var h=e.adWidth,k=e.adHeight;e.fluidSize&&(k=jl(d),h=k.width,k=k.height);d.textContent="";if(e.friendlyIframeRendering)try{var m="google_companion_"+f.getSlotId().getId(),n=KC(d,
m,h,k),r=n.contentWindow?n.contentWindow.document:n.contentDocument;gc&&r.open("text/html","replace");Ig(r,LC(g));r.close()}catch(v){}else Gg(d,LC(g)),d.style.width=h+"px",d.style.height=k+"px";b.slotRenderEnded(f,h,k);(e=e.onAdContentSet)&&e(d)}}}}};var PC=function(a,b,c,d,e,f){Ly.call(this,a,b,c,d,e);this.h=f};t(PC,Ly);var QC=function(a,b){N.call(this);this.A=a;this.l=b;this.h={};this.j=new Qu(this);ff(this,this.j);this.j.O(G(),"message",this.B)};t(QC,N);var RC=function(a,b){var c=b.h;a.h.hasOwnProperty(c)&&Ky(a.h[c],b.type,b.messageType,b.ra)},SC=function(a,b,c,d){a.h.hasOwnProperty(b)||(c=new rB(b,c),a.j.O(c,a.A,function(e){this.dispatchEvent(new PC(e.type,e.messageType,e.ra,e.Xb,e.origin,b))}),c.h=d,c.connect(),a.h[b]=c)};QC.prototype.N=function(){for(var a in this.h)df(this.h[a]);N.prototype.N.call(this)};
QC.prototype.B=function(a){a=a.h;var b=sB(a.data);if(null!=b){var c=b.channel;if(this.l&&!this.h.hasOwnProperty(c)){var d=b.sid;SC(this,c,d,a.source);this.dispatchEvent(new PC(b.name,b.type,b.data||{},d,a.origin,c))}}};function TC(){return!!La("googletag.cmd",G())}function UC(){var a=La("googletag.console",G());return null!=a?a:null}var VC=function(){Qu.call(this);this.l=new QC("gpt",!0);ff(this,this.l);this.O(this.l,"gpt",this.B);this.h=null;TC()||G().top===G()||(this.h=new QC("gpt",!1),ff(this,this.h),this.O(this.h,"gpt",this.A))};t(VC,Qu);
VC.prototype.B=function(a){var b=a.origin,c="//imasdk.googleapis.com".match(yg);b=b.match(yg);if(c[3]==b[3]&&c[4]==b[4])if(null!=this.h)SC(this.h,a.h,a.Xb,G().parent),null!=this.h&&RC(this.h,a);else if(c=a.ra,null!=c&&void 0!==c.scope){b=c.scope;c=c.args;var d;if("proxy"==b){var e=a.messageType;"isGptPresent"==e?d=TC():"isConsolePresent"==e&&(d=null!=UC())}else if(TC())if("pubads"==b||"companionAds"==b){d=a.messageType;var f=G().googletag;if(null!=f&&null!=f[b]&&(b=f[b](),null!=b&&(d=b[d],null!=d)))try{e=
d.apply(b,c)}catch(g){}d=e}else if("console"==b){if(e=UC(),null!=e&&(b=e[a.messageType],null!=b))try{b.apply(e,c)}catch(g){}}else null===b&&(e=a.messageType,"googleGetCompanionAdSlots"==e?(e=MC())?(e=e.getSlots().map(NC),d=e.length?e:null):d=null:("googleSetCompanionAdContents"==e&&OC(c[0]),d=null));void 0!==d&&(a.ra.returnValue=d,RC(this.l,a))}};VC.prototype.A=function(a){RC(this.l,a)};var WC=function(a,b){if(a.h){var c=a.h;df(c.h[b]);delete c.h[b]}a.l&&(a=a.l,df(a.h[b]),delete a.h[b])};var YC=function(a,b){var c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\- \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(e,f,g,h,k,m,n,r){if("%"==m)return"%";var v=c.shift();if("undefined"==typeof v)throw Error("[goog.string.format] Not enough arguments");arguments[0]=v;return XC[m].apply(null,arguments)})},XC={s:function(a,b,c){return isNaN(c)||""==c||a.length>=Number(c)?a:a=-1<b.indexOf("-",0)?
a+Zf(" ",Number(c)-a.length):Zf(" ",Number(c)-a.length)+a},f:function(a,b,c,d,e){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));var f=0>Number(a)?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=Number(a)&&(d=f+d);if(isNaN(c)||d.length>=Number(c))return d;d=isNaN(e)?Math.abs(Number(a)).toString():Math.abs(Number(a)).toFixed(e);a=Number(c)-d.length-f.length;return d=0<=b.indexOf("-",0)?f+d+Zf(" ",a):f+Zf(0<=b.indexOf("0",0)?"0":" ",a)+d},d:function(a,b,c,d,e,f,g,h){return XC.f(parseInt(a,
10),b,c,d,0,f,g,h)}};XC.i=XC.d;XC.u=XC.d;function ZC(){return["autoplay","attribution-reporting"].filter(function(a){var b=document.featurePolicy;return void 0!==b&&"function"==typeof b.allowedFeatures&&"object"==typeof b.allowedFeatures()&&b.allowedFeatures().includes(a)}).join(";")}
var aD=function(a,b){N.call(this);this.l=new Qu(this);ff(this,this.l);this.L=this.J=null;this.H=!1;this.C="goog_"+ag++;this.B=new Map;var c=this.C,d=(Tg()?"https:":"http:")+YC("//imasdk.googleapis.com/js/core/bridge3.566.2_%s.html",bz.getLocale());a:{var e=window;try{do{try{if(0==e.location.href.indexOf(d)||0==e.document.referrer.indexOf(d)){var f=!0;break a}}catch(k){}e=e.parent}while(e!=e.top)}catch(k){}f=!1}f&&(d+="?f="+c);f=window.document;if(qv.length&&f.head){e=q(qv);for(var g=e.next();!g.done;g=
e.next())if((g=g.value)&&f.head){var h=Wg("META");f.head.appendChild(h);h.httpEquiv="origin-trial";h.content=g}}f=ZC();c=qg("IFRAME",{src:d+"#"+c,allowFullscreen:!0,allow:f,id:c,style:"border:0; opacity:0; margin:0; padding:0; position:relative; color-scheme: light;"});this.l.Ob(c,"load",this.Z);a.appendChild(c);this.h=c;this.A=$C(this);this.G=b;this.j=null;this.M=new JC(this.A,this.G);ff(this,this.M);this.G.h&&this.l.O(this.A,"displayContainer",this.U);this.l.O(this.A,"mouse",this.V);this.l.O(this.A,
"touch",this.Y);c=G();d=La("google.ima.gptProxyInstance",c);null!=d?c=d:(d=new VC,w("google.ima.gptProxyInstance",d,c),c=d);this.P=c;eB()||(this.F=new BC(a,this.A,b.h.B.h,this.C),ff(this,this.F))};t(aD,N);var $C=function(a,b){b=void 0===b?"*":b;var c=a.B.get(b);null==c&&(c=new rB(a.C,b),a.H&&(c.h=ug(a.h),c.connect()),a.B.set(b,c));return c};aD.prototype.N=function(){null!==this.j&&(this.j.W(),this.j=null);this.B.forEach(function(a){df(a)});this.B.clear();WC(this.P,this.C);rg(this.h);N.prototype.N.call(this)};
aD.prototype.V=function(a){var b=a.ra,c=bl(this.h),d=document.createEvent("MouseEvent");d.initMouseEvent(a.messageType,!0,!0,window,b.detail,b.screenX,b.screenY,b.clientX+c.x,b.clientY+c.y,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,null);this.h.dispatchEvent(d)};
var bD=function(a,b){var c=bl(a.h),d=!!("TouchEvent"in window&&0<TouchEvent.length);b=b.map(function(e){return d?new Touch({identifier:e.identifier,target:a.h,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX+c.x,pageY:e.pageY+c.y}):document.createTouch(window,a.h,e.identifier,e.pageX+c.x,e.pageY+c.y,e.screenX,e.screenY)});return d?b:document.createTouchList.apply(document,b)};
aD.prototype.Y=function(a){var b=a.ra,c=bl(this.h);if("TouchEvent"in window&&0<TouchEvent.length)b={bubbles:!0,cancelable:!0,view:window,detail:b.detail,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey,metaKey:b.metaKey,touches:bD(this,b.touches),targetTouches:bD(this,b.targetTouches),changedTouches:bD(this,b.changedTouches)},a=new TouchEvent(a.messageType,b),this.h.dispatchEvent(a);else{var d=document.createEvent("TouchEvent");d.initTouchEvent(a.messageType,!0,!0,window,b.detail,b.screenX,b.screenY,
b.clientX+c.x,b.clientY+c.y,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,bD(this,b.touches),bD(this,b.targetTouches),bD(this,b.changedTouches),b.scale,b.rotation);this.h.dispatchEvent(d)}};aD.prototype.U=function(a){switch(a.messageType){case "showVideo":null==this.j?(this.j=new uB,this.l.O(this.j,"click",this.aa)):yB(this.j);wB(this.j,cD(this.G));break;case "hide":null!==this.j&&(this.j.W(),this.j=null)}var b=this.M;IC(b.l,a);b.h&&IC(b.h,a)};aD.prototype.aa=function(){Ky(this.A,"displayContainer","videoClick")};
aD.prototype.Z=function(){var a=this;this.J=zh();this.L=wh();this.B.forEach(function(c){c.h=ug(a.h);c.connect()});var b;null==(b=this.F)||DC(b);this.H=!0};var dD=function(a,b){this.h=a[u.Symbol.iterator]();this.j=b};dD.prototype[Symbol.iterator]=function(){return this};dD.prototype.next=function(){var a=this.h.next();return{value:a.done?void 0:this.j.call(void 0,a.value),done:a.done}};var eD=function(a,b){return new dD(a,b)};var iD=function(a){if(a instanceof fD||a instanceof gD||a instanceof hD)return a;if("function"==typeof a.next)return new fD(function(){return a});if("function"==typeof a[Symbol.iterator])return new fD(function(){return a[Symbol.iterator]()});if("function"==typeof a.qb)return new fD(function(){return a.qb()});throw Error("Not an iterator or iterable.");},fD=function(a){this.h=a};fD.prototype.qb=function(){return new gD(this.h())};fD.prototype[Symbol.iterator]=function(){return new hD(this.h())};
fD.prototype.j=function(){return new hD(this.h())};var gD=function(a){this.h=a};t(gD,ap);gD.prototype.next=function(){return this.h.next()};gD.prototype[Symbol.iterator]=function(){return new hD(this.h)};gD.prototype.j=function(){return new hD(this.h)};var hD=function(a){fD.call(this,function(){return a});this.l=a};t(hD,fD);hD.prototype.next=function(){return this.l.next()};var jD=function(a,b){this.j={};this.h=[];this.l=this.size=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof jD)for(c=a.qc(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])};l=jD.prototype;l.vb=function(){kD(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.j[this.h[b]]);return a};l.qc=function(){kD(this);return this.h.concat()};
l.has=function(a){return lD(this.j,a)};l.isEmpty=function(){return 0==this.size};l.clear=function(){this.j={};this.l=this.size=this.h.length=0};l.remove=function(a){lD(this.j,a)?(delete this.j[a],--this.size,this.l++,this.h.length>2*this.size&&kD(this),a=!0):a=!1;return a};
var kD=function(a){if(a.size!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];lD(a.j,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.size!=a.h.length){var e={};for(c=b=0;b<a.h.length;)d=a.h[b],lD(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}};l=jD.prototype;l.get=function(a,b){return lD(this.j,a)?this.j[a]:b};l.set=function(a,b){lD(this.j,a)||(this.size+=1,this.h.push(a),this.l++);this.j[a]=b};l.forEach=function(a,b){for(var c=this.qc(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};
l.keys=function(){return iD(this.qb(!0)).j()};l.values=function(){return iD(this.qb(!1)).j()};l.entries=function(){var a=this;return eD(this.keys(),function(b){return[b,a.get(b)]})};l.qb=function(a){kD(this);var b=0,c=this.l,d=this,e=new ap;e.next=function(){if(c!=d.l)throw Error("The map has changed since the iterator was created");if(b>=d.h.length)return bp;var f=d.h[b++];return{value:a?f:d.j[f],done:!1}};return e};var lD=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var nD=function(){N.call(this);this.buffered=new mD;this.seekable=new mD;this.j=new Qu(this);ff(this,this.j);this.src=this.l="";this.A=!1;this.h=null;var a=az(bz);if(a){a:{if(sf(a.h,"videoElementFakeDuration")&&(a=a.h.videoElementFakeDuration,"number"===typeof a))break a;a=NaN}this.duration=a}};t(nD,N);
var oD=function(){var a=["video/mp4"],b=["video/ogg"],c=new nD;c.canPlayType=function(d){return a.includes(d)?"probably":b.includes(d)?"maybe":""};c.width=0;c.height=0;c.offsetWidth=0;c.offsetHeight=0;return c};l=nD.prototype;l.pause=function(){this.paused||(null.stop(),this.paused=!0,this.dispatchEvent("timeupdate"),this.dispatchEvent("pause"))};
l.load=function(){this.readyState=0;this.paused=!0;this.seeking=!1;this.dispatchEvent("loadstart");var a;isNaN(this.duration)?a=10+20*Math.random():a=this.duration;this.setProperty("duration",a);a=this.seekable;a.h.push(new pD(this.duration));a.length=a.h.length;a=this.buffered;a.h.push(new pD(this.duration));a.length=a.h.length;this.dispatchEvent("loadedmetadata");0<this.currentTime&&this.dispatchEvent("timeupdate");this.dispatchEvent("loadeddata");this.dispatchEvent("canplay");this.dispatchEvent("canplaythrough");
this.dispatchEvent("progress");this.playbackRate=this.defaultPlaybackRate};
l.setProperty=function(a,b){switch(a){case "currentTime":a=Number(b);this.seeking=!0;this.dispatchEvent("seeking");this.seeking=!1;this.currentTime=a;this.dispatchEvent("seeked");a=Wa()-this.dd;b=this.currentTime+a/1E3;this.dd+=a;2<this.readyState&&(this.currentTime=Math.min(b,this.duration));this.dispatchEvent("timeupdate");this.currentTime==this.duration&&(this.ended=this.paused=!0,null.stop(),this.dispatchEvent("ended"));break;case "duration":this.duration=Number(b);this.dispatchEvent("durationchange");
break;case "volume":this.volume=Number(b);this.dispatchEvent("volumechange");break;default:throw"Property setter not implemented";}};l.setAttribute=function(a,b){null!=a&&qD.set(a,b)};l.getAttribute=function(a){return qD.get(a)};l.Ge=function(a){var b=null,c=null;switch(a.type){case "loadeddata":b="Loaded";break;case "playing":b="Playing";c="#00f";break;case "pause":b="Paused";break;case "ended":b="Ended",c="#000"}b&&this.Ic&&(this.Ic.innerText=b);c&&this.Ib&&(this.Ib.style.backgroundColor=c)};
var qD=new jD,pD=function(a){this.startTime=0;this.endTime=a},mD=function(){this.length=0;this.h=[]};mD.prototype.start=function(a){return this.h[a].startTime};mD.prototype.end=function(a){return this.h[a].endTime};l=nD.prototype;l.readyState=0;l.seeking=!1;l.currentTime=0;l.initialTime=void 0;l.duration=NaN;l.paused=!0;l.ended=!1;l.volume=1;l.muted=!1;
Object.defineProperty(nD.prototype,"src",{get:function(){return nD.prototype.l},set:function(a){var b=nD.prototype;b.A&&null!=b.h?(b.h.reject(),b.h=null):b.l=a}});l=nD.prototype;l.currentSrc="";l.defaultPlaybackRate=1;l.playbackRate=0;l.dd=0;l.Ib=null;l.Ic=null;var tD=function(a,b){D.call(this);this.o=a;this.l=this.h=null;this.j=rD();sD(this,b);Gx(function(){L(K.h(),"haob","1")})};t(tD,D);tD.prototype.initialize=function(){this.j&&this.j.load()};tD.prototype.N=function(){rg(this.h);D.prototype.N.call(this)};
var sD=function(a,b){a.h=qg("DIV",{style:"display:none;"});a.o.appendChild(a.h);a.h.appendChild(a.j);b&&(a.l=qg("DIV",{style:"position:absolute;width:100%;height:100%;left:0px;top:0px"}),a.h.appendChild(a.l))},rD=function(){var a=az(bz);if(Yy(a,"useVideoElementFake")){a=oD();var b=qg("DIV",{style:"position:absolute;width:100%;height:100%;top:0px;left:0px;"});Object.assign(b,a);a.Ib=qg("DIV",{style:"position:absolute;width:100%;height:100%;top:0px;left:0px;background-color:#000"});a.Ic=qg("P",{style:"position:absolute;top:25%;margin-left:10px;font-size:24px;color:#fff;"});
a.Ib.appendChild(a.Ic);b.appendChild(a.Ib);a.j.O(a,["loadeddata","playing","pause","ended"],a.Ge);a=b}else{a=!1;try{-1!=window.location.search.indexOf("goog_limavideo=true")&&(a=!0)}catch(c){}u.customElements?a?b=!0:(ji(tj)&&oB.h().report(153,{limvid:"vw"}),b=ji(nj)||ji(tj)||ji(lj)||ji(mj)?!0:!1):b=!1;if(b){a&&console.log("force lima video in wrapper");a=null;try{a=new Sx}catch(c){a=qg("lima-video"),ji(tj)&&oB.h().report(153,{limvid:"firefail"})}a.style.backgroundColor="#000";a.style.height="100%";
a.style.width="100%";a.style.position="absolute";a.style.left="0";a.style.top="0"}else a=qg("VIDEO",{style:"background-color:#000;position:absolute;width:100%;height:100%;left:0;top:0;",title:ty("Advertisement").toString()})}a.setAttribute("webkit-playsinline",!0);a.setAttribute("playsinline",!0);return a},HC=function(a,b){null!=a&&(a.style.display=b?"block":"none")};var wD=function(a,b,c){var d=a&&a.getRootNode?a.getRootNode({composed:!0}):a;if(null==a||!tg(gg(d),d))throw uz(tz,null,"containerElement","element");this.C=b;this.aa=gB(this.C||null);this.Z=vu(this.C||null);this.Y=String(Math.floor(1E9*Math.random()));this.M=!1;this.H=a;this.V=null!=b;bz.h=2;this.F=uD(b?b:null);d=qg("DIV",{style:"position:absolute"});a.insertBefore(d,a.firstChild);this.A=d;this.j=null;vD(this)&&b?a=new sC(b):(this.j=new tD(this.A,!0),a=new sC(this.j.j));this.h=a;this.l=this.o=null;
if(a=this.j&&bz.l)a=!(vD(this)||kc||mc||Kn()||jc&&(!jc||!ru(qu,4)));a&&(this.o=new tD(this.A,!0),this.l=new sC(this.o.j));this.I=c||null;this.U=null!=this.I;vD(this)&&b?"function"!==typeof b.getBoundingClientRect?(c=this.A,bz.o=c):c=b:c=this.A;this.G=c;this.K=new aD(this.A,this);this.P=new E(0,0);this.J="";b&&(b=Yt(b.src||b.currentSrc),200>b.toString().length?this.J=b.toString():200>b.j.length&&(this.J=b.j));this.L=new Map;this.L.set("videoDisplay1",this.h);this.l&&this.L.set("videoDisplay2",this.l)};
wD.prototype.initialize=function(){this.M=!0;null!=this.j&&this.j.initialize();null!=this.o&&this.o.initialize()};wD.prototype.B=function(){return this.M};wD.prototype.destroy=function(){var a=this;this.C=null;df(this.j);df(this.o);df(this.K);this.h.Zb(function(){return df(a.h)});null!=this.l&&this.l.Zb(function(){return df(a.l)});rg(this.A)};var cD=function(a){return a.U&&a.I?a.I:null!=a.j?a.j.l:null},vD=function(a){return fB(a.F)&&a.V};wD.prototype.getSize=function(){return this.P};
var uD=function(a){return null!=a&&"function"===typeof a.getAttribute&&null!=a.getAttribute("playsinline")?!0:!1};wD.prototype.destroy=wD.prototype.destroy;wD.prototype.initialize=wD.prototype.initialize;var xD={AD_LOAD:"adLoadError",AD_PLAY:"adPlayError"},yD=function(a){var b=Error.call(this);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.data=a};t(yD,Error);l=yD.prototype;l.getInnerError=function(){var a=this.data.innerError;return a instanceof Object?new yD(a):null!=a?Error(a):null};l.getMessage=function(){return this.data.errorMessage};l.getErrorCode=function(){return this.data.errorCode};l.getVastErrorCode=function(){var a=this.getErrorCode();return 1E3>a?a:900};l.getType=function(){return this.data.type};
l.toString=function(){return"AdError "+this.getErrorCode()+": "+this.getMessage()+(null!=this.getInnerError()?" Caused by: "+this.getInnerError():"")};yD.prototype.getType=yD.prototype.getType;yD.prototype.getVastErrorCode=yD.prototype.getVastErrorCode;yD.prototype.getErrorCode=yD.prototype.getErrorCode;yD.prototype.getMessage=yD.prototype.getMessage;yD.prototype.getInnerError=yD.prototype.getInnerError;
w("module$exports$google3$javascript$ads$interactivemedia$sdk$clientside$api$ad_error.AdError.Type",xD);var zD={AD_ERROR:"adError"},AD=function(a,b){b=void 0===b?null:b;Ej.call(this,"adError");this.error=a;this.h=b};t(AD,Ej);AD.prototype.getError=function(){return this.error};AD.prototype.getUserRequestContext=function(){return this.h};AD.prototype.getUserRequestContext=AD.prototype.getUserRequestContext;AD.prototype.getError=AD.prototype.getError;w("module$exports$google3$javascript$ads$interactivemedia$sdk$clientside$api$ad_error_event.AdErrorEvent.Type",zD);var BD=function(a,b,c){b=void 0===b?null:b;c=void 0===c?null:c;Ej.call(this,a);this.o=b;this.l=c};t(BD,Ej);BD.prototype.getAd=function(){return this.o};BD.prototype.getAdData=function(){return this.l};BD.prototype.getAdData=BD.prototype.getAdData;BD.prototype.getAd=BD.prototype.getAd;
var CD={AD_CAN_PLAY:"adCanPlay",pg:"adStarted",CONTENT_PAUSE_REQUESTED:"contentPauseRequested",CONTENT_RESUME_REQUESTED:"contentResumeRequested",CLICK:"click",VIDEO_CLICKED:"videoClicked",VIDEO_ICON_CLICKED:"videoIconClicked",Cd:"engagedView",EXPANDED_CHANGED:"expandedChanged",STARTED:"start",AD_PROGRESS:"adProgress",AD_BUFFERING:"adBuffering",IMPRESSION:"impression",Hd:"measurable_impression",VIEWABLE_IMPRESSION:"viewable_impression",Dd:"fully_viewable_audible_half_duration_impression",Ke:"overlay_resize",
Le:"overlay_unmeasurable_impression",Me:"overlay_unviewable_impression",Oe:"overlay_viewable_immediate_impression",Ne:"overlay_viewable_end_of_session_impression",Ig:"externalActivityEvent",PAUSED:"pause",RESUMED:"resume",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",DURATION_CHANGE:"durationChange",USER_CLOSE:"userClose",Xh:"userRecall",Ch:"prefetched",LOADED:"loaded",ALL_ADS_COMPLETED:"allAdsCompleted",SKIPPED:"skip",Se:"skipShown",LINEAR_CHANGED:"linearChanged",
SKIPPABLE_STATE_CHANGED:"skippableStateChanged",AD_METADATA:"adMetadata",og:"adBreakFetchError",AD_BREAK_READY:"adBreakReady",LOG:"log",VOLUME_CHANGED:"volumeChange",VOLUME_MUTED:"mute",INTERACTION:"interaction",wg:"companionBackfill",Uh:"trackingUrlPinged",Yh:"video_card_endcap_collapse",Zh:"video_card_endcap_dismiss",ai:"video_card_endcap_impression",zg:"companionInitialized",yg:"companionImpression",xg:"companionClick",rh:"mediaUrlPinged",He:"loadStart",th:"navigationRequested"};
w("module$contents$ima$AdEvent_AdEvent.Type",CD);var DD=function(a,b){b=void 0===b?null:b;BD.call(this,"adMetadata",a);this.h=b};t(DD,BD);DD.prototype.lf=function(){return this.h};DD.prototype.getAdCuePoints=DD.prototype.lf;var ED=function(a){this.adBreakDuration=a.adBreakDuration;this.adPosition=a.adPosition;this.currentTime=a.currentTime;this.duration=a.duration;this.totalAds=a.totalAds};var FD=function(a,b){N.call(this);this.l=a;this.B=b;this.j=this.l.currentTime;this.h=new Jk(250);ff(this,this.h);this.A=new Qu(this);ff(this,this.A);Su(this.A,this.h,"tick",this.C,!1,this)};t(FD,N);FD.prototype.fb=function(){return this.j};FD.prototype.start=function(){GD(this);this.h.start()};FD.prototype.stop=function(){this.h.stop()};FD.prototype.C=function(){var a=this.l.currentTime;a!==this.fb()&&(this.j=a,GD(this))};
var GD=function(a){var b={};b.currentTime=a.fb();Ky(a.B,"contentTimeUpdate","contentTimeUpdate",b)};var HD={rgb:!0,rgba:!0,alpha:!0,rect:!0,image:!0,"linear-gradient":!0,"radial-gradient":!0,"repeating-linear-gradient":!0,"repeating-radial-gradient":!0,"cubic-bezier":!0,matrix:!0,perspective:!0,rotate:!0,rotate3d:!0,rotatex:!0,rotatey:!0,steps:!0,rotatez:!0,scale:!0,scale3d:!0,scalex:!0,scaley:!0,scalez:!0,skew:!0,skewx:!0,skewy:!0,translate:!0,translate3d:!0,translatex:!0,translatey:!0,translatez:!0},ID=function(a){a=fb(a);if(""==a)return null;var b=String(a.slice(0,4)).toLowerCase();if(0==("url("<
b?-1:"url("==b?0:1))return null;if(0<a.indexOf("(")){if(/"|'/.test(a))return null;b=/([\-\w]+)\(/g;for(var c;c=b.exec(a);)if(!(c[1].toLowerCase()in HD))return null}return a};function JD(a,b){a=u[a];return a&&a.prototype?(b=Object.getOwnPropertyDescriptor(a.prototype,b))&&b.get||null:null}function KD(a){var b=u.CSSStyleDeclaration;return b&&b.prototype&&b.prototype[a]||null}JD("Element","attributes")||JD("Node","attributes");JD("Element","innerHTML")||JD("HTMLElement","innerHTML");JD("Node","nodeName");JD("Node","nodeType");JD("Node","parentNode");JD("Node","childNodes");JD("HTMLElement","style")||JD("Element","style");JD("HTMLStyleElement","sheet");
var LD=KD("getPropertyValue"),MD=KD("setProperty");JD("Element","namespaceURI")||JD("Node","namespaceURI");function ND(a,b,c,d){if(a)return a.apply(b,d);if(ec&&10>document.documentMode){if(!b[c].call)throw Error("IE Clobbering detected");}else if("function"!=typeof b[c])throw Error("Clobbering detected");return b[c].apply(b,d)};var OD={"-webkit-border-horizontal-spacing":!0,"-webkit-border-vertical-spacing":!0},QD=function(a){if(!a)return Pf;var b=document.createElement("div").style;PD(a).forEach(function(c){var d=hc&&c in OD?c:c.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/i,"");0!=d.lastIndexOf("--",0)&&0!=d.lastIndexOf("var",0)&&(c=ND(LD,a,a.getPropertyValue?"getPropertyValue":"getAttribute",[c])||"",c=ID(c),null!=c&&ND(MD,b,b.setProperty?"setProperty":"setAttribute",[d,c]))});return new Of(b.cssText||
"",Nf)},PD=function(a){Ma(a)?a=Vb(a):(a=qf(a),Qb(a,"cssText"));return a};var RD=function(a,b,c){N.call(this);this.j=a;this.h=null;this.H="";this.J=Pf;this.L=0;this.C=this.l=null;this.A=b;this.B=null;this.F="";this.G=c};t(RD,N);
RD.prototype.init=function(a){this.F=a;a="about:blank";ec&&(a="");this.l=qg("IFRAME",{src:a,allowtransparency:!0,background:"transparent"});Xk(this.l,{display:"none",width:"0",height:"0"});a=this.j.H;a.appendChild(this.l);a=a.ownerDocument;a=a.defaultView||a.parentWindow;null==this.B&&(this.B=new Qu(this));this.B.O(a,"message",this.M);a='<body><script src="//imasdk.googleapis.com/js/sdkloader/loader.js">\x3c/script><script>loader = new VPAIDLoader(false, "'+(this.F+'");\x3c/script></body>');if(Ac||
yc||fc){var b=this.l.contentWindow;b&&OB(b.document,a)}else PB(this.l,a)};
RD.prototype.M=function(a){try{var b=a.h.data;try{var c=JSON.parse(b)}catch(F){return}var d=c.session;if(null!=d&&this.F==d)switch(c.type){case "friendlyReady":var e=SD(this);if(null!=e){this.h=e;this.H=e.currentSrc;var f=e.style.cssText;if(ec&&10>document.documentMode)var g=Pf;else{var h=document;"function"===typeof HTMLTemplateElement&&(h=og(document,"TEMPLATE").content.ownerDocument);var k=h.implementation.createHTMLDocument("").createElement("DIV");k.style.cssText=f;g=QD(k.style)}this.J=g;this.L=
e.currentTime}else{h=this.j.H;e="border: 0; margin: 0; padding: 0; position: absolute; ";var m=this.j.getSize();e+="width:"+m.width+"px; ";e+="height:"+m.height+"px;";this.h=qg("VIDEO",{style:e,autoplay:!0});h.appendChild(this.h)}var n=this.j.H;e="border: 0; margin: 0; padding: 0;position: absolute; ";var r=fl(this.h);e+="width:"+r.width+"px; ";e+="height:"+r.height+"px;";this.C=qg("DIV",{style:e});n.appendChild(this.C);try{this.l.contentWindow.loader.initFriendly(this.h,this.C)}catch(F){TD(this)}Ky(this.A,
"vpaid","",b);break;case "becameLinear":this.h&&!xg()&&!wg()&&Xk(this.h,{visibility:"visible"});Ky(this.A,"vpaid","",b);break;case "becameNonlinear":UD(this);Ky(this.A,"vpaid","",b);break;case "startAd":n={};if(this.h){var v=this.h.paused,y=0<this.h.currentTime;n.apl=y&&!v?"1":"0";n.ip=v?"1":"0";n.iavp=y?"1":"0"}else n.apl="n";oB.h().report(99,n);Ky(this.A,"vpaid","",b);if(null!=SD(this)){var B=this.j;null!=B.j&&HC(B.j.h,!0)}break;default:Ky(this.A,"vpaid","",b)}}catch(F){TD(this)}};
var TD=function(a){var b={type:"error"};b.session=a.F;a=JSON.stringify(b);window.postMessage(a,"*")},SD=function(a){return("videoDisplayUnknown"==a.G?a.j.h:a.j.L.get(a.G)).B.h},UD=function(a){a.h&&!xg()&&!wg()&&Xk(a.h,{visibility:"hidden"})};
RD.prototype.N=function(){D.prototype.N.call(this);df(this.B);this.B=null;rg(this.C);this.C=null;rg(this.l);this.l=null;var a=SD(this);if(null!=a){var b=this.J;a.style.cssText=b instanceof Of&&b.constructor===Of?b.h:"type_error:SafeStyle";xg()||wg()?(a.src=this.H,a.currentTime=this.L):(a.removeAttribute("src"),a=this.j,null!=a.j&&HC(a.j.h,!1))}else rg(this.h),this.h=null};var VD=function(a,b){D.call(this);this.j=a;this.l=b;this.h=new Map};t(VD,D);var WD=function(a,b){try{var c=b.ra,d=c.session;switch(c.vpaidEventType){case "createFriendlyIframe":b="videoDisplayUnknown";c.videoDisplayName&&(b=c.videoDisplayName);var e=c.session,f=new RD(a.j,a.l,b);a.h.set(e,f);f.init(e);break;case "vpaidNonLinear":var g=a.h.get(d);g&&UD(g);break;case "destroyFriendlyIframe":var h=a.h.get(d);h&&(h.W(),a.h.delete(d))}}catch(k){oB.h().report(125,{msg:k.message})}};VD.prototype.N=function(){this.h.forEach(function(a){return a.W()})};var XD=function(a){this.h=a||{cookie:""}};l=XD.prototype;
l.set=function(a,b,c){var d=!1;if("object"===typeof c){var e=c.ti;d=c.Uf||!1;var f=c.domain||void 0;var g=c.path||void 0;var h=c.de}if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');void 0===h&&(h=-1);this.h.cookie=a+"="+b+(f?";domain="+f:"")+(g?";path="+g:"")+(0>h?"":0==h?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(Date.now()+1E3*h)).toUTCString())+(d?";secure":"")+(null!=e?";samesite="+e:"")};
l.get=function(a,b){for(var c=a+"=",d=(this.h.cookie||"").split(";"),e=0,f;e<d.length;e++){f=fb(d[e]);if(0==f.lastIndexOf(c,0))return f.slice(c.length);if(f==a)return""}return b};l.remove=function(a,b,c){var d=void 0!==this.get(a);this.set(a,"",{de:0,path:b,domain:c});return d};l.qc=function(){return YD(this).keys};l.vb=function(){return YD(this).values};l.isEmpty=function(){return!this.h.cookie};l.clear=function(){for(var a=YD(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
var YD=function(a){a=(a.h.cookie||"").split(";");for(var b=[],c=[],d,e,f=0;f<a.length;f++)e=fb(a[f]),d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}};function ZD(a){return"null"!==a.origin}function $D(a,b,c){b=Kd(b,5)&&ZD(c)?c.document.cookie:null;return null===b?null:(new XD({cookie:b})).get(a)||""};var aE=function(){this.h=window;this.j=0},bE=function(a,b,c,d){if(d){var e={de:Math.max(z(c,2)-Date.now()/1E3,0),path:z(c,3),domain:z(c,4),Uf:!1};a=a.h;Kd(d,5)&&ZD(a)&&(new XD(a.document)).set(b,z(c,1),e)}},cE=function(a,b,c){if(c&&$D(b,c,a.h)){var d=a.h.location.hostname;if("localhost"===d)d=["localhost"];else if(d=d.split("."),2>d.length)d=[];else{for(var e=[],f=0;f<d.length-1;++f)e.push(d.slice(f).join("."));d=e}d=q(d);for(e=d.next();!e.done;e=d.next())f=a.h,Kd(c,5)&&ZD(f)&&(new XD(f.document)).remove(b,
"/",e.value)}};var dE=function(){this.h=[];this.j=[]};dE.prototype.isEmpty=function(){return 0===this.h.length&&0===this.j.length};dE.prototype.clear=function(){this.h=[];this.j=[]};dE.prototype.remove=function(a){var b=this.h;b:{var c=b.length-1;0>c&&(c=Math.max(0,b.length+c));if("string"===typeof b)c="string"!==typeof a||1!=a.length?-1:b.lastIndexOf(a,c);else{for(;0<=c;c--)if(c in b&&b[c]===a)break b;c=-1}}0<=c?(Sb(b,c),b=!0):b=!1;return b||Qb(this.j,a)};
dE.prototype.vb=function(){for(var a=[],b=this.h.length-1;0<=b;--b)a.push(this.h[b]);var c=this.j.length;for(b=0;b<c;++b)a.push(this.j[b]);return a};var Z=function(a,b,c,d,e,f,g,h){N.call(this);var k=this;this.H=a;this.h=b;this.L=c;this.rb=e;this.A=new $B;this.F=g;this.pb=h;this.M=!1;this.U=1;this.sb=d;this.da=-1;this.l=this.j=null;this.B=new FD({currentTime:0},this.F);this.G=new dE;this.ka=this.Y=!1;this.Z=new Map;this.aa=this.ua=!1;this.Ja=new VD(b,g);ff(this,this.Ja);this.J=f&&null!=this.h.I;this.P=function(){var m=k.h.h,n=m.getCurrentTime();m=m.getDuration();return{currentTime:n,duration:m,isPlaying:!0,volume:k.U}};this.V=new Qu(this);this.V.O(this.F,
"adsManager",this.kc)};t(Z,N);
Z.prototype.kc=function(a){var b=this,c=a.messageType,d=a.ra;switch(c){case "error":eE(this);fE(this,d);break;case "contentPauseRequested":oB.h().report(130);gE(this);this.B.stop();hE(this,c,d);break;case "contentResumeRequested":iE(this,function(){return hE(b,c,d)});break;case "remainingTime":this.da=d.remainingTime;break;case "skip":hE(this,c,d);break;case "log":hE(this,c,d,d.logData);break;case "companionBackfill":a=La("window.google_show_companion_ad");null!=a&&a();break;case "skipShown":this.M=
!0;hE(this,c,d);break;case "interaction":hE(this,c,d,d.interactionData);break;case "vpaidEvent":WD(this.Ja,a);break;case "skippableStateChanged":a=d.adData;null!=a.skippable&&(this.M=a.skippable);hE(this,c,d);break;case "volumeChange":a=d.adData;null!=a&&"number"===typeof a.volume&&(this.U=a.volume);hE(this,c,d);break;case "firstQuartile":hE(this,JA.firstQuartile,d);hE(this,c,d);break;case "thirdQuartile":hE(this,JA.thirdQuartile,d);hE(this,c,d);break;case "updateGfpCookie":jE(this,d);break;default:hE(this,
c,d)}};
var hE=function(a,b,c,d){if(null==c.companions){var e=a.Z.get(c.adId);c.companions=null!=e?e:[]}var f=c.adData;if(e=null==f?null:new Y(f))a.j=e;switch(b){case "adBreakReady":case "mediaUrlPinged":b=new BD(b,null,c);break;case "adMetadata":b=null;null!=c.adCuePoints&&(b=new ZB(c.adCuePoints));b=new DD(e,b);break;case "allAdsCompleted":a.j=null;a.ua=!0;b=new BD(b,e);break;case "contentPauseRequested":a.aa=!1;b=new BD(b,e);break;case "contentResumeRequested":a.j=null;a.aa=!0;b=new BD(b,e);break;case "loaded":a.da=
e.getDuration();a.M=!1;hB()&&(d=a.H,c=a.rb,d.j.set(YB(e),a.P),jC(d)&&iC(d,"loaded",YB(e),c));b=new BD(b,e,f);break;case "start":a.Z.set(c.adId,c.companions);null!=cD(a.h)&&(null==a.l?(a.l=new uB,a.V.O(a.l,"click",a.Mf)):yB(a.l),wB(a.l,cD(a.h)));b=new BD(b,e);break;case "complete":null!=a.l&&yB(a.l);hB()&&lC(a.H,a.P,YB(e));a.j=null;a.Z.delete(c.adId);b=new BD(b,e);break;case "log":c=null;null!=d&&null!=d.type?(f=d.type,f="adLoadError"==f||"adPlayError"==f):f=!1;f&&(c={adError:new yD(d)});b=new BD(b,
e,c);break;case "interaction":b=new BD(b,e,d);break;case "adProgress":b=new BD(b,e,new ED(c));break;default:b=new BD(b,e)}a.dispatchEvent(b);a.ua&&a.aa&&a.destroy()},fE=function(a,b){var c=new AD(new yD(b));a.Y?(a.dispatchEvent(c),hB()&&a.j&&lC(a.H,a.P,YB(a.j)),a.j=null):a.G.j.push(c);a={error:b.errorCode,vis:th(document)};oB.h().report(7,a)},kE=function(a,b,c){Ky(a.F,"adsManager",b,c)},iE=function(a,b){oB.h().report(131);eE(a,b);a.wa()||a.B.start()},gE=function(a){var b=a.h.h;vD(a.h)&&a.A.restoreCustomPlaybackStateOnAdBreakComplete&&
null!=b.Gd&&b.Gd()},eE=function(a,b){var c=a.h.h;vD(a.h)&&a.A.restoreCustomPlaybackStateOnAdBreakComplete&&null!=c.Zb?c.Zb(b):b&&b()};l=Z.prototype;l.configureAdsManager=function(a,b){this.C=a;null!=a.currentTime&&(this.B=new FD(a,this.F),this.B.start());null!=b&&(this.A=lE(b))};
l.init=function(a,b,c,d){if(this.G.isEmpty()){var e=this.h,f=null;e.C&&null==d&&(f={vd:"setnull"});e.C&&e.C===d&&(f={vd:"match"});if(e.C&&e.C!==d){f=gB(d||null);var g=vu(d||null);f={vd:"diff",oc:e.aa,nc:f,oi:e.Z,ni:g}}!e.C&&d&&(f={vd:"new"});f&&(f.custVid=e.Y,oB.h().report(93,f));null!=d&&(e.F=uD(d),fB(e.F)&&(e.V=!0,df(e.j),df(e.o),df(e.l),e.j=null,e.o=null,e.l=null,df(e.h),e.h=new sC(d),"function"!==typeof d.getBoundingClientRect?(e.G=e.A,bz.o=e.G):e.G=d,null!=(d=e.K.F)&&(e=e.h.B.h,d.l=e,d.h&&(d=
d.h,d.h=e,TB(d,e)))));this.Y=!0;this.resize(a,b,c);e=aC(this.A,this.J);kE(this,"init",{adsRenderingSettings:e,width:a,height:b,viewMode:c})}else{for(;!this.G.isEmpty();)b=a=this.G,0===b.h.length&&(b.h=b.j,b.h.reverse(),b.j=[]),a=a.h.pop(),this.dispatchEvent(a);this.W()}};l.isCustomPlaybackUsed=function(){return vD(this.h)};l.isCustomClickTrackingUsed=function(){return this.J};l.getRemainingTime=function(){return this.da};l.getAdSkippableState=function(){return this.M};
l.discardAdBreak=function(){kE(this,"discardAdBreak")};l.updateAdsRenderingSettings=function(a){if(null!=a){a=lE(a);var b=this.A.bitrate,c=a.bitrate;oB.h().report(96,{init:this.Y?"1":"0",start:this.ka?"1":"0",old:b,"new":c,changed:b!=c?"1":"0"});this.A=a;a=aC(this.A,this.J);kE(this,"updateAdsRenderingSettings",{adsRenderingSettings:a})}};l.skip=function(){kE(this,"skip")};
l.start=function(){if(this.L){(kc||mc)&&oB.h().report(50,{customPlayback:vD(this.h)});this.h.B()||oB.h().report(26,{adtagurl:this.L,customPlayback:vD(this.h)});Dn(this.h.A)&&oB.h().report(30,{adtagurl:this.L,customPlayback:vD(this.h)});var a=this.h.I,b=this.h.A,c;if(c=a&&b&&!Dn(a))a=gC(a),b=gC(b),c=0<a.width&&0<a.height&&0<b.width&&0<b.height&&a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height;b=c;oB.h().report(31,{adtagurl:this.L,customPlayback:vD(this.h),
covers:b})}if(!this.h.B()&&!vD(this.h))throw uz(sz);b=this.h;b.U=this.J&&null!=b.I;this.h.K.h.style.opacity=1;null!=this.C&&1==this.getVolume()&&("boolean"===typeof this.C.muted&&this.C.muted?this.setVolume(0):"number"===typeof this.C.volume&&(b=this.C.volume,0<=b&&1>=b&&this.setVolume(this.C.volume)));this.ka=!0;kE(this,"start")};l.Mf=function(){if(!this.A.disableClickThrough&&null!=this.j){var a=this.j.h.clickThroughUrl;null!=a&&ou(a,this.j.h.attributionParams)}};
l.resize=function(a,b,c){var d=this.h,e=d.A;null!=e&&(-1==a?(e.style.right="0",e.style.left="0"):e.style.width=a+"px",-1==b?(e.style.bottom="0",e.style.top="0"):e.style.height=b+"px");e=d.K;e.h.width=-1==a?"100%":a;e.h.height=-1==b?"100%":b;try{e.h.offsetTop=e.h.offsetTop}catch(f){}d.P=new E(a,b);kE(this,"resize",{width:a,height:b,viewMode:c})};l.stop=function(){kE(this,"stop")};l.expand=function(){kE(this,"expand")};l.collapse=function(){kE(this,"collapse")};l.getVolume=function(){return this.U};
l.setVolume=function(a){this.U=a;this.h.h.setVolume(a);kE(this,"volume",{volume:a})};l.pause=function(){kE(this,"pause")};l.resume=function(){kE(this,"resume")};l.destroy=function(){this.W()};l.getCuePoints=function(){return this.sb};l.mf=function(){return this.j};l.N=function(){kE(this,"destroy");null!=this.l&&this.l.W();this.V.W();this.G.clear();this.B&&(this.B.stop(),this.B.W());hB()&&lC(this.H,this.P);N.prototype.N.call(this)};
l.cf=function(){oB.h().report(124,{api:"clicked"});var a=this.j&&this.j.h.clickThroughUrl;a&&this.j.ce()&&ou(a,this.j.h.attributionParams);kE(this,"click")};l.focus=function(){Ky(this.F,"userInteraction","focusUiElement")};
var jE=function(a,b){var c=b.gfpCookieUserEnabled;b=b.gfpCookieClearData;var d=new Il;d=A(d,1,c?"0":"1");d=A(d,2,2147483647);d=A(d,3,"/");d=A(d,4,window.location.hostname);var e=new aE,f,g;a=null!=(g=null==(f=a.pb)?void 0:qz(f))?g:null;bE(e,"__gpi_opt_out",d,a);if(!c||b)cE(e,"__gads",a),cE(e,"__gpi",a)};Z.prototype.clicked=Z.prototype.cf;Z.prototype.getCurrentAd=Z.prototype.mf;Z.prototype.getCuePoints=Z.prototype.getCuePoints;Z.prototype.destroy=Z.prototype.destroy;Z.prototype.resume=Z.prototype.resume;
Z.prototype.pause=Z.prototype.pause;Z.prototype.setVolume=Z.prototype.setVolume;Z.prototype.getVolume=Z.prototype.getVolume;Z.prototype.collapse=Z.prototype.collapse;Z.prototype.expand=Z.prototype.expand;Z.prototype.stop=Z.prototype.stop;Z.prototype.resize=Z.prototype.resize;Z.prototype.start=Z.prototype.start;Z.prototype.skip=Z.prototype.skip;Z.prototype.updateAdsRenderingSettings=Z.prototype.updateAdsRenderingSettings;Z.prototype.discardAdBreak=Z.prototype.discardAdBreak;
Z.prototype.getAdSkippableState=Z.prototype.getAdSkippableState;Z.prototype.getRemainingTime=Z.prototype.getRemainingTime;Z.prototype.isCustomClickTrackingUsed=Z.prototype.isCustomClickTrackingUsed;Z.prototype.isCustomPlaybackUsed=Z.prototype.isCustomPlaybackUsed;Z.prototype.init=Z.prototype.init;function lE(a){if(a instanceof $B)return a;var b=new $B;b.append(a);return b};var mE=function(a,b){Ej.call(this,"adsManagerLoaded");this.h=a;this.l=b};t(mE,Ej);mE.prototype.getAdsManager=function(a,b){a=a||{currentTime:null};this.h.configureAdsManager(a,b);return this.h};mE.prototype.getUserRequestContext=function(){return this.l};mE.prototype.getUserRequestContext=mE.prototype.getUserRequestContext;mE.prototype.getAdsManager=mE.prototype.getAdsManager;var nE={ADS_MANAGER_LOADED:"adsManagerLoaded"};w("module$contents$ima$AdsManagerLoadedEvent_AdsManagerLoadedEvent.Type",nE);var oE=function(){this.l=this.j="unknown";this.h="0";this.adsResponse=null;this.adTagUrl="";this.contentTitle=this.contentKeywords=this.contentDuration=null;this.forceNonLinearFullSlot=!1;this.nonLinearAdSlotWidth=this.nonLinearAdSlotHeight=this.liveStreamPrefetchSeconds=this.linearAdSlotWidth=this.linearAdSlotHeight=0;this.omidAccessModeRules={};this.pageUrl=null;this.vastLoadTimeout=5E3};oE.prototype.setAdWillAutoPlay=function(a){this.j=a?"auto":"click"};
oE.prototype.setAdWillPlayMuted=function(a){this.l=a?"muted":"unmuted"};oE.prototype.setContinuousPlayback=function(a){this.h=a?"2":"1"};oE.prototype.setContinuousPlayback=oE.prototype.setContinuousPlayback;oE.prototype.setAdWillPlayMuted=oE.prototype.setAdWillPlayMuted;oE.prototype.setAdWillAutoPlay=oE.prototype.setAdWillAutoPlay;var pE=p(["https://adservice.google.com/adsid/integrator.",""]),qE=p(["https://adservice.google.ad/adsid/integrator.",""]),rE=p(["https://adservice.google.ae/adsid/integrator.",""]),sE=p(["https://adservice.google.com.af/adsid/integrator.",""]),tE=p(["https://adservice.google.com.ag/adsid/integrator.",""]),uE=p(["https://adservice.google.com.ai/adsid/integrator.",""]),vE=p(["https://adservice.google.al/adsid/integrator.",""]),wE=p(["https://adservice.google.co.ao/adsid/integrator.",""]),xE=p(["https://adservice.google.com.ar/adsid/integrator.",
""]),yE=p(["https://adservice.google.as/adsid/integrator.",""]),zE=p(["https://adservice.google.at/adsid/integrator.",""]),AE=p(["https://adservice.google.com.au/adsid/integrator.",""]),BE=p(["https://adservice.google.az/adsid/integrator.",""]),CE=p(["https://adservice.google.com.bd/adsid/integrator.",""]),DE=p(["https://adservice.google.be/adsid/integrator.",""]),EE=p(["https://adservice.google.bf/adsid/integrator.",""]),FE=p(["https://adservice.google.bg/adsid/integrator.",""]),GE=p(["https://adservice.google.com.bh/adsid/integrator.",
""]),HE=p(["https://adservice.google.bi/adsid/integrator.",""]),IE=p(["https://adservice.google.bj/adsid/integrator.",""]),JE=p(["https://adservice.google.com.bn/adsid/integrator.",""]),KE=p(["https://adservice.google.com.bo/adsid/integrator.",""]),LE=p(["https://adservice.google.com.br/adsid/integrator.",""]),ME=p(["https://adservice.google.bs/adsid/integrator.",""]),NE=p(["https://adservice.google.bt/adsid/integrator.",""]),OE=p(["https://adservice.google.co.bw/adsid/integrator.",""]),PE=p(["https://adservice.google.com.bz/adsid/integrator.",
""]),QE=p(["https://adservice.google.ca/adsid/integrator.",""]),RE=p(["https://adservice.google.cd/adsid/integrator.",""]),SE=p(["https://adservice.google.cf/adsid/integrator.",""]),TE=p(["https://adservice.google.cg/adsid/integrator.",""]),UE=p(["https://adservice.google.ch/adsid/integrator.",""]),VE=p(["https://adservice.google.ci/adsid/integrator.",""]),WE=p(["https://adservice.google.co.ck/adsid/integrator.",""]),XE=p(["https://adservice.google.cl/adsid/integrator.",""]),YE=p(["https://adservice.google.cm/adsid/integrator.",
""]),ZE=p(["https://adservice.google.com.co/adsid/integrator.",""]),$E=p(["https://adservice.google.co.cr/adsid/integrator.",""]),aF=p(["https://adservice.google.com.cu/adsid/integrator.",""]),bF=p(["https://adservice.google.cv/adsid/integrator.",""]),cF=p(["https://adservice.google.com.cy/adsid/integrator.",""]),dF=p(["https://adservice.google.cz/adsid/integrator.",""]),eF=p(["https://adservice.google.de/adsid/integrator.",""]),fF=p(["https://adservice.google.dj/adsid/integrator.",""]),gF=p(["https://adservice.google.dk/adsid/integrator.",
""]),hF=p(["https://adservice.google.dm/adsid/integrator.",""]),iF=p(["https://adservice.google.dz/adsid/integrator.",""]),jF=p(["https://adservice.google.com.ec/adsid/integrator.",""]),kF=p(["https://adservice.google.ee/adsid/integrator.",""]),lF=p(["https://adservice.google.com.eg/adsid/integrator.",""]),mF=p(["https://adservice.google.es/adsid/integrator.",""]),nF=p(["https://adservice.google.com.et/adsid/integrator.",""]),oF=p(["https://adservice.google.fi/adsid/integrator.",""]),pF=p(["https://adservice.google.com.fj/adsid/integrator.",
""]),qF=p(["https://adservice.google.fm/adsid/integrator.",""]),rF=p(["https://adservice.google.fr/adsid/integrator.",""]),sF=p(["https://adservice.google.ga/adsid/integrator.",""]),tF=p(["https://adservice.google.ge/adsid/integrator.",""]),uF=p(["https://adservice.google.gg/adsid/integrator.",""]),vF=p(["https://adservice.google.com.gh/adsid/integrator.",""]),wF=p(["https://adservice.google.com.gi/adsid/integrator.",""]),xF=p(["https://adservice.google.gl/adsid/integrator.",""]),yF=p(["https://adservice.google.gm/adsid/integrator.",
""]),zF=p(["https://adservice.google.gr/adsid/integrator.",""]),AF=p(["https://adservice.google.com.gt/adsid/integrator.",""]),BF=p(["https://adservice.google.gy/adsid/integrator.",""]),CF=p(["https://adservice.google.com.hk/adsid/integrator.",""]),DF=p(["https://adservice.google.hn/adsid/integrator.",""]),EF=p(["https://adservice.google.hr/adsid/integrator.",""]),FF=p(["https://adservice.google.ht/adsid/integrator.",""]),GF=p(["https://adservice.google.hu/adsid/integrator.",""]),HF=p(["https://adservice.google.co.id/adsid/integrator.",
""]),IF=p(["https://adservice.google.ie/adsid/integrator.",""]),JF=p(["https://adservice.google.co.il/adsid/integrator.",""]),KF=p(["https://adservice.google.im/adsid/integrator.",""]),LF=p(["https://adservice.google.co.in/adsid/integrator.",""]),MF=p(["https://adservice.google.iq/adsid/integrator.",""]),NF=p(["https://adservice.google.is/adsid/integrator.",""]),OF=p(["https://adservice.google.it/adsid/integrator.",""]),PF=p(["https://adservice.google.je/adsid/integrator.",""]),QF=p(["https://adservice.google.com.jm/adsid/integrator.",
""]),RF=p(["https://adservice.google.jo/adsid/integrator.",""]),SF=p(["https://adservice.google.co.jp/adsid/integrator.",""]),TF=p(["https://adservice.google.co.ke/adsid/integrator.",""]),UF=p(["https://adservice.google.com.kh/adsid/integrator.",""]),VF=p(["https://adservice.google.ki/adsid/integrator.",""]),WF=p(["https://adservice.google.kg/adsid/integrator.",""]),XF=p(["https://adservice.google.co.kr/adsid/integrator.",""]),YF=p(["https://adservice.google.com.kw/adsid/integrator.",""]),ZF=p(["https://adservice.google.kz/adsid/integrator.",
""]),$F=p(["https://adservice.google.la/adsid/integrator.",""]),aG=p(["https://adservice.google.com.lb/adsid/integrator.",""]),bG=p(["https://adservice.google.li/adsid/integrator.",""]),cG=p(["https://adservice.google.lk/adsid/integrator.",""]),dG=p(["https://adservice.google.co.ls/adsid/integrator.",""]),eG=p(["https://adservice.google.lt/adsid/integrator.",""]),fG=p(["https://adservice.google.lu/adsid/integrator.",""]),gG=p(["https://adservice.google.lv/adsid/integrator.",""]),hG=p(["https://adservice.google.com.ly/adsid/integrator.",
""]),iG=p(["https://adservice.google.md/adsid/integrator.",""]),jG=p(["https://adservice.google.me/adsid/integrator.",""]),kG=p(["https://adservice.google.mg/adsid/integrator.",""]),lG=p(["https://adservice.google.mk/adsid/integrator.",""]),mG=p(["https://adservice.google.ml/adsid/integrator.",""]),nG=p(["https://adservice.google.com.mm/adsid/integrator.",""]),oG=p(["https://adservice.google.mn/adsid/integrator.",""]),pG=p(["https://adservice.google.ms/adsid/integrator.",""]),qG=p(["https://adservice.google.com.mt/adsid/integrator.",
""]),rG=p(["https://adservice.google.mu/adsid/integrator.",""]),sG=p(["https://adservice.google.mv/adsid/integrator.",""]),tG=p(["https://adservice.google.mw/adsid/integrator.",""]),uG=p(["https://adservice.google.com.mx/adsid/integrator.",""]),vG=p(["https://adservice.google.com.my/adsid/integrator.",""]),wG=p(["https://adservice.google.co.mz/adsid/integrator.",""]),xG=p(["https://adservice.google.com.na/adsid/integrator.",""]),yG=p(["https://adservice.google.com.ng/adsid/integrator.",""]),zG=p(["https://adservice.google.com.ni/adsid/integrator.",
""]),AG=p(["https://adservice.google.ne/adsid/integrator.",""]),BG=p(["https://adservice.google.nl/adsid/integrator.",""]),CG=p(["https://adservice.google.no/adsid/integrator.",""]),DG=p(["https://adservice.google.com.np/adsid/integrator.",""]),EG=p(["https://adservice.google.nr/adsid/integrator.",""]),FG=p(["https://adservice.google.nu/adsid/integrator.",""]),GG=p(["https://adservice.google.co.nz/adsid/integrator.",""]),HG=p(["https://adservice.google.com.om/adsid/integrator.",""]),IG=p(["https://adservice.google.com.pa/adsid/integrator.",
""]),JG=p(["https://adservice.google.com.pe/adsid/integrator.",""]),KG=p(["https://adservice.google.com.pg/adsid/integrator.",""]),LG=p(["https://adservice.google.com.ph/adsid/integrator.",""]),MG=p(["https://adservice.google.com.pk/adsid/integrator.",""]),NG=p(["https://adservice.google.pl/adsid/integrator.",""]),OG=p(["https://adservice.google.pn/adsid/integrator.",""]),PG=p(["https://adservice.google.com.pr/adsid/integrator.",""]),QG=p(["https://adservice.google.ps/adsid/integrator.",""]),RG=p(["https://adservice.google.pt/adsid/integrator.",
""]),SG=p(["https://adservice.google.com.py/adsid/integrator.",""]),TG=p(["https://adservice.google.com.qa/adsid/integrator.",""]),UG=p(["https://adservice.google.ro/adsid/integrator.",""]),VG=p(["https://adservice.google.rw/adsid/integrator.",""]),WG=p(["https://adservice.google.com.sa/adsid/integrator.",""]),XG=p(["https://adservice.google.com.sb/adsid/integrator.",""]),YG=p(["https://adservice.google.sc/adsid/integrator.",""]),ZG=p(["https://adservice.google.se/adsid/integrator.",""]),$G=p(["https://adservice.google.com.sg/adsid/integrator.",
""]),aH=p(["https://adservice.google.sh/adsid/integrator.",""]),bH=p(["https://adservice.google.si/adsid/integrator.",""]),cH=p(["https://adservice.google.sk/adsid/integrator.",""]),dH=p(["https://adservice.google.sn/adsid/integrator.",""]),eH=p(["https://adservice.google.so/adsid/integrator.",""]),fH=p(["https://adservice.google.sm/adsid/integrator.",""]),gH=p(["https://adservice.google.sr/adsid/integrator.",""]),hH=p(["https://adservice.google.st/adsid/integrator.",""]),iH=p(["https://adservice.google.com.sv/adsid/integrator.",
""]),jH=p(["https://adservice.google.td/adsid/integrator.",""]),kH=p(["https://adservice.google.tg/adsid/integrator.",""]),lH=p(["https://adservice.google.co.th/adsid/integrator.",""]),mH=p(["https://adservice.google.com.tj/adsid/integrator.",""]),nH=p(["https://adservice.google.tl/adsid/integrator.",""]),oH=p(["https://adservice.google.tm/adsid/integrator.",""]),pH=p(["https://adservice.google.tn/adsid/integrator.",""]),qH=p(["https://adservice.google.to/adsid/integrator.",""]),rH=p(["https://adservice.google.com.tr/adsid/integrator.",
""]),sH=p(["https://adservice.google.tt/adsid/integrator.",""]),tH=p(["https://adservice.google.com.tw/adsid/integrator.",""]),uH=p(["https://adservice.google.co.tz/adsid/integrator.",""]),vH=p(["https://adservice.google.com.ua/adsid/integrator.",""]),wH=p(["https://adservice.google.co.ug/adsid/integrator.",""]),xH=p(["https://adservice.google.co.uk/adsid/integrator.",""]),yH=p(["https://adservice.google.com.uy/adsid/integrator.",""]),zH=p(["https://adservice.google.co.uz/adsid/integrator.",""]),
AH=p(["https://adservice.google.com.vc/adsid/integrator.",""]),BH=p(["https://adservice.google.co.ve/adsid/integrator.",""]),CH=p(["https://adservice.google.vg/adsid/integrator.",""]),DH=p(["https://adservice.google.co.vi/adsid/integrator.",""]),EH=p(["https://adservice.google.com.vn/adsid/integrator.",""]),FH=p(["https://adservice.google.vu/adsid/integrator.",""]),GH=p(["https://adservice.google.ws/adsid/integrator.",""]),HH=p(["https://adservice.google.rs/adsid/integrator.",""]),IH=p(["https://adservice.google.co.za/adsid/integrator.",
""]),JH=p(["https://adservice.google.co.zm/adsid/integrator.",""]),KH=p(["https://adservice.google.co.zw/adsid/integrator.",""]),LH=p(["https://adservice.google.cat/adsid/integrator.",""]),MH=new Map([[".google.com",function(a){return I(pE,a)}],[".google.ad",function(a){return I(qE,a)}],[".google.ae",function(a){return I(rE,a)}],[".google.com.af",function(a){return I(sE,a)}],[".google.com.ag",function(a){return I(tE,a)}],[".google.com.ai",function(a){return I(uE,a)}],[".google.al",function(a){return I(vE,
a)}],[".google.co.ao",function(a){return I(wE,a)}],[".google.com.ar",function(a){return I(xE,a)}],[".google.as",function(a){return I(yE,a)}],[".google.at",function(a){return I(zE,a)}],[".google.com.au",function(a){return I(AE,a)}],[".google.az",function(a){return I(BE,a)}],[".google.com.bd",function(a){return I(CE,a)}],[".google.be",function(a){return I(DE,a)}],[".google.bf",function(a){return I(EE,a)}],[".google.bg",function(a){return I(FE,a)}],[".google.com.bh",function(a){return I(GE,a)}],[".google.bi",
function(a){return I(HE,a)}],[".google.bj",function(a){return I(IE,a)}],[".google.com.bn",function(a){return I(JE,a)}],[".google.com.bo",function(a){return I(KE,a)}],[".google.com.br",function(a){return I(LE,a)}],[".google.bs",function(a){return I(ME,a)}],[".google.bt",function(a){return I(NE,a)}],[".google.co.bw",function(a){return I(OE,a)}],[".google.com.bz",function(a){return I(PE,a)}],[".google.ca",function(a){return I(QE,a)}],[".google.cd",function(a){return I(RE,a)}],[".google.cf",function(a){return I(SE,
a)}],[".google.cg",function(a){return I(TE,a)}],[".google.ch",function(a){return I(UE,a)}],[".google.ci",function(a){return I(VE,a)}],[".google.co.ck",function(a){return I(WE,a)}],[".google.cl",function(a){return I(XE,a)}],[".google.cm",function(a){return I(YE,a)}],[".google.com.co",function(a){return I(ZE,a)}],[".google.co.cr",function(a){return I($E,a)}],[".google.com.cu",function(a){return I(aF,a)}],[".google.cv",function(a){return I(bF,a)}],[".google.com.cy",function(a){return I(cF,a)}],[".google.cz",
function(a){return I(dF,a)}],[".google.de",function(a){return I(eF,a)}],[".google.dj",function(a){return I(fF,a)}],[".google.dk",function(a){return I(gF,a)}],[".google.dm",function(a){return I(hF,a)}],[".google.dz",function(a){return I(iF,a)}],[".google.com.ec",function(a){return I(jF,a)}],[".google.ee",function(a){return I(kF,a)}],[".google.com.eg",function(a){return I(lF,a)}],[".google.es",function(a){return I(mF,a)}],[".google.com.et",function(a){return I(nF,a)}],[".google.fi",function(a){return I(oF,
a)}],[".google.com.fj",function(a){return I(pF,a)}],[".google.fm",function(a){return I(qF,a)}],[".google.fr",function(a){return I(rF,a)}],[".google.ga",function(a){return I(sF,a)}],[".google.ge",function(a){return I(tF,a)}],[".google.gg",function(a){return I(uF,a)}],[".google.com.gh",function(a){return I(vF,a)}],[".google.com.gi",function(a){return I(wF,a)}],[".google.gl",function(a){return I(xF,a)}],[".google.gm",function(a){return I(yF,a)}],[".google.gr",function(a){return I(zF,a)}],[".google.com.gt",
function(a){return I(AF,a)}],[".google.gy",function(a){return I(BF,a)}],[".google.com.hk",function(a){return I(CF,a)}],[".google.hn",function(a){return I(DF,a)}],[".google.hr",function(a){return I(EF,a)}],[".google.ht",function(a){return I(FF,a)}],[".google.hu",function(a){return I(GF,a)}],[".google.co.id",function(a){return I(HF,a)}],[".google.ie",function(a){return I(IF,a)}],[".google.co.il",function(a){return I(JF,a)}],[".google.im",function(a){return I(KF,a)}],[".google.co.in",function(a){return I(LF,
a)}],[".google.iq",function(a){return I(MF,a)}],[".google.is",function(a){return I(NF,a)}],[".google.it",function(a){return I(OF,a)}],[".google.je",function(a){return I(PF,a)}],[".google.com.jm",function(a){return I(QF,a)}],[".google.jo",function(a){return I(RF,a)}],[".google.co.jp",function(a){return I(SF,a)}],[".google.co.ke",function(a){return I(TF,a)}],[".google.com.kh",function(a){return I(UF,a)}],[".google.ki",function(a){return I(VF,a)}],[".google.kg",function(a){return I(WF,a)}],[".google.co.kr",
function(a){return I(XF,a)}],[".google.com.kw",function(a){return I(YF,a)}],[".google.kz",function(a){return I(ZF,a)}],[".google.la",function(a){return I($F,a)}],[".google.com.lb",function(a){return I(aG,a)}],[".google.li",function(a){return I(bG,a)}],[".google.lk",function(a){return I(cG,a)}],[".google.co.ls",function(a){return I(dG,a)}],[".google.lt",function(a){return I(eG,a)}],[".google.lu",function(a){return I(fG,a)}],[".google.lv",function(a){return I(gG,a)}],[".google.com.ly",function(a){return I(hG,
a)}],[".google.md",function(a){return I(iG,a)}],[".google.me",function(a){return I(jG,a)}],[".google.mg",function(a){return I(kG,a)}],[".google.mk",function(a){return I(lG,a)}],[".google.ml",function(a){return I(mG,a)}],[".google.com.mm",function(a){return I(nG,a)}],[".google.mn",function(a){return I(oG,a)}],[".google.ms",function(a){return I(pG,a)}],[".google.com.mt",function(a){return I(qG,a)}],[".google.mu",function(a){return I(rG,a)}],[".google.mv",function(a){return I(sG,a)}],[".google.mw",function(a){return I(tG,
a)}],[".google.com.mx",function(a){return I(uG,a)}],[".google.com.my",function(a){return I(vG,a)}],[".google.co.mz",function(a){return I(wG,a)}],[".google.com.na",function(a){return I(xG,a)}],[".google.com.ng",function(a){return I(yG,a)}],[".google.com.ni",function(a){return I(zG,a)}],[".google.ne",function(a){return I(AG,a)}],[".google.nl",function(a){return I(BG,a)}],[".google.no",function(a){return I(CG,a)}],[".google.com.np",function(a){return I(DG,a)}],[".google.nr",function(a){return I(EG,a)}],
[".google.nu",function(a){return I(FG,a)}],[".google.co.nz",function(a){return I(GG,a)}],[".google.com.om",function(a){return I(HG,a)}],[".google.com.pa",function(a){return I(IG,a)}],[".google.com.pe",function(a){return I(JG,a)}],[".google.com.pg",function(a){return I(KG,a)}],[".google.com.ph",function(a){return I(LG,a)}],[".google.com.pk",function(a){return I(MG,a)}],[".google.pl",function(a){return I(NG,a)}],[".google.pn",function(a){return I(OG,a)}],[".google.com.pr",function(a){return I(PG,a)}],
[".google.ps",function(a){return I(QG,a)}],[".google.pt",function(a){return I(RG,a)}],[".google.com.py",function(a){return I(SG,a)}],[".google.com.qa",function(a){return I(TG,a)}],[".google.ro",function(a){return I(UG,a)}],[".google.rw",function(a){return I(VG,a)}],[".google.com.sa",function(a){return I(WG,a)}],[".google.com.sb",function(a){return I(XG,a)}],[".google.sc",function(a){return I(YG,a)}],[".google.se",function(a){return I(ZG,a)}],[".google.com.sg",function(a){return I($G,a)}],[".google.sh",
function(a){return I(aH,a)}],[".google.si",function(a){return I(bH,a)}],[".google.sk",function(a){return I(cH,a)}],[".google.sn",function(a){return I(dH,a)}],[".google.so",function(a){return I(eH,a)}],[".google.sm",function(a){return I(fH,a)}],[".google.sr",function(a){return I(gH,a)}],[".google.st",function(a){return I(hH,a)}],[".google.com.sv",function(a){return I(iH,a)}],[".google.td",function(a){return I(jH,a)}],[".google.tg",function(a){return I(kH,a)}],[".google.co.th",function(a){return I(lH,
a)}],[".google.com.tj",function(a){return I(mH,a)}],[".google.tl",function(a){return I(nH,a)}],[".google.tm",function(a){return I(oH,a)}],[".google.tn",function(a){return I(pH,a)}],[".google.to",function(a){return I(qH,a)}],[".google.com.tr",function(a){return I(rH,a)}],[".google.tt",function(a){return I(sH,a)}],[".google.com.tw",function(a){return I(tH,a)}],[".google.co.tz",function(a){return I(uH,a)}],[".google.com.ua",function(a){return I(vH,a)}],[".google.co.ug",function(a){return I(wH,a)}],[".google.co.uk",
function(a){return I(xH,a)}],[".google.com.uy",function(a){return I(yH,a)}],[".google.co.uz",function(a){return I(zH,a)}],[".google.com.vc",function(a){return I(AH,a)}],[".google.co.ve",function(a){return I(BH,a)}],[".google.vg",function(a){return I(CH,a)}],[".google.co.vi",function(a){return I(DH,a)}],[".google.com.vn",function(a){return I(EH,a)}],[".google.vu",function(a){return I(FH,a)}],[".google.ws",function(a){return I(GH,a)}],[".google.rs",function(a){return I(HH,a)}],[".google.co.za",function(a){return I(IH,
a)}],[".google.co.zm",function(a){return I(JH,a)}],[".google.co.zw",function(a){return I(KH,a)}],[".google.cat",function(a){return I(LH,a)}]].map(function(a){var b=q(a);a=b.next().value;b=b.next().value;var c={};return[a,(c.json=b("json"),c.js=b("js"),c["sync.js"]=b("sync.js"),c)]}));var NH=function(a,b,c){var d=Wg("LINK",a);try{if(d.rel="preload",ib("preload","stylesheet")){d.href=Ff(b).toString();var e=Vf('style[nonce],link[rel="stylesheet"][nonce]',d.ownerDocument&&d.ownerDocument.defaultView);e&&d.setAttribute("nonce",e)}else{if(b instanceof Ef)var f=Ff(b).toString();else{if(b instanceof If)var g=Jf(b);else{if(b instanceof If)var h=b;else{b="object"==typeof b&&b.xb?b.gb():String(b);b:if(e=b,Lf){try{var k=new URL(e)}catch(v){var m="https:";break b}m=k.protocol}else c:{var n=
document.createElement("a");try{n.href=e}catch(v){m=void 0;break c}var r=n.protocol;m=":"===r||""===r?"https:":r}"javascript:"===m&&(b="about:invalid#zClosurez");h=new If(b,Hf)}g=Jf(h)}f=g}d.href=f}}catch(v){return}d.as="script";c&&d.setAttribute("nonce",c);if(a=a.getElementsByTagName("head")[0])try{a.appendChild(d)}catch(v){}};var OH=u,QH=function(a){var b=new Map([["domain",u.location.hostname]]);PH[3]>=Wa()&&b.set("adsid",PH[1]);return qh(MH.get(a).js,b)},PH,RH,SH=function(){OH=u;PH=OH.googleToken=OH.googleToken||{};var a=Wa();PH[1]&&PH[3]>a&&0<PH[2]||(PH[1]="",PH[2]=-1,PH[3]=-1,PH[4]="",PH[6]="");RH=OH.googleIMState=OH.googleIMState||{};MH.has(RH[1])||(RH[1]=".google.com");Array.isArray(RH[5])||(RH[5]=[]);"boolean"!==typeof RH[6]&&(RH[6]=!1);Array.isArray(RH[7])||(RH[7]=[]);"number"!==typeof RH[8]&&(RH[8]=0)},TH={Wc:function(){return 0<
RH[8]},Qf:function(){RH[8]++},Rf:function(){0<RH[8]&&RH[8]--},Sf:function(){RH[8]=0},wi:function(){return!1},Vd:function(){return RH[5]},Od:function(a){try{a()}catch(b){u.setTimeout(function(){throw b;},0)}},ge:function(){if(!TH.Wc()){var a=u.document,b=function(e){e=QH(e);a:{try{var f=Vf("script[nonce]");break a}catch(g){}f=void 0}NH(a,e.toString(),f);f=Wg("SCRIPT",a);f.type="text/javascript";f.onerror=function(){return u.processGoogleToken({},2)};f.src=Ff(e);Hg(f);try{(a.head||a.body||a.documentElement).appendChild(f),
TH.Qf()}catch(g){}},c=RH[1];b(c);".google.com"!=c&&b(".google.com");b={};var d=(b.newToken="FBT",b);u.setTimeout(function(){return u.processGoogleToken(d,1)},1E3)}}};function UH(a){SH();var b=OH.googleToken[5]||0;a&&(0!=b||PH[3]>=Wa()?TH.Od(a):(TH.Vd().push(a),TH.ge()));PH[3]>=Wa()&&PH[2]>=Wa()||TH.ge()}
var VH=function(a){u.processGoogleToken=u.processGoogleToken||function(b,c){var d=b;d=void 0===d?{}:d;c=void 0===c?0:c;b=d.newToken||"";var e="NT"==b,f=parseInt(d.freshLifetimeSecs||"",10),g=parseInt(d.validLifetimeSecs||"",10),h=d["1p_jar"]||"";d=d.pucrd||"";SH();1==c?TH.Sf():TH.Rf();var k=OH.googleToken=OH.googleToken||{},m=0==c&&b&&"string"===typeof b&&!e&&"number"===typeof f&&0<f&&"number"===typeof g&&0<g&&"string"===typeof h;e=e&&!TH.Wc()&&(!(PH[3]>=Wa())||"NT"==PH[1]);var n=!(PH[3]>=Wa())&&
0!=c;if(m||e||n)e=Wa(),f=e+1E3*f,g=e+1E3*g,1E-5>Math.random()&&lh(u,"https://pagead2.googlesyndication.com/pagead/gen_204?id=imerr&err="+c),k[5]=c,k[1]=b,k[2]=f,k[3]=g,k[4]=h,k[6]=d,SH();if(m||!TH.Wc()){c=TH.Vd();for(b=0;b<c.length;b++)TH.Od(c[b]);c.length=0}};UH(a)};var WH=function(a){D.call(this);this.j=a;this.h=null;this.o={};this.A=0;this.l=null};t(WH,D);WH.prototype.N=function(){this.l&&cf(this.j,"message",this.l);D.prototype.N.call(this)};
var YH=function(a){var b;return"function"===typeof(null==(b=a.j)?void 0:b.__uspapi)||null!=XH(a)},$H=function(a,b){var c={};if(YH(a)){var d=Ye(function(){return b(c)});ZH(a,function(e,f){f&&(c=e);d()});setTimeout(d,500)}else b(c)},ZH=function(a,b){var c;"function"===typeof(null==(c=a.j)?void 0:c.__uspapi)?(a=a.j.__uspapi,a("getUSPData",1,b)):XH(a)&&(aI(a),c=++a.A,a.o[c]=b,a.h&&(b={},a.h.postMessage((b.__uspapiCall={command:"getUSPData",version:1,callId:c},b),"*")))},XH=function(a){if(a.h)return a.h;
a.h=Vg(a.j,"__uspapiLocator");return a.h},aI=function(a){a.l||(a.l=function(b){try{var c={};"string"===typeof b.data?c=JSON.parse(b.data):c=b.data;var d=c.__uspapiReturn;var e;null==(e=a.o)||e[d.callId](d.returnValue,d.success)}catch(f){}},bf(a.j,"message",a.l))};(function(){if(!lf(function(b){return b.match(G().location.href)})){var a=IB(document.querySelectorAll&&document.querySelector?document.querySelectorAll("SCRIPT"):document.getElementsByTagName("SCRIPT"));null==a&&document.querySelectorAll&&(a=IB(document.querySelectorAll("script")));if(null==a)throw Error("IMA SDK is either not loaded from a google domain or is not a supported version.");}})();
var bI=function(a){N.call(this);var b=this,c=Zy(az(this.getSettings()));c&&0<c.length&&(mi.reset(),oi(new Qi(c)));this.B=new aE;this.C=null;this.h=a;this.G=new Map;this.A=this.h.K;this.J=new Qu(this);ff(this,this.J);this.L=new ez(window);this.M=new WH(window);this.j=null;this.H={};0!=bz.h?(this.l=new cC,ff(this,this.l)):this.l=eC();hB()&&(this.l.init($C(this.A)),this.F=kC(this.l,this.h.G),ef(this,function(){var d=b.F;b.l.A.delete(d);0!=bz.h&&(J(Zr).o[d]=null)}))};t(bI,N);bI.prototype.destroy=function(){this.W()};
bI.prototype.getVersion=function(){return"h.3.566.2"};bI.prototype.requestAds=function(a,b){var c=this,d=[],e=null;gz(this.L)&&d.push(new Promise(function(g){jz(c.L,function(h){e=h;g()})}));var f=null;YH(this.M)&&d.push(new Promise(function(g){$H(c.M,function(h){f=h;g()})}));Promise.all(d).then(function(){cI(c,a,b,{xd:e,Bd:f})})};
var cI=function(a,b,c,d){var e=b.adTagUrl;e&&oB.h().report(8,{adtagurl:e,customPlayback:vD(a.h),customClick:null!=a.h.I});var f="goog_"+ag++;a.G.set(f,c||null);var g=dI({adTagUrl:e,be:!1,xd:d.xd,Bd:d.Bd});a.j=nz(e,g||{});HA(a.j,function(){eI(a)});var h;c=null==(h=b.adTagUrl)?void 0:h.includes("GOOGLE_INSTREAM_VIDEO_NONCE");h=pz(a.j);fI(a,h,c).then(function(){var k={};k=(k.limaExperimentIds=ni().sort().join(","),k);var m=a.getSettings(),n=jC(a.l);n=void 0===n?null:n;var r={};null!=n&&(r.activeViewPushUpdates=
n);r.activityMonitorMode=m.h;r.adsToken=m.B;r.autoPlayAdBreaks=m.l;r.companionBackfill=m.getCompanionBackfill();r.cookiesEnabled=m.isCookiesEnabled();r.disableCustomPlaybackForIOS10Plus=m.getDisableCustomPlaybackForIOS10Plus();r.engagementDetection=!0;r.isFunctionalTest=!1;r.isVpaidAdapter=m.j;r["1pJar"]=m.P;r.numRedirects=m.getNumRedirects();r.pageCorrelator=m.I;r.persistentStateCorrelator=ih();r.playerType=m.getPlayerType();r.playerVersion=m.getPlayerVersion();r.ppid=m.getPpid();r.privacyControls=
m.Z;r.reportMediaRequests=!1;r.sessionId=m.F;r.streamCorrelator=m.G;r.testingConfig=az(m).h;r.urlSignals=m.aa;r.vpaidMode=m.A;r.featureFlags=m.getFeatureFlags();n=b.adTagUrl;m={};m.contentMediaUrl=a.h.J;m.customClickTrackingProvided=null!=a.h.I;a:{var v=sm();v=q(v);for(var y=v.next();!y.done;y=v.next())if(y=y.value,y.url&&y.url.includes("amp=1")){v=!0;break a}v=null!=window.context?0<parseInt(window.context.ampcontextVersion,10):null!=vm().l}m.isAmp=v;a:{try{var B=window.top.location.href}catch(Uv){B=
2;break a}B=null==B?2:B==window.document.location.href?0:1}m.iframeState=B;m.imaHostingDomain=window.document.domain;m.imaHostingPageUrl=window.document.URL;if(Jn())var F=window.location.href;else{y=vm();B=y.j;v=y.h;y=y.l;var rb=null;if(y)try{F=Yt(y.url);var pa=F.h,U=jB(pa,"/v/");U||(U=jB(pa,"/a/"));if(!U)throw Error("Can not extract standalone amp url.");var ca=jB("/"+U,"/s/"),lb=Nt(F.l);lb.remove("amp_js_v");lb.remove("amp_lite");var Rb=ca?Yt("https://"+ca):Yt("http://"+U);Mt(Rb,lb);rb=Rb.toString()}catch(Uv){rb=
null}F=rb?rb:B&&B.url?B.url:v&&v.url?v.url:""}m.topAccessiblePageUrl=F;m.referrer=window.document.referrer;m.domLoadTime=a.A.J;m.sdkImplLoadTime=a.A.L;m.supportsResizing=!vD(a.h);F=G().location.ancestorOrigins;m.topOrigin=F?0<F.length&&200>F[F.length-1].length?F[F.length-1]:"":null;m.osdId=a.F;m.usesCustomVideoPlayback=vD(a.h);m.usesInlinePlayback=a.h.F;pa=a.h.H;F=[];ca=U="";if(null!=pa){U=pa;ca=!0;ca=void 0===ca?!1:ca;lb=[];for(Rb=0;U&&25>Rb;++Rb){B="";void 0!==ca&&ca||(B=(B=9!==U.nodeType&&U.id)?
"/"+B:"");a:{if(U&&U.nodeName&&U.parentElement){v=U.nodeName.toString().toLowerCase();y=U.parentElement.childNodes;for(var Oc=rb=0;Oc<y.length;++Oc){var Gn=y[Oc];if(Gn.nodeName&&Gn.nodeName.toString().toLowerCase()===v){if(U===Gn){v="."+rb;break a}++rb}}}v=""}lb.push((U.nodeName&&U.nodeName.toString().toLowerCase())+B+v);U=U.parentElement}U=lb.join();if(pa){pa=(pa=pa.ownerDocument)&&(pa.defaultView||pa.parentWindow)||null;ca=[];if(pa)try{var da=pa.parent;for(lb=0;da&&da!==pa&&25>lb;++lb){var td=da.frames;
for(Rb=0;Rb<td.length;++Rb)if(pa===td[Rb]){ca.push(Rb);break}pa=da;da=pa.parent}}catch(Uv){}ca=ca.join()}else ca=""}F.push(U,ca);if(null!=n){for(da=0;da<Et.length-1;++da)F.push(Cg(n,Et[da])||"");da=Cg(n,"videoad_start_delay");td="";da&&(da=parseInt(da,10),td=0>da?"postroll":0==da?"preroll":"midroll");F.push(td)}else for(da=0;da<Et.length;++da)F.push("");m=(m.videoAdKey=Rg(F.join(":")).toString(),m);da={};k=(da.consentSettings=g,da.imalibExperiments=k,da.settings=r,da.videoEnvironment=m,da);r={};r.adsResponse=
b.adsResponse;r.videoPlayActivation=b.j;r.videoPlayMuted=b.l;r.videoContinuousPlay=b.h;r.adTagUrl=b.adTagUrl;r.contentDuration=b.contentDuration;r.contentKeywords=b.contentKeywords;r.contentTitle=b.contentTitle;r.linearAdSlotWidth=b.linearAdSlotWidth;r.linearAdSlotHeight=b.linearAdSlotHeight;r.nonLinearAdSlotWidth=b.nonLinearAdSlotWidth;r.nonLinearAdSlotHeight=b.nonLinearAdSlotHeight;r.forceNonLinearFullSlot=b.forceNonLinearFullSlot;r.liveStreamPrefetchSeconds=b.liveStreamPrefetchSeconds;r.vastLoadTimeout=
b.vastLoadTimeout;r.omidAccessModeRules=b.omidAccessModeRules;r.pageUrl=b.pageUrl;Object.assign(k,r);if(a.j&&bz.isCookiesEnabled()){r=qz(a.j);m=a.B;if(0===m.j){if(r&&$D("__gads",r,m.h))da=!0;else if(da=m.h,Kd(r,5)&&ZD(da)&&(new XD(da.document)).set("GoogleAdServingTest","Good",void 0),da="Good"===$D("GoogleAdServingTest",r,m.h))td=m.h,Kd(r,5)&&ZD(td)&&(new XD(td.document)).remove("GoogleAdServingTest",void 0,void 0);m.j=da?2:1}k.isBrowserCookieEnabled=2===m.j;m=r?$D("__gads",r,a.B.h):null;null!==
m&&(k.gfpCookieValue=m);ji(uj)&&(m=r?$D("__gpi",r,a.B.h):null,null!==m&&(k.gfpCookieV2Id=m),r=r?$D("__gpi_opt_out",r,a.B.h):null,null!==r&&(k.gfpCookieV2OptOut=r))}if(r=Hz(GA(a.j)))a.H.espSignals=r,k.espSignals=r;k.isEapLoader=!1;r=$C(a.A,f);a.J.O(r,"adsLoader",a.P);Ky(r,"adsLoader","requestAds",k)})};bI.prototype.getSettings=function(){return bz};bI.prototype.contentComplete=function(){Ky($C(this.A),"adsLoader","contentComplete")};
bI.prototype.P=function(a){var b=a.messageType;switch(b){case "adsLoaded":b=a.ra;a=a.Xb;b=new Z(this.l,this.h,b.adTagUrl||"",b.adCuePoints,this.F,b.isCustomClickTrackingAllowed,$C(this.A,a),this.j);this.dispatchEvent(new mE(b,gI(this,a)));break;case "error":b=a.ra;this.dispatchEvent(new AD(new yD(b),gI(this,a.Xb)));a={error:b.errorCode,vis:th(document)};oB.h().report(7,a);break;case "cookieUpdate":a=a.ra;if(null==a)break;if(bz.isCookiesEnabled()){b=new cz;A(b,5,!0);var c=a.gfpCookie;c&&bE(this.B,
"__gads",Jl(c),b);ji(uj)&&(c=a.gfpCookieV2)&&bE(this.B,"__gpi",Jl(c),b)}hI(this,a.encryptedSignalBidderIds||[]);break;case "trackingUrlPinged":this.dispatchEvent(new BD(b,null,a.ra))}};
var hI=function(a,b){0!=b.length&&(b=IA(b.map(function(c){return{hc:c}}),a.j))&&b.forEach(function(c){return c.then(function(d){d&&eI(a)})})},eI=function(a){var b=Hz(GA(a.j));b&&(a.H.espSignals=b,Ky($C(a.A),"adsLoader","signalsRefresh",a.H))},gI=function(a,b){var c=a.G.get(b);a.G.delete(b);return c},dI=function(a){var b,c=b=void 0===b?u:b;c=void 0===c?u:c;(c=!!c.googlefc)||(c=b.top,c=void 0===c?u.top:c,c=Ug(c,"googlefcPresent"));var d=void 0===d?u:d;d=Ug(d.top,"googlefcLoaded");b=a.xd;var e=a.Bd,
f={};return f.gfcPresent=!1,f.gfcLoaded=d,f.gfcUserConsent=c?4:0,f.isGdprLoader=a.be,f.addtlConsent=b?b.addtlConsent:null,f.gdprApplies=b?b.gdprApplies:null,f.tcString=b?b.tcString:null,f.uspString=e?e.uspString:null,f},fI=function(a,b,c){return b?(a.C=null,Promise.resolve()):c?ji(zj)?iI(a):Promise.resolve():eB()?Promise.resolve():jI()},iI=function(a){var b;return Ga(function(c){if(1==c.h)return a.C||(a.C=new Hy,Iy(a.C)),ya(c,a.C.getId(),2);b=c.j;bz.B=b.id||"";c.h=0})},jI=function(){return new Promise(function(a){VH(function(){SH();
bz.B=PH[1]||"";SH();bz.Z=PH[6]||"";SH();bz.P=PH[4]||"";a()})})};bI.prototype.contentComplete=bI.prototype.contentComplete;bI.prototype.getSettings=bI.prototype.getSettings;bI.prototype.requestAds=bI.prototype.requestAds;bI.prototype.getVersion=bI.prototype.getVersion;bI.prototype.destroy=bI.prototype.destroy;w("google.ima.AdCuePoints.POSTROLL",-1,window);w("google.ima.AdCuePoints.PREROLL",0,window);w("google.ima.AdDisplayContainer",wD,window);w("google.ima.AdError.ErrorCode",T,window);w("google.ima.AdError.ErrorCode.VIDEO_ELEMENT_USED",-1,window);w("google.ima.AdError.ErrorCode.VIDEO_ELEMENT_REQUIRED",-1,window);w("google.ima.AdError.ErrorCode.VAST_MEDIA_ERROR",-1,window);w("google.ima.AdError.ErrorCode.ADSLOT_NOT_VISIBLE",-1,window);w("google.ima.AdError.ErrorCode.OVERLAY_AD_LOADING_FAILED",-1,window);
w("google.ima.AdError.ErrorCode.VAST_MALFORMED_RESPONSE",-1,window);w("google.ima.AdError.ErrorCode.COMPANION_AD_LOADING_FAILED",-1,window);w("google.ima.AdError.Type",xD,window);w("google.ima.AdErrorEvent.Type",zD,window);w("google.ima.AdEvent.Type",CD,window);w("google.ima.AdsLoader",bI,window);w("google.ima.AdsManagerLoadedEvent.Type",nE,window);w("google.ima.CompanionAdSelectionSettings",Py,window);w("google.ima.CompanionAdSelectionSettings.CreativeType",My);
w("google.ima.CompanionAdSelectionSettings.ResourceType",Ny);w("google.ima.CompanionAdSelectionSettings.SizeCriteria",Oy);w("google.ima.CustomContentLoadedEvent.Type.CUSTOM_CONTENT_LOADED","deprecated-event",window);w("ima.ImaSdkSettings",V,window);w("google.ima.settings",bz,window);w("google.ima.ImaSdkSettings.CompanionBackfillMode",{ALWAYS:"always",ON_MASTER_AD:"on_master_ad"});w("google.ima.ImaSdkSettings.VpaidMode",{DISABLED:0,ENABLED:1,INSECURE:2,0:"DISABLED",1:"ENABLED",2:"INSECURE"});
w("google.ima.AdsRenderingSettings",$B,window);w("google.ima.AdsRenderingSettings.AUTO_SCALE",-1,window);w("google.ima.AdsRequest",oE,window);w("google.ima.VERSION","3.566.2");w("google.ima.OmidAccessMode",{LIMITED:"limited",DOMAIN:"domain",FULL:"full"});
w("google.ima.OmidVerificationVendor",{COMSCORE:7,DOUBLEVERIFY:3,GOOGLE:9,INTEGRAL_AD_SCIENCE:4,MEETRICS:8,MOAT:2,NIELSEN:6,PIXELATE:5,OTHER:1,7:"COMSCORE",3:"DOUBLEVERIFY",9:"GOOGLE",4:"INTEGRAL_AD_SCIENCE",8:"MEETRICS",2:"MOAT",6:"NIELSEN",5:"PIXELATE",1:"OTHER"});w("google.ima.UiElements",{AD_ATTRIBUTION:"adAttribution",COUNTDOWN:"countdown"});w("google.ima.ViewMode",{NORMAL:"normal",FULLSCREEN:"fullscreen"});})();


(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('video.js')) :
	typeof define === 'function' && define.amd ? define(['exports', 'video.js'], factory) :
	(factory((global.videojsIma = {}),global.videojs));
}(this, (function (exports,videojs) { 'use strict';

videojs = videojs && videojs.hasOwnProperty('default') ? videojs['default'] : videojs;

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Wraps the video.js player for the plugin.
 *
 * @param {Object} player Video.js player instance.
 * @param {Object} adsPluginSettings Settings for the contrib-ads plugin.
 * @param {Controller} controller Reference to the parent controller.
 */
const PlayerWrapper = function (player, adsPluginSettings, controller) {
  /**
   * Instance of the video.js player.
   */
  this.vjsPlayer = player;

  /**
   * Plugin controller.
   */
  this.controller = controller;

  /**
   * Timer used to track content progress.
   */
  this.contentTrackingTimer = null;

  /**
   * True if our content video has completed, false otherwise.
   */
  this.contentComplete = false;

  /**
   * Handle to interval that repeatedly updates current time.
   */
  this.updateTimeIntervalHandle = null;

  /**
   * Interval (ms) to check for player resize for fluid support.
   */
  this.updateTimeInterval = 1000;

  /**
   * Handle to interval that repeatedly checks for seeking.
   */
  this.seekCheckIntervalHandle = null;

  /**
   * Interval (ms) on which to check if the user is seeking through the
   * content.
   */
  this.seekCheckInterval = 1000;

  /**
   * Handle to interval that repeatedly checks for player resize.
   */
  this.resizeCheckIntervalHandle = null;

  /**
   * Interval (ms) to check for player resize for fluid support.
   */
  this.resizeCheckInterval = 250;

  /**
   * Threshold by which to judge user seeking. We check every 1000 ms to see
   * if the user is seeking. In order for us to decide that they are *not*
   * seeking, the content video playhead must only change by 900-1100 ms
   * between checks. Any greater change and we assume the user is seeking
   * through the video.
   */
  this.seekThreshold = 100;

  /**
   * Content ended listeners passed by the publisher to the plugin. Publishers
   * should allow the plugin to handle content ended to ensure proper support
   * of custom ad playback.
   */
  this.contentEndedListeners = [];

  /**
   * Stores the content source so we can re-populate it manually after a
   * post-roll on iOS.
   */
  this.contentSource = '';

  /**
   * Stores the content source type so we can re-populate it manually after a
   * post-roll.
   */
  this.contentSourceType = '';

  /**
   * Stores data for the content playhead tracker.
   */
  this.contentPlayheadTracker = {
    currentTime: 0,
    previousTime: 0,
    seeking: false,
    duration: 0
  };

  /**
   * Player dimensions. Used in our resize check.
   */
  this.vjsPlayerDimensions = {
    width: this.getPlayerWidth(),
    height: this.getPlayerHeight()
  };

  /**
   * Video.js control bar.
   */
  this.vjsControls = this.vjsPlayer.getChild('controlBar');

  /**
   * Vanilla HTML5 video player underneath the video.js player.
   */
  this.h5Player = null;

  this.vjsPlayer.one('play', this.setUpPlayerIntervals.bind(this));
  this.boundContentEndedListener = this.localContentEndedListener.bind(this);
  this.vjsPlayer.on('contentended', this.boundContentEndedListener);
  this.vjsPlayer.on('dispose', this.playerDisposedListener.bind(this));
  this.vjsPlayer.on('readyforpreroll', this.onReadyForPreroll.bind(this));
  this.vjsPlayer.on('adtimeout', this.onAdTimeout.bind(this));
  this.vjsPlayer.ready(this.onPlayerReady.bind(this));

  if (this.controller.getSettings().requestMode === 'onPlay') {
    this.vjsPlayer.one('play', this.controller.requestAds.bind(this.controller));
  }

  this.vjsPlayer.ads(adsPluginSettings);
};

/**
 * Set up the intervals we use on the player.
 */
PlayerWrapper.prototype.setUpPlayerIntervals = function () {
  this.updateTimeIntervalHandle = setInterval(this.updateCurrentTime.bind(this), this.updateTimeInterval);
  this.seekCheckIntervalHandle = setInterval(this.checkForSeeking.bind(this), this.seekCheckInterval);
  this.resizeCheckIntervalHandle = setInterval(this.checkForResize.bind(this), this.resizeCheckInterval);
};

/**
 * Updates the current time of the video
 */
PlayerWrapper.prototype.updateCurrentTime = function () {
  if (!this.contentPlayheadTracker.seeking) {
    this.contentPlayheadTracker.currentTime = this.vjsPlayer.currentTime();
  }
};

/**
 * Detects when the user is seeking through a video.
 * This is used to prevent mid-rolls from playing while a user is seeking.
 *
 * There *is* a seeking property of the HTML5 video element, but it's not
 * properly implemented on all platforms (e.g. mobile safari), so we have to
 * check ourselves to be sure.
 */
PlayerWrapper.prototype.checkForSeeking = function () {
  const tempCurrentTime = this.vjsPlayer.currentTime();
  const diff = (tempCurrentTime - this.contentPlayheadTracker.previousTime) * 1000;
  if (Math.abs(diff) > this.seekCheckInterval + this.seekThreshold) {
    this.contentPlayheadTracker.seeking = true;
  } else {
    this.contentPlayheadTracker.seeking = false;
  }
  this.contentPlayheadTracker.previousTime = this.vjsPlayer.currentTime();
};

/**
 * Detects when the player is resized (for fluid support) and resizes the
 * ads manager to match.
 */
PlayerWrapper.prototype.checkForResize = function () {
  const currentWidth = this.getPlayerWidth();
  const currentHeight = this.getPlayerHeight();

  if (currentWidth != this.vjsPlayerDimensions.width || currentHeight != this.vjsPlayerDimensions.height) {
    this.vjsPlayerDimensions.width = currentWidth;
    this.vjsPlayerDimensions.height = currentHeight;
    this.controller.onPlayerResize(currentWidth, currentHeight);
  }
};

/**
 * Local content ended listener for contentComplete.
 */
PlayerWrapper.prototype.localContentEndedListener = function () {
  if (!this.contentComplete) {
    this.contentComplete = true;
    this.controller.onContentComplete();
  }

  for (let index in this.contentEndedListeners) {
    if (typeof this.contentEndedListeners[index] === 'function') {
      this.contentEndedListeners[index]();
    }
  }

  clearInterval(this.updateTimeIntervalHandle);
  clearInterval(this.seekCheckIntervalHandle);
  clearInterval(this.resizeCheckIntervalHandle);
  if (this.vjsPlayer.el()) {
    this.vjsPlayer.one('play', this.setUpPlayerIntervals.bind(this));
  }
};

/**
 * Called when it's time to play a post-roll but we don't have one to play.
 */
PlayerWrapper.prototype.onNoPostroll = function () {
  this.vjsPlayer.trigger('nopostroll');
};

/**
 * Detects when the video.js player has been disposed.
 */
PlayerWrapper.prototype.playerDisposedListener = function () {
  this.contentEndedListeners = [];
  this.controller.onPlayerDisposed();

  this.contentComplete = true;
  this.vjsPlayer.off('contentended', this.boundContentEndedListener);

  // Bug fix: https://github.com/googleads/videojs-ima/issues/306
  if (this.vjsPlayer.ads.adTimeoutTimeout) {
    clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);
  }

  const intervalsToClear = [this.updateTimeIntervalHandle, this.seekCheckIntervalHandle, this.resizeCheckIntervalHandle];
  for (let index in intervalsToClear) {
    if (intervalsToClear[index]) {
      clearInterval(intervalsToClear[index]);
    }
  }
};

/**
 * Start ad playback, or content video playback in the absence of a
 * pre-roll.
 */
PlayerWrapper.prototype.onReadyForPreroll = function () {
  this.controller.onPlayerReadyForPreroll();
};

/**
 * Detects if the ad has timed out.
 */
PlayerWrapper.prototype.onAdTimeout = function () {
  this.controller.onAdTimeout();
};

/**
 * Called when the player fires its 'ready' event.
 */
PlayerWrapper.prototype.onPlayerReady = function () {
  this.h5Player = document.getElementById(this.getPlayerId()).getElementsByClassName('vjs-tech')[0];

  // Detect inline options
  if (this.h5Player.hasAttribute('autoplay')) {
    this.controller.setSetting('adWillAutoPlay', true);
  }

  // Sync ad volume with player volume.
  this.onVolumeChange();
  this.vjsPlayer.on('fullscreenchange', this.onFullscreenChange.bind(this));
  this.vjsPlayer.on('volumechange', this.onVolumeChange.bind(this));

  this.controller.onPlayerReady();
};

/**
 * Listens for the video.js player to change its fullscreen status. This
 * keeps the fullscreen-ness of the AdContainer in sync with the player.
 */
PlayerWrapper.prototype.onFullscreenChange = function () {
  if (this.vjsPlayer.isFullscreen()) {
    this.controller.onPlayerEnterFullscreen();
  } else {
    this.controller.onPlayerExitFullscreen();
  }
};

/**
 * Listens for the video.js player to change its volume. This keeps the ad
 * volume in sync with the content volume if the volume of the player is
 * changed while content is playing.
 */
PlayerWrapper.prototype.onVolumeChange = function () {
  const newVolume = this.vjsPlayer.muted() ? 0 : this.vjsPlayer.volume();
  this.controller.onPlayerVolumeChanged(newVolume);
};

/**
 * Inject the ad container div into the DOM.
 *
 * @param{HTMLElement} adContainerDiv The ad container div.
 */
PlayerWrapper.prototype.injectAdContainerDiv = function (adContainerDiv) {
  this.vjsControls.el().parentNode.appendChild(adContainerDiv);
};

/**
 * @return {Object} The content player.
 */
PlayerWrapper.prototype.getContentPlayer = function () {
  return this.h5Player;
};

/**
 * @return {number} The volume, 0-1.
 */
PlayerWrapper.prototype.getVolume = function () {
  return this.vjsPlayer.muted() ? 0 : this.vjsPlayer.volume();
};

/**
 * Set the volume of the player. 0-1.
 *
 * @param {number} volume The new volume.
 */
PlayerWrapper.prototype.setVolume = function (volume) {
  this.vjsPlayer.volume(volume);
  if (volume == 0) {
    this.vjsPlayer.muted(true);
  } else {
    this.vjsPlayer.muted(false);
  }
};

/**
 * Ummute the player.
 */
PlayerWrapper.prototype.unmute = function () {
  this.vjsPlayer.muted(false);
};

/**
 * Mute the player.
 */
PlayerWrapper.prototype.mute = function () {
  this.vjsPlayer.muted(true);
};

/**
 * Play the video.
 */
PlayerWrapper.prototype.play = function () {
  this.vjsPlayer.play();
};

/**
 * Toggles playback of the video.
 */
PlayerWrapper.prototype.togglePlayback = function () {
  if (this.vjsPlayer.paused()) {
    this.vjsPlayer.play();
  } else {
    this.vjsPlayer.pause();
  }
};

/**
 * Get the player width.
 *
 * @return {number} The player's width.
 */
PlayerWrapper.prototype.getPlayerWidth = function () {
  let width = (getComputedStyle(this.vjsPlayer.el()) || {}).width;

  if (!width || parseFloat(width) === 0) {
    width = (this.vjsPlayer.el().getBoundingClientRect() || {}).width;
  }

  return parseFloat(width) || this.vjsPlayer.width();
};

/**
 * Get the player height.
 *
 * @return {number} The player's height.
 */
PlayerWrapper.prototype.getPlayerHeight = function () {
  let height = (getComputedStyle(this.vjsPlayer.el()) || {}).height;

  if (!height || parseFloat(height) === 0) {
    height = (this.vjsPlayer.el().getBoundingClientRect() || {}).height;
  }

  return parseFloat(height) || this.vjsPlayer.height();
};

/**
 * @return {Object} The vjs player's options object.
 */
PlayerWrapper.prototype.getPlayerOptions = function () {
  return this.vjsPlayer.options_;
};

/**
 * Returns the instance of the player id.
 * @return {string} The player id.
 */
PlayerWrapper.prototype.getPlayerId = function () {
  return this.vjsPlayer.id();
};

/**
 * Toggle fullscreen state.
 */
PlayerWrapper.prototype.toggleFullscreen = function () {
  if (this.vjsPlayer.isFullscreen()) {
    this.vjsPlayer.exitFullscreen();
  } else {
    this.vjsPlayer.requestFullscreen();
  }
};

/**
 * Returns the content playhead tracker.
 *
 * @return {Object} The content playhead tracker.
 */
PlayerWrapper.prototype.getContentPlayheadTracker = function () {
  return this.contentPlayheadTracker;
};

/**
 * Handles ad errors.
 *
 * @param {Object} adErrorEvent The ad error event thrown by the IMA SDK.
 */
PlayerWrapper.prototype.onAdError = function (adErrorEvent) {
  this.vjsControls.show();
  const errorMessage = adErrorEvent.getError !== undefined ? adErrorEvent.getError() : adErrorEvent.stack;
  this.vjsPlayer.trigger({ type: 'adserror', data: {
      AdError: errorMessage,
      AdErrorEvent: adErrorEvent
    } });
};

/**
 * Handles ad log messages.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the IMA SDK.
 */
PlayerWrapper.prototype.onAdLog = function (adEvent) {
  const adData = adEvent.getAdData();
  const errorMessage = adData['adError'] !== undefined ? adData['adError'].getMessage() : undefined;
  this.vjsPlayer.trigger({ type: 'adslog', data: {
      AdError: errorMessage,
      AdEvent: adEvent
    } });
};

/**
 * Handles ad break starting.
 */
PlayerWrapper.prototype.onAdBreakStart = function () {
  this.contentSource = this.vjsPlayer.currentSrc();
  this.contentSourceType = this.vjsPlayer.currentType();
  this.vjsPlayer.off('contentended', this.boundContentEndedListener);
  this.vjsPlayer.ads.startLinearAdMode();
  this.vjsControls.hide();
  this.vjsPlayer.pause();
};

/**
 * Handles ad break ending.
 */
PlayerWrapper.prototype.onAdBreakEnd = function () {
  this.vjsPlayer.on('contentended', this.boundContentEndedListener);
  if (this.vjsPlayer.ads.inAdBreak()) {
    this.vjsPlayer.ads.endLinearAdMode();
  }
  this.vjsControls.show();
};

/**
 * Handles an individual ad start.
 */
PlayerWrapper.prototype.onAdStart = function () {
  this.vjsPlayer.trigger('ads-ad-started');
};

/**
 * Handles when all ads have finished playing.
 */
PlayerWrapper.prototype.onAllAdsCompleted = function () {
  if (this.contentComplete == true) {
    // The null check on this.contentSource was added to fix
    // an error when the post-roll was an empty VAST tag.
    if (this.contentSource && this.vjsPlayer.currentSrc() != this.contentSource) {
      this.vjsPlayer.src({
        src: this.contentSource,
        type: this.contentSourceType
      });
    }
    this.controller.onContentAndAdsCompleted();
  }
};

/**
 * Triggers adsready for contrib-ads.
 */
PlayerWrapper.prototype.onAdsReady = function () {
  this.vjsPlayer.trigger('adsready');
};

/**
 * Changes the player source.
 * @param {?string} contentSrc The URI for the content to be played. Leave
 *     blank to use the existing content.
 */
PlayerWrapper.prototype.changeSource = function (contentSrc) {
  // Only try to pause the player when initialised with a source already
  if (this.vjsPlayer.currentSrc()) {
    this.vjsPlayer.currentTime(0);
    this.vjsPlayer.pause();
  }
  if (contentSrc) {
    this.vjsPlayer.src(contentSrc);
  }
  this.vjsPlayer.one('loadedmetadata', this.seekContentToZero.bind(this));
};

/**
 * Seeks content to 00:00:00. This is used as an event handler for the
 * loadedmetadata event, since seeking is not possible until that event has
 * fired.
 */
PlayerWrapper.prototype.seekContentToZero = function () {
  this.vjsPlayer.currentTime(0);
};

/**
 * Triggers an event on the VJS player
 * @param  {string} name The event name.
 * @param  {Object} data The event data.
 */
PlayerWrapper.prototype.triggerPlayerEvent = function (name, data) {
  this.vjsPlayer.trigger(name, data);
};

/**
 * Listener JSDoc for ESLint. This listener can be passed to
 * addContentEndedListener.
 * @callback listener
 */

/**
 * Adds a listener for the 'contentended' event of the video player. This should
 * be used instead of setting an 'contentended' listener directly to ensure that
 * the ima can do proper cleanup of the SDK before other event listeners are
 * called.
 * @param {listener} listener The listener to be called when content
 *     completes.
 */
PlayerWrapper.prototype.addContentEndedListener = function (listener) {
  this.contentEndedListeners.push(listener);
};

/**
 * Reset the player.
 */
PlayerWrapper.prototype.reset = function () {
  // Attempts to remove the contentEndedListener before adding it.
  // This is to prevent an error where an erroring video caused multiple
  // contentEndedListeners to be added.
  this.vjsPlayer.off('contentended', this.boundContentEndedListener);

  this.vjsPlayer.on('contentended', this.boundContentEndedListener);
  this.vjsControls.show();
  if (this.vjsPlayer.ads.inAdBreak()) {
    this.vjsPlayer.ads.endLinearAdMode();
  }
  // Reset the content time we give the SDK. Fixes an issue where requesting
  // VMAP followed by VMAP would play the second mid-rolls as pre-rolls if
  // the first playthrough of the video passed the second response's
  // mid-roll time.
  this.contentPlayheadTracker.currentTime = 0;
  this.contentComplete = false;
};

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Ad UI implementation.
 *
 * @param {Controller} controller Plugin controller.
 * @constructor
 * @struct
 * @final
 */
const AdUi = function (controller) {
  /**
   * Plugin controller.
   */
  this.controller = controller;

  /**
   * Div used as an ad container.
   */
  this.adContainerDiv = document.createElement('div');

  /**
   * Div used to display ad controls.
   */
  this.controlsDiv = document.createElement('div');

  /**
   * Div used to display ad countdown timer.
   */
  this.countdownDiv = document.createElement('div');

  /**
   * Div used to display add seek bar.
   */
  this.seekBarDiv = document.createElement('div');

  /**
   * Div used to display ad progress (in seek bar).
   */
  this.progressDiv = document.createElement('div');

  /**
   * Div used to display ad play/pause button.
   */
  this.playPauseDiv = document.createElement('div');

  /**
   * Div used to display ad mute button.
   */
  this.muteDiv = document.createElement('div');

  /**
   * Div used by the volume slider.
   */
  this.sliderDiv = document.createElement('div');

  /**
   * Volume slider level visuals
   */
  this.sliderLevelDiv = document.createElement('div');

  /**
   * Div used to display ad fullscreen button.
   */
  this.fullscreenDiv = document.createElement('div');

  /**
   * Bound event handler for onMouseUp.
   */
  this.boundOnMouseUp = this.onMouseUp.bind(this);

  /**
   * Bound event handler for onMouseMove.
   */
  this.boundOnMouseMove = this.onMouseMove.bind(this);

  /**
   * Stores data for the ad playhead tracker.
   */
  this.adPlayheadTracker = {
    'currentTime': 0,
    'duration': 0,
    'isPod': false,
    'adPosition': 0,
    'totalAds': 0
  };

  /**
   * Used to prefix videojs ima controls.
   */
  this.controlPrefix = this.controller.getPlayerId() + '_';

  /**
   * Boolean flag to show or hide the ad countdown timer.
   */
  this.showCountdown = true;
  if (this.controller.getSettings().showCountdown === false) {
    this.showCountdown = false;
  }

  /**
   * Boolean flag if the current ad is nonlinear.
   */
  this.isAdNonlinear = false;

  this.createAdContainer();
};

/**
 * Creates the ad container.
 */
AdUi.prototype.createAdContainer = function () {
  this.assignControlAttributes(this.adContainerDiv, 'ima-ad-container');
  this.adContainerDiv.style.position = 'absolute';
  this.adContainerDiv.style.zIndex = 1111;
  this.adContainerDiv.addEventListener('mouseenter', this.showAdControls.bind(this), false);
  this.adContainerDiv.addEventListener('mouseleave', this.hideAdControls.bind(this), false);
  this.adContainerDiv.addEventListener('click', this.onAdContainerClick.bind(this), false);
  this.createControls();
  this.controller.injectAdContainerDiv(this.adContainerDiv);
};

/**
 * Create the controls.
 */
AdUi.prototype.createControls = function () {
  this.assignControlAttributes(this.controlsDiv, 'ima-controls-div');
  this.controlsDiv.style.width = '100%';

  if (!this.controller.getIsMobile()) {
    this.assignControlAttributes(this.countdownDiv, 'ima-countdown-div');
    this.countdownDiv.innerHTML = this.controller.getSettings().adLabel;
    this.countdownDiv.style.display = this.showCountdown ? 'block' : 'none';
  } else {
    this.countdownDiv.style.display = 'none';
  }

  this.assignControlAttributes(this.seekBarDiv, 'ima-seek-bar-div');
  this.seekBarDiv.style.width = '100%';

  this.assignControlAttributes(this.progressDiv, 'ima-progress-div');

  this.assignControlAttributes(this.playPauseDiv, 'ima-play-pause-div');
  this.addClass(this.playPauseDiv, 'ima-playing');
  this.playPauseDiv.addEventListener('click', this.onAdPlayPauseClick.bind(this), false);

  this.assignControlAttributes(this.muteDiv, 'ima-mute-div');
  this.addClass(this.muteDiv, 'ima-non-muted');
  this.muteDiv.addEventListener('click', this.onAdMuteClick.bind(this), false);

  this.assignControlAttributes(this.sliderDiv, 'ima-slider-div');
  this.sliderDiv.addEventListener('mousedown', this.onAdVolumeSliderMouseDown.bind(this), false);

  // Hide volume slider controls on iOS as they aren't supported.
  if (this.controller.getIsIos()) {
    this.sliderDiv.style.display = 'none';
  }

  this.assignControlAttributes(this.sliderLevelDiv, 'ima-slider-level-div');

  this.assignControlAttributes(this.fullscreenDiv, 'ima-fullscreen-div');
  this.addClass(this.fullscreenDiv, 'ima-non-fullscreen');
  this.fullscreenDiv.addEventListener('click', this.onAdFullscreenClick.bind(this), false);

  this.adContainerDiv.appendChild(this.controlsDiv);
  this.controlsDiv.appendChild(this.countdownDiv);
  this.controlsDiv.appendChild(this.seekBarDiv);
  this.controlsDiv.appendChild(this.playPauseDiv);
  this.controlsDiv.appendChild(this.muteDiv);
  this.controlsDiv.appendChild(this.sliderDiv);
  this.controlsDiv.appendChild(this.fullscreenDiv);
  this.seekBarDiv.appendChild(this.progressDiv);
  this.sliderDiv.appendChild(this.sliderLevelDiv);
};

/**
 * Listener for clicks on the play/pause button during ad playback.
 */
AdUi.prototype.onAdPlayPauseClick = function () {
  this.controller.onAdPlayPauseClick();
};

/**
 * Listener for clicks on the play/pause button during ad playback.
 */
AdUi.prototype.onAdMuteClick = function () {
  this.controller.onAdMuteClick();
};

/**
 * Listener for clicks on the fullscreen button during ad playback.
 */
AdUi.prototype.onAdFullscreenClick = function () {
  this.controller.toggleFullscreen();
};

/**
 * Show pause and hide play button
 */
AdUi.prototype.onAdsPaused = function () {
  this.controller.sdkImpl.adPlaying = false;
  this.addClass(this.playPauseDiv, 'ima-paused');
  this.removeClass(this.playPauseDiv, 'ima-playing');
  this.showAdControls();
};

/**
 * Show pause and hide play button
 */
AdUi.prototype.onAdsResumed = function () {
  this.onAdsPlaying();
  this.showAdControls();
};

/**
 * Show play and hide pause button
 */
AdUi.prototype.onAdsPlaying = function () {
  this.controller.sdkImpl.adPlaying = true;
  this.addClass(this.playPauseDiv, 'ima-playing');
  this.removeClass(this.playPauseDiv, 'ima-paused');
};

/**
 * Takes data from the controller to update the UI.
 *
 * @param {number} currentTime Current time of the ad.
 * @param {number} remainingTime Remaining time of the ad.
 * @param {number} duration Duration of the ad.
 * @param {number} adPosition Index of the ad in the pod.
 * @param {number} totalAds Total number of ads in the pod.
 */
AdUi.prototype.updateAdUi = function (currentTime, remainingTime, duration, adPosition, totalAds) {
  // Update countdown timer data
  const remainingMinutes = Math.floor(remainingTime / 60);
  let remainingSeconds = Math.floor(remainingTime % 60);
  if (remainingSeconds.toString().length < 2) {
    remainingSeconds = '0' + remainingSeconds;
  }
  let podCount = ': ';
  if (totalAds > 1) {
    podCount = ' (' + adPosition + ' ' + this.controller.getSettings().adLabelNofN + ' ' + totalAds + '): ';
  }
  this.countdownDiv.innerHTML = this.controller.getSettings().adLabel + podCount + remainingMinutes + ':' + remainingSeconds;

  // Update UI
  const playProgressRatio = currentTime / duration;
  const playProgressPercent = playProgressRatio * 100;
  this.progressDiv.style.width = playProgressPercent + '%';
};

/**
 * Handles UI changes when the ad is unmuted.
 */
AdUi.prototype.unmute = function () {
  this.addClass(this.muteDiv, 'ima-non-muted');
  this.removeClass(this.muteDiv, 'ima-muted');
  this.sliderLevelDiv.style.width = this.controller.getPlayerVolume() * 100 + '%';
};

/**
 * Handles UI changes when the ad is muted.
 */
AdUi.prototype.mute = function () {
  this.addClass(this.muteDiv, 'ima-muted');
  this.removeClass(this.muteDiv, 'ima-non-muted');
  this.sliderLevelDiv.style.width = '0%';
};

/*
 * Listener for mouse down events during ad playback. Used for volume.
 */
AdUi.prototype.onAdVolumeSliderMouseDown = function () {
  document.addEventListener('mouseup', this.boundOnMouseUp, false);
  document.addEventListener('mousemove', this.boundOnMouseMove, false);
};

/*
 * Mouse movement listener used for volume slider.
 */
AdUi.prototype.onMouseMove = function (event) {
  this.changeVolume(event);
};

/*
 * Mouse release listener used for volume slider.
 */
AdUi.prototype.onMouseUp = function (event) {
  this.changeVolume(event);
  document.removeEventListener('mouseup', this.boundOnMouseUp);
  document.removeEventListener('mousemove', this.boundOnMouseMove);
};

/*
 * Utility function to set volume and associated UI
 */
AdUi.prototype.changeVolume = function (event) {
  let percent = (event.clientX - this.sliderDiv.getBoundingClientRect().left) / this.sliderDiv.offsetWidth;
  percent *= 100;
  // Bounds value 0-100 if mouse is outside slider region.
  percent = Math.min(Math.max(percent, 0), 100);
  this.sliderLevelDiv.style.width = percent + '%';
  if (this.percent == 0) {
    this.addClass(this.muteDiv, 'ima-muted');
    this.removeClass(this.muteDiv, 'ima-non-muted');
  } else {
    this.addClass(this.muteDiv, 'ima-non-muted');
    this.removeClass(this.muteDiv, 'ima-muted');
  }
  this.controller.setVolume(percent / 100); // 0-1
};

/**
 * Show the ad container.
 */
AdUi.prototype.showAdContainer = function () {
  this.adContainerDiv.style.display = 'block';
};

/**
 * Hide the ad container
 */
AdUi.prototype.hideAdContainer = function () {
  this.adContainerDiv.style.display = 'none';
};

/**
 * Handles clicks on the ad container
 */
AdUi.prototype.onAdContainerClick = function () {
  if (this.isAdNonlinear) {
    this.controller.togglePlayback();
  }
};

/**
 * Resets the state of the ad ui.
 */
AdUi.prototype.reset = function () {
  this.hideAdContainer();
};

/**
 * Handles ad errors.
 */
AdUi.prototype.onAdError = function () {
  this.hideAdContainer();
};

/**
 * Handles ad break starting.
 *
 * @param {Object} adEvent The event fired by the IMA SDK.
 */
AdUi.prototype.onAdBreakStart = function (adEvent) {
  this.showAdContainer();

  const contentType = adEvent.getAd().getContentType();
  if (contentType === 'application/javascript' && !this.controller.getSettings().showControlsForJSAds) {
    this.controlsDiv.style.display = 'none';
  } else {
    this.controlsDiv.style.display = 'block';
  }
  this.onAdsPlaying();
  // Start with the ad controls minimized.
  this.hideAdControls();
};

/**
 * Handles ad break ending.
 */
AdUi.prototype.onAdBreakEnd = function () {
  const currentAd = this.controller.getCurrentAd();
  if (currentAd == null || // hide for post-roll only playlist
  currentAd.isLinear()) {
    // don't hide for non-linear ads
    this.hideAdContainer();
  }
  this.controlsDiv.style.display = 'none';
  this.countdownDiv.innerHTML = '';
};

/**
 * Handles when all ads have finished playing.
 */
AdUi.prototype.onAllAdsCompleted = function () {
  this.hideAdContainer();
};

/**
 * Handles when a linear ad starts.
 */
AdUi.prototype.onLinearAdStart = function () {
  // Don't bump container when controls are shown
  this.removeClass(this.adContainerDiv, 'bumpable-ima-ad-container');
  this.isAdNonlinear = false;
};

/**
 * Handles when a non-linear ad starts.
 */
AdUi.prototype.onNonLinearAdLoad = function () {
  // For non-linear ads that show after a linear ad. For linear ads, we show the
  // ad container in onAdBreakStart to prevent blinking in pods.
  this.adContainerDiv.style.display = 'block';
  // Bump container when controls are shown
  this.addClass(this.adContainerDiv, 'bumpable-ima-ad-container');
  this.isAdNonlinear = true;
};

AdUi.prototype.onPlayerEnterFullscreen = function () {
  this.addClass(this.fullscreenDiv, 'ima-fullscreen');
  this.removeClass(this.fullscreenDiv, 'ima-non-fullscreen');
};

AdUi.prototype.onPlayerExitFullscreen = function () {
  this.addClass(this.fullscreenDiv, 'ima-non-fullscreen');
  this.removeClass(this.fullscreenDiv, 'ima-fullscreen');
};

/**
 * Called when the player volume changes.
 *
 * @param {number} volume The new player volume.
 */
AdUi.prototype.onPlayerVolumeChanged = function (volume) {
  if (volume == 0) {
    this.addClass(this.muteDiv, 'ima-muted');
    this.removeClass(this.muteDiv, 'ima-non-muted');
    this.sliderLevelDiv.style.width = '0%';
  } else {
    this.addClass(this.muteDiv, 'ima-non-muted');
    this.removeClass(this.muteDiv, 'ima-muted');
    this.sliderLevelDiv.style.width = volume * 100 + '%';
  }
};

/**
 * Shows ad controls on mouseover.
 */
AdUi.prototype.showAdControls = function () {
  const { disableAdControls } = this.controller.getSettings();
  if (!disableAdControls) {
    this.addClass(this.controlsDiv, 'ima-controls-div-showing');
  }
};

/**
 * Hide the ad controls.
 */
AdUi.prototype.hideAdControls = function () {
  this.removeClass(this.controlsDiv, 'ima-controls-div-showing');
};

/**
 * Assigns the unique id and class names to the given element as well as the
 * style class.
 * @param {HTMLElement} element Element that needs the controlName assigned.
 * @param {string} controlName Control name to assign.
 */
AdUi.prototype.assignControlAttributes = function (element, controlName) {
  element.id = this.controlPrefix + controlName;
  element.className = this.controlPrefix + controlName + ' ' + controlName;
};

/**
 * Returns a regular expression to test a string for the given className.
 *
 * @param {string} className The name of the class.
 * @return {RegExp} The regular expression used to test for that class.
 */
AdUi.prototype.getClassRegexp = function (className) {
  // Matches on
  // (beginning of string OR NOT word char)
  // classname
  // (negative lookahead word char OR end of string)
  return new RegExp('(^|[^A-Za-z-])' + className + '((?![A-Za-z-])|$)', 'gi');
};

/**
 * Returns whether or not the provided element has the provied class in its
 * className.
 * @param {HTMLElement} element Element to tes.t
 * @param {string} className Class to look for.
 * @return {boolean} True if element has className in class list. False
 *     otherwise.
 */
AdUi.prototype.elementHasClass = function (element, className) {
  const classRegexp = this.getClassRegexp(className);
  return classRegexp.test(element.className);
};

/**
 * Adds a class to the given element if it doesn't already have the class
 * @param {HTMLElement} element Element to which the class will be added.
 * @param {string} classToAdd Class to add.
 */
AdUi.prototype.addClass = function (element, classToAdd) {
  element.className = element.className.trim() + ' ' + classToAdd;
};

/**
 * Removes a class from the given element if it has the given class
 *
 * @param {HTMLElement} element Element from which the class will be removed.
 * @param {string} classToRemove Class to remove.
 */
AdUi.prototype.removeClass = function (element, classToRemove) {
  const classRegexp = this.getClassRegexp(classToRemove);
  element.className = element.className.trim().replace(classRegexp, '');
};

/**
 * @return {HTMLElement} The div for the ad container.
 */
AdUi.prototype.getAdContainerDiv = function () {
  return this.adContainerDiv;
};

/**
 * Changes the flag to show or hide the ad countdown timer.
 *
 * @param {boolean} showCountdownIn Show or hide the countdown timer.
 */
AdUi.prototype.setShowCountdown = function (showCountdownIn) {
  this.showCountdown = showCountdownIn;
  this.countdownDiv.style.display = this.showCountdown ? 'block' : 'none';
};

var name = "videojs-ima";
var version = "2.0.1";
var license = "Apache-2.0";
var main = "./dist/videojs.ima.js";
var module$1 = "./dist/videojs.ima.es.js";
var author = { "name": "Google Inc." };
var engines = { "node": ">=0.8.0" };
var scripts = { "contBuild": "watch 'npm run rollup:max' src", "predevServer": "echo \"Starting up server on localhost:8000.\"", "devServer": "npm-run-all -p testServer contBuild", "lint": "eslint \"src/**/*.js\"", "rollup": "npm-run-all rollup:*", "rollup:max": "rollup -c configs/rollup.config.js", "rollup:es": "rollup -c configs/rollup.config.es.js", "rollup:min": "rollup -c configs/rollup.config.min.js", "pretest": "npm run rollup", "start": "npm run devServer", "test": "npm-run-all test:*", "test:vjs6": "npm install video.js@6 --no-save && npm-run-all -p -r testServer webdriver", "test:vjs7": "npm install video.js@7 --no-save && npm-run-all -p -r testServer webdriver", "testServer": "http-server --cors -p 8000 --silent", "preversion": "node scripts/preversion.js && npm run lint && npm test", "version": "node scripts/version.js", "postversion": "node scripts/postversion.js", "webdriver": "mocha test/webdriver/*.js --no-timeouts" };
var repository = { "type": "git", "url": "https://github.com/googleads/videojs-ima" };
var files = ["CHANGELOG.md", "LICENSE", "README.md", "dist/", "src/"];
var peerDependencies = { "video.js": "^5.19.2 || ^6 || ^7" };
var dependencies = { "@hapi/cryptiles": "^5.1.0", "can-autoplay": "^3.0.2", "extend": ">=3.0.2", "videojs-contrib-ads": "^6.9.0" };
var devDependencies = { "axios": "^0.25.0", "babel-core": "^6.26.3", "babel-preset-env": "^1.7.0", "child_process": "^1.0.2", "chromedriver": "^102.0.0", "conventional-changelog-cli": "^2.2.2", "conventional-changelog-videojs": "^3.0.2", "ecstatic": "^4.1.4", "eslint": "^8.8.0", "eslint-config-google": "^0.9.1", "eslint-plugin-jsdoc": "^3.15.1", "geckodriver": "^2.0.4", "http-server": "^14.1.0", "ini": ">=1.3.7", "mocha": "^9.2.0", "npm-run-all": "^4.1.5", "path": "^0.12.7", "protractor": "^7.0.0", "rimraf": "^2.7.1", "rollup": "^0.51.8", "rollup-plugin-babel": "^3.0.7", "rollup-plugin-copy": "^0.2.3", "rollup-plugin-json": "^2.3.1", "rollup-plugin-uglify": "^2.0.1", "selenium-webdriver": "^3.6.0", "uglify-es": "^3.3.9", "video.js": "^7.17.0", "watch": "^0.13.0", "webdriver-manager": "^12.1.7", "xmldom": "^0.6.0" };
var keywords = ["videojs", "videojs-plugin"];
var pkg = {
	name: name,
	version: version,
	license: license,
	main: main,
	module: module$1,
	author: author,
	engines: engines,
	scripts: scripts,
	repository: repository,
	files: files,
	peerDependencies: peerDependencies,
	dependencies: dependencies,
	devDependencies: devDependencies,
	keywords: keywords
};

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Implementation of the IMA SDK for the plugin.
 *
 * @param {Object} controller Reference to the parent controller.
 *
 * @constructor
 * @struct
 * @final
 */
const SdkImpl = function (controller) {
  /**
   * Plugin controller.
   */
  this.controller = controller;

  /**
   * IMA SDK AdDisplayContainer.
   */
  this.adDisplayContainer = null;

  /**
   * True if the AdDisplayContainer has been initialized. False otherwise.
   */
  this.adDisplayContainerInitialized = false;

  /**
   * IMA SDK AdsLoader
   */
  this.adsLoader = null;

  /**
   * IMA SDK AdsManager
   */
  this.adsManager = null;

  /**
   * IMA SDK AdsRenderingSettings.
   */
  this.adsRenderingSettings = null;

  /**
   * VAST, VMAP, or ad rules response. Used in lieu of fetching a response
   * from an ad tag URL.
   */
  this.adsResponse = null;

  /**
   * Current IMA SDK Ad.
   */
  this.currentAd = null;

  /**
   * Timer used to track ad progress.
   */
  this.adTrackingTimer = null;

  /**
   * True if ALL_ADS_COMPLETED has fired, false until then.
   */
  this.allAdsCompleted = false;

  /**
   * True if ads are currently displayed, false otherwise.
   * True regardless of ad pause state if an ad is currently being displayed.
   */
  this.adsActive = false;

  /**
   * True if ad is currently playing, false if ad is paused or ads are not
   * currently displayed.
   */
  this.adPlaying = false;

  /**
   * True if the ad is muted, false otherwise.
   */
  this.adMuted = false;

  /**
   * Listener to be called to trigger manual ad break playback.
   */
  this.adBreakReadyListener = undefined;

  /**
   * Tracks whether or not we have already called adsLoader.contentComplete().
   */
  this.contentCompleteCalled = false;

  /**
   * True if the ad has timed out.
   */
  this.isAdTimedOut = false;

  /**
   * Stores the dimensions for the ads manager.
   */
  this.adsManagerDimensions = {
    width: 0,
    height: 0
  };

  /**
   * Boolean flag to enable manual ad break playback.
   */
  this.autoPlayAdBreaks = true;
  if (this.controller.getSettings().autoPlayAdBreaks === false) {
    this.autoPlayAdBreaks = false;
  }

  // Set SDK settings from plugin settings.
  if (this.controller.getSettings().locale) {
    /* eslint no-undef: 'error' */
    /* global google */
    google.ima.settings.setLocale(this.controller.getSettings().locale);
  }
  if (this.controller.getSettings().disableFlashAds) {
    google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds);
  }
  if (this.controller.getSettings().disableCustomPlaybackForIOS10Plus) {
    google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus);
  }

  if (this.controller.getSettings().ppid) {
    google.ima.settings.setPpid(this.controller.getSettings().ppid);
  }

  if (this.controller.getSettings().featureFlags) {
    google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags);
  }
};

/**
 * Creates and initializes the IMA SDK objects.
 */
SdkImpl.prototype.initAdObjects = function () {
  this.adDisplayContainer = new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(), this.controller.getContentPlayer());

  this.adsLoader = new google.ima.AdsLoader(this.adDisplayContainer);

  this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
  if (this.controller.getSettings().vpaidAllowed == false) {
    this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED);
  }
  if (this.controller.getSettings().vpaidMode !== undefined) {
    this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode);
  }

  if (this.controller.getSettings().locale) {
    this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale);
  }

  if (this.controller.getSettings().numRedirects) {
    this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects);
  }

  if (this.controller.getSettings().sessionId) {
    this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId);
  }

  this.adsLoader.getSettings().setPlayerType('videojs-ima');
  this.adsLoader.getSettings().setPlayerVersion(pkg.version);
  this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks);

  this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.onAdsManagerLoaded.bind(this), false);
  this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdsLoaderError.bind(this), false);

  this.controller.playerWrapper.vjsPlayer.trigger({
    type: 'ads-loader',
    adsLoader: this.adsLoader
  });
};

/**
 * Creates the AdsRequest and request ads through the AdsLoader.
 */
SdkImpl.prototype.requestAds = function () {
  const adsRequest = new google.ima.AdsRequest();
  if (this.controller.getSettings().adTagUrl) {
    adsRequest.adTagUrl = this.controller.getSettings().adTagUrl;
  } else {
    adsRequest.adsResponse = this.controller.getSettings().adsResponse;
  }
  if (this.controller.getSettings().forceNonLinearFullSlot) {
    adsRequest.forceNonLinearFullSlot = true;
  }

  if (this.controller.getSettings().vastLoadTimeout) {
    adsRequest.vastLoadTimeout = this.controller.getSettings().vastLoadTimeout;
  }

  if (this.controller.getSettings().omidMode) {
    adsRequest.omidAccessModeRules = {};
    const omidValues = this.controller.getSettings().omidMode;

    if (omidValues.FULL) {
      adsRequest.omidAccessModeRules[google.ima.OmidAccessMode.FULL] = omidValues.FULL;
    }
    if (omidValues.DOMAIN) {
      adsRequest.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN] = omidValues.DOMAIN;
    }
    if (omidValues.LIMITED) {
      adsRequest.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED] = omidValues.LIMITED;
    }
  }

  adsRequest.linearAdSlotWidth = this.controller.getPlayerWidth();
  adsRequest.linearAdSlotHeight = this.controller.getPlayerHeight();
  adsRequest.nonLinearAdSlotWidth = this.controller.getSettings().nonLinearWidth || this.controller.getPlayerWidth();
  adsRequest.nonLinearAdSlotHeight = this.controller.getSettings().nonLinearHeight || this.controller.getPlayerHeight();
  adsRequest.setAdWillAutoPlay(this.controller.adsWillAutoplay());
  adsRequest.setAdWillPlayMuted(this.controller.adsWillPlayMuted());

  // Populate the adsRequestproperties with those provided in the AdsRequest
  // object in the settings.
  let providedAdsRequest = this.controller.getSettings().adsRequest;
  if (providedAdsRequest && typeof providedAdsRequest === 'object') {
    Object.keys(providedAdsRequest).forEach(key => {
      adsRequest[key] = providedAdsRequest[key];
    });
  }

  this.adsLoader.requestAds(adsRequest);
  this.controller.playerWrapper.vjsPlayer.trigger({
    type: 'ads-request',
    AdsRequest: adsRequest
  });
};

/**
 * Listener for the ADS_MANAGER_LOADED event. Creates the AdsManager,
 * sets up event listeners, and triggers the 'adsready' event for
 * videojs-ads-contrib.
 *
 * @param {google.ima.AdsManagerLoadedEvent} adsManagerLoadedEvent Fired when
 *     the AdsManager loads.
 */
SdkImpl.prototype.onAdsManagerLoaded = function (adsManagerLoadedEvent) {
  this.createAdsRenderingSettings();

  this.adsManager = adsManagerLoadedEvent.getAdsManager(this.controller.getContentPlayheadTracker(), this.adsRenderingSettings);

  this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY, this.onAdBreakReady.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.onContentPauseRequested.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.onContentResumeRequested.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, this.onAllAdsCompleted.bind(this));

  this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED, this.onAdLoaded.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED, this.onAdStarted.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE, this.onAdComplete.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED, this.onAdComplete.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG, this.onAdLog.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED, this.onAdPaused.bind(this));
  this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED, this.onAdResumed.bind(this));

  this.controller.playerWrapper.vjsPlayer.trigger({
    type: 'ads-manager',
    adsManager: this.adsManager
  });

  if (!this.autoPlayAdBreaks) {
    this.initAdsManager();
  }

  const { preventLateAdStart } = this.controller.getSettings();

  if (!preventLateAdStart) {
    this.controller.onAdsReady();
  } else if (preventLateAdStart && !this.isAdTimedOut) {
    this.controller.onAdsReady();
  }

  if (this.controller.getSettings().adsManagerLoadedCallback) {
    this.controller.getSettings().adsManagerLoadedCallback();
  }
};

/**
 * Listener for errors fired by the AdsLoader.
 * @param {google.ima.AdErrorEvent} event The error event thrown by the
 *     AdsLoader. See
 *     https://developers.google.com/interactive-media-ads/docs/sdks/html5/client-side/reference/js/google.ima.AdError#.Type
 */
SdkImpl.prototype.onAdsLoaderError = function (event) {
  window.console.warn('AdsLoader error: ' + event.getError());
  this.controller.onErrorLoadingAds(event);
  if (this.adsManager) {
    this.adsManager.destroy();
  }
};

/**
 * Initialize the ads manager.
 */
SdkImpl.prototype.initAdsManager = function () {
  try {
    const initWidth = this.controller.getPlayerWidth();
    const initHeight = this.controller.getPlayerHeight();
    this.adsManagerDimensions.width = initWidth;
    this.adsManagerDimensions.height = initHeight;
    this.adsManager.init(initWidth, initHeight, google.ima.ViewMode.NORMAL);
    this.adsManager.setVolume(this.controller.getPlayerVolume());
    this.initializeAdDisplayContainer();
  } catch (adError) {
    this.onAdError(adError);
  }
};

/**
 * Create AdsRenderingSettings for the IMA SDK.
 */
SdkImpl.prototype.createAdsRenderingSettings = function () {
  this.adsRenderingSettings = new google.ima.AdsRenderingSettings();
  this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;
  if (this.controller.getSettings().adsRenderingSettings) {
    for (let setting in this.controller.getSettings().adsRenderingSettings) {
      if (setting !== '') {
        this.adsRenderingSettings[setting] = this.controller.getSettings().adsRenderingSettings[setting];
      }
    }
  }
};

/**
 * Listener for errors thrown by the AdsManager.
 * @param {google.ima.AdErrorEvent} adErrorEvent The error event thrown by
 *     the AdsManager.
 */
SdkImpl.prototype.onAdError = function (adErrorEvent) {
  const errorMessage = adErrorEvent.getError !== undefined ? adErrorEvent.getError() : adErrorEvent.stack;
  window.console.warn('Ad error: ' + errorMessage);

  this.adsManager.destroy();
  this.controller.onAdError(adErrorEvent);

  // reset these so consumers don't think we are still in an ad break,
  // but reset them after any prior cleanup happens
  this.adsActive = false;
  this.adPlaying = false;
};

/**
 * Listener for AD_BREAK_READY. Passes event on to publisher's listener.
 * @param {google.ima.AdEvent} adEvent AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAdBreakReady = function (adEvent) {
  this.adBreakReadyListener(adEvent);
};

/**
 * Pauses the content video and displays the ad container so ads can play.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onContentPauseRequested = function (adEvent) {
  this.adsActive = true;
  this.adPlaying = true;
  this.controller.onAdBreakStart(adEvent);
};

/**
 * Resumes content video and hides the ad container.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onContentResumeRequested = function (adEvent) {
  this.adsActive = false;
  this.adPlaying = false;
  this.controller.onAdBreakEnd();
  // Hide controls in case of future non-linear ads. They'll be unhidden in
  // content_pause_requested.
};

/**
 * Records that ads have completed and calls contentAndAdsEndedListeners
 * if content is also complete.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAllAdsCompleted = function (adEvent) {
  this.allAdsCompleted = true;
  this.controller.onAllAdsCompleted();
};

/**
 * Starts the content video when a non-linear ad is loaded.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAdLoaded = function (adEvent) {
  if (!adEvent.getAd().isLinear()) {
    this.controller.onNonLinearAdLoad();
    this.controller.playContent();
  }
};

/**
 * Starts the interval timer to check the current ad time when an ad starts
 * playing.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAdStarted = function (adEvent) {
  this.currentAd = adEvent.getAd();
  if (this.currentAd.isLinear()) {
    this.adTrackingTimer = setInterval(this.onAdPlayheadTrackerInterval.bind(this), 250);
    this.controller.onLinearAdStart();
  } else {
    this.controller.onNonLinearAdStart();
  }
};

/**
 * Handles an ad click. Puts the player UI in a paused state.
 */
SdkImpl.prototype.onAdPaused = function () {
  this.controller.onAdsPaused();
};

/**
 * Syncs controls when an ad resumes.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAdResumed = function (adEvent) {
  this.controller.onAdsResumed();
};

/**
 * Clears the interval timer for current ad time when an ad completes.
 */
SdkImpl.prototype.onAdComplete = function () {
  if (this.currentAd.isLinear()) {
    clearInterval(this.adTrackingTimer);
  }
};

/**
 * Handles ad log messages.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the AdsManager.
 */
SdkImpl.prototype.onAdLog = function (adEvent) {
  this.controller.onAdLog(adEvent);
};

/**
 * Gets the current time and duration of the ad and calls the method to
 * update the ad UI.
 */
SdkImpl.prototype.onAdPlayheadTrackerInterval = function () {
  if (this.adsManager === null) return;
  const remainingTime = this.adsManager.getRemainingTime();
  const duration = this.currentAd.getDuration();
  let currentTime = duration - remainingTime;
  currentTime = currentTime > 0 ? currentTime : 0;
  let totalAds = 0;
  let adPosition;
  if (this.currentAd.getAdPodInfo()) {
    adPosition = this.currentAd.getAdPodInfo().getAdPosition();
    totalAds = this.currentAd.getAdPodInfo().getTotalAds();
  }

  this.controller.onAdPlayheadUpdated(currentTime, remainingTime, duration, adPosition, totalAds);
};

/**
 * Called by the player wrapper when content completes.
 */
SdkImpl.prototype.onContentComplete = function () {
  if (this.adsLoader) {
    this.adsLoader.contentComplete();
    this.contentCompleteCalled = true;
  }

  if (this.adsManager && this.adsManager.getCuePoints() && !this.adsManager.getCuePoints().includes(-1) || !this.adsManager) {
    this.controller.onNoPostroll();
  }

  if (this.allAdsCompleted) {
    this.controller.onContentAndAdsCompleted();
  }
};

/**
 * Called when the player is disposed.
 */
SdkImpl.prototype.onPlayerDisposed = function () {
  if (this.adTrackingTimer) {
    clearInterval(this.adTrackingTimer);
  }
  if (this.adsManager) {
    this.adsManager.destroy();
    this.adsManager = null;
  }
};

SdkImpl.prototype.onPlayerReadyForPreroll = function () {
  if (this.autoPlayAdBreaks) {
    this.initAdsManager();
    try {
      this.controller.showAdContainer();
      // Sync ad volume with content volume.
      this.adsManager.setVolume(this.controller.getPlayerVolume());
      this.adsManager.start();
    } catch (adError) {
      this.onAdError(adError);
    }
  }
};

SdkImpl.prototype.onAdTimeout = function () {
  this.isAdTimedOut = true;
};

SdkImpl.prototype.onPlayerReady = function () {
  this.initAdObjects();

  if ((this.controller.getSettings().adTagUrl || this.controller.getSettings().adsResponse) && this.controller.getSettings().requestMode === 'onLoad') {
    this.requestAds();
  }
};

SdkImpl.prototype.onPlayerEnterFullscreen = function () {
  if (this.adsManager) {
    this.adsManager.resize(window.screen.width, window.screen.height, google.ima.ViewMode.FULLSCREEN);
  }
};

SdkImpl.prototype.onPlayerExitFullscreen = function () {
  if (this.adsManager) {
    this.adsManager.resize(this.controller.getPlayerWidth(), this.controller.getPlayerHeight(), google.ima.ViewMode.NORMAL);
  }
};

/**
 * Called when the player volume changes.
 *
 * @param {number} volume The new player volume.
 */
SdkImpl.prototype.onPlayerVolumeChanged = function (volume) {
  if (this.adsManager) {
    this.adsManager.setVolume(volume);
  }

  if (volume == 0) {
    this.adMuted = true;
  } else {
    this.adMuted = false;
  }
};

/**
 * Called when the player wrapper detects that the player has been resized.
 *
 * @param {number} width The post-resize width of the player.
 * @param {number} height The post-resize height of the player.
 */
SdkImpl.prototype.onPlayerResize = function (width, height) {
  if (this.adsManager) {
    this.adsManagerDimensions.width = width;
    this.adsManagerDimensions.height = height;
    /* eslint no-undef: 'error' */
    this.adsManager.resize(width, height, google.ima.ViewMode.NORMAL);
  }
};

/**
 * @return {Object} The current ad.
 */
SdkImpl.prototype.getCurrentAd = function () {
  return this.currentAd;
};

/**
 * Listener JSDoc for ESLint. This listener can be passed to
 * setAdBreakReadyListener.
 * @callback listener
 */

/**
 * Sets the listener to be called to trigger manual ad break playback.
 * @param {listener} listener The listener to be called to trigger manual ad
 *     break playback.
 */
SdkImpl.prototype.setAdBreakReadyListener = function (listener) {
  this.adBreakReadyListener = listener;
};

/**
 * @return {boolean} True if an ad is currently playing. False otherwise.
 */
SdkImpl.prototype.isAdPlaying = function () {
  return this.adPlaying;
};

/**
 * @return {boolean} True if an ad is currently playing. False otherwise.
 */
SdkImpl.prototype.isAdMuted = function () {
  return this.adMuted;
};

/**
 * Pause ads.
 */
SdkImpl.prototype.pauseAds = function () {
  this.adsManager.pause();
  this.adPlaying = false;
};

/**
 * Resume ads.
 */
SdkImpl.prototype.resumeAds = function () {
  this.adsManager.resume();
  this.adPlaying = true;
};

/**
 * Unmute ads.
 */
SdkImpl.prototype.unmute = function () {
  this.adsManager.setVolume(1);
  this.adMuted = false;
};

/**
 * Mute ads.
 */
SdkImpl.prototype.mute = function () {
  this.adsManager.setVolume(0);
  this.adMuted = true;
};

/**
 * Set the volume of the ads. 0-1.
 *
 * @param {number} volume The new volume.
 */
SdkImpl.prototype.setVolume = function (volume) {
  this.adsManager.setVolume(volume);
  if (volume == 0) {
    this.adMuted = true;
  } else {
    this.adMuted = false;
  }
};

/**
 * Initializes the AdDisplayContainer. On mobile, this must be done as a
 * result of user action.
 */
SdkImpl.prototype.initializeAdDisplayContainer = function () {
  if (this.adDisplayContainer) {
    if (!this.adDisplayContainerInitialized) {
      this.adDisplayContainer.initialize();
      this.adDisplayContainerInitialized = true;
    }
  }
};

/**
 * Called by publishers in manual ad break playback mode to start an ad
 * break.
 */
SdkImpl.prototype.playAdBreak = function () {
  if (!this.autoPlayAdBreaks) {
    this.controller.showAdContainer();
    // Sync ad volume with content volume.
    this.adsManager.setVolume(this.controller.getPlayerVolume());
    this.adsManager.start();
  }
};

/**
 * Callback JSDoc for ESLint. This callback can be passed to addEventListener.
 * @callback callback
 */

/**
 * Ads an EventListener to the AdsManager. For a list of available events,
 * see
 * https://developers.google.com/interactive-media-ads/docs/sdks/html5/client-side/reference/js/google.ima.AdEvent#.Type
 * @param {google.ima.AdEvent.Type} event The AdEvent.Type for which to
 *     listen.
 * @param {callback} callback The method to call when the event is fired.
 */
SdkImpl.prototype.addEventListener = function (event, callback) {
  if (this.adsManager) {
    this.adsManager.addEventListener(event, callback);
  }
};

/**
 * Returns the instance of the AdsManager.
 * @return {google.ima.AdsManager} The AdsManager being used by the plugin.
 */
SdkImpl.prototype.getAdsManager = function () {
  return this.adsManager;
};

/**
 * Reset the SDK implementation.
 */
SdkImpl.prototype.reset = function () {
  this.adsActive = false;
  this.adPlaying = false;
  if (this.adTrackingTimer) {
    // If this is called while an ad is playing, stop trying to get that
    // ad's current time.
    clearInterval(this.adTrackingTimer);
  }
  if (this.adsManager) {
    this.adsManager.destroy();
    this.adsManager = null;
  }
  if (this.adsLoader && !this.contentCompleteCalled) {
    this.adsLoader.contentComplete();
  }
  this.contentCompleteCalled = false;
  this.allAdsCompleted = false;
};

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */
/**
 * The grand coordinator of the plugin. Facilitates communication between all
 * other plugin classes.
 *
 * @param {Object} player Instance of the video.js player.
 * @param {Object} options Options provided by the implementation.
 * @constructor
 * @struct
 * @final
 */
const Controller = function (player, options) {
  /**
   * Stores user-provided settings.
   * @type {Object}
   */
  this.settings = {};

  /**
   * Content and ads ended listeners passed by the publisher to the plugin.
   * These will be called when the plugin detects that content *and all
   * ads* have completed. This differs from the contentEndedListeners in that
   * contentEndedListeners will fire between content ending and a post-roll
   * playing, whereas the contentAndAdsEndedListeners will fire after the
   * post-roll completes.
   */
  this.contentAndAdsEndedListeners = [];

  /**
   * Whether or not we are running on a mobile platform.
   */
  this.isMobile = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i);

  /**
   * Whether or not we are running on an iOS platform.
   */
  this.isIos = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i);

  this.initWithSettings(options);

  /**
   * Stores contrib-ads default settings.
   */
  const contribAdsDefaults = {
    debug: this.settings.debug,
    timeout: this.settings.timeout,
    prerollTimeout: this.settings.prerollTimeout
  };
  const adsPluginSettings = Object.assign({}, contribAdsDefaults, options.contribAdsSettings || {});

  this.playerWrapper = new PlayerWrapper(player, adsPluginSettings, this);
  this.adUi = new AdUi(this);
  this.sdkImpl = new SdkImpl(this);
};

Controller.IMA_DEFAULTS = {
  adLabel: 'Advertisement',
  adLabelNofN: 'of',
  debug: false,
  disableAdControls: false,
  prerollTimeout: 1000,
  preventLateAdStart: false,
  requestMode: 'onLoad',
  showControlsForJSAds: true,
  timeout: 5000
};

/**
 * Extends the settings to include user-provided settings.
 *
 * @param {Object} options Options to be used in initialization.
 */
Controller.prototype.initWithSettings = function (options) {
  this.settings = Object.assign({}, Controller.IMA_DEFAULTS, options || {});

  this.warnAboutDeprecatedSettings();

  // Default showing countdown timer to true.
  this.showCountdown = true;
  if (this.settings.showCountdown === false) {
    this.showCountdown = false;
  }
};

/**
 * Logs console warnings when deprecated settings are used.
 */
Controller.prototype.warnAboutDeprecatedSettings = function () {
  const deprecatedSettings = ['adWillAutoplay', 'adsWillAutoplay', 'adWillPlayMuted', 'adsWillPlayMuted'];
  deprecatedSettings.forEach(setting => {
    if (this.settings[setting] !== undefined) {
      console.warn('WARNING: videojs.ima setting ' + setting + ' is deprecated');
    }
  });
};

/**
 * Return the settings object.
 *
 * @return {Object} The settings object.
 */
Controller.prototype.getSettings = function () {
  return this.settings;
};

/**
 * Return whether or not we're in a mobile environment.
 *
 * @return {boolean} True if running on mobile, false otherwise.
 */
Controller.prototype.getIsMobile = function () {
  return this.isMobile;
};

/**
 * Return whether or not we're in an iOS environment.
 *
 * @return {boolean} True if running on iOS, false otherwise.
 */
Controller.prototype.getIsIos = function () {
  return this.isIos;
};

/**
 * Inject the ad container div into the DOM.
 *
 * @param{HTMLElement} adContainerDiv The ad container div.
 */
Controller.prototype.injectAdContainerDiv = function (adContainerDiv) {
  this.playerWrapper.injectAdContainerDiv(adContainerDiv);
};

/**
 * @return {HTMLElement} The div for the ad container.
 */
Controller.prototype.getAdContainerDiv = function () {
  return this.adUi.getAdContainerDiv();
};

/**
 * @return {Object} The content player.
 */
Controller.prototype.getContentPlayer = function () {
  return this.playerWrapper.getContentPlayer();
};

/**
 * Returns the content playhead tracker.
 *
 * @return {Object} The content playhead tracker.
 */
Controller.prototype.getContentPlayheadTracker = function () {
  return this.playerWrapper.getContentPlayheadTracker();
};

/**
 * Requests ads.
 */
Controller.prototype.requestAds = function () {
  this.sdkImpl.requestAds();
};

/**
 * Add or modify a setting.
 *
 * @param {string} key Key to modify
 * @param {Object} value Value to set at key.
 */
Controller.prototype.setSetting = function (key, value) {
  this.settings[key] = value;
};

/**
 * Called when there is an error loading ads.
 *
 * @param {Object} adErrorEvent The ad error event thrown by the IMA SDK.
 */
Controller.prototype.onErrorLoadingAds = function (adErrorEvent) {
  this.adUi.onAdError();
  this.playerWrapper.onAdError(adErrorEvent);
};

/**
 * Called by the ad UI when the play/pause button is clicked.
 */
Controller.prototype.onAdPlayPauseClick = function () {
  if (this.sdkImpl.isAdPlaying()) {
    this.adUi.onAdsPaused();
    this.sdkImpl.pauseAds();
  } else {
    this.adUi.onAdsPlaying();
    this.sdkImpl.resumeAds();
  }
};

/**
 * Called by the ad UI when the mute button is clicked.
 *
 */
Controller.prototype.onAdMuteClick = function () {
  if (this.sdkImpl.isAdMuted()) {
    this.playerWrapper.unmute();
    this.adUi.unmute();
    this.sdkImpl.unmute();
  } else {
    this.playerWrapper.mute();
    this.adUi.mute();
    this.sdkImpl.mute();
  }
};

/**
 * Set the volume of the player and ads. 0-1.
 *
 * @param {number} volume The new volume.
 */
Controller.prototype.setVolume = function (volume) {
  this.playerWrapper.setVolume(volume);
  this.sdkImpl.setVolume(volume);
};

/**
 * @return {number} The volume of the content player.
 */
Controller.prototype.getPlayerVolume = function () {
  return this.playerWrapper.getVolume();
};

/**
 * Toggle fullscreen state.
 */
Controller.prototype.toggleFullscreen = function () {
  this.playerWrapper.toggleFullscreen();
};

/**
 * Relays ad errors to the player wrapper.
 *
 * @param {Object} adErrorEvent The ad error event thrown by the IMA SDK.
 */
Controller.prototype.onAdError = function (adErrorEvent) {
  this.adUi.onAdError();
  this.playerWrapper.onAdError(adErrorEvent);
};

/**
 * Handles ad break starting.
 *
 * @param {Object} adEvent The event fired by the IMA SDK.
 */
Controller.prototype.onAdBreakStart = function (adEvent) {
  this.playerWrapper.onAdBreakStart();
  this.adUi.onAdBreakStart(adEvent);
};

/**
 * Show the ad container.
 */
Controller.prototype.showAdContainer = function () {
  this.adUi.showAdContainer();
};

/**
 * Handles ad break ending.
 */
Controller.prototype.onAdBreakEnd = function () {
  this.playerWrapper.onAdBreakEnd();
  this.adUi.onAdBreakEnd();
};

/**
 * Handles when all ads have finished playing.
 */
Controller.prototype.onAllAdsCompleted = function () {
  this.adUi.onAllAdsCompleted();
  this.playerWrapper.onAllAdsCompleted();
};

/**
 * Handles the SDK firing an ad paused event.
 */
Controller.prototype.onAdsPaused = function () {
  this.adUi.onAdsPaused();
};

/**
 * Handles the SDK firing an ad resumed event.
 */
Controller.prototype.onAdsResumed = function () {
  this.adUi.onAdsResumed();
};

/**
 * Takes data from the sdk impl and passes it to the ad UI to update the UI.
 *
 * @param {number} currentTime Current time of the ad.
 * @param {number} remainingTime Remaining time of the ad.
 * @param {number} duration Duration of the ad.
 * @param {number} adPosition Index of the ad in the pod.
 * @param {number} totalAds Total number of ads in the pod.
 */
Controller.prototype.onAdPlayheadUpdated = function (currentTime, remainingTime, duration, adPosition, totalAds) {
  this.adUi.updateAdUi(currentTime, remainingTime, duration, adPosition, totalAds);
};

/**
 * Handles ad log messages.
 * @param {google.ima.AdEvent} adEvent The AdEvent thrown by the IMA SDK.
 */
Controller.prototype.onAdLog = function (adEvent) {
  this.playerWrapper.onAdLog(adEvent);
};

/**
 * @return {Object} The current ad.
 */
Controller.prototype.getCurrentAd = function () {
  return this.sdkImpl.getCurrentAd();
};

/**
 * Play content.
 */
Controller.prototype.playContent = function () {
  this.playerWrapper.play();
};

/**
 * Handles when a linear ad starts.
 */
Controller.prototype.onLinearAdStart = function () {
  this.adUi.onLinearAdStart();
  this.playerWrapper.onAdStart();
};

/**
 * Handles when a non-linear ad loads.
 */
Controller.prototype.onNonLinearAdLoad = function () {
  this.adUi.onNonLinearAdLoad();
};

/**
 * Handles when a non-linear ad starts.
 */
Controller.prototype.onNonLinearAdStart = function () {
  this.adUi.onNonLinearAdLoad();
  this.playerWrapper.onAdStart();
};

/**
 * Get the player width.
 *
 * @return {number} The width of the player.
 */
Controller.prototype.getPlayerWidth = function () {
  return this.playerWrapper.getPlayerWidth();
};

/**
 * Get the player height.
 *
 * @return {number} The height of the player.
 */
Controller.prototype.getPlayerHeight = function () {
  return this.playerWrapper.getPlayerHeight();
};

/**
 * Tells the player wrapper that ads are ready.
 */
Controller.prototype.onAdsReady = function () {
  this.playerWrapper.onAdsReady();
};

/**
 * Called when the player wrapper detects that the player has been resized.
 *
 * @param {number} width The post-resize width of the player.
 * @param {number} height The post-resize height of the player.
 */
Controller.prototype.onPlayerResize = function (width, height) {
  this.sdkImpl.onPlayerResize(width, height);
};

/**
 * Called by the player wrapper when content completes.
 */
Controller.prototype.onContentComplete = function () {
  this.sdkImpl.onContentComplete();
};

/**
 * Called by the player wrapper when it's time to play a post-roll but we don't
 * have one to play.
 */
Controller.prototype.onNoPostroll = function () {
  this.playerWrapper.onNoPostroll();
};

/**
 * Called when content and all ads have completed.
 */
Controller.prototype.onContentAndAdsCompleted = function () {
  for (let index in this.contentAndAdsEndedListeners) {
    if (typeof this.contentAndAdsEndedListeners[index] === 'function') {
      this.contentAndAdsEndedListeners[index]();
    }
  }
};

/**
 * Called when the player is disposed.
 */
Controller.prototype.onPlayerDisposed = function () {
  this.contentAndAdsEndedListeners = [];
  this.sdkImpl.onPlayerDisposed();
};

/**
 * Called when the player is ready to play a pre-roll.
 */
Controller.prototype.onPlayerReadyForPreroll = function () {
  this.sdkImpl.onPlayerReadyForPreroll();
};

/**
 * Called if the ad times out.
 */
Controller.prototype.onAdTimeout = function () {
  this.sdkImpl.onAdTimeout();
};

/**
 * Called when the player is ready.
 */
Controller.prototype.onPlayerReady = function () {
  this.sdkImpl.onPlayerReady();
};

/**
 * Called when the player enters fullscreen.
 */
Controller.prototype.onPlayerEnterFullscreen = function () {
  this.adUi.onPlayerEnterFullscreen();
  this.sdkImpl.onPlayerEnterFullscreen();
};

/**
 * Called when the player exits fullscreen.
 */
Controller.prototype.onPlayerExitFullscreen = function () {
  this.adUi.onPlayerExitFullscreen();
  this.sdkImpl.onPlayerExitFullscreen();
};

/**
 * Called when the player volume changes.
 *
 * @param {number} volume The new player volume.
 */
Controller.prototype.onPlayerVolumeChanged = function (volume) {
  this.adUi.onPlayerVolumeChanged(volume);
  this.sdkImpl.onPlayerVolumeChanged(volume);
};

/**
 * Sets the content of the video player. You should use this method instead
 * of setting the content src directly to ensure the proper ad tag is
 * requested when the video content is loaded.
 * @param {?string} contentSrc The URI for the content to be played. Leave
 *     blank to use the existing content.
 * @param {?string} adTag The ad tag to be requested when the content loads.
 *     Leave blank to use the existing ad tag.
 */
Controller.prototype.setContentWithAdTag = function (contentSrc, adTag) {
  this.reset();
  this.settings.adTagUrl = adTag ? adTag : this.settings.adTagUrl;
  this.playerWrapper.changeSource(contentSrc);
};

/**
 * Sets the content of the video player. You should use this method instead
 * of setting the content src directly to ensure the proper ads response is
 * used when the video content is loaded.
 * @param {?string} contentSrc The URI for the content to be played. Leave
 *     blank to use the existing content.
 * @param {?string} adsResponse The ads response to be requested when the
 *     content loads. Leave blank to use the existing ads response.
 */
Controller.prototype.setContentWithAdsResponse = function (contentSrc, adsResponse) {
  this.reset();
  this.settings.adsResponse = adsResponse ? adsResponse : this.settings.adsResponse;
  this.playerWrapper.changeSource(contentSrc);
};

/**
 * Sets the content of the video player. You should use this method instead
 * of setting the content src directly to ensure the proper ads request is
 * used when the video content is loaded.
 * @param {?string} contentSrc The URI for the content to be played. Leave
 *     blank to use the existing content.
 * @param {?Object} adsRequest The ads request to be requested when the
 *     content loads. Leave blank to use the existing ads request.
 */
Controller.prototype.setContentWithAdsRequest = function (contentSrc, adsRequest) {
  this.reset();
  this.settings.adsRequest = adsRequest ? adsRequest : this.settings.adsRequest;
  this.playerWrapper.changeSource(contentSrc);
};

/**
 * Resets the state of the plugin.
 */
Controller.prototype.reset = function () {
  this.sdkImpl.reset();
  this.playerWrapper.reset();
  this.adUi.reset();
};

/**
 * Listener JSDoc for ESLint. This listener can be passed to
 * (add|remove)ContentEndedListener.
 * @callback listener
 */

/**
 * Adds a listener for the 'contentended' event of the video player. This should
 * be used instead of setting an 'contentended' listener directly to ensure that
 * the ima can do proper cleanup of the SDK before other event listeners are
 * called.
 * @param {listener} listener The listener to be called when content
 *     completes.
 */
Controller.prototype.addContentEndedListener = function (listener) {
  this.playerWrapper.addContentEndedListener(listener);
};

/**
 * Adds a listener that will be called when content and all ads have
 * finished playing.
 * @param {listener} listener The listener to be called when content and ads
 *     complete.
 */
Controller.prototype.addContentAndAdsEndedListener = function (listener) {
  this.contentAndAdsEndedListeners.push(listener);
};

/**
 * Sets the listener to be called to trigger manual ad break playback.
 * @param {listener} listener The listener to be called to trigger manual ad
 *     break playback.
 */
Controller.prototype.setAdBreakReadyListener = function (listener) {
  this.sdkImpl.setAdBreakReadyListener(listener);
};

/**
 * Changes the flag to show or hide the ad countdown timer.
 *
 * @param {boolean} showCountdownIn Show or hide the countdown timer.
 */
Controller.prototype.setShowCountdown = function (showCountdownIn) {
  this.adUi.setShowCountdown(showCountdownIn);
  this.showCountdown = showCountdownIn;
  this.adUi.countdownDiv.style.display = this.showCountdown ? 'block' : 'none';
};

/**
 * Initializes the AdDisplayContainer. On mobile, this must be done as a
 * result of user action.
 */
Controller.prototype.initializeAdDisplayContainer = function () {
  this.sdkImpl.initializeAdDisplayContainer();
};

/**
 * Called by publishers in manual ad break playback mode to start an ad
 * break.
 */
Controller.prototype.playAdBreak = function () {
  this.sdkImpl.playAdBreak();
};

/**
 * Callback JSDoc for ESLint. This callback can be passed to addEventListener.
 * @callback callback
 */

/**
 * Ads an EventListener to the AdsManager. For a list of available events,
 * see
 * https://developers.google.com/interactive-media-ads/docs/sdks/html5/client-side/reference/js/google.ima.AdEvent#.Type
 * @param {google.ima.AdEvent.Type} event The AdEvent.Type for which to
 *     listen.
 * @param {callback} callback The method to call when the event is fired.
 */
Controller.prototype.addEventListener = function (event, callback) {
  this.sdkImpl.addEventListener(event, callback);
};

/**
 * Returns the instance of the AdsManager.
 * @return {google.ima.AdsManager} The AdsManager being used by the plugin.
 */
Controller.prototype.getAdsManager = function () {
  return this.sdkImpl.getAdsManager();
};

/**
 * Returns the instance of the player id.
 * @return {string} The player id.
 */
Controller.prototype.getPlayerId = function () {
  return this.playerWrapper.getPlayerId();
};

/**
 * Changes the ad tag. You will need to call requestAds after this method
 * for the new ads to be requested.
 * @param {?string} adTag The ad tag to be requested the next time
 *     requestAds is called.
 */
Controller.prototype.changeAdTag = function (adTag) {
  this.reset();
  this.settings.adTagUrl = adTag;
};

/**
 * Pauses the ad.
 */
Controller.prototype.pauseAd = function () {
  this.adUi.onAdsPaused();
  this.sdkImpl.pauseAds();
};

/**
 * Resumes the ad.
 */
Controller.prototype.resumeAd = function () {
  this.adUi.onAdsPlaying();
  this.sdkImpl.resumeAds();
};

/**
 * Toggles video/ad playback.
 */
Controller.prototype.togglePlayback = function () {
  this.playerWrapper.togglePlayback();
};

/**
 * @return {boolean} true if we expect that ads will autoplay. false otherwise.
 */
Controller.prototype.adsWillAutoplay = function () {
  if (this.settings.adsWillAutoplay !== undefined) {
    return this.settings.adsWillAutoplay;
  } else if (this.settings.adWillAutoplay !== undefined) {
    return this.settings.adWillAutoplay;
  } else {
    return !!this.playerWrapper.getPlayerOptions().autoplay;
  }
};

/**
 * @return {boolean} true if we expect that ads will autoplay. false otherwise.
 */
Controller.prototype.adsWillPlayMuted = function () {
  if (this.settings.adsWillPlayMuted !== undefined) {
    return this.settings.adsWillPlayMuted;
  } else if (this.settings.adWillPlayMuted !== undefined) {
    return this.settings.adWillPlayMuted;
  } else if (this.playerWrapper.getPlayerOptions().muted !== undefined) {
    return this.playerWrapper.getPlayerOptions().muted;
  } else {
    return this.playerWrapper.getVolume() == 0;
  }
};

/**
 * Triggers an event on the VJS player
 * @param  {string} name The event name.
 * @param  {Object} data The event data.
 */
Controller.prototype.triggerPlayerEvent = function (name, data) {
  this.playerWrapper.triggerPlayerEvent(name, data);
};

/**
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Wraps the video.js stream player for the plugin.
 *
 * @param {!Object} player Video.js player instance.
 * @param {!Object} adsPluginSettings Settings for the contrib-ads plugin.
 * @param {!DaiController} daiController Reference to the parent controller.
 */
const PlayerWrapper$2 = function (player, adsPluginSettings, daiController) {
  /**
   * Instance of the video.js player.
   */
  this.vjsPlayer = player;

  /**
   * Plugin DAI controller.
   */
  this.daiController = daiController;

  /**
   * Video.js control bar.
   */
  this.vjsControls = this.vjsPlayer.getChild('controlBar');

  /**
   * Vanilla HTML5 video player underneath the video.js player.
   */
  this.h5Player = null;

  this.vjsPlayer.on('dispose', this.playerDisposedListener.bind(this));
  this.vjsPlayer.on('pause', this.onPause.bind(this));
  this.vjsPlayer.on('play', this.onPlay.bind(this));
  this.vjsPlayer.on('seeked', this.onSeekEnd.bind(this));
  this.vjsPlayer.ready(this.onPlayerReady.bind(this));
  this.vjsPlayer.ads(adsPluginSettings);
};

/**
 * Called in response to the video.js player's 'disposed' event.
 */
PlayerWrapper$2.prototype.playerDisposedListener = function () {
  this.contentEndedListeners = [];
  this.daiController.onPlayerDisposed();
};

/**
 * Called on the player 'pause' event. Handles displaying controls during
 * paused ad breaks.
 */
PlayerWrapper$2.prototype.onPause = function () {
  // This code will run if the stream is paused during an ad break. Since
  // controls are usually hidden during ads, they will now show to allow
  // users to resume ad playback.
  if (this.daiController.isInAdBreak()) {
    this.vjsControls.show();
  }
};

/**
 * Called on the player 'play' event. Handles hiding controls during
 * ad breaks while playing.
 */
PlayerWrapper$2.prototype.onPlay = function () {
  if (this.daiController.isInAdBreak()) {
    this.vjsControls.hide();
  }
};

/**
 * Called on the player's 'seeked' event. Sets up handling for ad break
 * snapback for VOD streams.
 */
PlayerWrapper$2.prototype.onSeekEnd = function () {
  this.daiController.onSeekEnd(this.vjsPlayer.currentTime());
};

/**
 * Called on the player's 'ready' event to begin initiating IMA.
 */
PlayerWrapper$2.prototype.onPlayerReady = function () {
  this.h5Player = document.getElementById(this.getPlayerId()).getElementsByClassName('vjs-tech')[0];
  this.daiController.onPlayerReady();
};

/**
 * @return {!Object} The stream player.
 */
PlayerWrapper$2.prototype.getStreamPlayer = function () {
  return this.h5Player;
};

/**
 * @return {!Object} The video.js player.
 */
PlayerWrapper$2.prototype.getVjsPlayer = function () {
  return this.vjsPlayer;
};

/**
 * @return {!Object} The vjs player's options object.
 */
PlayerWrapper$2.prototype.getPlayerOptions = function () {
  return this.vjsPlayer.options_;
};

/**
 * Returns the instance of the player id.
 * @return {string} The player id.
 */
PlayerWrapper$2.prototype.getPlayerId = function () {
  return this.vjsPlayer.id();
};

/**
 * Handles ad errors.
 *
 * @param {!Object} adErrorEvent The ad error event thrown by the IMA SDK.
 */
PlayerWrapper$2.prototype.onAdError = function (adErrorEvent) {
  this.vjsControls.show();
  const errorMessage = adErrorEvent.getError !== undefined ? adErrorEvent.getError() : adErrorEvent.stack;
  this.vjsPlayer.trigger({ type: 'adserror', data: {
      AdError: errorMessage,
      AdErrorEvent: adErrorEvent
    } });
};

/**
 * Handles ad break starting.
 */
PlayerWrapper$2.prototype.onAdBreakStart = function () {
  this.vjsControls.hide();
};

/**
 * Handles ad break ending.
 */
PlayerWrapper$2.prototype.onAdBreakEnd = function () {
  this.vjsControls.show();
};

/**
 * Reset the player.
 */
PlayerWrapper$2.prototype.reset = function () {
  this.vjsControls.show();
};

/**
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Implementation of the IMA DAI SDK for the plugin.
 *
 * @param {DaiController!} daiController Reference to the parent DAI
 * controller.
 *
 * @constructor
 * @struct
 * @final
 */
const SdkImpl$2 = function (daiController) {
  /**
   * Plugin DAI controller.
   */
  this.daiController = daiController;

  /**
   * The html5 stream player.
   */
  this.streamPlayer = null;

  /**
   * The videoJS stream player.
   */
  this.vjsPlayer = null;

  /**
   * IMA SDK StreamManager
   */
  this.streamManager = null;

  /**
   * IMA stream UI settings.
   */
  /* eslint no-undef: 'error' */
  /* global google */
  this.uiSettings = new google.ima.dai.api.UiSettings();

  /**
   * If the stream is currently in an ad break.
   */
  this.isAdBreak = false;

  /**
   * If the stream is currently seeking from a snapback.
   */
  this.isSnapback = false;

  /**
   * Originally seeked to time, to return stream to after ads.
   */
  this.snapForwardTime = 0;

  /**
   * Timed metadata for the stream.
   */
  this.timedMetadata;

  /**
   * Timed metadata record.
   */
  this.metadataLoaded = {};

  this.SOURCE_TYPES = {
    hls: 'application/x-mpegURL',
    dash: 'application/dash+xml'
  };
};

/**
 * Creates and initializes the IMA DAI SDK objects.
 */
SdkImpl$2.prototype.initImaDai = function () {
  this.streamPlayer = this.daiController.getStreamPlayer();
  this.vjsPlayer = this.daiController.getVjsPlayer();

  this.createAdUiDiv();
  if (this.daiController.getSettings().locale) {
    this.uiSettings.setLocale(this.daiController.getSettings().locale);
  }

  this.streamManager = new google.ima.dai.api.StreamManager(this.streamPlayer, this.adUiDiv, this.uiSettings);

  this.streamPlayer.addEventListener('pause', this.onStreamPause);
  this.streamPlayer.addEventListener('play', this.onStreamPlay);

  this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED, google.ima.dai.api.StreamEvent.Type.ERROR, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED], this.onStreamEvent.bind(this), false);

  this.vjsPlayer.textTracks().onaddtrack = this.onAddTrack.bind(this);

  this.vjsPlayer.trigger({
    type: 'stream-manager',
    StreamManager: this.streamManager
  });

  this.requestStream();
};

/**
 * Called when the video player has metadata to process.
 * @param {Event!} event The event that triggered this call.
 */
SdkImpl$2.prototype.onAddTrack = function (event) {
  const track = event.track;
  if (track.kind === 'metadata') {
    track.mode = 'hidden';
    track.oncuechange = e => {
      for (const cue of track.activeCues_) {
        const metadata = {};
        metadata[cue.value.key] = cue.value.data;
        this.streamManager.onTimedMetadata(metadata);
      }
    };
  }
};

/**
 * Creates the ad UI container.
 */
SdkImpl$2.prototype.createAdUiDiv = function () {
  const uiDiv = document.createElement('div');
  uiDiv.id = 'ad-ui';
  // 3em is the height of the control bar.
  uiDiv.style.height = 'calc(100% - 3em)';
  this.streamPlayer.parentNode.appendChild(uiDiv);
  this.adUiDiv = uiDiv;
};

/**
 * Called on pause to update the ad UI.
 */
SdkImpl$2.prototype.onStreamPause = function () {
  if (this.isAdBreak) {
    this.adUiDiv.style.display = 'none';
  }
};

/**
 * Called on play to update the ad UI.
 */
SdkImpl$2.prototype.onStreamPlay = function () {
  if (this.isAdBreak) {
    this.adUiDiv.style.display = 'block';
  }
};

/**
 * Called on play to update the ad UI.
 * @param {number} currentTime the current time of the stream.
 */
SdkImpl$2.prototype.onSeekEnd = function (currentTime) {
  const streamType = this.daiController.getSettings().streamType;
  if (streamType === 'live') {
    return;
  }
  if (this.isSnapback) {
    this.isSnapback = false;
    return;
  }
  const previousCuePoint = this.streamManager.previousCuePointForStreamTime(currentTime);
  if (previousCuePoint && !previousCuePoint.played) {
    this.isSnapback = true;
    this.snapForwardTime = currentTime;
    this.vjsPlayer.currentTime(previousCuePoint.start);
  }
};

/**
 * Handles IMA events.
 * @param {google.ima.StreamEvent!} event the IMA event
 */
SdkImpl$2.prototype.onStreamEvent = function (event) {
  switch (event.type) {
    case google.ima.dai.api.StreamEvent.Type.LOADED:
      this.loadUrl(event.getStreamData().url);
      break;
    case google.ima.dai.api.StreamEvent.Type.ERROR:
      window.console.warn('Error loading stream, attempting to play backup ' + 'stream. ' + event.getStreamData().errorMessage);
      this.daiController.onErrorLoadingAds(event);
      if (this.daiController.getSettings().fallbackStreamUrl) {
        this.loadurl(this.daiController.getSettings().fallbackStreamUrl);
      }
      break;
    case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:
      this.isAdBreak = true;
      this.adUiDiv.style.display = 'block';
      this.daiController.onAdBreakStart();
      break;
    case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:
      this.isAdBreak = false;
      this.adUiDiv.style.display = 'none';
      this.daiController.onAdBreakEnd();
      if (this.snapForwardTime && this.snapForwardTime > this.vjsPlayer.currentTime()) {
        this.vjsPlayer.currentTime(this.snapForwardTime);
        this.snapForwardTime = 0;
      }
      break;
    default:
      break;
  }
};

/**
 * Loads the stream URL .
 * @param {string} streamUrl the URL for the stream being loaded.
 */
SdkImpl$2.prototype.loadUrl = function (streamUrl) {
  this.vjsPlayer.ready(function () {
    const streamFormat = this.daiController.getSettings().streamFormat;
    this.vjsPlayer.src({
      src: streamUrl,
      type: this.SOURCE_TYPES[streamFormat]
    });

    const bookmarkTime = this.daiController.getSettings().bookmarkTime;
    if (bookmarkTime) {
      const startTime = this.streamManager.streamTimeForContentTime(bookmarkTime);
      // Seeking on load triggers the onSeekEnd event, so treat this seek as
      // if it's snapback. Without this, resuming at a bookmark kicks you
      // back to the ad before the bookmark.
      this.isSnapback = true;
      this.vjsPlayer.currentTime(startTime);
    }
  }.bind(this));
};

/**
 * Creates the AdsRequest and request ads through the AdsLoader.
 */
SdkImpl$2.prototype.requestStream = function () {
  let streamRequest;
  const streamType = this.daiController.getSettings().streamType;
  if (streamType === 'vod') {
    streamRequest = new google.ima.dai.api.VODStreamRequest();
    streamRequest.contentSourceId = this.daiController.getSettings().cmsId;
    streamRequest.videoId = this.daiController.getSettings().videoId;
  } else if (streamType === 'live') {
    streamRequest = new google.ima.dai.api.LiveStreamRequest();
    streamRequest.assetKey = this.daiController.getSettings().assetKey;
  } else {
    window.console.warn('No valid stream type selected');
  }
  streamRequest.format = this.daiController.getSettings().streamFormat;

  if (this.daiController.getSettings().apiKey) {
    streamRequest.apiKey = this.daiController.getSettings().apiKey;
  }
  if (this.daiController.getSettings().authKey) {
    streamRequest.authKey = this.daiController.getSettings().authKey;
  }
  if (this.daiController.getSettings().adTagParameters) {
    streamRequest.adTagParameters = this.daiController.getSettings().adTagParameters;
  }
  if (this.daiController.getSettings().streamActivityMonitorId) {
    streamRequest.streamActivityMonitorId = this.daiController.getSettings().streamActivityMonitorId;
  }

  if (this.daiController.getSettings().omidMode) {
    streamRequest.omidAccessModeRules = {};
    const omidValues = this.daiController.getSettings().omidMode;

    if (omidValues.FULL) {
      streamRequest.omidAccessModeRules[google.ima.OmidAccessMode.FULL] = omidValues.FULL;
    }
    if (omidValues.DOMAIN) {
      streamRequest.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN] = omidValues.DOMAIN;
    }
    if (omidValues.LIMITED) {
      streamRequest.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED] = omidValues.LIMITED;
    }
  }

  this.streamManager.requestStream(streamRequest);
  this.vjsPlayer.trigger({
    type: 'stream-request',
    StreamRequest: streamRequest
  });
};

/**
 * Initiates IMA when the player is ready.
 */
SdkImpl$2.prototype.onPlayerReady = function () {
  this.initImaDai();
};

/**
 * Reset the StreamManager when the player is disposed.
 */
SdkImpl$2.prototype.onPlayerDisposed = function () {
  if (this.streamManager) {
    this.streamManager.reset();
  }
};

/**
 * Returns the instance of the StreamManager.
 * @return {google.ima.StreamManager!} The StreamManager being used by the
 * plugin.
 */
SdkImpl$2.prototype.getStreamManager = function () {
  return this.StreamManager;
};

/**
 * Reset the SDK implementation.
 */
SdkImpl$2.prototype.reset = function () {
  if (this.StreamManager) {
    this.StreamManager.reset();
  }
};

/**
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */
/**
 * The coordinator for the DAI portion of the plugin. Facilitates
 * communication between all other plugin classes.
 *
 * @param {Object!} player Instance of the video.js player.
 * @param {Object!} options Options provided by the implementation.
 * @constructor
 * @struct
 * @final
 */
const DaiController = function (player, options) {
  /**
  * If the stream is currently in an ad break.
  * @type {boolean}
  */
  this.inAdBreak = false;

  /**
  * Stores user-provided settings.
  * @type {Object!}
  */
  this.settings = {};

  /**
  * Whether or not we are running on a mobile platform.
  */
  this.isMobile = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i);

  /**
  * Whether or not we are running on an iOS platform.
  */
  this.isIos = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i);

  this.initWithSettings(options);

  /**
  * Stores contrib-ads default settings.
  */
  const contribAdsDefaults = {
    debug: this.settings.debug,
    timeout: this.settings.timeout,
    prerollTimeout: this.settings.prerollTimeout
  };
  const adsPluginSettings = Object.assign({}, contribAdsDefaults, options.contribAdsSettings || {});

  this.playerWrapper = new PlayerWrapper$2(player, adsPluginSettings, this);
  this.sdkImpl = new SdkImpl$2(this);
};

DaiController.IMA_DEFAULTS = {
  adLabel: 'Advertisement',
  adLabelNofN: 'of',
  debug: false,
  disableAdControls: false,
  showControlsForJSAds: true
};

/**
 * Extends the settings to include user-provided settings.
 *
 * @param {Object!} options Options to be used in initialization.
 */
DaiController.prototype.initWithSettings = function (options) {
  this.settings = Object.assign({}, DaiController.IMA_DEFAULTS, options || {});

  this.warnAboutDeprecatedSettings();

  // Default showing countdown timer to true.
  this.showCountdown = true;
  if (this.settings.showCountdown === false) {
    this.showCountdown = false;
  }
};

/**
 * Logs console warnings when deprecated settings are used.
 */
DaiController.prototype.warnAboutDeprecatedSettings = function () {
  const deprecatedSettings = [
    // Currently no DAI plugin settings are deprecated.
  ];
  deprecatedSettings.forEach(setting => {
    if (this.settings[setting] !== undefined) {
      console.warn('WARNING: videojs.imaDai setting ' + setting + ' is deprecated');
    }
  });
};

/**
 * Return the settings object.
 *
 * @return {Object!} The settings object.
 */
DaiController.prototype.getSettings = function () {
  return this.settings;
};

/**
 * Return whether or not we're in a mobile environment.
 *
 * @return {boolean} True if running on mobile, false otherwise.
 */
DaiController.prototype.getIsMobile = function () {
  return this.isMobile;
};

/**
 * Return whether or not we're in an iOS environment.
 *
 * @return {boolean} True if running on iOS, false otherwise.
 */
DaiController.prototype.getIsIos = function () {
  return this.isIos;
};

/**
 * @return {Object!} The html5 player.
 */
DaiController.prototype.getStreamPlayer = function () {
  return this.playerWrapper.getStreamPlayer();
};

/**
 * @return {Object!} The video.js player.
 */
DaiController.prototype.getVjsPlayer = function () {
  return this.playerWrapper.getVjsPlayer();
};

/**
 * Requests the stream.
 */
DaiController.prototype.requestStream = function () {
  this.sdkImpl.requestStream();
};

/**
 * Add or modify a setting.
 *
 * @param {string} key Key to modify
 * @param {Object!} value Value to set at key.
*/
DaiController.prototype.setSetting = function (key, value) {
  this.settings[key] = value;
};

/**
 * Called when there is an error loading ads.
 *
 * @param {Object!} adErrorEvent The ad error event thrown by the IMA SDK.
 */
DaiController.prototype.onErrorLoadingAds = function (adErrorEvent) {
  this.playerWrapper.onAdError(adErrorEvent);
};

/**
 * Relays ad errors to the player wrapper.
 *
 * @param {Object!} adErrorEvent The ad error event thrown by the IMA SDK.
 */
DaiController.prototype.onAdError = function (adErrorEvent) {
  this.playerWrapper.onAdError(adErrorEvent);
};

/**
 * Signals player that an ad break has started.
 */
DaiController.prototype.onAdBreakStart = function () {
  this.inAdBreak = true;
  this.playerWrapper.onAdBreakStart();
};

/**
 * Signals player that an ad break has ended.
 */
DaiController.prototype.onAdBreakEnd = function () {
  this.inAdBreak = false;
  this.playerWrapper.onAdBreakEnd();
};

/**
 * Called when the player is disposed.
 */
DaiController.prototype.onPlayerDisposed = function () {
  this.contentAndAdsEndedListeners = [];
  this.sdkImpl.onPlayerDisposed();
};

/**
 * Returns if the stream is currently in an ad break.
 * @return {boolean} If the stream is currently in an ad break.
 */
DaiController.prototype.isInAdBreak = function () {
  return this.inAdBreak;
};

/**
 * Called on seek end to check for ad snapback.
 * @param {number} currentTime the current time of the stream.
 */
DaiController.prototype.onSeekEnd = function (currentTime) {
  this.sdkImpl.onSeekEnd(currentTime);
};

/**
 * Called when the player is ready.
 */
DaiController.prototype.onPlayerReady = function () {
  this.sdkImpl.onPlayerReady();
};

/**
 * Resets the state of the plugin.
 */
DaiController.prototype.reset = function () {
  this.sdkImpl.reset();
  this.playerWrapper.reset();
};

/**
 * Adds an EventListener to the StreamManager. For a list of available events,
 * see
 * https://developers.google.com/interactive-media-ads/docs/sdks/html5/dai/reference/js/StreamEvent
 * @param {google.ima.StreamEvent.Type!} event The AdEvent.Type for which to
 *     listen.
 * @param {callback!} callback The method to call when the event is fired.
 */
DaiController.prototype.addEventListener = function (event, callback) {
  this.sdkImpl.addEventListener(event, callback);
};

/**
 * Returns the instance of the StreamManager.
 * @return {google.ima.StreamManager!} The StreamManager being used by the
 * plugin.
 */
DaiController.prototype.getStreamManager = function () {
  return this.sdkImpl.getStreamManager();
};

/**
 * Returns the instance of the player id.
 * @return {string} The player id.
 */
DaiController.prototype.getPlayerId = function () {
  return this.playerWrapper.getPlayerId();
};

/**
 * @return {boolean} true if we expect that the stream will autoplay. false
 * otherwise.
 */
DaiController.prototype.streamWillAutoplay = function () {
  if (this.settings.streamWillAutoplay !== undefined) {
    return this.settings.streamWillAutoplay;
  } else {
    return !!this.playerWrapper.getPlayerOptions().autoplay;
  }
};

/**
 * Triggers an event on the VJS player
 * @param  {string} name The event name.
 * @param  {Object!} data The event data.
 */
DaiController.prototype.triggerPlayerEvent = function (name, data) {
  this.playerWrapper.triggerPlayerEvent(name, data);
};

/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * IMA SDK integration plugin for Video.js. For more information see
 * https://www.github.com/googleads/videojs-ima
 */

/**
 * Exposes the ImaPlugin to a publisher implementation.
 *
 * @param {Object} player Instance of the video.js player to which this plugin
 *     will be added.
 * @param {Object} options Options provided by the implementation.
 * @constructor
 * @struct
 * @final
 */
const ImaPlugin = function (player, options) {
  this.controller = new Controller(player, options);

  /**
   * Listener JSDoc for ESLint. This listener can be passed to
   * addContent(AndAds)EndedListener.
   * @callback listener
   */

  /**
   * Adds a listener that will be called when content and all ads have
   * finished playing.
   * @param {listener} listener The listener to be called when content and ads
   *     complete.
   */
  this.addContentAndAdsEndedListener = function (listener) {
    this.controller.addContentAndAdsEndedListener(listener);
  }.bind(this);

  /**
   * Adds a listener for the 'contentended' event of the video player. This
   * should be used instead of setting an 'contentended' listener directly to
   * ensure that the ima can do proper cleanup of the SDK before other event
   * listeners are called.
   * @param {listener} listener The listener to be called when content
   *     completes.
   */
  this.addContentEndedListener = function (listener) {
    this.controller.addContentEndedListener(listener);
  }.bind(this);

  /**
   * Callback JSDoc for ESLint. This callback can be passed to addEventListener.
   * @callback callback
   */

  /**
   * Ads an EventListener to the AdsManager. For a list of available events,
   * see
   * https://developers.google.com/interactive-media-ads/docs/sdks/html5/client-side/reference/js/google.ima.AdEvent#.Type
   * @param {google.ima.AdEvent.Type} event The AdEvent.Type for which to
   *     listen.
   * @param {callback} callback The method to call when the event is fired.
   */
  this.addEventListener = function (event, callback) {
    this.controller.addEventListener(event, callback);
  }.bind(this);

  /**
   * Changes the ad tag. You will need to call requestAds after this method
   * for the new ads to be requested.
   * @param {?string} adTag The ad tag to be requested the next time requestAds
   *     is called.
   */
  this.changeAdTag = function (adTag) {
    this.controller.changeAdTag(adTag);
  }.bind(this);

  /**
   * Returns the instance of the AdsManager.
   * @return {google.ima.AdsManager} The AdsManager being used by the plugin.
   */
  this.getAdsManager = function () {
    return this.controller.getAdsManager();
  }.bind(this);

  /**
   * Initializes the AdDisplayContainer. On mobile, this must be done as a
   * result of user action.
   */
  this.initializeAdDisplayContainer = function () {
    this.controller.initializeAdDisplayContainer();
  }.bind(this);

  /**
   * Pauses the ad.
   */
  this.pauseAd = function () {
    this.controller.pauseAd();
  }.bind(this);

  /**
   * Called by publishers in manual ad break playback mode to start an ad
   * break.
   */
  this.playAdBreak = function () {
    this.controller.playAdBreak();
  }.bind(this);

  /**
   * Creates the AdsRequest and request ads through the AdsLoader.
   */
  this.requestAds = function () {
    this.controller.requestAds();
  }.bind(this);

  /**
   * Resumes the ad.
   */
  this.resumeAd = function () {
    this.controller.resumeAd();
  }.bind(this);

  /**
   * Sets the listener to be called to trigger manual ad break playback.
   * @param {listener} listener The listener to be called to trigger manual ad
   *     break playback.
   */
  this.setAdBreakReadyListener = function (listener) {
    this.controller.setAdBreakReadyListener(listener);
  }.bind(this);

  /**
   * Sets the content of the video player. You should use this method instead
   * of setting the content src directly to ensure the proper ad tag is
   * requested when the video content is loaded.
   * @param {?string} contentSrc The URI for the content to be played. Leave
   *     blank to use the existing content.
   * @param {?string} adTag The ad tag to be requested when the content loads.
   *     Leave blank to use the existing ad tag.
   */
  this.setContentWithAdTag = function (contentSrc, adTag) {
    this.controller.setContentWithAdTag(contentSrc, adTag);
  }.bind(this);

  /**
   * Sets the content of the video player. You should use this method instead
   * of setting the content src directly to ensure the proper ads response is
   * used when the video content is loaded.
   * @param {?string} contentSrc The URI for the content to be played. Leave
   *     blank to use the existing content.
   * @param {?string} adsResponse The ads response to be requested when the
   *     content loads. Leave blank to use the existing ads response.
   */
  this.setContentWithAdsResponse = function (contentSrc, adsResponse) {
    this.controller.setContentWithAdsResponse(contentSrc, adsResponse);
  }.bind(this);

  /**
   * Sets the content of the video player. You should use this method instead
   * of setting the content src directly to ensure the proper ads request is
   * used when the video content is loaded.
   * @param {?string} contentSrc The URI for the content to be played. Leave
   *     blank to use the existing content.
   * @param {?Object} adsRequest The ads request to be requested when the
   *     content loads. Leave blank to use the existing ads request.
   */
  this.setContentWithAdsRequest = function (contentSrc, adsRequest) {
    this.controller.setContentWithAdsRequest(contentSrc, adsRequest);
  }.bind(this);

  /**
   * Changes the flag to show or hide the ad countdown timer.
   *
   * @param {boolean} showCountdownIn Show or hide the countdown timer.
   */
  this.setShowCountdown = function (showCountdownIn) {
    this.controller.setShowCountdown(showCountdownIn);
  }.bind(this);
};

/**
 * Exposes the ImaDaiPlugin to a publisher implementation.
 *
 * @param {Object} player Instance of the video.js player to which this plugin
 *     will be added.
 * @param {Object} options Options provided by the implementation.
 * @constructor
 * @struct
 * @final
 */
const ImaDaiPlugin = function (player, options) {
  this.controller = new DaiController(player, options);

  /**
   * Adds a listener that will be called when content and all ads in the
   * stream have finished playing. VOD stream only.
   * @param {listener} listener The listener to be called when content and ads
   *     complete.
   */
  this.streamEndedListener = function (listener) {
    this.controller.addStreamEndedListener(listener);
  }.bind(this);

  /**
   * Adds an EventListener to the StreamManager.
   * @param {google.ima.StreamEvent.Type} event The StreamEvent.Type for which
   * to listen.
   * @param {callback} callback The method to call when the event is fired.
   */
  this.addEventListener = function (event, callback) {
    this.controller.addEventListener(event, callback);
  }.bind(this);

  /**
   * Returns the instance of the StreamManager.
   * @return {google.ima.StreamManager} The StreamManager being used by the
   * plugin.
   */
  this.getStreamManager = function () {
    return this.controller.getStreamManager();
  }.bind(this);
};

/**
 * Initializes the plugin for client-side ads.
 * @param {Object} options Plugin option set on initiation.
 */
const init = function (options) {
  /* eslint no-invalid-this: 'off' */
  this.ima = new ImaPlugin(this, options);
};

/**
 * LiveStream class used for DAI live streams.
 */
class LiveStream {
  /**
   * LiveStream class constructor used for DAI live streams.
   * @param {string} streamFormat stream format, plugin currently supports only
   * 'hls' streams.
   * @param {string} assetKey live stream's asset key.
   */
  constructor(streamFormat, assetKey) {
    streamFormat = streamFormat.toLowerCase();
    if (streamFormat !== 'hls' && streamFormat !== 'dash') {
      window.console.error('VodStream error: incorrect streamFormat.');
      return;
    } else if (streamFormat === 'dash') {
      window.console.error('streamFormat error: DASH streams are not' + 'currently supported by this plugin.');
      return;
    } else if (typeof assetKey !== 'string') {
      window.console.error('assetKey error: value must be string.');
      return;
    }
    this.streamFormat = streamFormat;
    this.assetKey = assetKey;
  }
}

/**
 * VodStream class used for DAI VOD streams.
 */
class VodStream {
  /**
   * VodStream class constructor used for DAI VOD streams.
   * @param {string} streamFormat stream format, plugin currently supports only
   * 'hls' streams.
   * @param {string} cmsId VOD stream's CMS ID.
   * @param {string} videoId VOD stream's video ID.
   */
  constructor(streamFormat, cmsId, videoId) {
    streamFormat = streamFormat.toLowerCase();
    if (streamFormat !== 'hls' && streamFormat !== 'dash') {
      window.console.error('VodStream error: incorrect streamFormat.');
      return;
    } else if (streamFormat === 'dash') {
      window.console.error('streamFormat error: DASH streams are not' + 'currently supported by this plugin.');
      return;
    } else if (typeof cmsId !== 'string') {
      window.console.error('cmsId error: value must be string.');
      return;
    } else if (typeof videoId !== 'string') {
      window.console.error('videoId error: value must be string.');
      return;
    }

    this.streamFormat = streamFormat;
    this.cmsId = cmsId;
    this.videoId = videoId;
  }
}

/**
 * Initializes the plugin for DAI ads.
 * @param {Object} stream Accepts either an instance of the LiveStream or
 * VodStream classes.
 * @param {Object} options Plugin option set on initiation.
 */
const initDai = function (stream, options) {
  if (stream instanceof LiveStream) {
    options.streamType = 'live';
    options.assetKey = stream.assetKey;
  } else if (stream instanceof VodStream) {
    options.streamType = 'vod';
    options.cmsId = stream.cmsId;
    options.videoId = stream.videoId;
  } else {
    window.console.error('initDai() first parameter must be an instance of LiveStream or ' + 'VodStream.');
    return;
  }

  options.streamFormat = stream.streamFormat;
  /* eslint no-invalid-this: 'off' */
  this.imaDai = new ImaDaiPlugin(this, options);
};

const registerPlugin = videojs.registerPlugin || videojs.plugin;
registerPlugin('ima', init);
registerPlugin('imaDai', initDai);

exports['default'] = ImaPlugin;
exports.VodStream = VodStream;
exports.LiveStream = LiveStream;

Object.defineProperty(exports, '__esModule', { value: true });

})));

var player = videojs("content_video");

var options = {
  adTagUrl:
    "http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&cust_params=sample_ar%3Dpremidpostpod%26deployment%3Dgmf-js&cmsid=496&vid=short_onecue&correlator=",
};

player.ima(options);
